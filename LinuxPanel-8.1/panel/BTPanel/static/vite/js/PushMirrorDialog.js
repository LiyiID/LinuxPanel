import{_ as e}from"./index85.js?v=1714377894636";import{w as r,x as a}from"./element-lib.js?v=1714377894636";import{n as s}from"./main.js?v=1714377894636";import{_ as o}from"./index41.js?v=1714377894636";import{e as t,v as m,b as i,h as l,j as c}from"./vue-lib.js?v=1714377894636";import{H as n,_ as p}from"./docker.api.js?v=1714377894636";import{u as d}from"./docker.store.js?v=1714377894636";import{c as u}from"./check.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";const f=s(t({__name:"PushMirrorDialog",props:{compData:{default:()=>({})}},setup(e,{expose:r}){const a=e,{proxy:s}=c(),{getMList:o}=d(),t=m({tag:"",name:"",id:""}),f=i(!1),g=i(),j={tag:[{validator:(e,r,a)=>{""===r?a(new Error("请输入标签")):r.includes(":")?a():a(new Error("请输入正确的标签格式,如：image:v1"))},trigger:["blur"]}]},v=i([]);l((async()=>{var e;t.id=a.compData.row.id;try{const r=await n(),a=u(r.data,"array",[]);1===a.length&&"docker官方库"===r.data[0].name&&(s.$root.close(),s.$message.error("docker官方库不支持推送镜像")),a.forEach((e=>{"docker官方库"!==e.name&&v.value.push({key:e.name,title:e.name})})),t.name=null==(e=v.value[0])?void 0:e.key}catch(r){}}));const b=async()=>{try{if(""===t.name)return void s.$message.error("请选择仓库名");await s.$refs.cmdFormRef.validate((async e=>{if(e){const e=await p({data:JSON.stringify(t)});s.$emit("close"),e.status?(o(),s.$message.success(e.msg)):s.$message.error(e.msg)}}))}catch(e){}};return r({onConfirm:b}),{__sfc:!0,vm:s,getMList:o,props:a,cmdForm:t,more:f,cmdFormRef:g,cmdRules:j,options:v,changeType:e=>{t.name=e},onConfirm:b}}}),(function(){var s=this,t=s._self._c,m=s._self._setupProxy;return t("div",{staticClass:"flex flex-col p-16x lib-box"},[t(r,{ref:"cmdFormRef",staticClass:"relative w-full",attrs:{size:"small",model:m.cmdForm,rules:m.cmdRules,"label-position":"right"},nativeOn:{submit:function(e){e.preventDefault()}}},[t(a,{attrs:{prop:"name",label:"仓库名"}},[t(o,{staticClass:"w-[24rem]",attrs:{options:m.options,change:m.changeType},model:{value:m.cmdForm.name,callback:function(e){s.$set(m.cmdForm,"name",e)},expression:"cmdForm.name"}})],1),t(a,{attrs:{prop:"tag",label:"标签"}},[t(e,{staticClass:"w-[24rem]",attrs:{placeholder:"请输入标签,如：image:v1"},model:{value:m.cmdForm.tag,callback:function(e){s.$set(m.cmdForm,"tag",e)},expression:"cmdForm.tag"}})],1)],1)],1)}),[],!1,null,"99ae4e8a",null,null).exports;export{f as default};
