!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return r};var n,r={},i=Object.prototype,a=i.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(n){p=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof _?t:_,a=Object.create(i.prototype),o=new S(r||[]);return s(a,"_invoke",{value:D(e,n,o)}),a}function g(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var v="suspendedStart",m="suspendedYield",h="executing",d="completed",y={};function _(){}function x(){}function b(){}var w={};p(w,l,(function(){return this}));var k=Object.getPrototypeOf,I=k&&k(k(M([])));I&&I!==i&&a.call(I,l)&&(w=I);var j=b.prototype=_.prototype=Object.create(w);function C(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function E(t,n){function r(i,s,o,l){var u=g(t[i],t,s);if("throw"!==u.type){var c=u.arg,p=c.value;return p&&"object"==e(p)&&a.call(p,"__await")?n.resolve(p.__await).then((function(e){r("next",e,o,l)}),(function(e){r("throw",e,o,l)})):n.resolve(p).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,l)}))}l(u.arg)}var i;s(this,"_invoke",{value:function(e,t){function a(){return new n((function(n,i){r(e,t,n,i)}))}return i=i?i.then(a,a):a()}})}function D(e,t,r){var i=v;return function(a,s){if(i===h)throw new Error("Generator is already running");if(i===d){if("throw"===a)throw s;return{value:n,done:!0}}for(r.method=a,r.arg=s;;){var o=r.delegate;if(o){var l=O(o,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===v)throw i=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=h;var u=g(e,t,r);if("normal"===u.type){if(i=r.done?d:m,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=d,r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,i=e.iterator[r];if(i===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=n,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=g(i,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,y;var s=a.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,y):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function V(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function e(){for(;++i<t.length;)if(a.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=n,e.done=!0,e};return s.next=s}}throw new TypeError(e(t)+" is not iterable")}return x.prototype=b,s(j,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:x,configurable:!0}),x.displayName=p(b,c,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,p(e,c,"GeneratorFunction")),e.prototype=Object.create(j),e},r.awrap=function(e){return{__await:e}},C(E.prototype),p(E.prototype,u,(function(){return this})),r.AsyncIterator=E,r.async=function(e,t,n,i,a){void 0===a&&(a=Promise);var s=new E(f(e,t,n,i),a);return r.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(j),p(j,c,"Generator"),p(j,l,(function(){return this})),p(j,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=M,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(V),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return o.type="throw",o.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),u=a.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),V(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;V(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:M(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),y}},r}function n(e,t,n,r,i,a,s){try{var o=e[a](s),l=o.value}catch(u){return void n(u)}o.done?t(l):Promise.resolve(l).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var s=e.apply(t,r);function o(e){n(s,i,a,o,l,"next",e)}function l(e){n(s,i,a,o,l,"throw",e)}o(void 0)}))}}System.register(["./main-legacy.js?v=1714377894636","./index-legacy41.js?v=1714377894636","./index-legacy45.js?v=1714377894636","./vue-lib-legacy.js?v=1714377894636","./files-legacy.js?v=1714377894636","./check-legacy.js?v=1714377894636","./popup-legacy.js?v=1714377894636","./soft.store-legacy.js?v=1714377894636","./modulepreload-polyfill-legacy.js?v=1714377894636","./preload-helper-legacy.js?v=1714377894636","./request-lib-legacy.js?v=1714377894636","./__commonjsHelpers__-legacy.js?v=1714377894636","./locales-lib-legacy.js?v=1714377894636","./public-lib-legacy.js?v=1714377894636","./element-lib-legacy.js?v=1714377894636","./select-legacy.js?v=1714377894636","./form-item-legacy.js?v=1714377894636","./index-legacy85.js?v=1714377894636","./form-legacy.js?v=1714377894636","./index-legacy118.js?v=1714377894636","./index-legacy39.js?v=1714377894636","./empty-legacy.js?v=1714377894636","./index-legacy59.js?v=1714377894636","./radio-legacy.js?v=1714377894636","./index-legacy119.js?v=1714377894636","./progress-legacy.js?v=1714377894636","./soft.api-legacy.js?v=1714377894636"],(function(e,n){"use strict";var i,a,s,o,l,u,c,p,f,g,v,m,h,d,y,_,x,b,w,k,I,j,C,E,D,O,L,V,S,M,P,N,T,$,A;return{setters:[function(e){i=e.a1,a=e.f,s=e.a2,o=e.K,l=e.b4,u=e.b5,c=e.b6,p=e.b7,f=e.b8,g=e.b9,v=e.ba,m=e.n,h=e._,d=e.a,y=e.q,_=e.R},function(e){x=e._},function(e){b=e._},function(e){w=e.e,k=e.A,I=e.v,j=e.b,C=e.c,E=e.f,D=e.h,O=e.j},function(e){L=e.g},function(e){V=e.d,S=e.r},function(e){M=e.c,P=e.h,N=e.d,T=e.s,$=e.a},function(e){A=e.g},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var n=w({__name:"index",props:{compData:{default:function(){return{name:"",type:"",pluginInfo:{},softData:{name:"",endtime:0,setup:!1,pid:"",type:0}}}}},emits:["close","refresh"],setup:function(e,n){var m=n.emit,h=e,d=h.compData,y=d.softData,_=d.pluginInfo,x=O().proxy,b=k(i()).isInstall,w=A().refs.speedInstallView,F=I({isBeta:!!h.compData.isBeta&&h.compData.isBeta,title:"",dependnetFlag:!1,arrs:["apache","nginx","mysql"],speedConfig:{}}),U=I({name:h.compData.name,pluginInfo:{},info:{},newVersion:"",changeUpdateTime:"",PluginUpgradesData:[]}),B=I({imgArrValue:0,imgArr:[]}),G=j({selectValue:"",selectOption:[],compile:!1,phpVersion:"",size:!1}),q=C((function(){var e;return"/soft_ico/ico-"+(null!==(e=U.pluginInfo.name)&&void 0!==e&&e.includes("php-")?"php":U.pluginInfo.name)+".png"})),z=C((function(){var e;return U.changeUpdateTime?U.changeUpdateTime:U.PluginUpgradesData&&U.PluginUpgradesData.length&&null!==(e=U.PluginUpgradesData[0])&&void 0!==e&&e.update_time?a(U.PluginUpgradesData[0].update_time,"yyyy/MM/dd"):"暂无"})),H=j([[7,"免","border-[#E1E1E1] text-[#9a9a9a]"],[8,"专","border-[#F9EE9E] text-[#FFC82F]"],[12,"企","border-[#E8D6B3] text-[#A3782F]"]]),Q=function(){var e=r(t().mark((function e(n){var r,i,a,l,u;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,G.value.selectOption=[],e.t0=h.compData.type,e.next="i"===e.t0?5:"u"===e.t0?8:"r"===e.t0?10:12;break;case 5:return F.title="安装",h.compData.update&&(F.title="更新"),e.abrupt("break",13);case 8:return F.title="更新",e.abrupt("break",13);case 10:return F.title="修复",e.abrupt("break",13);case 12:F.title="安装";case 13:if(!n){e.next=18;break}U.pluginInfo=h.compData.pluginInfo,U.pluginInfo||(U.pluginInfo=h.compData.softData),e.next=24;break;case 18:return e.next=21,s({sName:U.name});case 21:r=e.sent,i=r.data,U.pluginInfo=i;case 24:return U.pluginInfo.introduction&&(a=U.pluginInfo.introduction.split(";"),B.imgArr=[],a.forEach((function(e,t){var n=e.split("|");B.imgArr.push({title:n[0],src:U.name.indexOf("php-")>-1?"https://www.bt.cn/Public/new/plugin/php/"+n[1]:"https://www.bt.cn/Public/new/plugin/"+U.name+"/"+n[1]})}))),e.next=27,R();case 27:F.dependnetFlag=!U.pluginInfo.dependnet.need&&!U.pluginInfo.dependnet.selected,o(U.pluginInfo.dependnet.need)&&(F.dependnetFlag=!U.pluginInfo.dependnet.need.length&&!U.pluginInfo.dependnet.selected.length),F.arrs.indexOf(U.name)>=0?(U.pluginInfo.versions.length>1?(U.pluginInfo.versions.forEach((function(e,t){G.value.selectOption.push({title:U.name+e.m_version,key:t})})),G.value.selectValue=null===(l=G.value.selectOption[0])||void 0===l?void 0:l.key):G.value.phpVersion=U.name+(U.name.indexOf("php-")>-1?"":U.pluginInfo.versions[0].m_version),G.value.compile=!0,G.value.size=!0):U.pluginInfo.versions.length>1?(G.value.selectOption=[],"修复"!==F.title&&(U.pluginInfo.versions.forEach((function(e,t){var n=1===e.beta?" Beta":" Stable";G.value.selectOption.push({title:e.m_version+"."+e.version+n,key:t})})),G.value.selectValue=null===(u=G.value.selectOption[0])||void 0===u?void 0:u.key,G.value.size=!0)):U.name.indexOf("php-")>=0?(G.value.selectOption=[],G.value.selectValue=U.name.split("php-")[1],U.pluginInfo.other_php.forEach((function(e,t){G.value.selectOption.push({id:e.id,title:e.name,key:e.version})})),G.value.compile=!0):U.pluginInfo.install_version=U.pluginInfo.versions[0],e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0);case 35:case"end":return e.stop()}}),e,null,[[0,32]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=r(t().mark((function e(){var n,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({plugin_name:U.name,show:1});case 3:n=e.sent,U.PluginUpgradesData=n,F.isBeta?(r=n[n.length-1],U.info=r.beta?r:{}):U.info=n[0],"i"===h.compData.type&&n.forEach((function(e,t){e.m_version+"."+e.version===U.pluginInfo.versions&&(U.info=e)})),U.pluginInfo.versions.length>1&&U.pluginInfo.version?U.pluginInfo.versions.some((function(e,t){var n=V(U.pluginInfo.m_version+"."+U.pluginInfo.version,e.m_version+"."+e.version);if(0==n&&(U.newVersion=e.m_version+"."+e.version),-1==n)return U.newVersion=e.m_version+"."+e.version,!0})):(i=U.pluginInfo.versions[0],U.newVersion=i.m_version+"."+i.version),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=r(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?J():K();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=r(t().mark((function e(){var n,r,i,a,s,l,p,f,g,v,m,d,y,_,k,I,j;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=U.pluginInfo,r=n.type,!b.value){e.next=6;break}return e.next=6,te();case 6:if(F.isBeta,!G||5!=r||"更新"===F.title){e.next=24;break}if(!(U.pluginInfo.versions.length>1)){e.next=17;break}return U.pluginInfo.install_version=o(n.versions)&&(null===(i=n.versions)||void 0===i?void 0:i.filter((function(e,t){return t===G.value.selectValue}))[0]),U.pluginInfo.install_type="1",e.next=15,Z(U.pluginInfo);case 15:e.next=22;break;case 17:return U.pluginInfo.install_version=null===(a=U.pluginInfo)||void 0===a?void 0:a.versions[0],U.pluginInfo.install_type="1",e.next=22,ee(U.pluginInfo);case 22:e.next=124;break;case 24:if(!(5===r&&U.pluginInfo.name.indexOf("php-")>-1)){e.next=29;break}X({title:"正在更新，请稍后...",status:!0,soft:{type:r}}),e.next=124;break;case 29:if(11!==r&&!h.compData.update){e.next=42;break}return e.prev=30,e.next=33,x.$confirm({title:"安全验证",width:"35rem",useHtml:!0,message:'<span class="text-danger">'.concat("宝塔"===U.pluginInfo.authorauthor?"更新过程可能会导致服务中断,是否继续升级？<br>建议您在服务器负载闲时进行软件更新。":"安装第三方插件存在一定的安全风险，是否继续安装？","</span>"),icon:"warning"});case 33:return e.next=36,W(n.name,n.tmp_path,n);case 36:return e.abrupt("return",!1);case 39:e.prev=39,e.t0=e.catch(30);case 42:if("修复"===F.title){e.next=47;break}n.install_version=o(n.versions)&&(null===(s=n.versions)||void 0===s?void 0:s.filter((function(e,t){return t===G.value.selectValue}))[0]),e.next=49;break;case 47:return e.abrupt("return",W(n.name,n.tmp_path,n));case 49:if(""==G.value.selectValue){e.next=76;break}if(n.tmp_path){e.next=71;break}return e.prev=52,l={sName:n.name,version:n.install_version.m_version,min_version:n.install_version.version},n.install_type&&(l.type=n.install_type),e.next=57,u(l);case 57:if(!(p=e.sent).msg||p.status){e.next=61;break}return e.abrupt("return",x.$message.error(p.msg));case 61:return e.next=64,W(p.name,p.tmp_path,p);case 64:e.next=69;break;case 66:e.prev=66,e.t1=e.catch(52);case 69:e.next=74;break;case 71:return e.next=74,W(n.name,n.tmp_path,n);case 74:e.next=124;break;case 76:if(!(n.version&&n.versions.length>1&&"修复"!==F.title)){e.next=114;break}f=0;case 79:if(!(f<n.versions.length)){e.next=112;break}if(g=n.versions[f],0!==(v=V(n.version,g.m_version+"."+g.version))){e.next=87;break}return x.$message.error("当前已是最新版本"),e.abrupt("break",112);case 87:if(!(v<0)){e.next=109;break}if(m={sName:n.name,version:n.versions[0].m_version,min_version:n.versions[0].version,upgrade:n.versions[0].m_version},"mysql"!==n.name){e.next=92;break}return e.next=92,x.$confirm({type:"calc",title:"更新MySQL【".concat(n.versions[0].m_version,".").concat(n.versions[0].version,"】"),width:"35rem",useHtml:!0,message:'<span class="text-[#000000] text-[1.2rem]">更新过程可能会导致服务中断,您真的现在就将【MySQL】更新到【'.concat(n.versions[0].m_version,".").concat(n.versions[0].version,"】吗？</span>\n                            <br>\n                            <span>更新数据库有风险，建议在更新前先备份您的数据库.如果您的是云服务器，强烈建议您在更新前做一个快照.建议您在服务器负载闲时进行软件更新.</span>")});case 92:return d=x.$load("正在获取插件安装信息，请稍候"),e.next=95,u(m);case 95:if(y=e.sent,w.value=!0,d.close(),x.$message.request(y),5!==r){e.next=106;break}return e.next=103,c();case 103:x.$emit("close"),e.next=108;break;case 106:return e.next=108,W(n.name,y.tmp_path,y);case 108:return e.abrupt("break",112);case 109:f++,e.next=79;break;case 112:e.next=124;break;case 114:if("更新"==F.title){e.next=121;break}return _={sName:n.name,version:n.versions[0].m_version,min_version:n.versions[0].version},e.next=118,u(_);case 118:return k=e.sent,e.abrupt("return",W(n.name,k.tmp_path,k));case 121:g=n.versions[0],I=!!g.beta&&g.beta,j=g.m_version+"."+g.version,n.version!=j&&I==n.is_beta&&X({title:"正在更新，请稍后...",status:!0,soft:{type:r}});case 124:case"end":return e.stop()}}),e,null,[[30,39],[52,66]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=r(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(U.pluginInfo);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=r(t().mark((function e(n,i,a){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X({title:"正在安装【"+a.title+"】，可能需要几分钟时间，请耐心等候!",status:!0},r(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({plugin_name:n,tmp_path:i,install_opt:a.install_opt});case 2:r=e.sent,ie(),w.value=!1,x.$message.request(r);case 6:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),X=function(e,t){return e.soft||(e.soft={type:10}),5===e.soft.type?(t&&t(),!1):10!==e.soft.type||e.status?(F.speedConfig=e,F.speedConfig.msg="正在下载中...",T(F.speedConfig),m("close"),void(t&&t())):(t&&t(),!1)},Z=function(){var e=r(t().mark((function e(n){var r,i,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.install_version,i=r.m_version,a=r.version,S(n.title,"-"+i,""),10!==n.type){e.next=11;break}return e.next=7,x.$confirm({title:"信息",width:"35rem",message:"您真的要安装".concat(5!==n.type?n.title:n.title+"-"+i,"吗？")});case 7:return e.next=9,ee(n);case 9:case 16:e.next=24;break;case 11:if(!(5===n.type&&n.versions.length<2)){e.next=18;break}return h.compData.type=n.install_opt,h.compData.name=n.name,e.next=16,Q(!1);case 18:return e.next=21,ee(n);case 21:if(5===n.type){e.next=24;break}return e.next=24,ne({pluginName:n.name,name:n.title,version:i,minVersion:a});case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=r(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=1,r=x.$load("正在获取插件安装信息，请稍候"),10!==n.type||0!==n.endtime){e.next=6;break}return e.next=6,p({pid:n.id,cycle:999,type:0});case 6:return e.next=8,u({sName:n.name,version:n.install_version.m_version,min_version:n.install_version.version,type:n.install_type?n.install_type:""});case 8:if(i=e.sent,r.close(),i.status){e.next=12;break}return e.abrupt("return",x.$message.error(i.msg));case 12:if(!i.install_opt){e.next=17;break}return h.compData.type=i.install_opt,h.compData.name=i.name,e.abrupt("return",Q(!1));case 17:return i.size,e.next=20,f();case 20:if(!(e.sent.data>0&&5===n.type)){e.next=26;break}if(x.$emit("close"),c(),i.status){e.next=26;break}return e.abrupt("return",x.$message.error(i.msg));case 26:i.msg.indexOf("依赖以下软件")>-1&&(h.compData.type=i.install_opt,h.compData.name=i.name,G.value.size=!0,Q(!1)),e.next=32;break;case 29:e.prev=29,e.t0=e.catch(1);case 32:case"end":return e.stop()}}),e,null,[[1,29]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=r(t().mark((function e(){var n,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=["openlitespeed","nginx","apache"],e.next=4,L();case 4:r=e.sent,i=/\[(.*)\]/,r.task&&r.task.forEach((function(e,t){var r,a,s=e.name.match(i),o=null!==(r=null===(a=s[1])||void 0===a?void 0:a.split("-"))&&void 0!==r?r:[];return n.indexOf(U.name)>-1&&n.indexOf(o[0])>-1?x.$message.error("存在同类型的环境正在安装，请删除重试！"):s[1]===U.name||o[0]===U.name?x.$message.error("当前插件正在安装，请稍后重试！"):void 0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=r(t().mark((function e(n,r){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F.speedConfig=n,e.next=3,$(F.speedConfig);case 3:if(r){e.next=7;break}e.next=16;break;case 7:return e.prev=7,e.next=10,g({plugin_name:n.pluginName});case 10:e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7);case 16:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t,n){return e.apply(this,arguments)}}(),re=A().getSoftTableList,ie=function(){window.location.href.indexOf("soft")>-1&&re(),y&&y.callBack&&y.callBack(),y||(window.location.reload(),localStorage.clear(),sessionStorage.clear())};return E((function(){return h.compData}),(function(e){var t;F.isBeta=!!h.compData.isBeta&&h.compData.isBeta,U.name=h.compData.name,B.imgArr=[],G.value={selectValue:"",selectOption:[],compile:!1,phpVersion:"",size:!1},U.info={},h.compData.name&&10!=(null===(t=h.compData.pluginInfo)||void 0===t?void 0:t.type)&&Q(!0)}),{deep:!0,immediate:!0}),D((function(){})),{__sfc:!0,props:h,softData:y,pluginInfo:_,emits:m,vm:x,isInstall:b,speedInstallView:w,state:F,pluginMsg:U,pluginShow:B,config:G,pluginImgSrc:q,pluginUpdateTime:z,tagList:H,installPlugin:Q,handleVersionChange:function(e){G.value.selectValue=e,U.PluginUpgradesData.forEach((function(t,n){n==Number(e)&&(U.changeUpdateTime=a(t.update_time,"yyyy/MM/dd"))}))},showPluginInfo:R,isEmptyObject:function(e){return 0===Object.keys(e).length},installEvent:Y,installPluginEvent:J,installEnviromentEvent:K,inputPackage:W,showSpeedWindow:X,installSoft:Z,getInstallPlugin:ee,getRealtimeTasks:te,monitorSoftDownloadSpeed:ne,getSoftTableList:re,closeInstall:ie,compileInstallDialog:M,historyVersionDialog:P}}}),F=function(){var e,t,n=this,r=n._self._c,i=n._self._setupProxy;return r("div",{staticClass:"install-plugin"},[r("div",{staticClass:"install-plugin-header"},[r("div",{staticClass:"install-plugin-header-left"},[r(h,{staticClass:"h-[4rem] mt-[0.6rem]",attrs:{src:i.pluginImgSrc}}),r("div",{staticClass:"install-plugin-header-left-title"},[r("div",{staticClass:"flex items-center text-[#333]"},[r("span",{staticClass:"text-[2rem] font-bold"},[n._v(n._s(i.pluginMsg.pluginInfo.title))]),i.config.compile?n._e():r("div",{staticClass:"install-plugin-header-left-title-tag"},[n._l(i.tagList,(function(e,t){return[!e||"boolean"!=typeof e[0]&&e[0]!==i.pluginMsg.pluginInfo.type?n._e():r("div",{key:t,staticClass:"install-plugin-header-left-title-tag-item",class:e[2]+" border-[0.1rem]"},[e&&"boolean"==typeof e[0]?r("i",{staticClass:"plugin_official_icon"}):n._e(),r("span",[n._v(n._s(e[1]))])])]}))],2)]),5!==i.pluginMsg.pluginInfo.type?r("div",{staticClass:"mt-[1rem]"},[r("span",{staticClass:"font-normal"},[n._v("更新时间：")]),r("span",{staticClass:"font-normal"},[n._v(" "+n._s(i.pluginUpdateTime)+" ")]),"更新"!==i.state.title?r(b):n._e(),"更新"!==i.state.title?r(d,{staticClass:"font-normal",on:{click:function(e){return i.historyVersionDialog({title:i.pluginMsg.pluginInfo.title,data:i.pluginMsg.PluginUpgradesData})}}},[n._v(" 更新日志 ")]):n._e()],1):n._e(),r("div",{staticClass:"flex items-center mt-[1rem]"},["更新"===i.state.title?r("span",{staticClass:"font-normal"},[n._v(" 最新版本： "),r("span",[n._v(" "+n._s(i.state.isBeta?"测试版"+i.pluginMsg.info.m_version+"."+i.pluginMsg.info.version:i.pluginMsg.newVersion)+" ")])]):n._e(),i.config&&!i.config.selectOption.length?r("span",{staticClass:"ml-[.5rem] font-normal"},[n._v("当前版本："+n._s((null===(e=i.pluginMsg.pluginInfo.versions[0])||void 0===e?void 0:e.m_version)+"."+(null===(t=i.pluginMsg.pluginInfo.versions[0])||void 0===t?void 0:t.version)))]):n._e()])])],1),r("div",{staticClass:"flex items-center"},[i.config&&(i.config.selectOption.length||i.config.phpVersion)&&"安装"==i.state.title?r("div",[i.config.phpVersion?r("span",[n._v(n._s(i.config.phpVersion))]):[r(x,{staticClass:"mr-[1rem] w-[11.6rem]",attrs:{options:i.config.selectOption,change:i.handleVersionChange},model:{value:i.config.selectValue,callback:function(e){n.$set(i.config,"selectValue",e)},expression:"config.selectValue"}})]],2):n._e(),i.config&&i.config.compile&&"安装"==i.state.title?r(y,{attrs:{type:"default",disabled:i.pluginMsg.pluginInfo.dependnet.length>0},on:{click:function(e){i.compileInstallDialog(i.installEvent,i.isEmptyObject(i.pluginMsg.pluginInfo.dependnet)||i.state.dependnetFlag)}}},[n._v(" 编译安装 ")]):n._e(),r(y,{on:{click:function(e){i.installEvent(i.isEmptyObject(i.pluginMsg.pluginInfo.dependnet)||i.state.dependnetFlag)}}},[r("span",{staticClass:"flex items-center text-[1.4rem] font-normal"},["更新"===i.state.title?r("span",{staticClass:"update_plugin_button_icon"}):n._e(),n._v(" "+n._s(i.config&&5==i.pluginMsg.pluginInfo.type&&"更新"!=i.state.title?"极速安装":"立即"+i.state.title)+" ")])])],1)]),r("hr",{staticClass:"my-[3rem] border-[#eee]"}),i.pluginShow.imgArr.length?r("div",{staticClass:"install-plugin-introduce"},[r("div",{staticClass:"install-plugin-introduce-left"},[r("ul",{staticClass:"install-plugin-introduce-left-tab"},n._l(i.pluginShow.imgArr,(function(e,t){return r("li",{key:t,class:t===i.pluginShow.imgArrValue?"on":"",on:{click:function(e){i.pluginShow.imgArrValue=t}}},[n._v(" "+n._s(e.title)+" ")])})),0)]),r(_,{staticClass:"w-[40rem] max-h-[100%]",attrs:{src:i.pluginShow.imgArr[i.pluginShow.imgArrValue].src}})],1):n._e(),r("div",{staticClass:"install-plugin-detail"},["更新"!==i.state.title?[r("div",{staticClass:"install-plugin-detail-title"},[n._v("插件说明：")]),r("div",{staticClass:"install-plugin-detail-content",domProps:{innerHTML:n._s(i.pluginMsg.pluginInfo.ps)}})]:[r("div",{staticClass:"install-plugin-detail-title"},[n._v("更新日志：")]),r("div",{staticClass:"install-plugin-detail-content"},[n._v(" "+n._s(i.pluginMsg.pluginInfo.update_msg?i.pluginMsg.pluginInfo.update_msg:"暂无内容")+" ")])]],2),r("ul",{staticClass:"install-plugin-helper"},[i.config?n._e():r("li",[r("span",[n._v(" 插件来源"+n._s(i.pluginMsg.pluginInfo.author)+"，网址 "),r(d,{staticClass:"decoration-revert",attrs:{href:i.pluginMsg.pluginInfo.home,target:"_blank"}},[n._v(" "+n._s(i.pluginMsg.pluginInfo.home)+" ")])],1)]),n._m(0),"{}"!==JSON.stringify(i.pluginMsg.pluginInfo.dependnet)?r("li",[r("span",{staticClass:"red"},[n._v("请手动安装插件依赖环境，如果未安装，将无法正常使用该插件")])]):n._e(),i.pluginMsg.pluginInfo.update&&"mysql"===i.pluginMsg.pluginInfo.name?r("li",[r("span",{staticClass:"redr"},[n._v("更新数据库有风险,建议在更新前,先备份您的数据库！")])]):n._e(),!i.pluginMsg.pluginInfo.update?r("li",[r("span",[n._v("安装过程可能需要几分钟时间，请耐心等候!")])]):[n._m(1),n._m(2)]],2)])};e("default",m(n,F,[function(){var e=this,t=e._self._c;return e._self._setupProxy,t("li",[t("span",[e._v("如果已存在此插件，文件将被替换！")])])},function(){var e=this,t=e._self._c;return e._self._setupProxy,t("li",[t("span",{staticClass:"red"},[e._v("更新过程可能会导致服务中断,请须知")])])},function(){var e=this,t=e._self._c;return e._self._setupProxy,t("li",[t("span",{staticClass:"red"},[e._v("建议您在服务器负载闲时进行软件更新")])])}],!1,null,"a3206eb1",null,null).exports)}}}))}();
