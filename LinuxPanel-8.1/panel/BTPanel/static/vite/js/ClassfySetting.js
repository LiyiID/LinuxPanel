import{_ as a}from"./index85.js?v=1714377894636";import{L as s,w as t,x as e}from"./element-lib.js?v=1714377894636";import{a as o,n as l,q as r,b as i}from"./main.js?v=1714377894636";import{_ as p}from"./index39.js?v=1714377894636";import{_ as n}from"./index59.js?v=1714377894636";import"./index45.js?v=1714377894636";import{e as m,b as c,v as d,H as u,h as f,j as b}from"./vue-lib.js?v=1714377894636";import{g as v,x as y,y as j,z as x}from"./ftp.store.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";const g=l(m({__name:"ClassfySetting",props:{compData:{default:{}}},setup(a){const t=a,{proxy:e}=b(),{refs:{ftpTableData:l},getFtpTypeList:r}=v(),i=c(!1),p=d({ps:"",id:0}),n=c(),m=c(!1),g=c(!1),_=c([{label:"分类名称",prop:"ps"},{label:"操作",align:"right",render:a=>a.id<=0?"不可操作":u("div",[u(o,{on:{click:()=>{p.id=a.id,p.ps=a.ps,m.value=!0}}},["编辑"]),u(s,{attrs:{direction:"vertical"}}),u(o,{on:{click:async()=>{try{await e.$confirm({title:"提示",icon:"warning",message:"确认删除该分类吗？该分类下的计划任务将会被移动至默认分类下，是否继续？"});const s=await y({id:a.id});e.$message.request(s),h(),t.compData.refreshEvent()}catch(s){}}}},["删除"])])}]),C=c([]),h=async()=>{try{g.value=!0,await r(),C.value=l.value.typeList,g.value=!1}catch(a){}finally{g.value=!1}},F=()=>{p.id=0,p.ps=""};return f((()=>{h()})),{__sfc:!0,props:t,vm:e,ftpTableData:l,getFtpTypeList:r,formDisabled:i,classForm:p,crontabClassForm:n,addClassPopup:m,tableLoading:g,tableColumns:_,tableData:C,getClassfyList:h,addClassEvent:async()=>{let a,s;try{a=e.$load(e.$t("正在操作分类，请稍后...")),s=p.id?await x({...p}):await j({ps:p.ps}),F(),e.$message.request(s),m.value=!1,h()}catch(t){}finally{a&&a.close()}},onCancel:F}}}),(function(){var s=this,o=s._self._c,l=s._self._setupProxy;return o("div",{staticClass:"p-20x"},[o(n,{scopedSlots:s._u([{key:"header-left",fn:function(){return[o(r,{on:{click:function(a){l.addClassPopup=!0}}},[s._v("添加分类")])]},proxy:!0},{key:"content",fn:function(){return[o(p,{directives:[{name:"loading",rawName:"v-loading",value:l.tableLoading,expression:"tableLoading"}],attrs:{"max-height":400,column:l.tableColumns,data:l.tableData}})]},proxy:!0},{key:"popup",fn:function(){return[o(i,{attrs:{visible:l.addClassPopup,area:40,showFooter:"",title:"添加分类"},on:{"update:visible":function(a){l.addClassPopup=a},cancel:l.onCancel,confirm:l.addClassEvent}},[o("div",{staticClass:"p-20x"},[o(t,{ref:"crontabClassForm",attrs:{model:l.classForm,disabled:l.formDisabled}},[o(e,{attrs:{label:"分类名称",prop:"ps"}},[o(a,{attrs:{placeholder:"请输入分类名称"},model:{value:l.classForm.ps,callback:function(a){s.$set(l.classForm,"ps",a)},expression:"classForm.ps"}})],1)],1)],1)])]},proxy:!0}])})],1)}),[],!1,null,"3f2e9a7a",null,null).exports;export{g as default};
