import{_ as e}from"./index39.js?v=1714377894636";import{da as t,aS as a,db as r,dc as s,n as i,q as o}from"./main.js?v=1714377894636";import{_ as l}from"./index85.js?v=1714377894636";import{_ as n}from"./index59.js?v=1714377894636";import{e as p,b as c,v as m,h as d,j as u}from"./vue-lib.js?v=1714377894636";import{l as h}from"./firewall.table.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./index46.js?v=1714377894636";import"./index.vue_vue_type_style_index_0_lang.js?v=1714377894636";import"./firewall.popup.js?v=1714377894636";import"./check.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./index45.js?v=1714377894636";const f=i(p({__name:"dirMonitor",setup(e){const{proxy:i}=u(),o=c(!1),l=c([]),n=m({list:[],limit:999,num:0}),p=m({path:"",type:"dir"}),f=async()=>{let e=[];try{const{data:a}=await t();a.scan_dir.forEach((t=>{e.push({path:t})})),l.value=e}catch(a){}},_=async e=>{let t;try{await i.$confirm({icon:"warning",title:"删除检测目录",width:"34rem",message:"删除检测目录【"+e.path+"】，是否继续操作？"}),t=i.$load("正在删除检测目录，请稍后...");const a=await r({path:JSON.stringify([e.path])});await i.$message.request(a),f()}catch(a){}finally{t&&t.close()}},j=h({deleteRow:_});return d((()=>{f()})),{__sfc:!0,vm:i,loading:o,getData:l,tableSelect:n,ruleForm:p,getDetecPathData:f,onPathChange:()=>{a({type:"dir",path:"/",change(e,t){e=e.replace(/\/\//g,"/"),p.path=e,p.type=t}})},clearSpace:e=>{p[e]=p[e].replace(/\s+/g,"")},deleteRow:_,addDetecList:async()=>{let e=null;try{if(!p.path)return void i.$message.error("请填写检测目录");e=i.$load("正在添加检测目录，请稍后...");const t=await s({dir:p.path});await i.$message.request(t),f(),p.path=""}catch(t){}finally{e&&e.close()}},tableColumn:j}}}),(function(){var t=this,a=t._self._c,r=t._self._setupProxy;return a("div",{staticClass:"p-[2rem]"},[a(n,{scopedSlots:t._u([{key:"header-left",fn:function(){return[a(l,{attrs:{name:"path",placeholder:"选择目录",iconType:"folder",width:"32rem"},on:{folder:function(e){return r.onPathChange()},"&change":function(e){return r.clearSpace("path")}},model:{value:r.ruleForm.path,callback:function(e){t.$set(r.ruleForm,"path",e)},expression:"ruleForm.path"}}),a(o,{staticClass:"!ml-8x",on:{click:r.addDetecList}},[t._v("添加")])]},proxy:!0},{key:"content",fn:function(){return[a(e,{directives:[{name:"loading",rawName:"v-loading",value:r.loading,expression:"loading"}],ref:"detecList",attrs:{column:r.tableColumn,data:r.getData,description:"检测列表为空","element-loading-text":"正在加载检测列表，请稍后..."}})]},proxy:!0}])})],1)}),[],!1,null,null,null,null).exports;export{f as default};
