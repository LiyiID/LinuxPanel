!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return a};var n,a={},r=Object.prototype,i=r.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function p(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(n){p=function(e,t,n){return e[t]=n}}function d(e,t,n,a){var r=t&&t.prototype instanceof b?t:b,i=Object.create(r.prototype),o=new M(a||[]);return s(i,"_invoke",{value:T(e,n,o)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=d;var h="suspendedStart",v="suspendedYield",m="executing",g="completed",y={};function b(){}function x(){}function w(){}var _={};p(_,c,(function(){return this}));var k=Object.getPrototypeOf,S=k&&k(k(N([])));S&&S!==r&&i.call(S,c)&&(_=S);var C=w.prototype=b.prototype=Object.create(_);function P(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function j(t,n){function a(r,s,o,c){var l=f(t[r],t,s);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==e(p)&&i.call(p,"__await")?n.resolve(p.__await).then((function(e){a("next",e,o,c)}),(function(e){a("throw",e,o,c)})):n.resolve(p).then((function(e){u.value=e,o(u)}),(function(e){return a("throw",e,o,c)}))}c(l.arg)}var r;s(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,r){a(e,t,n,r)}))}return r=r?r.then(i,i):i()}})}function T(e,t,a){var r=h;return function(i,s){if(r===m)throw new Error("Generator is already running");if(r===g){if("throw"===i)throw s;return{value:n,done:!0}}for(a.method=i,a.arg=s;;){var o=a.delegate;if(o){var c=D(o,a);if(c){if(c===y)continue;return c}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===h)throw r=g,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=m;var l=f(e,t,a);if("normal"===l.type){if(r=a.done?g:v,l.arg===y)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(r=g,a.method="throw",a.arg=l.arg)}}}function D(e,t){var a=t.method,r=e.iterator[a];if(r===n)return t.delegate=null,"throw"===a&&e.iterator.return&&(t.method="return",t.arg=n,D(e,t),"throw"===t.method)||"return"!==a&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+a+"' method")),y;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,y;var s=i.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,y):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function N(t){if(t||""===t){var a=t[c];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return s.next=s}}throw new TypeError(e(t)+" is not iterable")}return x.prototype=w,s(C,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:x,configurable:!0}),x.displayName=p(w,u,"GeneratorFunction"),a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,u,"GeneratorFunction")),e.prototype=Object.create(C),e},a.awrap=function(e){return{__await:e}},P(j.prototype),p(j.prototype,l,(function(){return this})),a.AsyncIterator=j,a.async=function(e,t,n,r,i){void 0===i&&(i=Promise);var s=new j(d(e,t,n,r),i);return a.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},P(C),p(C,u,"Generator"),p(C,c,(function(){return this})),p(C,"toString",(function(){return"[object Generator]"})),a.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},a.values=N,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(a,r){return o.type="throw",o.arg=e,t.next=a,r&&(t.method="next",t.arg=n),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return a("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),l=i.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return a(s.catchLoc,!0);if(this.prev<s.finallyLoc)return a(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return a(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return a(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&i.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,y):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:N(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=n),y}},a}function n(e,t,n,a,r,i,s){try{var o=e[i](s),c=o.value}catch(l){return void n(l)}o.done?t(c):Promise.resolve(c).then(a,r)}function a(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,c,"next",e)}function c(e){n(s,r,i,o,c,"throw",e)}o(void 0)}))}}System.register(["./index-legacy51.js?v=1714377894636","./main-legacy.js?v=1714377894636","./element-lib-legacy.js?v=1714377894636","./index-legacy52.js?v=1714377894636","./index-legacy53.js?v=1714377894636","./index-legacy39.js?v=1714377894636","./index-legacy54.js?v=1714377894636","./index-legacy55.js?v=1714377894636","./index-legacy56.js?v=1714377894636","./index-legacy57.js?v=1714377894636","./select-legacy.js?v=1714377894636","./index-legacy43.js?v=1714377894636","./index-legacy58.js?v=1714377894636","./index-legacy59.js?v=1714377894636","./index-legacy45.js?v=1714377894636","./index-legacy60.js?v=1714377894636","./preload-helper-legacy.js?v=1714377894636","./vue-lib-legacy.js?v=1714377894636","./check-legacy.js?v=1714377894636","./site.popup-legacy.js?v=1714377894636","./confirm-legacy.js?v=1714377894636","./locales-lib-legacy.js?v=1714377894636","./software-legacy2.js?v=1714377894636","./site.store-legacy.js?v=1714377894636","./index-legacy61.js?v=1714377894636","./modulepreload-polyfill-legacy.js?v=1714377894636","./request-lib-legacy.js?v=1714377894636","./__commonjsHelpers__-legacy.js?v=1714377894636","./public-lib-legacy.js?v=1714377894636","./progress-legacy.js?v=1714377894636","./empty-legacy.js?v=1714377894636","./dropdown-legacy.js?v=1714377894636","./autocomplete-legacy.js?v=1714377894636","./index-legacy38.js?v=1714377894636","./element-ui.common-legacy.js?v=1714377894636","./date-util-legacy.js?v=1714377894636","./vdom-legacy.js?v=1714377894636","./index-legacy62.js?v=1714377894636","./cascader-panel-legacy.js?v=1714377894636","./config-legacy.js?v=1714377894636"],(function(e,n){"use strict";var r,i,s,o,c,l,u,p,d,f,h,v,m,g,y,b,x,w,_,k,S,C,P,j,T,D,L,E,M,N,B,O,F,I,$,q,G,H,R,A,V,z,J,W,U,Q,Y,K,X,Z,ee,te,ne,ae,re,ie,se,oe,ce,le,ue,pe,de,fe,he;return{setters:[function(e){r=e._},function(e){i=e.g,s=e.c,o=e.s,c=e.e,l=e.n,u=e.a,p=e.q,d=e.b,f=e.D,h=e.E},function(e){v=e.L,m=e.q,g=e.s,y=e.j},function(e){b=e._},function(e){x=e._},function(e){w=e._},function(e){_=e._},function(e){k=e._},function(e){S=e._},function(e){C=e._},null,function(e){P=e._},function(e){j=e._},function(e){T=e._},null,function(e){D=e._},function(e){L=e._},function(e){E=e.e,M=e.b,N=e.v,B=e.f,O=e.h,F=e.l,I=e.j},function(e){$=e.c},function(e){q=e.V,G=e.a,H=e.A,R=e.r,A=e.s,V=e.u,z=e.c,J=e.N,W=e.b,U=e.d,Q=e.e,Y=e.f,K=e.g,X=e.h,Z=e.i,ee=e.j},function(e){te=e.a},null,function(e){ne=e.o},function(e){ae=e.g,re=e.s,ie=e.a,se=e.b,oe=e.c,ce=e.d,le=e.e,ue=e.f,pe=e.h,de=e.r,fe=e.i},function(e){he=e.o},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var ve=[{label:"修改默认页面",name:"setDefaultPage"},{label:"默认站点",name:"defaultSite"},{label:"PHP命令行版本",name:"phpCommandLine"},{label:"HTTPS防窜站",name:"httpsOfficersSite"},{label:"TLS设置",name:"tlsSetting"},{label:"全局设置",name:"globalSetting"}],me=E({__name:"index",setup:function(e){var r,l=I().proxy,u=ae(),p=u.refs,d=p.phpModulesTableParams,f=p.scanData,h=u.getPhpModulesList,v=u.getTypeList,m=u.getScanData,g=i(),y=g.refs,b=y.authType,x=y.pageSerachVal,w=y.webServerType,_=g.getPublicConfigInfo,k=M(!1),S=M(JSON.parse(null!==(r=sessionStorage.getItem("BT-CONFIG"))&&void 0!==r?r:"{}").recycle_bin),C=M(),P=M(!1),j=M(!1),T=M(!1),D=M(!1),E=N({isRecurrence:!1,describe:{title:"",th:"",message:"",propsValue:""}}),me=N({addend1:0,addend2:0,sum:void 0,steps:1,isFtp:!1,isDatabase:!1,isSite:!1,data:{},isMult:!1}),ge=N({title:"网站监控报表-功能介绍",imgSrc:"/soft_ico/ico-total.png",ps:"快速浏览不同时间段的流量数据，发现高峰和趋势，助您迅速优化网站！",source:142,desc:["分析近期攻击","快速分析流量状况","多时段切换","排查趋势变化"],tabImgs:["https://www.bt.cn/Public/new/plugin/total/siteTraffic/traffic.png"]}),ye=M([{name:"漏洞扫描",callback:function(){q()}},{name:"网站安全扫描",callback:function(){Oe(d.value.list[0],"siteSecurity")}},{name:"网站拨测告警",callback:function(){Oe(d.value.list[0],"siteAlarm")}},{name:"日志安全分析",callback:function(){Oe(d.value.list[0],"siteLog","safe")}},{name:"网站防篡改",callback:function(){Oe(d.value.list[0],"antiTamper")}},{name:"网站容量限制",callback:function(){Oe(d.value.list[0],"siteDirectory","flowQuota")}}]);B((function(){return x.value}),(function(e){d.value.search=x.value}));var be=[{content:l.$t("SitePhpModel.AddSite"),active:!0,event:function(){G()}},{content:"高级设置",dropdown:!0,dropdownClass:"bg-white",splitButton:!0,settingList:ve,event:function(e){H(e)}}],xe=M(),we=M([{label:"启动站点",value:"startSite",diyBatch:function(){var e;he({title:"批量启动选中的站点后，站点将恢复正常访问，是否继续操作？",dataList:xe.value,titleType:"批量启动选中的站点",requestFun:(e=a(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re({id:n.id,name:n.name});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),isRecurrence:!0,tableColumn:[{prop:"name",label:"网站名"},{prop:"result",label:"状态"}],callback:function(){h()}})}},{label:"停用站点",value:"stopSite",diyBatch:function(){var e;he({title:"批量停用选中的站点后，站点将无法正常访问，用户访问会显示当前网站停用后的提示页，是否继续操作？",dataList:xe.value,titleType:"批量停用选中的站点",diyRes:!0,requestFun:(e=a(t().mark((function e(n){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i=l.$load("正在停用站点，请稍后..."),xe.value.forEach(function(){var e=a(t().mark((function e(n,s){var o,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie({id:n.id,name:n.name});case 2:if(o=e.sent,r.push({name:n.name,result:o.status,msg:o.msg}),s!==xe.value.length-1){e.next=11;break}return i.close(),e.next=8,R({resultData:r,resultTitle:"停止网站"});case 8:h(),c=xe.value.map((function(e){return e.id})),te({confirm:{title:"提示",message:"是否将批量设置停止的站点加入停止分类？",icon:"warning"},loading:"正在设置分类，请稍后...",request:function(){var e=a(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe({site_ids:JSON.stringify(c),id:-2});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),complete:h});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),isRecurrence:!1,tableColumn:[{prop:"name",label:"网站名"},{prop:"result",label:"状态"}],callback:function(){h()}})}},{label:"备份站点",value:"backSite",diyBatch:function(){var e;he({title:"批量备份选中的站点，可能耗费时间较长，是否继续操作？",dataList:xe.value,titleType:"批量备份选中的站点",requestFun:(e=a(t().mark((function e(n){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se({id:n.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),isRecurrence:!0,tableColumn:[{prop:"name",label:"网站名"},{prop:"result",label:"状态"}],callback:function(){h()}})}},{label:"设置到期时间",value:"setTimeSite",isRefBatch:!0},{label:"设置PHP版本",value:"setPhpSite",isRefBatch:!0},{label:"部署证书",value:"setCertificates",isRefBatch:!0},{label:"部署伪静态",value:"setPseudoStatic",isRefBatch:!0},{label:"设置分类",value:"settingClass",isRefBatch:!0},{label:"删除站点",isRefBatch:!0,value:"deleteSite"}]),_e=function(){var e=a(t().mark((function e(n){var a,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.column,a=n.prop,r=n.order,!a){e.next=11;break}if(i=a,r){e.next=8;break}return i="",e.next=8,ce();case 8:d.value.orderParam.orderStatus="ascending"===r?" asc":" desc",d.value.orderParam.orderName=i,h();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=M(0),Se=function(){var e=a(t().mark((function e(){var n,a,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(me.sum!==me.addend1+me.addend2){e.next=28;break}if(!(me.isFtp||me.isDatabase||me.isSite)){e.next=20;break}return e.prev=2,me.data.hasOwnProperty("id")?n=[me.data.id]:(n=null===(a=me.data)||void 0===a?void 0:a.map((function(e){return e.id})),me.isMult=!0),e.next=6,le({ids:JSON.stringify(n)});case 6:r=e.sent,me.data=r.data.data,ke.value=r.data.fileSize,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2);case 14:me.steps=2,me.addend1=Math.round(9*Math.random()+1),me.addend2=Math.round(9*Math.random()+1),me.sum=void 0,e.next=25;break;case 20:return Array.isArray(me.data)||(me.data=[me.data]),e.next=25,Ce();case 25:Te(),e.next=29;break;case 28:l.$message.error("计算错误，请重新计算");case 29:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=a(t().mark((function e(){var n,r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=l.$load("正在删除站点..."),r=[];try{null===(i=me.data)||void 0===i||i.forEach(function(){var e=a(t().mark((function e(a,i){var s,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={id:a.id,webname:a.name,ftp:me.isFtp?1:0,database:me.isDatabase?1:0,path:me.isSite?1:0},me.isFtp||delete s.ftp,me.isDatabase||delete s.database,me.isSite||delete s.path,e.next=6,ue(s);case 6:o=e.sent,me.isMult?(o.status?r.push({name:a.name,status:!0}):r.push({name:a.name,status:!1}),i===me.data.length-1&&(R({resultData:r,resultTitle:"删除结果"}),T.value=!1,n.close(),h())):(l.$message.request(o),T.value=!1,n.close(),h());case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}catch(s){}finally{me.steps=1}case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pe=M(!1),je=M(5),Te=function(){Pe.value=!0,je.value=5;var e=setInterval((function(){je.value-=1,je.value<=0&&(clearInterval(e),Pe.value=!1)}),1e3)},De=function(){var e=a(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==me.steps){e.next=10;break}if(me.sum!==me.addend1+me.addend2){e.next=7;break}return e.next=4,Ce();case 4:T.value=!1,e.next=8;break;case 7:l.$message.error("计算错误，请重新计算");case 8:e.next=13;break;case 10:return e.next=12,Ce();case 12:T.value=!1;case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(e){Z(e,!1)},Ee=function(){var e=a(t().mark((function e(n,a){var r,i,s,c;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("total"!==a){e.next=7;break}return e.next=3,Be();case 3:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:o("total_website",n.name);case 7:return s=null===(r=JSON.parse(null!==(i=sessionStorage.getItem("BT-CONFIG"))&&void 0!==i?i:"{}"))||void 0===r||null===(r=r.web)||void 0===r?void 0:r.type,c="nginx"===s?"btwaf":"btwaf_httpd",e.next=11,ne({name:"total"===a?"total":c,isOpen:!1,function:function(e){if(e&&"total"!==a&&"btwaf"===c){var t=e.document.getElementById("plugin-view");t&&(t.style.display="none"),"btwaf"===a?e.bt_waf.set_site_config_view({siteName:n.name}):e.site_waf_config(n.name),setTimeout((function(){var n,a=e.document.getElementById("layui-layer2");a&&(null===(n=a.querySelector(".layui-layer-close"))||void 0===n||n.addEventListener("click",(function(){var e;null===(e=t.querySelector(".layui-layer-close"))||void 0===e||e.click()})))}),200)}}});case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Me=function(){var e=a(t().mark((function e(n,a){var r,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"top"!==a){e.next=8;break}return e.next=4,pe({id:n.id});case 4:r=e.sent,l.$message.request(r),e.next=12;break;case 8:return e.next=10,de({id:n.id});case 10:i=e.sent,l.$message.request(i);case 12:h(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}(),Ne=function(){var e=a(t().mark((function e(n){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(new Date).setHours(0,0,0,0),!("0000-00-00"!==n.edate&&new Date(n.edate).getTime()/1e3<r/1e3)){e.next=5;break}return l.$message.error("项目已过期，请设置站点到期时间后再操作"),e.abrupt("return");case 5:te({confirm:{title:"提示",message:Number(n.status)?"停用站点【".concat(n.name,"】后将无法正常访问，用户访问会显示当前网站停用后的提示页，是否继续操作？"):"启动站点【".concat(n.name,"】后，用户可以正常访问网站内容，是否继续操作？"),icon:"warning"},loading:"正在"+(Number(n.status)?"停止":"启动")+"，请稍后...",request:function(){var e=a(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Number(n.status)){e.next=8;break}return e.next=3,ie({id:n.id,name:n.name});case 3:return(r=e.sent).status&&te({confirm:{title:"提示",message:"是否将该停止的站点加入停止分类？",icon:"warning"},loading:"正在设置分类，请稍后...",request:function(){var e=a(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe({site_ids:JSON.stringify([n.id]),id:-2});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),complete:h}),e.abrupt("return",r);case 8:return e.abrupt("return",re({id:n.id,name:n.name}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),complete:h});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=a(t().mark((function e(n){var a,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe({sName:"total"});case 3:if(a=e.sent,!((r=a.data).endtime<0)){e.next=8;break}return D.value=!0,e.abrupt("return",!1);case 8:if(r.setup){e.next=14;break}return e.next=11,c({name:null==r?void 0:r.name,type:null==r?void 0:r.type,pluginInfo:r});case 11:return e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(e,t,n){A(e,t,n)},Fe=[{column:{subtitle:"WAF图标",isCustom:!0,isLtd:!0,isHide:!0,click:function(e){d.value.list.forEach((function(t){l.$set(t,"isWaf",e)}))}},index:0}],Ie=V({changeTaskTopEvent:Me,changeStatusEvent:Ne,setQuotaEvent:function(e){},openBackupEvent:function(e){ee(e)},deleteEvent:function(e){T.value=!0,me.data=e},setSiteTime:Le,openPlugin:Ee,openTotalFlow:Be,openSetting:Oe}),$e=function(){var e=a(t().mark((function e(n){var a,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe({sName:n.name});case 2:if(a=e.sent,"-1"!==(r=a.data).task){e.next=6;break}return e.abrupt("return",l.$message.error("当前插件正在安装，不可重复安装"));case 6:c({name:null==r?void 0:r.name,type:null==r?void 0:r.type,pluginInfo:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=a(t().mark((function e(){var n,a,r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=$(null===(n=JSON.parse(sessionStorage.getItem("BT-CONFIG")||"{}"))||void 0===n?void 0:n.web,"object",{})).hasOwnProperty("setup")&&!a.setup&&(_(),a=null===(r=JSON.parse(sessionStorage.getItem("BT-CONFIG")||"{}"))||void 0===r?void 0:r.web),a.hasOwnProperty("setup")&&!a.setup&&(k.value=!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return O(a(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.value.type=-1,d.value.orderParam.orderStatus="",d.value.orderParam.orderName="",e.next=5,h();case 5:return e.next=7,v();case 7:return e.next=9,m();case 9:qe(),me.addend1=Math.round(9*Math.random()+1),me.addend2=Math.round(9*Math.random()+1),me.sum=void 0,F((function(){L((function(){return n.import("./index-legacy49.js?v=1714377894636")}),void 0,n.meta.url),L((function(){return n.import("./index-legacy50.js?v=1714377894636")}),void 0,n.meta.url)}));case 14:case"end":return e.stop()}}),e)})))),{__sfc:!0,softStateBtn:function(){return L((function(){return n.import("./index-legacy48.js?v=1714377894636")}),void 0,n.meta.url)},vm:l,phpModulesTableParams:d,scanData:f,getPhpModulesList:h,getTypeList:v,getScanData:m,authType:b,pageSerachVal:x,webServerType:w,getPublicConfigInfo:_,maskLayer:k,recycleBin:S,sitePhpTable:C,showSearchHistory:P,hovering:j,delEventPopup:T,pluginPopup:D,batchConfig:E,delData:me,productData:ge,recomList:ye,closeSearchHistory:function(){F((function(){P.value=!1}))},tableBtnGroup:be,checkedList:xe,batchGroup:we,handleSelectionChange:function(e){xe.value=e},handleChangeSort:_e,searchValue:function(e){d.value.search=e},handleBatch:function(e){switch(e){case"deleteSite":me.data=xe.value,me.isMult=!0,T.value=!0;break;case"setTimeSite":Z(xe.value,!0);break;case"setPhpSite":X(xe.value);break;case"settingClass":K(xe.value);break;case"setCertificates":Y(xe.value);break;case"setPseudoStatic":Q(xe.value);break;case"hotLinkProtect":U(xe.value);break;case"limitFlowSite":W(xe.value)}},fileSize:ke,handleNextStep:Se,changePage:function(e){d.value.p=e,h()},changeSize:function(e){d.value.limit=e,localStorage.setItem("sitePageLimit",String(e)),h()},delEvent:Ce,disableDeleteButton:Pe,countdown:je,startCountdown:Te,handleConfim:De,handleCancelDel:function(){T.value=!1,me.steps=1,me.addend1=Math.round(9*Math.random()+1),me.addend2=Math.round(9*Math.random()+1),me.sum=void 0,me.isFtp=!1,me.isDatabase=!1,me.isSite=!1},setSiteTime:Le,openPlugin:Ee,changeTaskTopEvent:Me,changeStatusEvent:Ne,openTotalFlow:Be,handleSerach:function(e){d.value.search=e,void 0===e&&(d.value.search=""),h()},openSetting:Oe,otherColums:Fe,tableColumns:Ie,setTableColWidth:function(e,t){t.minWidth=e.minWidth,t.width=e.width},openInstall:$e,checkInstall:qe,getByteUnit:s,VulnerabilityScanDialog:q,classSettingDialog:z,NPSDialog:J}}}),ge=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t(D,{attrs:{visible:n.maskLayer,width:"38rem"}},[t("div",{staticClass:"flex items-center"},[t("span",[e._v("未安装运行环境，")]),t(u,{staticClass:"!font-bold !text-[1.4rem]",on:{click:function(e){return n.openInstall({name:"nginx"})}}},[e._v("安装Nginx")]),t(v,{attrs:{direction:"vertical"}}),t(u,{staticClass:"!font-bold !text-[1.4rem]",on:{click:function(e){return n.openInstall({name:"apache"})}}},[e._v("安装Apache")])],1)]),t(T,{scopedSlots:e._u([{key:"header-left",fn:function(){var a,r;return[t("div",{staticClass:"flex items-center"},[t(j,{attrs:{group:n.tableBtnGroup}}),t(p,{staticClass:"!ml-12x",attrs:{type:"default"},on:{click:function(e){return n.VulnerabilityScanDialog()}}},[t("span",[e._v("漏洞扫描")]),t("span",{staticClass:"ml-4x py-1x px-4x text-white text-center font-bold",class:((null===(a=n.scanData)||void 0===a?void 0:a.loophole_num)>0?"bg-[red]":"bg-[#f0ad4e]")+" "},[e._v(e._s(null===(r=n.scanData)||void 0===r?void 0:r.loophole_num))])]),t(n.softStateBtn,{tag:"component",staticClass:"ml-[1rem] mysql-status",attrs:{"plugin-name":n.webServerType,"is-setup":!1}}),t(P,{staticClass:"ml-12x inline-block",attrs:{icon:"demand",iconClass:"text-1.6rem",content:"需求反馈"},on:{click:function(e){return n.NPSDialog()}}})],1)]},proxy:!0},{key:"header-right",fn:function(){return[t("div",{staticClass:"flex items-center"},[t(m,{staticClass:"mr-8x w-[12rem]",on:{change:n.getPhpModulesList},model:{value:n.phpModulesTableParams.type,callback:function(t){e.$set(n.phpModulesTableParams,"type",t)},expression:"phpModulesTableParams.type"}},[t("div",{staticClass:"max-h-[20rem] overflow-auto",class:{"no-hover":n.hovering}},e._l(n.phpModulesTableParams.typeList,(function(e,n){return t(g,{key:n,attrs:{label:e.name,value:e.id}})})),1),t("div",{staticClass:"classify-item",on:{click:function(e){return n.classSettingDialog()},mouseover:function(e){n.hovering=!0},mouseout:function(e){n.hovering=!1}}},[e._v(" 分类设置 ")])])],1),t("div",{staticClass:"relative mr-8x"},[t(C,{attrs:{width:"320px",placeholder:e.$t("SitePhpModel.TableSearch")},on:{focus:function(e){n.showSearchHistory=!0},search:n.handleSerach,clear:n.handleSerach,blur:n.closeSearchHistory},model:{value:n.phpModulesTableParams.search,callback:function(t){e.$set(n.phpModulesTableParams,"search",t)},expression:"phpModulesTableParams.search"}}),t(S,{directives:[{name:"show",rawName:"v-show",value:n.showSearchHistory,expression:"showSearchHistory"}],staticClass:"!right-24x",attrs:{compData:{historySearch:n.phpModulesTableParams.historySearch,recomList:n.recomList,name:"sites",key:"php"}},on:{"updata:searchValue":n.searchValue}})],1),t(k,{staticClass:"!mr-8x",attrs:{refresh:n.getPhpModulesList}}),t(_,{attrs:{name:"phpTableColumn",column:n.tableColumns,other:n.otherColums,"is-request":!0}})]},proxy:!0},{key:"content",fn:function(){return[t(w,{directives:[{name:"loading",rawName:"v-loading",value:n.phpModulesTableParams.loading,expression:"phpModulesTableParams.loading"}],ref:"sitePhpTable",attrs:{"element-loading-text":"正在加载中...","default-sort":{prop:"date",order:"descending"},data:n.phpModulesTableParams.list,column:n.tableColumns},on:{"selection-change":n.handleSelectionChange,"sort-change":n.handleChangeSort}})]},proxy:!0},{key:"footer-left",fn:function(){return[t(x,{attrs:{data:n.batchGroup,config:n.batchConfig,"batch-fn":function(){}},on:{"handle-complete":function(e){return n.getPhpModulesList()},"handle-batch":n.handleBatch}})]},proxy:!0},{key:"footer-right",fn:function(){return[t(b,{attrs:{total:n.phpModulesTableParams.total,"current-page":n.phpModulesTableParams.p,"page-size":n.phpModulesTableParams.limit},on:{"current-change":n.changePage,"size-change":n.changeSize}})]},proxy:!0},{key:"popup",fn:function(){return[t(d,{attrs:{title:"网站删除确认",visible:n.delEventPopup,area:["auto"]},on:{"update:visible":function(e){n.delEventPopup=e},close:n.handleCancelDel}},[t("div",{},[1===n.delData.steps?t("div",{staticClass:"p-20x w-[480px]"},[t("div",{staticClass:"flex items-center"},[t("i",{staticClass:"text-warning el-icon-warning text-[4rem]"}),t("span",{staticClass:"text-[1.4rem] ml-8x leading-10"},[e._v("是否要删除关联的FTP、数据库、站点目录！")])]),t("div",{staticClass:"flex items-center ml-48x mt-12x"},[t(f,{model:{value:n.delData.isFtp,callback:function(t){e.$set(n.delData,"isFtp",t)},expression:"delData.isFtp"}},[e._v("FTP")]),t(f,{model:{value:n.delData.isDatabase,callback:function(t){e.$set(n.delData,"isDatabase",t)},expression:"delData.isDatabase"}},[e._v("数据库")]),t(f,{model:{value:n.delData.isSite,callback:function(t){e.$set(n.delData,"isSite",t)},expression:"delData.isSite"}},[e._v("站点目录")])],1),n.recycleBin?e._e():t("div",{staticClass:"!mt-12x text-danger ml-48x"},[e._v(" 当前文件回收站尚未开启，请谨慎操作！ ")]),t("div",{staticClass:"p-20x bg-#f1f1f1 mt-12x"},[t("span",[e._v("计算结果：")]),t("span",{staticClass:"mx-[1rem]"},[e._v(e._s(n.delData.addend1)+" + "+e._s(n.delData.addend2))]),t("span",{staticClass:"mr-[1rem]"},[e._v("=")]),t(h,{directives:[{name:"focus",rawName:"v-focus"}],attrs:{autofocus:"true","controls-position":"right",size:"small"},model:{value:n.delData.sum,callback:function(t){e.$set(n.delData,"sum",t)},expression:"delData.sum"}})],1)]):e._e(),2===n.delData.steps?t("div",{staticClass:"p-20x"},[t("div",{staticClass:"flex items-center"},[t("i",{staticClass:"text-warning el-icon-warning text-[4rem]"}),t("span",{staticClass:"text-[2rem] ml-8x leading-10 font-bold"},[e._v("堡塔温馨提示您，请冷静几秒钟，确认以下要删除的数据。")])]),t("div",{staticClass:"border border-[#d6d7d9] min-h-[12rem] overflow-auto mt-20x mb-1rem"},e._l(n.delData.data,(function(a,r){return t("div",{key:r,staticClass:"flex items-center flex-col p-12x border-b-1 border-[#f1f1f1] hover:bg-[#f1f1f140] last:border-b-0",staticStyle:{gap:"0.4rem"}},[t("div",{staticClass:"flex items-center justify-between px-12x py-8x w-full"},[t("span",{staticClass:"truncate w-[30%]"},[e._v("站点名:"+e._s(a.name))]),t("span",{staticClass:"truncate w-[25%]"},[e._v("目录:"+e._s(a.path)+" ")]),a.total?t("span",{staticClass:"text-danger"},[e._v("("+e._s(n.getByteUnit(a.total))+") "),t(y,{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 此目录较大，可能为重要数据，请谨慎操作！"),t("br"),e._v("目录："+e._s(a.path)+" ")]),t("i",{staticClass:"el-icon-warning cursor-pointer"})])],1):e._e(),t("span",{staticClass:"truncate w-[30%]"},[e._v("创建时间:"+e._s(a.addtime))])]),a.database?t("div",{staticClass:"flex items-center justify-between px-12x py-8x w-full border-t-1 border-[#f1f1f1]"},[t("span",{staticClass:"truncate w-[30%]"},[e._v("数据库:"+e._s(a.database.name))]),t("span",{staticClass:"truncate w-[30%]"},[e._v("大小:"+e._s(n.getByteUnit(a.database.total))+" ")]),t("span",{staticClass:"truncate w-[30%]"},[e._v("创建时间:"+e._s(a.addtime)+" ")])]):e._e()])})),0),n.countdown&&n.disableDeleteButton?t("div",[e._v(" 请仔细阅读以上要删除信息，防止网站数据被误删，确认删除还有 "),t("span",{staticClass:"text-danger blod"},[e._v(e._s(n.countdown))]),e._v(" 秒可以操作。 ")]):t("div",{staticClass:"text-danger"},[e._v(" 注意：请仔细阅读以上要删除信息，防止网站数据被误删 ")])]):e._e(),t("div",{staticClass:"bg-[#f6f8f8] footer-btn flex items-center justify-end p-12x w-full"},[t(p,{attrs:{type:"cancel"},on:{click:n.handleCancelDel}},[e._v("取消")]),1===n.delData.steps?t(p,{attrs:{type:"danger"},on:{click:n.handleNextStep}},[e._v("下一步 ")]):e._e(),2===n.delData.steps?t(p,{attrs:{type:"danger",disabled:n.disableDeleteButton},on:{click:n.handleConfim}},[e._v(e._s(n.countdown&&n.disableDeleteButton?"等待".concat(n.countdown,"秒"):"确认删除数据")+" ")]):e._e()],1)])]),t(d,{attrs:{title:"插件预览",visible:n.pluginPopup,area:66},on:{"update:visible":function(e){n.pluginPopup=e}}},[t("div",{staticClass:"p-20x pb-24x"},[t(r,{attrs:{data:n.productData}})],1)])]},proxy:!0}])})],1)};e("default",l(me,ge,[],!1,null,"db63cdd6",null,null).exports)}}}))}();
