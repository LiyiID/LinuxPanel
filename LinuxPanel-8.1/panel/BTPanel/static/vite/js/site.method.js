import{a}from"./confirm.js?v=1714377894636";import{g as t,u as e,t as s,x as n,w as r,l as i}from"./site.store.js?v=1714377894636";import{r as o}from"./site.popup.js?v=1714377894636";import{M as m}from"./main.js?v=1714377894636";const{getModulesList:c}=t(),u={async setProject(t,n,r,i){const o=(new Date).setHours(0,0,0,0);"0000-00-00"!==t.edate&&new Date(t.edate).getTime()/1e3<o/1e3?m.error("项目已过期，请设置站点到期时间后再操作"):a({confirm:{title:"设置项目状态",message:"stop"===n?"停用项目"+t.name+"后，项目将无法访问，确定要停用项目吗？":"即将启动项目"+t.name+"，确定要启动项目吗？",icon:"warning"},loading:"正在设置状态，请稍后...",request:async()=>{let a,i;return"stop"===n?a=await e({data:JSON.stringify({project_name:t.name})},r):"start"===n&&(a=await s({data:JSON.stringify({project_name:t.name})},r)),i={status:a.data.status,msg:a.data.data||a.data.msg},i.status?i:(m.error({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:i.msg,type:"error",duration:0,showClose:!0}),null)},complete:i})},async setProjectStatus(t,e,s){a({confirm:{title:"设置项目状态",message:"stop"===e?"停用项目"+t.name+"后，项目将无法访问，确定要停用项目吗？":"即将启动项目"+t.name+"，用户可以正常访问项目内容，是否继续操作？",icon:"warning"},loading:"正在设置状态，请稍后...",request:async()=>"stop"===e?await n({data:JSON.stringify({name:t.name})}):"start"===e?await r({data:JSON.stringify({name:t.name})}):void 0,complete:s})},async delProject(t,e,s,n){a({confirm:{icon:"warning",title:n?"批量删除项目":"删除"+s+"项目-"+t.name,message:n?"批量删除选中的项目后，项目将无法恢复，是否继续操作？":"风险操作，此操作不可逆，删除"+t.name+"项目后您将无法管理该项目，是否继续操作？",type:"input",inputText:n?"批量删除项目":"删除项目"},loading:"正在删除，请稍后...",request:async()=>{if(n){let a=e.map((a=>a.name)),t=[];return await a.forEach((async a=>{const e=await i({data:JSON.stringify({project_name:a})},s);t.push({name:a,status:e.data.status})})),await o({resultData:t,resultTitle:"删除项目"}),setTimeout((async()=>{await c(s)}),1e3),null}{const a=await i({data:JSON.stringify({project_name:t.name})},s);return a.status?m.success(a.data.msg||a.data.data):m.error(a.data.msg||a.data.data),c(s),null}},async complete(){c(s)}})}};export{u as s};
