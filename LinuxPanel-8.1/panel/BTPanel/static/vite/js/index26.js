import{_ as e}from"./index52.js?v=1714377894636";import{_ as t}from"./index53.js?v=1714377894636";import{g as a,o as s,e as o,n as r,a as i}from"./main.js?v=1714377894636";import{_ as l}from"./index39.js?v=1714377894636";import{_ as n}from"./index54.js?v=1714377894636";import{_ as c}from"./index55.js?v=1714377894636";import{_ as m}from"./index57.js?v=1714377894636";import{L as u,q as p,s as d}from"./element-lib.js?v=1714377894636";import{_ as h}from"./index43.js?v=1714377894636";import{_ as f}from"./index58.js?v=1714377894636";import{_ as g}from"./index59.js?v=1714377894636";import"./index45.js?v=1714377894636";import{_ as v}from"./index60.js?v=1714377894636";import{e as b,b as y,v as j,h as x,j as _}from"./vue-lib.js?v=1714377894636";import{g as S,t as P,u as C,i as T}from"./site.store.js?v=1714377894636";import{Q as k,R as O,c as w,N as L,p as N,f as I,g as B,i as D,S as J}from"./site.popup.js?v=1714377894636";import{o as M}from"./index61.js?v=1714377894636";import{s as F}from"./site.method.js?v=1714377894636";import{c as G}from"./check.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./element-ui.common.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./vdom.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";import"./confirm.js?v=1714377894636";import"./config.js?v=1714377894636";const R=r(b({__name:"index",setup(e){const{proxy:t}=_(),{refs:{modulesTableParams:r},getModulesList:i,getModulesTypeList:l}=S(),{getPublicConfigInfo:n}=a(),c=y(!1),m=y([]),u=y(!1),p=j({isRecurrence:!1,describe:{title:"",th:"",message:"",propsValue:""}}),d=[{content:"添加通用项目",active:!0,event:()=>{O()}},{content:"项目守护间隔时间",hide:s,event:e=>{N("other")}}],h=y({tableColumn:[{prop:"name",label:"网站名"},{prop:"status",label:"状态"}],callback:()=>{i("other")},isRecurrence:!0}),f=y([{label:"启动项目",value:"startOtherSite",diyBatch:()=>{M({title:"您正在批量启动选中的项目，是否继续操作？",dataList:m.value,titleType:"批量启动选中的站点",requestFun:async e=>(await P({data:JSON.stringify({project_name:e.name})},"other")).data,...h.value})}},{label:"停用项目",value:"stopOtherSite",diyBatch:()=>{M({title:"您正在批量停止选中的项目，是否继续操作？",dataList:m.value,titleType:"批量停止选中的站点",requestFun:async e=>(await C({data:JSON.stringify({project_name:e.name})},"other")).data,...h.value})}},{label:"重启项目",value:"restartOtherSite",diyBatch:()=>{M({title:"您正在批量重启选中的项目，是否继续操作？",dataList:m.value,titleType:"批量重启选中的站点",requestFun:async e=>(await P({data:JSON.stringify({project_name:e.name})},"other")).data,...h.value})}},{label:"部署证书",value:"setCertificates",isRefBatch:!0},{label:"删除项目",value:"delOtherSite",diyBatch:()=>{}}]),g=async()=>{var e,t;let a=G(null==(e=JSON.parse(sessionStorage.getItem("BT-CONFIG")||"{}"))?void 0:e.web,"object",{});a.hasOwnProperty("setup")&&!a.setup&&(n(),a=null==(t=JSON.parse(sessionStorage.getItem("BT-CONFIG")||"{}"))?void 0:t.web),a.hasOwnProperty("setup")&&!a.setup&&(u.value=!0)},v=k({changeTaskTopEvent:e=>{},changeStatusEvent:e=>{F.setProject(e,e.run?"stop":"start","other",(()=>i("other")))},setQuotaEvent:e=>{},openBackupEvent:e=>{},deleteEvent:e=>{F.delProject(e,{},"other",!1)},setSiteTime:e=>{D(e,!1,"other")},openPlugin:e=>{},openTotalFlow:e=>{},openSetting:(e,t)=>{J(e,t)}});return x((async()=>{g(),await i("other")})),{__sfc:!0,vm:t,modulesTableParams:r,getModulesList:i,getModulesTypeList:l,getPublicConfigInfo:n,hovering:c,checkedList:m,maskLayer:u,batchConfig:p,tableBtnGroup:d,batchData:h,batchGroup:f,handleSelectionChange:e=>{m.value=e},handleBatch:e=>{switch(e){case"settingClass":B(m.value,"other");break;case"delOtherSite":F.delProject({},m.value,"other",!0);break;case"setCertificates":I(m.value)}},handleSerach:e=>{r.value.search=e,void 0===e&&(r.value.search=""),i("other")},openInstall:async e=>{const{data:t}=await T({sName:e.name});o({name:t.name,type:t.type,pluginInfo:t})},checkInstall:g,tableColumns:v,changePage:e=>{r.value.p=e,i("other")},changeSize:e=>{var t;r.value.limit=e;let a=JSON.parse(null!=(t=localStorage.getItem("siteOtherPageLimit"))?t:"{}");a.other=e,localStorage.setItem("siteOtherPageLimit",JSON.stringify(a)),i("other")},otherAddSiteDialog:O,classSettingDialog:w,NPSDialog:L,isRelease:s}}}),(function(){var a=this,s=a._self._c,o=a._self._setupProxy;return s("div",[s(v,{attrs:{visible:o.maskLayer,width:"38rem"}},[s("div",{staticClass:"flex items-center"},[s("span",[a._v("未安装运行环境，")]),s(i,{staticClass:"!font-bold !text-[1.4rem]",on:{click:function(e){return o.openInstall({name:"nginx"})}}},[a._v("安装Nginx")]),s(u,{attrs:{direction:"vertical"}}),s(i,{staticClass:"!font-bold !text-[1.4rem]",on:{click:function(e){return o.openInstall({name:"apache"})}}},[a._v("安装Apache")])],1)]),s(g,{scopedSlots:a._u([{key:"header-left",fn:function(){return[s("div",{staticClass:"flex items-center"},[s(f,{attrs:{group:o.tableBtnGroup}}),s(h,{staticClass:"ml-12x inline-block",attrs:{icon:"demand",iconClass:"text-1.6rem",content:"需求反馈"},on:{click:function(e){return o.NPSDialog()}}})],1)]},proxy:!0},{key:"header-right",fn:function(){return[o.isRelease?a._e():s("div",{staticClass:"flex items-center"},[s(p,{staticClass:"mr-8x w-[12rem]",on:{change:function(e){return o.getModulesList("other")}},model:{value:o.modulesTableParams.type_id,callback:function(e){a.$set(o.modulesTableParams,"type_id",e)},expression:"modulesTableParams.type_id"}},[s("div",{staticClass:"max-h-[20rem] overflow-auto",class:{"no-hover":o.hovering}},a._l(o.modulesTableParams.typeList,(function(e,t){return s(d,{key:t,attrs:{label:e.name,value:e.id}})})),1),s("div",{staticClass:"classify-item",on:{click:function(e){return o.classSettingDialog("other")},mouseover:function(e){o.hovering=!0},mouseout:function(e){o.hovering=!1}}},[a._v(" 分类设置 ")])])],1),s("div",{staticClass:"relative"},[s(m,{attrs:{placeholder:a.$t("SitePhpModel.TableSearch"),width:"40rem"},on:{search:o.handleSerach,clear:o.handleSerach},model:{value:o.modulesTableParams.search,callback:function(e){a.$set(o.modulesTableParams,"search",e)},expression:"modulesTableParams.search"}})],1),s(c,{staticClass:"!ml-8x",attrs:{refresh:()=>{o.getModulesList("other")}}}),s(n,{staticClass:"ml-8x",attrs:{name:"siteOtherTable",column:o.tableColumns}})]},proxy:!0},{key:"content",fn:function(){return[s(l,{directives:[{name:"loading",rawName:"v-loading",value:o.modulesTableParams.loading,expression:"modulesTableParams.loading"}],ref:"siteOtherTable",attrs:{"element-loading-text":"正在加载中...",data:o.modulesTableParams.list,column:o.tableColumns},on:{"selection-change":o.handleSelectionChange},scopedSlots:a._u([{key:"empty",fn:function(){return[s("div",{staticClass:"flex items-center justify-center"},[a._v(" 您的列表为空，您可以 "),s(i,{on:{click:function(e){return o.otherAddSiteDialog()}}},[a._v("添加一个项目")])],1)]},proxy:!0}])})]},proxy:!0},{key:"footer-left",fn:function(){return[s(t,{attrs:{data:o.batchGroup,config:o.batchConfig,"batch-fn":()=>{}},on:{"handle-batch":o.handleBatch}})]},proxy:!0},{key:"footer-right",fn:function(){return[s(e,{attrs:{total:o.modulesTableParams.total,"current-page":o.modulesTableParams.p,"page-size":o.modulesTableParams.limit},on:{"current-change":o.changePage,"size-change":o.changeSize}})]},proxy:!0}])})],1)}),[],!1,null,"91823297",null,null).exports;export{R as default};
