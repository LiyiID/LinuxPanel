import{_ as e}from"./index118.js?v=1714377894636";import{_ as a}from"./index46.js?v=1714377894636";import{w as t,x as s,L as l}from"./element-lib.js?v=1714377894636";import{o,l as i,aS as r,n,q as m}from"./main.js?v=1714377894636";import"./index45.js?v=1714377894636";import{_ as p}from"./index85.js?v=1714377894636";import{_ as c}from"./preload-helper.js?v=1714377894636";import{e as g,b as _,v as d,H as u,h,j as x}from"./vue-lib.js?v=1714377894636";import{dG as f,dH as v,dI as j}from"./site.store.js?v=1714377894636";import"./index.vue_vue_type_style_index_0_lang.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./check.js?v=1714377894636";const b=n(g({__name:"GlobalSetting",setup(e){const{proxy:a}=x(),t=_(!1),s=d({log_split:!1,log_path:""}),l=d({page_index:!1,page_404:!1}),n=d({path:[{required:!0,message:"请选择日志路径",trigger:"change"}]}),m=_([{label:"名称1",prop:"site_name"},{label:"结果",render:e=>u("span",{class:e.status?"text-primary":"text-danger"},e.status?"操作成功":"操作失败")}]),p=async()=>{t.value=!0;try{const{data:e}=await f();s.log_path=e.log_path,s.log_split=e.log_split,l.page_index=e.page_index,l.page_404=e.page_404}catch(e){}finally{t.value=!1}};return h((()=>{p()})),{__sfc:!0,vm:a,viewLoading:t,logForm:s,defalutForm:l,rules:n,resultColumn:m,getGloalData:p,handleSave:async()=>{try{await a.$confirm({title:"修改日志路径",message:"是否修改日志预设路径,继续执行?",type:"check",icon:"warning",checkText:"更改已有网站日志",checkEvent:async e=>{try{const t=await v({mv_log:"1",change_sites:e?"1":"0",log_path:s.log_path});e?i({title:"修改日志路径结果",area:42,component:()=>c((()=>import("./index63.js?v=1714377894636")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url),compData:{resultColumn:m.value,resultData:t.data,resultTitle:"修改日志路径"}}):a.$message.request(t)}catch(t){}}})}catch(e){}},onPathChange:()=>{r({type:"dir",path:s.log_path,change:e=>{s.log_path=e}})},handleChangeStatus:async()=>{let e=a.$load("正在设置中，请稍候...");try{const t=await j({log_split:s.log_split,page_index:l.page_index,page_404:l.page_404});a.$message.request(t),e.close()}catch(t){}finally{e.close()}},isRelease:o}}}),(function(){var o=this,i=o._self._c,r=o._self._setupProxy;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:r.viewLoading,expression:"viewLoading"}],staticClass:"flex flex-col site-globa-setting-module"},[i("div",[i(t,{attrs:{model:r.logForm,rule:r.rules}},[i(s,{attrs:{label:"日志切割"}},[i("div",{staticClass:"flex items-center"},[i(a,{on:{change:r.handleChangeStatus},model:{value:r.logForm.log_split,callback:function(e){o.$set(r.logForm,"log_split",e)},expression:"logForm.log_split"}}),i("span",{staticClass:"text-[#999] ml-4x"},[o._v(" *提示：开启该选项将自动创建网站日志切割任务，当存在所有网站日志切割任务时不会新建")])],1)]),r.isRelease?o._e():i(s,{attrs:{label:"预设日志路径"}},[i("div",{staticClass:"flex items-center"},[i(p,{attrs:{iconType:"folder"},on:{folder:r.onPathChange},model:{value:r.logForm.log_path,callback:function(e){o.$set(r.logForm,"log_path",e)},expression:"logForm.log_path"}}),i(m,{staticClass:"!ml-4x",on:{click:r.handleSave}},[o._v("保存")])],1)])],1)],1),i(l),i(t,{attrs:{model:r.defalutForm}},[i(s,{attrs:{label:"默认页面设置"}},[i("div",{staticClass:"flex items-center"},[i(a,{on:{change:r.handleChangeStatus},model:{value:r.defalutForm.page_index,callback:function(e){o.$set(r.defalutForm,"page_index",e)},expression:"defalutForm.page_index"}}),i("span",{staticClass:"ml-4x mb-2x"},[o._v(" 自动生成index.html(默认首页)")])],1)]),i(s,{attrs:{label:" "}},[i("div",{staticClass:"flex items-center"},[i(a,{on:{change:r.handleChangeStatus},model:{value:r.defalutForm.page_404,callback:function(e){o.$set(r.defalutForm,"page_404",e)},expression:"defalutForm.page_404"}}),i("span",{staticClass:"ml-4x mb-2x"},[o._v(" 自动生成404.html(默认404页面)")])],1)])],1),i(e,{staticClass:"ml-20x mt-20x",attrs:{list:[{text:"请注意，仅对后续创建的PHP网站生效。"}],"list-style":"disc"}})],1)}),[],!1,null,"ee3c898c",null,null).exports;export{b as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index63.js?v=1714377894636","./index39.js?v=1714377894636","./element-lib.js?v=1714377894636","./__commonjsHelpers__.js?v=1714377894636","./vue-lib.js?v=1714377894636","./public-lib.js?v=1714377894636","./main.js?v=1714377894636","./modulepreload-polyfill.js?v=1714377894636","./preload-helper.js?v=1714377894636","./request-lib.js?v=1714377894636","./locales-lib.js?v=1714377894636","./element-lib.js?v=1714377894636"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
