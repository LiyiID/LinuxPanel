import{_ as r}from"./index85.js?v=1714377894636";import{w as e,x as t}from"./element-lib.js?v=1714377894636";import{aS as a,n as o}from"./main.js?v=1714377894636";import{e as s,b as p,v as l}from"./vue-lib.js?v=1714377894636";import{g as n,h as m}from"./ftp.store.js?v=1714377894636";import{o as i}from"./confirm.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./config.js?v=1714377894636";const d=o(s({__name:"EditFtpPwd",props:{compData:{default:()=>{}}},setup(r,{expose:e}){const t=r,{getFtpList:o}=n(),{id:s,name:d,password:f,path:c}=t.compData,u=p(!1),h=p(),g=l({name:d,password:f,path:c}),w={name:[],password:[{validator:(r,e,t)=>{e.length>=6?t():t(new Error("密码长度不能少于6位！"))},trigger:["blur"]}],path:[{required:!0,message:"FTP目录不能为空！",trigger:["blur","change"]},{validator:(r,e,t)=>{e.length>0?t():t(new Error("不能以系统关键目录作为FTP目录！"))},trigger:["blur","change"]}]},b=async r=>{i({$refs:h.value,loading:{disable:u,text:"修改中，请稍后..."},confirm:{icon:"warning",title:"提示",width:"35rem",message:"修改FTP用户，旧配置信息将无法使用，是否继续操作？"},request:async()=>await m({id:s,ftp_username:d,new_password:g.password,path:g.path}),complete:o})};return e({onConfirm:b}),{__sfc:!0,getFtpList:o,props:t,id:s,name:d,password:f,path:c,formDisabled:u,updateFtpInfo:h,ftpForm:g,rules:w,onPathChange:()=>{a({type:"dir",path:g.path,change:r=>{g.path=r}})},clearSpace:()=>{g.path=g.path.replace(/\s+/g,"")},onConfirm:b}}}),(function(){var a=this,o=a._self._c,s=a._self._setupProxy;return o(e,{ref:"updateFtpInfo",staticClass:"bt-custom-form",attrs:{disabled:s.formDisabled,rules:s.rules,model:s.ftpForm}},[o(t,{attrs:{label:a.$t("Username"),prop:"name"}},[o(r,{attrs:{readonly:"",width:"32rem",disabled:!0},model:{value:s.ftpForm.name,callback:function(r){a.$set(s.ftpForm,"name",r)},expression:"ftpForm.name"}})],1),o(t,{attrs:{label:a.$t("Password"),prop:"password"}},[o(r,{attrs:{width:"32rem",name:"password",autoFocus:"",iconType:"refresh"},model:{value:s.ftpForm.password,callback:function(r){a.$set(s.ftpForm,"password",r)},expression:"ftpForm.password"}})],1),o(t,{attrs:{label:"根目录",prop:"path"}},[o(r,{attrs:{name:"path",width:"32rem","icon-type":"folder",placeholder:"请选择根目录"},on:{folder:function(r){return s.onPathChange()},"&change":function(r){return s.clearSpace()}},model:{value:s.ftpForm.path,callback:function(r){a.$set(s.ftpForm,"path",r)},expression:"ftpForm.path"}})],1)],1)}),[],!1,null,null,null,null).exports;export{d as default};
