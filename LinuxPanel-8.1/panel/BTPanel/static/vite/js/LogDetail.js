import{n as t,q as s}from"./main.js?v=1714377894636";import{e,b as o,f as a,h as r,I as l,j as i}from"./vue-lib.js?v=1714377894636";import{bH as n,bI as c}from"./site.store.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./check.js?v=1714377894636";const p=t(e({__name:"LogDetail",props:{compData:{default:{}}},setup(t){const s=t,{proxy:e}=i(),{id:p}=s.compData,m=o("正在获取中...."),u=o(null),g=async t=>{try{const s=await c({id:p});m.value=s.msg,d(),t&&e.$message.request({status:s.status,msg:s.status?"刷新成功":"刷新失败"})}catch(s){}},d=()=>{e.$nextTick((()=>{const t=document.querySelector(".pre-box");t.scrollTop=t.scrollHeight}))};return a((()=>s.compData),(()=>{g()}),{immediate:!0}),r((()=>{u.value=setInterval((async()=>{await g()}),2e3)})),l((()=>{clearInterval(u.value)})),{__sfc:!0,vm:e,props:s,id:p,logMsg:m,setTimer:u,logEvent:async()=>{try{await e.$confirm({title:"提示",message:"确定清空日志吗？",iconType:"warning",type:"warning"});const t=await n({id:p});e.$message.request(t),g()}catch(t){}},getLog:g,scrollToBottom:d}}}),(function(){var t=this,e=t._self._c,o=t._self._setupProxy;return e("div",{staticClass:"p-20x"},[e(s,{on:{click:function(t){return o.getLog(!0)}}},[t._v(" 刷新日志 ")]),e(s,{attrs:{type:"default"},on:{click:o.logEvent}},[t._v(" 清空日志 ")]),e("div",{staticClass:"pre-box bg-[#333] mt-12x text-white h-[48rem] overflow-auto p-20x"},[e("pre",{domProps:{innerHTML:t._s(o.logMsg)}})])],1)}),[],!1,null,null,null,null).exports;export{p as default};
