!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return r};var t,r={},i=Object.prototype,a=i.hasOwnProperty,s=Object.defineProperty||function(e,n,t){e[n]=t.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function p(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{p({},"")}catch(t){p=function(e,n,t){return e[n]=t}}function f(e,n,t,r){var i=n&&n.prototype instanceof _?n:_,a=Object.create(i.prototype),o=new S(r||[]);return s(a,"_invoke",{value:O(e,t,o)}),a}function g(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var v="suspendedStart",m="suspendedYield",h="executing",d="completed",y={};function _(){}function x(){}function b(){}var w={};p(w,l,(function(){return this}));var I=Object.getPrototypeOf,k=I&&I(I(V([])));k&&k!==i&&a.call(k,l)&&(w=k);var j=b.prototype=_.prototype=Object.create(w);function C(e){["next","throw","return"].forEach((function(n){p(e,n,(function(e){return this._invoke(n,e)}))}))}function E(n,t){function r(i,s,o,l){var u=g(n[i],n,s);if("throw"!==u.type){var c=u.arg,p=c.value;return p&&"object"==e(p)&&a.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,o,l)}),(function(e){r("throw",e,o,l)})):t.resolve(p).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,l)}))}l(u.arg)}var i;s(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}})}function O(e,n,r){var i=v;return function(a,s){if(i===h)throw new Error("Generator is already running");if(i===d){if("throw"===a)throw s;return{value:t,done:!0}}for(r.method=a,r.arg=s;;){var o=r.delegate;if(o){var l=D(o,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===v)throw i=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=h;var u=g(e,n,r);if("normal"===u.type){if(i=r.done?d:m,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=d,r.method="throw",r.arg=u.arg)}}}function D(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,D(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=g(i,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var s=a.arg;return s?s.done?(n[e.resultName]=s.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function M(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function L(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function V(n){if(n||""===n){var r=n[l];if(r)return r.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var i=-1,s=function e(){for(;++i<n.length;)if(a.call(n,i))return e.value=n[i],e.done=!1,e;return e.value=t,e.done=!0,e};return s.next=s}}throw new TypeError(e(n)+" is not iterable")}return x.prototype=b,s(j,"constructor",{value:b,configurable:!0}),s(b,"constructor",{value:x,configurable:!0}),x.displayName=p(b,c,"GeneratorFunction"),r.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===x||"GeneratorFunction"===(n.displayName||n.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,p(e,c,"GeneratorFunction")),e.prototype=Object.create(j),e},r.awrap=function(e){return{__await:e}},C(E.prototype),p(E.prototype,u,(function(){return this})),r.AsyncIterator=E,r.async=function(e,n,t,i,a){void 0===a&&(a=Promise);var s=new E(f(e,n,t,i),a);return r.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(j),p(j,c,"Generator"),p(j,l,(function(){return this})),p(j,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var n=Object(e),t=[];for(var r in n)t.push(r);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=V,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,i){return o.type="throw",o.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],o=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),u=a.call(s,"finallyLoc");if(l&&u){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,n){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=n,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(s)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),y},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),L(t),y}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var i=r.arg;L(t)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:V(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},r}function t(e,n,t,r,i,a,s){try{var o=e[a](s),l=o.value}catch(u){return void t(u)}o.done?n(l):Promise.resolve(l).then(r,i)}function r(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var s=e.apply(n,r);function o(e){t(s,i,a,o,l,"next",e)}function l(e){t(s,i,a,o,l,"throw",e)}o(void 0)}))}}System.register(["./main-legacy.js?v=1714377894636","./index-legacy41.js?v=1714377894636","./index-legacy45.js?v=1714377894636","./vue-lib-legacy.js?v=1714377894636","./files-legacy.js?v=1714377894636","./check-legacy.js?v=1714377894636","./popup-legacy.js?v=1714377894636","./soft.store-legacy.js?v=1714377894636","./modulepreload-polyfill-legacy.js?v=1714377894636","./preload-helper-legacy.js?v=1714377894636","./request-lib-legacy.js?v=1714377894636","./__commonjsHelpers__-legacy.js?v=1714377894636","./locales-lib-legacy.js?v=1714377894636","./public-lib-legacy.js?v=1714377894636","./element-lib-legacy.js?v=1714377894636","./select-legacy.js?v=1714377894636","./form-item-legacy.js?v=1714377894636","./index-legacy85.js?v=1714377894636","./form-legacy.js?v=1714377894636","./index-legacy118.js?v=1714377894636","./index-legacy39.js?v=1714377894636","./empty-legacy.js?v=1714377894636","./index-legacy59.js?v=1714377894636","./radio-legacy.js?v=1714377894636","./index-legacy119.js?v=1714377894636","./progress-legacy.js?v=1714377894636","./soft.api-legacy.js?v=1714377894636"],(function(e,t){"use strict";var i,a,s,o,l,u,c,p,f,g,v,m,h,d,y,_,x,b,w,I,k,j,C,E,O,D,M,L,S,V,P,A,N,T,F,$;return{setters:[function(e){i=e.a1,a=e.f,s=e.bx,o=e.a2,l=e.K,u=e.b4,c=e.b5,p=e.b6,f=e.b7,g=e.b8,v=e.b9,m=e.ba,h=e.n,d=e._,y=e.a,_=e.q,x=e.R},function(e){b=e._},function(e){w=e._},function(e){I=e.e,k=e.A,j=e.v,C=e.b,E=e.f,O=e.c,D=e.h,M=e.j},function(e){L=e.g},function(e){S=e.d,V=e.r},function(e){P=e.c,A=e.h,N=e.d,T=e.s,F=e.a},function(e){$=e.g},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var t=I({__name:"test",props:{compData:{default:function(){return{name:"",type:"",pluginInfo:{},softData:{name:"",endtime:0,setup:!1,pid:"",type:0}}}}},emits:["close","refresh"],setup:function(e,t){var h,d=t.emit,y=e,_=y.compData,x=_.softData,b=_.pluginInfo,w=M().proxy,I=k(i()).isInstall,B=$().refs.speedInstallView,U=j({isBeta:!!y.compData.isBeta&&y.compData.isBeta,title:"",dependnetFlag:!1,arrs:["apache","nginx","mysql"],speedConfig:{}}),G=j({name:null===(h=y.compData)||void 0===h?void 0:h.name,pluginInfo:{},info:{},newVersion:"",changeUpdateTime:"",PluginUpgradesData:[]}),q=j({imgArrValue:0,imgArr:[]}),z=C({selectValue:"",selectOption:[],compile:!1,phpVersion:"",size:!1}),H=C("/static/img/soft_ico/icon_plug.svg");E((function(){return G.pluginInfo.name}),(function(){var e;G.pluginInfo.name&&(H.value="/static/img/soft_ico/ico-"+(null!==(e=G.pluginInfo.name)&&void 0!==e&&e.includes("php-")?"php":G.pluginInfo.name)+".png")}),{deep:!0});var Q=O((function(){return G.changeUpdateTime?G.changeUpdateTime:G.PluginUpgradesData&&G.PluginUpgradesData.length&&G.PluginUpgradesData[0].update_time?a(G.PluginUpgradesData[0].update_time,"yyyy/MM/dd"):"暂无"})),R=C([[7,"免","border-[#E1E1E1] text-[#9a9a9a]"],[8,"专","border-[#F9EE9E] text-[#FFC82F]"],[12,"企","border-[#E8D6B3] text-[#A3782F]"]]),Y=function(){var e=r(n().mark((function e(t){var r,i,a,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,z.value.selectOption=[],e.t0=y.compData.type,e.next="i"===e.t0?5:"u"===e.t0?8:"r"===e.t0?10:12;break;case 5:return U.title="安装",y.compData.update&&(U.title="更新"),e.abrupt("break",13);case 8:return U.title="更新",e.abrupt("break",13);case 10:return U.title="修复",e.abrupt("break",13);case 12:U.title="安装";case 13:if(!t){e.next=18;break}G.pluginInfo=y.compData.pluginInfo,G.pluginInfo||(G.pluginInfo=y.compData.softData),e.next=23;break;case 18:return e.next=20,o({sName:G.name});case 20:r=e.sent,i=r.data,G.pluginInfo=i;case 23:return G.pluginInfo.introduction&&(a=G.pluginInfo.introduction.split(";"),q.imgArr=[],a.forEach((function(e,n){var t=e.split("|");q.imgArr.push({title:t[0],src:G.name.indexOf("php-")>-1?"https://www.bt.cn/Public/new/plugin/php/"+t[1]:"https://www.bt.cn/Public/new/plugin/"+(null==G?void 0:G.name)+"/"+t[1]})}))),e.next=26,J();case 26:U.dependnetFlag=!G.pluginInfo.dependnet.need&&!G.pluginInfo.dependnet.selected,l(G.pluginInfo.dependnet.need)&&(U.dependnetFlag=!G.pluginInfo.dependnet.need.length&&!G.pluginInfo.dependnet.selected.length),U.arrs.includes(G.name)?(G.pluginInfo.versions.length>1?(G.pluginInfo.versions.forEach((function(e,n){z.value.selectOption.push({title:G.name+e.m_version,key:n})})),z.value.selectValue=z.value.selectOption[0].key):z.value.phpVersion=G.name+(G.name.indexOf("php-")>-1?"":G.pluginInfo.versions[0].m_version),z.value.compile=!0,z.value.size=!0):Array.isArray(G.pluginInfo.versions)&&G.pluginInfo.versions.length>1?(z.value.selectOption=[],G.pluginInfo.versions.forEach((function(e,n){var t=1===e.beta?" Beta":" Stable";z.value.selectOption.push({title:e.m_version+"."+e.version+t,key:n})})),z.value.selectValue=z.value.selectOption[0].key,z.value.size=!0):G.name.indexOf("php-")>=0?(z.value.selectOption=[],z.value.selectValue=null===(s=G.name)||void 0===s?void 0:s.split("php-")[1],G.pluginInfo.other_php.forEach((function(e,n){z.value.selectOption.push({id:e.id,title:e.name,key:e.version})})),z.value.compile=!0):Array.isArray(G.pluginInfo.versions)?G.pluginInfo.install_version=G.pluginInfo.versions[0]:G.pluginInfo.install_version=G.pluginInfo.version,e.next=34;break;case 31:e.prev=31,e.t1=e.catch(0);case 34:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=r(n().mark((function e(){var t,r,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({plugin_name:G.name,show:1});case 3:t=e.sent,G.PluginUpgradesData=t,U.isBeta?(r=t[t.length-1],G.info=r.beta?r:{}):G.info=t[0],"i"===y.compData.type&&t.forEach((function(e,n){e.m_version+"."+e.version===G.pluginInfo.versions&&(G.info=e)})),G.pluginInfo.versions.length>1&&G.pluginInfo.version?(i=G.pluginInfo.m_version+"."+G.pluginInfo.version,G.pluginInfo.m_version||(i=G.pluginInfo.version),G.pluginInfo.versions.some((function(e,n){var t=S(i,e.m_version+"."+e.version);if(0==t&&(G.newVersion=e.m_version+"."+e.version),-1==t)return G.newVersion=e.m_version+"."+e.version,!0}))):(a=G.pluginInfo.versions[0],G.newVersion=a.m_version+"."+a.version),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=r(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?W():X();case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=r(n().mark((function e(){var t,r,i,a,o,l,u,f,g,v,m,h,d,_,x;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("r"!==y.compData.type){e.next=3;break}return Z(G.pluginInfo.name,G.pluginInfo.tmp_path,{install_opt:"r"}),e.abrupt("return");case 3:if(r=G.pluginInfo,i=r.type,!I.value){e.next=9;break}return e.next=9,re();case 9:if(U.isBeta,!z||5!=i||"更新"===U.title){e.next=26;break}if(!(G.pluginInfo.versions.length>1)){e.next=19;break}return G.pluginInfo.install_version=r.versions.filter((function(e,n){return n===z.value.selectValue}))[0],e.next=17,ne(G.pluginInfo);case 17:e.next=24;break;case 19:return G.pluginInfo.install_version=G.pluginInfo.versions[0],G.pluginInfo.install_type="1",e.next=24,te(G.pluginInfo);case 24:e.next=121;break;case 26:if(!(5===i&&(null===(t=G.pluginInfo.name)||void 0===t?void 0:t.indexOf("php-"))>-1)){e.next=32;break}ee({title:"正在更新，请稍后...",status:!0,soft:{type:i}}),te(G.pluginInfo),e.next=121;break;case 32:if(11!==i&&!y.compData.update){e.next=45;break}return e.prev=33,e.next=36,w.$confirm({title:"安全验证",width:"35rem",useHtml:!0,message:'<span class="text-danger">'.concat("宝塔"===G.pluginInfo.authorauthor?"更新过程可能会导致服务中断,是否继续升级？<br>建议您在服务器负载闲时进行软件更新。":"安装第三方插件存在一定的安全风险，是否继续安装？","</span>"),icon:"warning"});case 36:return e.next=39,Z(r.name,r.tmp_path,r);case 39:return e.abrupt("return",!1);case 42:e.prev=42,e.t0=e.catch(33);case 45:if(""==z.value.selectValue){e.next=74;break}if(Array.isArray(G.pluginInfo.versions)?r.install_version=r.versions.filter((function(e,n){return n===z.value.selectValue}))[0]:r.install_version=r.versions,r.tmp_path){e.next=69;break}return e.prev=50,a={sName:r.name,version:r.install_version.m_version,min_version:r.install_version.version},r.install_type&&(a.type=r.install_type),e.next=55,c(a);case 55:if(!(o=e.sent).msg||o.status){e.next=59;break}return e.abrupt("return",w.$message.error(o.msg));case 59:return e.next=62,Z(o.name,o.tmp_path,o);case 62:e.next=67;break;case 64:e.prev=64,e.t1=e.catch(50);case 67:e.next=72;break;case 69:return e.next=72,Z(r.name,r.tmp_path,r);case 72:e.next=121;break;case 74:if(!(r.version&&r.versions.length>1)){e.next=110;break}l=0;case 77:if(!(l<r.versions.length)){e.next=108;break}if(u=r.versions[l],0!==(f=S(r.version,u.m_version+"."+u.version))){e.next=85;break}return w.$message.error("当前已是最新版本"),e.abrupt("break",108);case 85:if(!(f<0)){e.next=105;break}if(g={sName:r.name,version:r.versions[0].m_version,min_version:r.versions[0].version,upgrade:r.versions[0].m_version},"mysql"!==r.name){e.next=90;break}return e.next=90,w.$confirm({type:"calc",title:"更新MySQL【".concat(r.versions[0].m_version,".").concat(r.versions[0].version,"】"),width:"35rem",useHtml:!0,message:'<span class="text-[#000000] text-[1.2rem]">更新过程可能会导致服务中断,您真的现在就将【MySQL】更新到【'.concat(r.versions[0].m_version,".").concat(r.versions[0].version,"】吗？</span>\n                            <br>\n                            <span>更新数据库有风险，建议在更新前先备份您的数据库.如果您的是云服务器，强烈建议您在更新前做一个快照.建议您在服务器负载闲时进行软件更新.</span>")});case 90:return v=w.$load("正在获取插件安装信息，请稍候"),e.next=93,c(g);case 93:if(m=e.sent,B.value=!0,v.close(),5!==i){e.next=102;break}return e.next=99,p();case 99:w.$emit("close"),e.next=104;break;case 102:return e.next=104,Z(r.name,m.tmp_path,m);case 104:return e.abrupt("break",108);case 105:l++,e.next=77;break;case 108:e.next=121;break;case 110:if("更新"==U.title){e.next=118;break}return h={sName:r.name,version:r.versions[0].m_version,min_version:r.versions[0].version},s(r.versions)&&(h.version=r.versions,h.min_version=r.versions),e.next=115,c(h);case 115:return d=e.sent,e.abrupt("return",Z(r.name,d.tmp_path,d));case 118:u=r.versions[0],_=!!u.beta&&u.beta,x=u.m_version+"."+u.version,r.version!=x&&_==r.is_beta&&(ee({title:"正在更新，请稍后...",status:!0,soft:{type:i}}),te(r));case 121:case"end":return e.stop()}}),e,null,[[33,42],[50,64]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=r(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(G.pluginInfo);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=r(n().mark((function e(t,i,a){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee({title:"正在安装【"+a.title+"】，可能需要几分钟时间，请耐心等候!",status:!0},r(n().mark((function e(){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({plugin_name:t,tmp_path:i,install_opt:a.install_opt});case 2:r=e.sent,se(),B.value=!1,w.$message.request(r);case 6:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),ee=function(e,n){return e.soft||(e.soft={type:10}),5===e.soft.type?(n&&n(),!1):10!==e.soft.type||e.status?(U.speedConfig=e,U.speedConfig.msg="正在下载中...",T(U.speedConfig),d("close"),void(n&&n())):(n&&n(),!1)},ne=function(){var e=r(n().mark((function e(t){var r,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.install_version,i=r.m_version,a=r.version,V(t.title,"-"+i,""),10!==t.type){e.next=11;break}return e.next=7,w.$confirm({title:"信息",width:"35rem",message:"您真的要安装".concat(5!==t.type?t.title:t.title+"-"+i,"吗？")});case 7:return e.next=9,te(t);case 9:case 16:e.next=24;break;case 11:if(!(5===t.type&&t.versions.length<2)){e.next=18;break}return y.compData.type=t.install_opt,y.compData.name=t.name,e.next=16,Y(!1);case 18:return e.next=21,te(t);case 21:if(5===t.type){e.next=24;break}return e.next=24,ie({pluginName:t.name,name:t.title,version:i,minVersion:a});case 24:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),te=function(){var e=r(n().mark((function e(t){var r,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=w.$load("正在获取插件安装信息，请稍候"),10!==t.type||0!==t.endtime){e.next=5;break}return e.next=5,f({pid:t.id,cycle:999,type:0});case 5:return e.next=8,c({sName:t.name,version:t.install_version.m_version,min_version:t.install_version.version,type:t.install_type?t.install_type:""});case 8:if(i=e.sent,r.close(),!i.install_opt){e.next=15;break}return y.compData.type=i.install_opt,y.compData.name=i.name,e.abrupt("return",Y(!1));case 15:return i.size,e.next=18,g();case 18:if(!(e.sent.data>0&&5===t.type)){e.next=24;break}if(w.$emit("close"),p(),i.status){e.next=24;break}return e.abrupt("return",w.$message.error(i.msg));case 24:i.msg.indexOf("依赖以下软件")>-1&&(y.compData.type=i.install_opt,y.compData.name=i.name,z.value.size=!0,Y(!1)),e.next=30;break;case 27:e.prev=27,e.t0=e.catch(0);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(n){return e.apply(this,arguments)}}(),re=function(){var e=r(n().mark((function e(){var t,r,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=["openlitespeed","nginx","apache"],e.next=4,L();case 4:r=e.sent,i=/\[(.*)\]/,r.task&&r.task.forEach((function(e,n){var r=e.name.match(i),a=r[1].split("-");return t.indexOf(G.name)>-1&&t.indexOf(a[0])>-1?w.$message.error("存在同类型的环境正在安装，请删除重试！"):r[1]===G.name||a[0]===G.name?w.$message.error("当前插件正在安装，请稍后重试！"):void 0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=r(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.speedConfig=t,e.next=3,F(U.speedConfig);case 3:if(r){e.next=7;break}e.next=16;break;case 7:return e.prev=7,e.next=10,v({plugin_name:t.pluginName});case 10:e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7);case 16:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(n,t){return e.apply(this,arguments)}}(),ae=$().getSoftTableList,se=function(){window.location.href.indexOf("soft")>-1&&ae(),x&&x.callBack&&x.callBack(),G.pluginInfo.callback&&G.pluginInfo.callback(),x||(window.location.reload(),localStorage.clear(),sessionStorage.clear())};return E((function(){return y.compData}),(function(){Y(!0)})),D((function(){U.isBeta=!!y.compData.isBeta&&y.compData.isBeta,G.name=y.compData.name,Y(!0),q.imgArr=[],z.value={selectValue:"",selectOption:[],compile:!1,phpVersion:"",size:!1},G.info={}})),{__sfc:!0,props:y,softData:x,pluginInfo:b,emits:d,vm:w,isInstall:I,speedInstallView:B,state:U,pluginMsg:G,pluginShow:q,config:z,pluginImgSrc:H,pluginUpdateTime:Q,tagList:R,installPlugin:Y,handleVersionChange:function(e){z.value.selectValue=e,G.PluginUpgradesData.forEach((function(n,t){t==Number(e)&&(G.changeUpdateTime=a(n.update_time,"yyyy/MM/dd"))}))},showPluginInfo:J,isEmptyObject:function(e){return 0===Object.keys(e).length},installEvent:K,installPluginEvent:W,installEnviromentEvent:X,inputPackage:Z,showSpeedWindow:ee,installSoft:ne,getInstallPlugin:te,getRealtimeTasks:re,monitorSoftDownloadSpeed:ie,getSoftTableList:ae,closeInstall:se,isString:s,compileInstallDialog:P,historyVersionDialog:A}}});e("default",h(t,(function(){var e,n,t,r,i=this,a=i._self._c,s=i._self._setupProxy;return a("div",{staticClass:"install-plugin"},[a("div",{staticClass:"install-plugin-header"},[a("div",{staticClass:"install-plugin-header-left"},[a(d,{staticClass:"h-[4rem] mt-[0.6rem]",attrs:{src:s.pluginImgSrc,custom:!0}}),a("div",{staticClass:"install-plugin-header-left-title"},[a("div",{staticClass:"flex items-center text-[#333]"},[a("span",{staticClass:"text-[2rem] font-bold"},[i._v(i._s((null===(e=s.pluginMsg.pluginInfo)||void 0===e?void 0:e.title)||(null===(n=s.pluginMsg.pluginInfo)||void 0===n?void 0:n.name)))]),s.config.compile?i._e():a("div",{staticClass:"install-plugin-header-left-title-tag"},[i._l(s.tagList,(function(e,n){return[!e||"boolean"!=typeof e[0]&&e[0]!==s.pluginMsg.pluginInfo.type?i._e():a("div",{key:n,staticClass:"install-plugin-header-left-title-tag-item",class:e[2]+" border-[0.1rem]"},[e&&"boolean"==typeof e[0]?a("i",{staticClass:"plugin_official_icon"}):i._e(),a("span",[i._v(i._s(e[1]))])])]}))],2)]),5!==s.pluginMsg.pluginInfo.type?a("div",{staticClass:"mt-[1rem]"},[a("span",{staticClass:"font-normal"},[i._v("更新时间：")]),a("span",{staticClass:"font-normal"},[i._v(" "+i._s(s.pluginUpdateTime)+" ")]),"更新"!==s.state.title?a(w):i._e(),"更新"!==s.state.title?a(y,{staticClass:"font-normal",on:{click:function(e){return s.historyVersionDialog(s.pluginMsg.pluginInfo)}}},[i._v(" 更新日志 ")]):i._e()],1):i._e(),a("div",{staticClass:"flex items-center mt-[1rem]"},["更新"===s.state.title?a("span",{staticClass:"font-normal"},[i._v(" 最新版本： "),a("span",[i._v(" "+i._s(s.state.isBeta?"测试版"+s.pluginMsg.info.m_version+"."+s.pluginMsg.info.version:s.pluginMsg.newVersion)+" ")])]):i._e(),s.config&&!s.config.selectOption.length?a("span",{staticClass:"ml-[.5rem] font-normal"},[i._v("当前版本："+i._s(Array.isArray(s.pluginMsg.pluginInfo.versions)?s.pluginMsg.pluginInfo.versions[0].m_version+"."+s.pluginMsg.pluginInfo.versions[0].version:s.isString(s.pluginMsg.pluginInfo.versions)?s.pluginMsg.pluginInfo.versions:s.pluginMsg.pluginInfo.version))]):i._e()])])],1),a("div",{staticClass:"flex items-center"},[s.config&&(s.config.selectOption.length||s.config.phpVersion)&&"安装"==s.state.title?a("div",[s.config.phpVersion?a("span",[i._v(i._s(s.config.phpVersion))]):[a(b,{staticClass:"mr-[1rem] w-[11.6rem]",attrs:{options:s.config.selectOption,change:s.handleVersionChange},model:{value:s.config.selectValue,callback:function(e){i.$set(s.config,"selectValue",e)},expression:"config.selectValue"}})]],2):i._e(),s.config&&s.config.compile&&"安装"==s.state.title?a(_,{attrs:{type:"default",disabled:s.pluginMsg.pluginInfo.dependnet.length>0},on:{click:function(e){s.compileInstallDialog(s.installEvent,s.isEmptyObject(s.pluginMsg.pluginInfo.dependnet)||s.state.dependnetFlag)}}},[i._v(" 编译安装 ")]):i._e(),a(_,{on:{click:function(e){s.installEvent(s.isEmptyObject(s.pluginMsg.pluginInfo.dependnet)||s.state.dependnetFlag)}}},[a("span",{staticClass:"flex items-center text-[1.4rem] font-normal"},["更新"===s.state.title?a("span",{staticClass:"update_plugin_button_icon"}):i._e(),i._v(" "+i._s(s.config&&5==s.pluginMsg.pluginInfo.type&&"更新"!=s.state.title?"极速安装":"立即"+s.state.title)+" ")])])],1)]),a("hr",{staticClass:"my-[3rem] border-[#eee]"}),s.pluginShow.imgArr.length?a("div",{staticClass:"install-plugin-introduce"},[a("div",{staticClass:"install-plugin-introduce-left"},[a("ul",{staticClass:"install-plugin-introduce-left-tab"},i._l(s.pluginShow.imgArr,(function(e,n){return a("li",{key:n,class:n===s.pluginShow.imgArrValue?"on":"",on:{click:function(e){s.pluginShow.imgArrValue=n}}},[i._v(" "+i._s(e.title)+" ")])})),0)]),a(x,{staticClass:"w-[40rem] max-h-[100%]",attrs:{src:s.pluginShow.imgArr[s.pluginShow.imgArrValue].src}})],1):i._e(),a("div",{staticClass:"install-plugin-detail"},["更新"!==s.state.title?[a("div",{staticClass:"install-plugin-detail-title"},[i._v("插件说明：")]),a("div",{staticClass:"install-plugin-detail-content",domProps:{innerHTML:i._s(s.pluginMsg.pluginInfo.ps)}})]:[a("div",{staticClass:"install-plugin-detail-title"},[i._v("更新日志：")]),a("div",{staticClass:"install-plugin-detail-content"},[i._v(" "+i._s(s.pluginMsg.pluginInfo.update_msg?s.pluginMsg.pluginInfo.update_msg:"暂无内容")+" ")])]],2),a("ul",{staticClass:"install-plugin-helper"},[s.config?i._e():a("li",[a("span",[i._v(" 插件来源"+i._s(s.pluginMsg.pluginInfo.author)+"，网址 "),a(y,{staticClass:"decoration-revert",attrs:{href:s.pluginMsg.pluginInfo.home,target:"_blank"}},[i._v(" "+i._s(s.pluginMsg.pluginInfo.home)+" ")])],1)]),i._m(0),"{}"!==JSON.stringify(s.pluginMsg.pluginInfo.dependnet)?a("li",[a("span",{staticClass:"red"},[i._v("请手动安装插件依赖环境，如果未安装，将无法正常使用该插件")])]):i._e(),null!==(t=s.pluginMsg.pluginInfo)&&void 0!==t&&t.update&&"mysql"===(null===(r=s.pluginMsg.pluginInfo)||void 0===r?void 0:r.name)?a("li",[a("span",{staticClass:"redr"},[i._v("更新数据库有风险,建议在更新前,先备份您的数据库！")])]):i._e(),!s.pluginMsg.pluginInfo.update?a("li",[a("span",[i._v("安装过程可能需要几分钟时间，请耐心等候!")])]):[i._m(1),i._m(2)]],2)])}),[function(){var e=this,n=e._self._c;return e._self._setupProxy,n("li",[n("span",[e._v("如果已存在此插件，文件将被替换！")])])},function(){var e=this,n=e._self._c;return e._self._setupProxy,n("li",[n("span",{staticClass:"red"},[e._v("更新过程可能会导致服务中断,请须知")])])},function(){var e=this,n=e._self._c;return e._self._setupProxy,n("li",[n("span",{staticClass:"red"},[e._v("建议您在服务器负载闲时进行软件更新")])])}],!1,null,"339e42ee",null,null).exports)}}}))}();
