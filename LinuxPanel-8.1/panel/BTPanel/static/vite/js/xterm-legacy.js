!function(){function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return i};var t,i={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},s="function"==typeof Symbol?Symbol:{},c=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",h=s.toStringTag||"@@toStringTag";function u(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(t){u=function(e,t,i){return e[t]=i}}function d(e,t,i,r){var n=t&&t.prototype instanceof C?t:C,o=Object.create(n.prototype),s=new E(r||[]);return a(o,"_invoke",{value:R(e,i,s)}),o}function f(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}i.wrap=d;var v="suspendedStart",_="suspendedYield",g="executing",p="completed",y={};function C(){}function m(){}function w(){}var x={};u(x,c,(function(){return this}));var b=Object.getPrototypeOf,L=b&&b(b(P([])));L&&L!==n&&o.call(L,c)&&(x=L);var S=w.prototype=C.prototype=Object.create(x);function M(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function i(n,a,s,c){var l=f(e[n],e,a);if("throw"!==l.type){var h=l.arg,u=h.value;return u&&"object"==r(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,s,c)}),(function(e){i("throw",e,s,c)})):t.resolve(u).then((function(e){h.value=e,s(h)}),(function(e){return i("throw",e,s,c)}))}c(l.arg)}var n;a(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,n){i(e,r,t,n)}))}return n=n?n.then(o,o):o()}})}function R(e,i,r){var n=v;return function(o,a){if(n===g)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=A(s,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===v)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=g;var l=f(e,i,r);if("normal"===l.type){if(n=r.done?p:_,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=p,r.method="throw",r.arg=l.arg)}}}function A(e,i){var r=i.method,n=e.iterator[r];if(n===t)return i.delegate=null,"throw"===r&&e.iterator.return&&(i.method="return",i.arg=t,A(e,i),"throw"===i.method)||"return"!==r&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=f(n,e.iterator,i.arg);if("throw"===o.type)return i.method="throw",i.arg=o.arg,i.delegate=null,y;var a=o.arg;return a?a.done?(i[e.resultName]=a.value,i.next=e.nextLoc,"return"!==i.method&&(i.method="next",i.arg=t),i.delegate=null,y):a:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,y)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function P(e){if(e||""===e){var i=e[c];if(i)return i.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function i(){for(;++n<e.length;)if(o.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=t,i.done=!0,i};return a.next=a}}throw new TypeError(r(e)+" is not iterable")}return m.prototype=w,a(S,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:m,configurable:!0}),m.displayName=u(w,h,"GeneratorFunction"),i.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},i.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,h,"GeneratorFunction")),e.prototype=Object.create(S),e},i.awrap=function(e){return{__await:e}},M(k.prototype),u(k.prototype,l,(function(){return this})),i.AsyncIterator=k,i.async=function(e,t,r,n,o){void 0===o&&(o=Promise);var a=new k(d(e,t,r,n),o);return i.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},M(S),u(S,h,"Generator"),u(S,c,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),i.keys=function(e){var t=Object(e),i=[];for(var r in t)i.push(r);return i.reverse(),function e(){for(;i.length;){var r=i.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},i.values=P,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var i in this)"t"===i.charAt(0)&&o.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var i=this;function r(r,n){return s.type="throw",s.arg=e,i.next=r,n&&(i.method="next",i.arg=t),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var a=n?n.completion:{};return a.type=e,a.arg=t,n?(this.method="next",this.next=n.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),D(i),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var r=i.completion;if("throw"===r.type){var n=r.arg;D(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,i,r){return this.delegate={iterator:P(e),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=t),y}},i}function t(e,t,i,r,n,o,a){try{var s=e[o](a),c=s.value}catch(l){return void i(l)}s.done?t(c):Promise.resolve(c).then(r,n)}function i(e){return function(){var i=this,r=arguments;return new Promise((function(n,o){var a=e.apply(i,r);function s(e){t(a,n,o,s,c,"next",e)}function c(e){t(a,n,o,s,c,"throw",e)}s(void 0)}))}}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var r,n,o,a,s=[],c=!0,l=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;c=!1}else for(;!(c=(r=o.call(i)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,n=e}finally{try{if(!c&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(l)throw n}}return s}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(arguments.length<3?e:i):n.value}},a.apply(this,arguments)}function s(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=c(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw o}}}}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function d(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,i){return t=g(t),function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(e,_()?Reflect.construct(t,i||[],g(e).constructor):t.apply(e,i))}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function C(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function m(e,t,i){return(t=w(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function w(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:String(t)}System.register(["./index-legacy109.js?v=1714377894636","./index-legacy85.js?v=1714377894636","./element-lib-legacy.js?v=1714377894636","./main-legacy.js?v=1714377894636","./form-item-legacy.js?v=1714377894636","./radio-button-legacy.js?v=1714377894636","./radio-group-legacy.js?v=1714377894636","./form-legacy.js?v=1714377894636","./vue-lib-legacy.js?v=1714377894636","./index-legacy110.js?v=1714377894636","./locales-lib-legacy.js?v=1714377894636"],(function(t,c){"use strict";var l,u,_,y,w,x,b,L,S,M,k,R,A,T,D,E,P,O;return{setters:[function(e){l=e._},function(e){u=e._},function(e){_=e.w,y=e.x,w=e.y,x=e.ab},function(e){b=e.I,L=e.aQ,S=e.aR,M=e.n},null,null,null,null,function(e){k=e.z,R=e.A,A=e.e,T=e.b,D=e.v,E=e.j},function(e){P=e.i,O=e.p},null],execute:function(){var c=k("XTERM-STORE",{state:function(){return{refreshServerTable:!1,refreshCommonTable:!1}},actions:{}}),B=t("g",(function(){var e=c();return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?C(Object(i),!0).forEach((function(t){m(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({refs:R(e)},e)})),I=(t("a",(function(){return b.post("xterm/get_host_list")})),function(e){return b.post("xterm/create_host",{data:e,check:"msg"})}),F=(t("r",(function(e,t){return b.post("xterm/remove_host",{data:{host:e,port:t},check:"msg"})})),t("f",(function(){return b.post("ssh_security/get_login_record")})),t("s",(function(e){var t=e?"stop_login_record":"start_login_record";return b.post("ssh_security/".concat(t))})),t("d",(function(e){return b.post("ssh_security/get_record_list",{data:e,check:"msg"})})),t("b",(function(){return b.post("xterm/get_command_list")})),t("h",(function(e){return b.post("xterm/create_command",{data:e,check:"msg"})})),t("m",(function(e){return b.post("xterm/modify_command",{data:e,check:"msg"})})),t("c",(function(e){return b.post("xterm/remove_command",{data:{title:e},check:"msg"})})),t("e",(function(){return b.post("xterm/out_command",{check:"msg"})})),{exports:{}});!function(e,t){self,e.exports=function(){var e={903:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BaseRenderLayer=void 0;var r=i(503),n=i(627),o=i(237),a=i(860),s=i(374),c=i(296),l=i(855),u=i(274),v=i(859),_=i(399),g=i(345),y=function(e){function t(e,i,n,o,a,s,l,d,_,p){var y;return h(this,t),(y=f(this,t))._terminal=e,y._container=i,y._alpha=a,y._themeService=s,y._bufferService=l,y._optionsService=d,y._decorationService=_,y._coreBrowserService=p,y._deviceCharWidth=0,y._deviceCharHeight=0,y._deviceCellWidth=0,y._deviceCellHeight=0,y._deviceCharLeft=0,y._deviceCharTop=0,y._selectionModel=(0,c.createSelectionRenderModel)(),y._bitmapGenerator=[],y._onAddTextureAtlasCanvas=y.register(new g.EventEmitter),y.onAddTextureAtlasCanvas=y._onAddTextureAtlasCanvas.event,y._cellColorResolver=new u.CellColorResolver(y._terminal,y._selectionModel,y._decorationService,y._coreBrowserService,y._themeService),y._canvas=document.createElement("canvas"),y._canvas.classList.add("xterm-".concat(n,"-layer")),y._canvas.style.zIndex=o.toString(),y._initCanvas(),y._container.appendChild(y._canvas),y._refreshCharAtlas(y._themeService.colors),y.register(y._themeService.onChangeColors((function(e){y._refreshCharAtlas(e),y.reset()}))),y.register((0,v.toDisposable)((function(){var e;(0,r.removeElementFromParent)(y._canvas),null===(e=y._charAtlas)||void 0===e||e.dispose()}))),y}return p(t,e),d(t,[{key:"canvas",get:function(){return this._canvas}},{key:"cacheCanvas",get:function(){var e;return null===(e=this._charAtlas)||void 0===e?void 0:e.pages[0].canvas}},{key:"_initCanvas",value:function(){this._ctx=(0,s.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}},{key:"handleBlur",value:function(){}},{key:"handleFocus",value:function(){}},{key:"handleCursorMove",value:function(){}},{key:"handleGridChanged",value:function(e,t){}},{key:"handleSelectionChanged",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._selectionModel.update(this._terminal,e,t,i)}},{key:"_setTransparency",value:function(e){if(e!==this._alpha){var t=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,t),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}}},{key:"_refreshCharAtlas",value:function(e){var t;if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){null===(t=this._charAtlasDisposable)||void 0===t||t.dispose(),this._charAtlas=(0,n.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,e,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable=(0,g.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(var i=0;i<this._charAtlas.pages.length;i++)this._bitmapGenerator[i]=new C(this._charAtlas.pages[i].canvas)}}},{key:"resize",value:function(e){this._deviceCellWidth=e.device.cell.width,this._deviceCellHeight=e.device.cell.height,this._deviceCharWidth=e.device.char.width,this._deviceCharHeight=e.device.char.height,this._deviceCharLeft=e.device.char.left,this._deviceCharTop=e.device.char.top,this._canvas.width=e.device.canvas.width,this._canvas.height=e.device.canvas.height,this._canvas.style.width="".concat(e.css.canvas.width,"px"),this._canvas.style.height="".concat(e.css.canvas.height,"px"),this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}},{key:"clearTextureAtlas",value:function(){var e;null===(e=this._charAtlas)||void 0===e||e.clearTexture()}},{key:"_fillCells",value:function(e,t,i,r){this._ctx.fillRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight)}},{key:"_fillMiddleLineAtCells",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(e*this._deviceCellWidth,(t+1)*this._deviceCellHeight-r-this._coreBrowserService.dpr,i*this._deviceCellWidth,this._coreBrowserService.dpr)}},{key:"_fillBottomLineAtCells",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._ctx.fillRect(e*this._deviceCellWidth,(t+1)*this._deviceCellHeight+r-this._coreBrowserService.dpr-1,i*this._deviceCellWidth,this._coreBrowserService.dpr)}},{key:"_curlyUnderlineAtCell",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;var r=this._coreBrowserService.dpr;this._ctx.lineWidth=r;for(var n=0;n<i;n++){var o=(e+n)*this._deviceCellWidth,a=(e+n+.5)*this._deviceCellWidth,s=(e+n+1)*this._deviceCellWidth,c=(t+1)*this._deviceCellHeight-r-1,l=c-r,h=c+r;this._ctx.moveTo(o,c),this._ctx.bezierCurveTo(o,l,a,l,a,c),this._ctx.bezierCurveTo(a,h,s,h,s,c)}this._ctx.stroke(),this._ctx.restore()}},{key:"_dottedUnderlineAtCell",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;var r=this._coreBrowserService.dpr;this._ctx.lineWidth=r,this._ctx.setLineDash([2*r,r]);var n=e*this._deviceCellWidth,o=(t+1)*this._deviceCellHeight-r-1;this._ctx.moveTo(n,o);for(var a=0;a<i;a++){var s=(e+i+a)*this._deviceCellWidth;this._ctx.lineTo(s,o)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}},{key:"_dashedUnderlineAtCell",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;var r=this._coreBrowserService.dpr;this._ctx.lineWidth=r,this._ctx.setLineDash([4*r,3*r]);var n=e*this._deviceCellWidth,o=(e+i)*this._deviceCellWidth,a=(t+1)*this._deviceCellHeight-r-1;this._ctx.moveTo(n,a),this._ctx.lineTo(o,a),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}},{key:"_fillLeftLineAtCell",value:function(e,t,i){this._ctx.fillRect(e*this._deviceCellWidth,t*this._deviceCellHeight,this._coreBrowserService.dpr*i,this._deviceCellHeight)}},{key:"_strokeRectAtCell",value:function(e,t,i,r){var n=this._coreBrowserService.dpr;this._ctx.lineWidth=n,this._ctx.strokeRect(e*this._deviceCellWidth+n/2,t*this._deviceCellHeight+n/2,i*this._deviceCellWidth-n,r*this._deviceCellHeight-n)}},{key:"_clearAll",value:function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}},{key:"_clearCells",value:function(e,t,i,r){this._alpha?this._ctx.clearRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(e*this._deviceCellWidth,t*this._deviceCellHeight,i*this._deviceCellWidth,r*this._deviceCellHeight))}},{key:"_fillCharTrueColor",value:function(e,t,i){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=o.TEXT_BASELINE,this._clipRow(i);var r=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(r=(0,a.tryDrawCustomChar)(this._ctx,e.getChars(),t*this._deviceCellWidth,i*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),r||this._ctx.fillText(e.getChars(),t*this._deviceCellWidth+this._deviceCharLeft,i*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}},{key:"_drawChars",value:function(e,t,i){var r,n,o,a=e.getChars();this._cellColorResolver.resolve(e,t,this._bufferService.buffer.ydisp+i),(o=a&&a.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(a,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext):this._charAtlas.getRasterizedGlyph(e.getCode()||l.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext)).size.x&&o.size.y&&(this._ctx.save(),this._clipRow(i),this._charAtlas.pages[o.texturePage].version!==(null===(r=this._bitmapGenerator[o.texturePage])||void 0===r?void 0:r.version)&&(this._bitmapGenerator[o.texturePage]||(this._bitmapGenerator[o.texturePage]=new C(this._charAtlas.pages[o.texturePage].canvas)),this._bitmapGenerator[o.texturePage].refresh(),this._bitmapGenerator[o.texturePage].version=this._charAtlas.pages[o.texturePage].version),this._ctx.drawImage((null===(n=this._bitmapGenerator[o.texturePage])||void 0===n?void 0:n.bitmap)||this._charAtlas.pages[o.texturePage].canvas,o.texturePosition.x,o.texturePosition.y,o.size.x,o.size.y,t*this._deviceCellWidth+this._deviceCharLeft-o.offset.x,i*this._deviceCellHeight+this._deviceCharTop-o.offset.y,o.size.x,o.size.y),this._ctx.restore())}},{key:"_clipRow",value:function(e){this._ctx.beginPath(),this._ctx.rect(0,e*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}},{key:"_getFont",value:function(e,t){return"".concat(t?"italic":""," ").concat(e?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight," ").concat(this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr,"px ").concat(this._optionsService.rawOptions.fontFamily)}}]),t}(v.Disposable);t.BaseRenderLayer=y;var C=function(){function e(t){h(this,e),this._canvas=t,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}return d(e,[{key:"bitmap",get:function(){return this._bitmap}},{key:"refresh",value:function(){var e=this;this._bitmap=void 0,_.isSafari||(void 0===this._commitTimeout&&(this._commitTimeout=window.setTimeout((function(){return e._generate()}),100)),1===this._state&&(this._state=2))}},{key:"_generate",value:function(){var e=this;0===this._state&&(this._bitmap=void 0,this._state=1,window.createImageBitmap(this._canvas).then((function(t){2===e._state?e.refresh():e._bitmap=t,e._state=0})),this._commitTimeout&&(this._commitTimeout=void 0))}}]),e}()},949:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasRenderer=void 0;var r=i(627),n=i(56),o=i(374),a=i(345),c=i(859),l=i(873),u=i(43),v=i(630),_=i(744),g=function(e){function t(e,i,d,g,p,y,C,m,w,x,b){var L;h(this,t),(L=f(this,t))._terminal=e,L._screenElement=i,L._bufferService=g,L._charSizeService=p,L._optionsService=y,L._coreBrowserService=w,L._themeService=b,L._onRequestRedraw=L.register(new a.EventEmitter),L.onRequestRedraw=L._onRequestRedraw.event,L._onChangeTextureAtlas=L.register(new a.EventEmitter),L.onChangeTextureAtlas=L._onChangeTextureAtlas.event,L._onAddTextureAtlasCanvas=L.register(new a.EventEmitter),L.onAddTextureAtlasCanvas=L._onAddTextureAtlasCanvas.event;var S=L._optionsService.rawOptions.allowTransparency;L._renderLayers=[new _.TextRenderLayer(L._terminal,L._screenElement,0,S,L._bufferService,L._optionsService,C,x,L._coreBrowserService,b),new v.SelectionRenderLayer(L._terminal,L._screenElement,1,L._bufferService,L._coreBrowserService,x,L._optionsService,b),new u.LinkRenderLayer(L._terminal,L._screenElement,2,d,L._bufferService,L._optionsService,x,L._coreBrowserService,b),new l.CursorRenderLayer(L._terminal,L._screenElement,3,L._onRequestRedraw,L._bufferService,L._optionsService,m,L._coreBrowserService,x,b)];var M,k=s(L._renderLayers);try{for(k.s();!(M=k.n()).done;){var R=M.value;(0,a.forwardEvent)(R.onAddTextureAtlasCanvas,L._onAddTextureAtlasCanvas)}}catch(A){k.e(A)}finally{k.f()}return L.dimensions=(0,o.createRenderDimensions)(),L._devicePixelRatio=L._coreBrowserService.dpr,L._updateDimensions(),L.register((0,n.observeDevicePixelDimensions)(L._renderLayers[0].canvas,L._coreBrowserService.window,(function(e,t){return L._setCanvasDevicePixelDimensions(e,t)}))),L.register((0,c.toDisposable)((function(){var e,t=s(L._renderLayers);try{for(t.s();!(e=t.n()).done;)e.value.dispose()}catch(A){t.e(A)}finally{t.f()}(0,r.removeTerminalFromCache)(L._terminal)}))),L}return p(t,e),d(t,[{key:"textureAtlas",get:function(){return this._renderLayers[0].cacheCanvas}},{key:"handleDevicePixelRatioChange",value:function(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}},{key:"handleResize",value:function(e,t){this._updateDimensions();var i,r=s(this._renderLayers);try{for(r.s();!(i=r.n()).done;)i.value.resize(this.dimensions)}catch(n){r.e(n)}finally{r.f()}this._screenElement.style.width="".concat(this.dimensions.css.canvas.width,"px"),this._screenElement.style.height="".concat(this.dimensions.css.canvas.height,"px")}},{key:"handleCharSizeChanged",value:function(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}},{key:"handleBlur",value:function(){this._runOperation((function(e){return e.handleBlur()}))}},{key:"handleFocus",value:function(){this._runOperation((function(e){return e.handleFocus()}))}},{key:"handleSelectionChanged",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._runOperation((function(r){return r.handleSelectionChanged(e,t,i)})),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}},{key:"handleCursorMove",value:function(){this._runOperation((function(e){return e.handleCursorMove()}))}},{key:"clear",value:function(){this._runOperation((function(e){return e.reset()}))}},{key:"_runOperation",value:function(e){var t,i=s(this._renderLayers);try{for(i.s();!(t=i.n()).done;)e(t.value)}catch(r){i.e(r)}finally{i.f()}}},{key:"renderRows",value:function(e,t){var i,r=s(this._renderLayers);try{for(r.s();!(i=r.n()).done;)i.value.handleGridChanged(e,t)}catch(n){r.e(n)}finally{r.f()}}},{key:"clearTextureAtlas",value:function(){var e,t=s(this._renderLayers);try{for(t.s();!(e=t.n()).done;)e.value.clearTextureAtlas()}catch(i){t.e(i)}finally{t.f()}}},{key:"_updateDimensions",value:function(){if(this._charSizeService.hasValidSize){var e=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*e),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=1===this._optionsService.rawOptions.lineHeight?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}}},{key:"_setCanvasDevicePixelDimensions",value:function(e,t){this.dimensions.device.canvas.height=t,this.dimensions.device.canvas.width=e;var i,r=s(this._renderLayers);try{for(r.s();!(i=r.n()).done;)i.value.resize(this.dimensions)}catch(n){r.e(n)}finally{r.f()}this._requestRedrawViewport()}},{key:"_requestRedrawViewport",value:function(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}]),t}(c.Disposable);t.CanvasRenderer=g},873:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CursorRenderLayer=void 0;var r=i(903),n=i(782),o=i(859),s=function(e){function t(e,i,r,a,s,c,l,u,d,_){var g;return h(this,t),(g=f(this,t,[e,i,"cursor",r,!0,_,s,c,d,u]))._onRequestRedraw=a,g._coreService=l,g._cell=new n.CellData,g._state={x:0,y:0,isFocused:!1,style:"",width:0},g._cursorRenderers={bar:g._renderBarCursor.bind(v(g)),block:g._renderBlockCursor.bind(v(g)),underline:g._renderUnderlineCursor.bind(v(g))},g.register(c.onOptionChange((function(){return g._handleOptionsChanged()}))),g.register((0,o.toDisposable)((function(){var e;null===(e=g._cursorBlinkStateManager)||void 0===e||e.dispose(),g._cursorBlinkStateManager=void 0}))),g}return p(t,e),d(t,[{key:"resize",value:function(e){a(g(t.prototype),"resize",this).call(this,e),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}},{key:"reset",value:function(){var e;this._clearCursor(),null===(e=this._cursorBlinkStateManager)||void 0===e||e.restartBlinkAnimation(),this._handleOptionsChanged()}},{key:"handleBlur",value:function(){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}},{key:"handleFocus",value:function(){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}},{key:"_handleOptionsChanged",value:function(){var e,t=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new c(this._coreBrowserService.isFocused,(function(){t._render(!0)}),this._coreBrowserService)):(null===(e=this._cursorBlinkStateManager)||void 0===e||e.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}},{key:"handleCursorMove",value:function(){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.restartBlinkAnimation()}},{key:"handleGridChanged",value:function(e,t){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()}},{key:"_render",value:function(e){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var t=this._bufferService.buffer.ybase+this._bufferService.buffer.y,i=t-this._bufferService.buffer.ydisp;if(i<0||i>=this._bufferService.rows)this._clearCursor();else{var r=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(t).loadCell(r,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;var n=this._optionsService.rawOptions.cursorStyle;return n&&"block"!==n?this._cursorRenderers[n](r,i,this._cell):this._renderBlurCursor(r,i,this._cell),this._ctx.restore(),this._state.x=r,this._state.y=i,this._state.isFocused=!1,this._state.style=n,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===r&&this._state.y===i&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](r,i,this._cell),this._ctx.restore(),this._state.x=r,this._state.y=i,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()}},{key:"_clearCursor",value:function(){this._state&&(this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}},{key:"_renderBarCursor",value:function(e,t,i){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(e,t,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}},{key:"_renderBlockCursor",value:function(e,t,i){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(e,t,i.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(i,e,t),this._ctx.restore()}},{key:"_renderUnderlineCursor",value:function(e,t,i){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(e,t),this._ctx.restore()}},{key:"_renderBlurCursor",value:function(e,t,i){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(e,t,i.getWidth(),1),this._ctx.restore()}}]),t}(r.BaseRenderLayer);t.CursorRenderLayer=s;var c=function(){function e(t,i,r){h(this,e),this._renderCallback=i,this._coreBrowserService=r,this.isCursorVisible=!0,t&&this._restartInterval()}return d(e,[{key:"isPaused",get:function(){return!(this._blinkStartTimeout||this._blinkInterval)}},{key:"dispose",value:function(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}},{key:"restartBlinkAnimation",value:function(){var e=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=void 0}))))}},{key:"_restartInterval",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:600;this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout((function(){if(e._animationTimeRestarted){var t=600-(Date.now()-e._animationTimeRestarted);if(e._animationTimeRestarted=void 0,t>0)return void e._restartInterval(t)}e.isCursorVisible=!1,e._animationFrame=e._coreBrowserService.window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=void 0})),e._blinkInterval=e._coreBrowserService.window.setInterval((function(){if(e._animationTimeRestarted){var t=600-(Date.now()-e._animationTimeRestarted);return e._animationTimeRestarted=void 0,void e._restartInterval(t)}e.isCursorVisible=!e.isCursorVisible,e._animationFrame=e._coreBrowserService.window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=void 0}))}),600)}),t)}},{key:"pause",value:function(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}},{key:"resume",value:function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}]),e}()},574:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.GridCache=void 0,t.GridCache=function(){function e(){h(this,e),this.cache=[]}return d(e,[{key:"resize",value:function(e,t){for(var i=0;i<e;i++){this.cache.length<=i&&this.cache.push([]);for(var r=this.cache[i].length;r<t;r++)this.cache[i].push(void 0);this.cache[i].length=t}this.cache.length=e}},{key:"clear",value:function(){for(var e=0;e<this.cache.length;e++)for(var t=0;t<this.cache[e].length;t++)this.cache[e][t]=void 0}}]),e}()},43:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderLayer=void 0;var r=i(903),n=i(237),o=i(197),s=function(e){function t(e,i,r,n,o,a,s,c,l){var u;return h(this,t),(u=f(this,t,[e,i,"link",r,!0,l,o,a,s,c])).register(n.onShowLinkUnderline((function(e){return u._handleShowLinkUnderline(e)}))),u.register(n.onHideLinkUnderline((function(e){return u._handleHideLinkUnderline(e)}))),u}return p(t,e),d(t,[{key:"resize",value:function(e){a(g(t.prototype),"resize",this).call(this,e),this._state=void 0}},{key:"reset",value:function(){this._clearCurrentLink()}},{key:"_clearCurrentLink",value:function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var e=this._state.y2-this._state.y1-1;e>0&&this._clearCells(0,this._state.y1+1,this._state.cols,e),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}},{key:"_handleShowLinkUnderline",value:function(e){if(e.fg===n.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:e.fg&&(0,o.is256Color)(e.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[e.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,e.y1===e.y2)this._fillBottomLineAtCells(e.x1,e.y1,e.x2-e.x1);else{this._fillBottomLineAtCells(e.x1,e.y1,e.cols-e.x1);for(var t=e.y1+1;t<e.y2;t++)this._fillBottomLineAtCells(0,t,e.cols);this._fillBottomLineAtCells(0,e.y2,e.x2)}this._state=e}},{key:"_handleHideLinkUnderline",value:function(e){this._clearCurrentLink()}}]),t}(r.BaseRenderLayer);t.LinkRenderLayer=s},630:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRenderLayer=void 0;var r=function(e){function t(e,i,r,n,o,a,s,c){var l;return h(this,t),(l=f(this,t,[e,i,"selection",r,!0,c,n,s,a,o]))._clearState(),l}return p(t,e),d(t,[{key:"_clearState",value:function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}},{key:"resize",value:function(e){a(g(t.prototype),"resize",this).call(this,e),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}},{key:"reset",value:function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}},{key:"handleBlur",value:function(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}},{key:"handleFocus",value:function(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}},{key:"handleSelectionChanged",value:function(e,i,r){a(g(t.prototype),"handleSelectionChanged",this).call(this,e,i,r),this._redrawSelection(e,i,r)}},{key:"_redrawSelection",value:function(e,t,i){if(this._didStateChange(e,t,i,this._bufferService.buffer.ydisp))if(this._clearAll(),e&&t){var r=e[1]-this._bufferService.buffer.ydisp,n=t[1]-this._bufferService.buffer.ydisp,o=Math.max(r,0),a=Math.min(n,this._bufferService.rows-1);if(o>=this._bufferService.rows||a<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,i){var s=e[0],c=t[0]-s,l=a-o+1;this._fillCells(s,o,c,l)}else{var h=r===o?e[0]:0,u=o===n?t[0]:this._bufferService.cols;this._fillCells(h,o,u-h,1);var d=Math.max(a-o-1,0);if(this._fillCells(0,o+1,this._bufferService.cols,d),o!==a){var f=n===a?t[0]:this._bufferService.cols;this._fillCells(0,a,f,1)}}this._state.start=[e[0],e[1]],this._state.end=[t[0],t[1]],this._state.columnSelectMode=i,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()}},{key:"_didStateChange",value:function(e,t,i,r){return!this._areCoordinatesEqual(e,this._state.start)||!this._areCoordinatesEqual(t,this._state.end)||i!==this._state.columnSelectMode||r!==this._state.ydisp}},{key:"_areCoordinatesEqual",value:function(e,t){return!(!e||!t)&&e[0]===t[0]&&e[1]===t[1]}}]),t}(i(903).BaseRenderLayer);t.SelectionRenderLayer=r},744:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderLayer=void 0;var r=i(574),n=i(903),o=i(147),s=i(855),c=i(782),l=i(577),u=i(160),v=function(e){function t(e,i,n,o,a,s,l,u,d,v){var _;return h(this,t),(_=f(this,t,[e,i,"text",n,o,v,a,s,u,d]))._characterJoinerService=l,_._characterWidth=0,_._characterFont="",_._characterOverlapCache={},_._workCell=new c.CellData,_._state=new r.GridCache,_.register(s.onSpecificOptionChange("allowTransparency",(function(e){return _._setTransparency(e)}))),_}return p(t,e),d(t,[{key:"resize",value:function(e){a(g(t.prototype),"resize",this).call(this,e);var i=this._getFont(!1,!1);this._characterWidth===e.device.char.width&&this._characterFont===i||(this._characterWidth=e.device.char.width,this._characterFont=i,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}},{key:"reset",value:function(){this._state.clear(),this._clearAll()}},{key:"_forEachCell",value:function(e,t,i){for(var r=e;r<=t;r++)for(var n=r+this._bufferService.buffer.ydisp,o=this._bufferService.buffer.lines.get(n),a=this._characterJoinerService.getJoinedCharacters(n),c=0;c<this._bufferService.cols;c++){o.loadCell(c,this._workCell);var h=this._workCell,u=!1,d=c;if(0!==h.getWidth()){var f=h.getCode();if(0!==f&&32!==f){if(a.length>0&&c===a[0][0]){u=!0;var v=a.shift();h=new l.JoinedCellData(this._workCell,o.translateToString(!0,v[0],v[1]),v[1]-v[0]),d=v[1]-1}!u&&this._isOverlapping(h)&&d<o.length-1&&o.getCodePoint(d+1)===s.NULL_CELL_CODE&&(h.content&=-12582913,h.content|=2<<22),i(h,c,r),c=d}}}}},{key:"_drawBackground",value:function(e,t){var i=this,r=this._ctx,n=this._bufferService.cols,a=0,s=0,c=null;r.save(),this._forEachCell(e,t,(function(e,t,l){var h=null;e.isInverse()?h=e.isFgDefault()?i._themeService.colors.foreground.css:e.isFgRGB()?"rgb(".concat(o.AttributeData.toColorRGB(e.getFgColor()).join(","),")"):i._themeService.colors.ansi[e.getFgColor()].css:e.isBgRGB()?h="rgb(".concat(o.AttributeData.toColorRGB(e.getBgColor()).join(","),")"):e.isBgPalette()&&(h=i._themeService.colors.ansi[e.getBgColor()].css),h&&e.isDim()&&(h=u.color.multiplyOpacity(u.css.toColor(h),.5).css);var d=!1;i._decorationService.forEachDecorationAtCell(t,i._bufferService.buffer.ydisp+l,void 0,(function(e){"top"!==e.options.layer&&d||(e.backgroundColorRGB&&(h=e.backgroundColorRGB.css),d="top"===e.options.layer)})),null===c&&(a=t,s=l),l!==s?(r.fillStyle=c||"",i._fillCells(a,s,n-a,1),a=t,s=l):c!==h&&(r.fillStyle=c||"",i._fillCells(a,s,t-a,1),a=t,s=l),c=h})),null!==c&&(r.fillStyle=c,this._fillCells(a,s,n-a,1)),r.restore()}},{key:"_drawForeground",value:function(e,t){var i=this;this._forEachCell(e,t,(function(e,t,r){return i._drawChars(e,t,r)}))}},{key:"handleGridChanged",value:function(e,t){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,e,this._bufferService.cols,t-e+1),this._drawBackground(e,t),this._drawForeground(e,t))}},{key:"_isOverlapping",value:function(e){if(1!==e.getWidth())return!1;if(e.getCode()<256)return!1;var t=e.getChars();if(this._characterOverlapCache.hasOwnProperty(t))return this._characterOverlapCache[t];this._ctx.save(),this._ctx.font=this._characterFont;var i=Math.floor(this._ctx.measureText(t).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[t]=i,i}}]),t}(n.BaseRenderLayer);t.TextRenderLayer=v},503:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.removeElementFromParent=void 0,t.removeElementFromParent=function(){for(var e,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];for(var n=0,o=i;n<o.length;n++){var a=o[n];null===(e=null==a?void 0:a.parentElement)||void 0===e||e.removeChild(a)}}},274:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CellColorResolver=void 0;var i,r=0,n=0,o=!1,a=!1,s=!1;t.CellColorResolver=function(){function e(t,i,r,n,o){h(this,e),this._terminal=t,this._selectionRenderModel=i,this._decorationService=r,this._coreBrowserService=n,this._themeService=o,this.result={fg:0,bg:0,ext:0}}return d(e,[{key:"resolve",value:function(e,t,c){this.result.bg=e.bg,this.result.fg=e.fg,this.result.ext=268435456&e.bg?e.extended.ext:0,n=0,r=0,a=!1,o=!1,s=!1,i=this._themeService.colors,this._decorationService.forEachDecorationAtCell(t,c,"bottom",(function(e){e.backgroundColorRGB&&(n=e.backgroundColorRGB.rgba>>8&16777215,a=!0),e.foregroundColorRGB&&(r=e.foregroundColorRGB.rgba>>8&16777215,o=!0)})),(s=this._selectionRenderModel.isCellSelected(this._terminal,t,c))&&(n=(this._coreBrowserService.isFocused?i.selectionBackgroundOpaque:i.selectionInactiveBackgroundOpaque).rgba>>8&16777215,a=!0,i.selectionForeground&&(r=i.selectionForeground.rgba>>8&16777215,o=!0)),this._decorationService.forEachDecorationAtCell(t,c,"top",(function(e){e.backgroundColorRGB&&(n=e.backgroundColorRGB.rgba>>8&16777215,a=!0),e.foregroundColorRGB&&(r=e.foregroundColorRGB.rgba>>8&16777215,o=!0)})),a&&(n=s?-16777216&e.bg&-134217729|n|50331648:-16777216&e.bg|n|50331648),o&&(r=-16777216&e.fg&-67108865|r|50331648),67108864&this.result.fg&&(a&&!o&&(r=0==(50331648&this.result.bg)?-134217728&this.result.fg|16777215&i.background.rgba>>8|50331648:-134217728&this.result.fg|67108863&this.result.bg,o=!0),!a&&o&&(n=0==(50331648&this.result.fg)?-67108864&this.result.bg|16777215&i.foreground.rgba>>8|50331648:-67108864&this.result.bg|67108863&this.result.fg,a=!0)),i=void 0,this.result.bg=a?n:this.result.bg,this.result.fg=o?r:this.result.fg}}]),e}()},627:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.removeTerminalFromCache=t.acquireTextureAtlas=void 0;var r=i(509),n=i(197),o=[];t.acquireTextureAtlas=function(e,t,i,a,s,c,l,h){for(var u=(0,n.generateConfig)(a,s,c,l,t,i,h),d=0;d<o.length;d++){var f=o[d],v=f.ownedBy.indexOf(e);if(v>=0){if((0,n.configEquals)(f.config,u))return f.atlas;1===f.ownedBy.length?(f.atlas.dispose(),o.splice(d,1)):f.ownedBy.splice(v,1);break}}for(var _=0;_<o.length;_++){var g=o[_];if((0,n.configEquals)(g.config,u))return g.ownedBy.push(e),g.atlas}var p=e._core,y={atlas:new r.TextureAtlas(document,u,p.unicodeService),config:u,ownedBy:[e]};return o.push(y),y.atlas},t.removeTerminalFromCache=function(e){for(var t=0;t<o.length;t++){var i=o[t].ownedBy.indexOf(e);if(-1!==i){1===o[t].ownedBy.length?(o[t].atlas.dispose(),o.splice(t,1)):o[t].ownedBy.splice(i,1);break}}}},197:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.is256Color=t.configEquals=t.generateConfig=void 0;var r=i(160);t.generateConfig=function(e,t,i,n,o,a,s){var c={foreground:a.foreground,background:a.background,cursor:r.NULL_COLOR,cursorAccent:r.NULL_COLOR,selectionForeground:r.NULL_COLOR,selectionBackgroundTransparent:r.NULL_COLOR,selectionBackgroundOpaque:r.NULL_COLOR,selectionInactiveBackgroundTransparent:r.NULL_COLOR,selectionInactiveBackgroundOpaque:r.NULL_COLOR,ansi:a.ansi.slice(),contrastCache:a.contrastCache};return{customGlyphs:o.customGlyphs,devicePixelRatio:s,letterSpacing:o.letterSpacing,lineHeight:o.lineHeight,deviceCellWidth:e,deviceCellHeight:t,deviceCharWidth:i,deviceCharHeight:n,fontFamily:o.fontFamily,fontSize:o.fontSize,fontWeight:o.fontWeight,fontWeightBold:o.fontWeightBold,allowTransparency:o.allowTransparency,drawBoldTextInBrightColors:o.drawBoldTextInBrightColors,minimumContrastRatio:o.minimumContrastRatio,colors:c}},t.configEquals=function(e,t){for(var i=0;i<e.colors.ansi.length;i++)if(e.colors.ansi[i].rgba!==t.colors.ansi[i].rgba)return!1;return e.devicePixelRatio===t.devicePixelRatio&&e.customGlyphs===t.customGlyphs&&e.lineHeight===t.lineHeight&&e.letterSpacing===t.letterSpacing&&e.fontFamily===t.fontFamily&&e.fontSize===t.fontSize&&e.fontWeight===t.fontWeight&&e.fontWeightBold===t.fontWeightBold&&e.allowTransparency===t.allowTransparency&&e.deviceCharWidth===t.deviceCharWidth&&e.deviceCharHeight===t.deviceCharHeight&&e.drawBoldTextInBrightColors===t.drawBoldTextInBrightColors&&e.minimumContrastRatio===t.minimumContrastRatio&&e.colors.foreground.rgba===t.colors.foreground.rgba&&e.colors.background.rgba===t.colors.background.rgba},t.is256Color=function(e){return 16777216==(50331648&e)||33554432==(50331648&e)}},237:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;var r=i(399);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=r.isFirefox||r.isLegacyEdge?"bottom":"ideographic"},860:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.tryDrawCustomChar=t.powerlineDefinitions=t.boxDrawingDefinitions=t.blockElementDefinitions=void 0;var r=i(374);t.blockElementDefinitions={"▀":[{x:0,y:0,w:8,h:4}],"▁":[{x:0,y:7,w:8,h:1}],"▂":[{x:0,y:6,w:8,h:2}],"▃":[{x:0,y:5,w:8,h:3}],"▄":[{x:0,y:4,w:8,h:4}],"▅":[{x:0,y:3,w:8,h:5}],"▆":[{x:0,y:2,w:8,h:6}],"▇":[{x:0,y:1,w:8,h:7}],"█":[{x:0,y:0,w:8,h:8}],"▉":[{x:0,y:0,w:7,h:8}],"▊":[{x:0,y:0,w:6,h:8}],"▋":[{x:0,y:0,w:5,h:8}],"▌":[{x:0,y:0,w:4,h:8}],"▍":[{x:0,y:0,w:3,h:8}],"▎":[{x:0,y:0,w:2,h:8}],"▏":[{x:0,y:0,w:1,h:8}],"▐":[{x:4,y:0,w:4,h:8}],"▔":[{x:0,y:0,w:8,h:1}],"▕":[{x:7,y:0,w:1,h:8}],"▖":[{x:0,y:4,w:4,h:4}],"▗":[{x:4,y:4,w:4,h:4}],"▘":[{x:0,y:0,w:4,h:4}],"▙":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"▚":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"▛":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"▜":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"▝":[{x:4,y:0,w:4,h:4}],"▞":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"▟":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"🭰":[{x:1,y:0,w:1,h:8}],"🭱":[{x:2,y:0,w:1,h:8}],"🭲":[{x:3,y:0,w:1,h:8}],"🭳":[{x:4,y:0,w:1,h:8}],"🭴":[{x:5,y:0,w:1,h:8}],"🭵":[{x:6,y:0,w:1,h:8}],"🭶":[{x:0,y:1,w:8,h:1}],"🭷":[{x:0,y:2,w:8,h:1}],"🭸":[{x:0,y:3,w:8,h:1}],"🭹":[{x:0,y:4,w:8,h:1}],"🭺":[{x:0,y:5,w:8,h:1}],"🭻":[{x:0,y:6,w:8,h:1}],"🭼":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🭽":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭾":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"🭿":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"🮀":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮁":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"🮂":[{x:0,y:0,w:8,h:2}],"🮃":[{x:0,y:0,w:8,h:3}],"🮄":[{x:0,y:0,w:8,h:5}],"🮅":[{x:0,y:0,w:8,h:6}],"🮆":[{x:0,y:0,w:8,h:7}],"🮇":[{x:6,y:0,w:2,h:8}],"🮈":[{x:5,y:0,w:3,h:8}],"🮉":[{x:3,y:0,w:5,h:8}],"🮊":[{x:2,y:0,w:6,h:8}],"🮋":[{x:1,y:0,w:7,h:8}],"🮕":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"🮖":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"🮗":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var n={"░":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"▒":[[1,0],[0,0],[0,1],[0,0]],"▓":[[0,1],[1,1],[1,0],[1,1]]};t.boxDrawingDefinitions={"─":{1:"M0,.5 L1,.5"},"━":{3:"M0,.5 L1,.5"},"│":{1:"M.5,0 L.5,1"},"┃":{3:"M.5,0 L.5,1"},"┌":{1:"M0.5,1 L.5,.5 L1,.5"},"┏":{3:"M0.5,1 L.5,.5 L1,.5"},"┐":{1:"M0,.5 L.5,.5 L.5,1"},"┓":{3:"M0,.5 L.5,.5 L.5,1"},"└":{1:"M.5,0 L.5,.5 L1,.5"},"┗":{3:"M.5,0 L.5,.5 L1,.5"},"┘":{1:"M.5,0 L.5,.5 L0,.5"},"┛":{3:"M.5,0 L.5,.5 L0,.5"},"├":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┣":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"┤":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┫":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"┬":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┳":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"┴":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┻":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"┼":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"╋":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"╴":{1:"M.5,.5 L0,.5"},"╸":{3:"M.5,.5 L0,.5"},"╵":{1:"M.5,.5 L.5,0"},"╹":{3:"M.5,.5 L.5,0"},"╶":{1:"M.5,.5 L1,.5"},"╺":{3:"M.5,.5 L1,.5"},"╷":{1:"M.5,.5 L.5,1"},"╻":{3:"M.5,.5 L.5,1"},"═":{1:function(e,t){return"M0,".concat(.5-t," L1,").concat(.5-t," M0,").concat(.5+t," L1,").concat(.5+t)}},"║":{1:function(e,t){return"M".concat(.5-e,",0 L").concat(.5-e,",1 M").concat(.5+e,",0 L").concat(.5+e,",1")}},"╒":{1:function(e,t){return"M.5,1 L.5,".concat(.5-t," L1,").concat(.5-t," M.5,").concat(.5+t," L1,").concat(.5+t)}},"╓":{1:function(e,t){return"M".concat(.5-e,",1 L").concat(.5-e,",.5 L1,.5 M").concat(.5+e,",.5 L").concat(.5+e,",1")}},"╔":{1:function(e,t){return"M1,".concat(.5-t," L").concat(.5-e,",").concat(.5-t," L").concat(.5-e,",1 M1,").concat(.5+t," L").concat(.5+e,",").concat(.5+t," L").concat(.5+e,",1")}},"╕":{1:function(e,t){return"M0,".concat(.5-t," L.5,").concat(.5-t," L.5,1 M0,").concat(.5+t," L.5,").concat(.5+t)}},"╖":{1:function(e,t){return"M".concat(.5+e,",1 L").concat(.5+e,",.5 L0,.5 M").concat(.5-e,",.5 L").concat(.5-e,",1")}},"╗":{1:function(e,t){return"M0,".concat(.5+t," L").concat(.5-e,",").concat(.5+t," L").concat(.5-e,",1 M0,").concat(.5-t," L").concat(.5+e,",").concat(.5-t," L").concat(.5+e,",1")}},"╘":{1:function(e,t){return"M.5,0 L.5,".concat(.5+t," L1,").concat(.5+t," M.5,").concat(.5-t," L1,").concat(.5-t)}},"╙":{1:function(e,t){return"M1,.5 L".concat(.5-e,",.5 L").concat(.5-e,",0 M").concat(.5+e,",.5 L").concat(.5+e,",0")}},"╚":{1:function(e,t){return"M1,".concat(.5-t," L").concat(.5+e,",").concat(.5-t," L").concat(.5+e,",0 M1,").concat(.5+t," L").concat(.5-e,",").concat(.5+t," L").concat(.5-e,",0")}},"╛":{1:function(e,t){return"M0,".concat(.5+t," L.5,").concat(.5+t," L.5,0 M0,").concat(.5-t," L.5,").concat(.5-t)}},"╜":{1:function(e,t){return"M0,.5 L".concat(.5+e,",.5 L").concat(.5+e,",0 M").concat(.5-e,",.5 L").concat(.5-e,",0")}},"╝":{1:function(e,t){return"M0,".concat(.5-t," L").concat(.5-e,",").concat(.5-t," L").concat(.5-e,",0 M0,").concat(.5+t," L").concat(.5+e,",").concat(.5+t," L").concat(.5+e,",0")}},"╞":{1:function(e,t){return"M.5,0 L.5,1 M.5,".concat(.5-t," L1,").concat(.5-t," M.5,").concat(.5+t," L1,").concat(.5+t)}},"╟":{1:function(e,t){return"M".concat(.5-e,",0 L").concat(.5-e,",1 M").concat(.5+e,",0 L").concat(.5+e,",1 M").concat(.5+e,",.5 L1,.5")}},"╠":{1:function(e,t){return"M".concat(.5-e,",0 L").concat(.5-e,",1 M1,").concat(.5+t," L").concat(.5+e,",").concat(.5+t," L").concat(.5+e,",1 M1,").concat(.5-t," L").concat(.5+e,",").concat(.5-t," L").concat(.5+e,",0")}},"╡":{1:function(e,t){return"M.5,0 L.5,1 M0,".concat(.5-t," L.5,").concat(.5-t," M0,").concat(.5+t," L.5,").concat(.5+t)}},"╢":{1:function(e,t){return"M0,.5 L".concat(.5-e,",.5 M").concat(.5-e,",0 L").concat(.5-e,",1 M").concat(.5+e,",0 L").concat(.5+e,",1")}},"╣":{1:function(e,t){return"M".concat(.5+e,",0 L").concat(.5+e,",1 M0,").concat(.5+t," L").concat(.5-e,",").concat(.5+t," L").concat(.5-e,",1 M0,").concat(.5-t," L").concat(.5-e,",").concat(.5-t," L").concat(.5-e,",0")}},"╤":{1:function(e,t){return"M0,".concat(.5-t," L1,").concat(.5-t," M0,").concat(.5+t," L1,").concat(.5+t," M.5,").concat(.5+t," L.5,1")}},"╥":{1:function(e,t){return"M0,.5 L1,.5 M".concat(.5-e,",.5 L").concat(.5-e,",1 M").concat(.5+e,",.5 L").concat(.5+e,",1")}},"╦":{1:function(e,t){return"M0,".concat(.5-t," L1,").concat(.5-t," M0,").concat(.5+t," L").concat(.5-e,",").concat(.5+t," L").concat(.5-e,",1 M1,").concat(.5+t," L").concat(.5+e,",").concat(.5+t," L").concat(.5+e,",1")}},"╧":{1:function(e,t){return"M.5,0 L.5,".concat(.5-t," M0,").concat(.5-t," L1,").concat(.5-t," M0,").concat(.5+t," L1,").concat(.5+t)}},"╨":{1:function(e,t){return"M0,.5 L1,.5 M".concat(.5-e,",.5 L").concat(.5-e,",0 M").concat(.5+e,",.5 L").concat(.5+e,",0")}},"╩":{1:function(e,t){return"M0,".concat(.5+t," L1,").concat(.5+t," M0,").concat(.5-t," L").concat(.5-e,",").concat(.5-t," L").concat(.5-e,",0 M1,").concat(.5-t," L").concat(.5+e,",").concat(.5-t," L").concat(.5+e,",0")}},"╪":{1:function(e,t){return"M.5,0 L.5,1 M0,".concat(.5-t," L1,").concat(.5-t," M0,").concat(.5+t," L1,").concat(.5+t)}},"╫":{1:function(e,t){return"M0,.5 L1,.5 M".concat(.5-e,",0 L").concat(.5-e,",1 M").concat(.5+e,",0 L").concat(.5+e,",1")}},"╬":{1:function(e,t){return"M0,".concat(.5+t," L").concat(.5-e,",").concat(.5+t," L").concat(.5-e,",1 M1,").concat(.5+t," L").concat(.5+e,",").concat(.5+t," L").concat(.5+e,",1 M0,").concat(.5-t," L").concat(.5-e,",").concat(.5-t," L").concat(.5-e,",0 M1,").concat(.5-t," L").concat(.5+e,",").concat(.5-t," L").concat(.5+e,",0")}},"╱":{1:"M1,0 L0,1"},"╲":{1:"M0,0 L1,1"},"╳":{1:"M1,0 L0,1 M0,0 L1,1"},"╼":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"╽":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"╾":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"╿":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┍":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┎":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┑":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"┒":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┕":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"┖":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┙":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"┚":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"┝":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"┞":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"┟":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"┠":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"┡":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"┢":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"┥":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"┦":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"┧":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"┨":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"┩":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"┪":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"┭":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┮":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"┯":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"┰":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"┱":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"┲":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"┵":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┶":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┷":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"┸":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"┹":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"┺":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"┽":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"┾":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"┿":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"╀":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"╁":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"╂":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"╃":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"╄":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"╅":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"╆":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"╇":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"╈":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"╉":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"╊":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"╌":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"╍":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"┄":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┅":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"┈":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"┉":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"╎":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"╏":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"┆":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┇":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"┊":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"┋":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"╭":{1:function(e,t){return"M.5,1 L.5,".concat(.5+t/.15*.5," C.5,").concat(.5+t/.15*.5,",.5,.5,1,.5")}},"╮":{1:function(e,t){return"M.5,1 L.5,".concat(.5+t/.15*.5," C.5,").concat(.5+t/.15*.5,",.5,.5,0,.5")}},"╯":{1:function(e,t){return"M.5,0 L.5,".concat(.5-t/.15*.5," C.5,").concat(.5-t/.15*.5,",.5,.5,0,.5")}},"╰":{1:function(e,t){return"M.5,0 L.5,".concat(.5-t/.15*.5," C.5,").concat(.5-t/.15*.5,",.5,.5,1,.5")}}},t.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},t.powerlineDefinitions[""]=t.powerlineDefinitions[""],t.powerlineDefinitions[""]=t.powerlineDefinitions[""],t.tryDrawCustomChar=function(e,i,c,u,d,f,v,_){var g=t.blockElementDefinitions[i];if(g)return function(e,t,i,r,n,o){for(var a=0;a<t.length;a++){var s=t[a],c=n/8,l=o/8;e.fillRect(i+s.x*c,r+s.y*l,s.w*c,s.h*l)}}(e,g,c,u,d,f),!0;var p=n[i];if(p)return function(e,t,i,n,s,c){var l=a.get(t);l||(l=new Map,a.set(t,l));var h=e.fillStyle;if("string"!=typeof h)throw new Error('Unexpected fillStyle type "'.concat(h,'"'));var u=l.get(h);if(!u){var d=t[0].length,f=t.length,v=document.createElement("canvas");v.width=d,v.height=f;var _,g,p,y,C=(0,r.throwIfFalsy)(v.getContext("2d")),m=new ImageData(d,f);if(h.startsWith("#"))_=parseInt(h.slice(1,3),16),g=parseInt(h.slice(3,5),16),p=parseInt(h.slice(5,7),16),y=h.length>7&&parseInt(h.slice(7,9),16)||1;else{if(!h.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'.concat(h,'" when drawing pattern glyph'));var w=h.substring(5,h.length-1).split(",").map((function(e){return parseFloat(e)})),x=o(w,4);_=x[0],g=x[1],p=x[2],y=x[3]}for(var b=0;b<f;b++)for(var L=0;L<d;L++)m.data[4*(b*d+L)]=_,m.data[4*(b*d+L)+1]=g,m.data[4*(b*d+L)+2]=p,m.data[4*(b*d+L)+3]=t[b][L]*(255*y);C.putImageData(m,0,0),u=(0,r.throwIfFalsy)(e.createPattern(v,null)),l.set(h,u)}e.fillStyle=u,e.fillRect(i,n,s,c)}(e,p,c,u,d,f),!0;var y=t.boxDrawingDefinitions[i];if(y)return function(e,t,i,r,n,a,c){e.strokeStyle=e.fillStyle;for(var u=0,d=Object.entries(t);u<d.length;u++){var f=o(d[u],2),v=f[0],_=f[1];e.beginPath(),e.lineWidth=c*Number.parseInt(v);var g,p=s(("function"==typeof _?_(.15,.15/a*n):_).split(" "));try{for(p.s();!(g=p.n()).done;){var y=g.value,C=y[0],m=l[C];if(m){var w=y.substring(1).split(",");w[0]&&w[1]&&m(e,h(w,n,a,i,r,!0,c))}}}catch(x){p.e(x)}finally{p.f()}e.stroke(),e.closePath()}}(e,y,c,u,d,f,_),!0;var C=t.powerlineDefinitions[i];return!!C&&(function(e,t,i,r,n,o,a,c){var u,d,f=new Path2D;f.rect(i,r,n,o),e.clip(f),e.beginPath();var v=a/12;e.lineWidth=c*v;var _,g=s(t.d.split(" "));try{for(g.s();!(_=g.n()).done;){var p=_.value,y=p[0],C=l[y];if(C){var m=p.substring(1).split(",");m[0]&&m[1]&&C(e,h(m,n,o,i,r,!1,c,(null!==(u=t.leftPadding)&&void 0!==u?u:0)*(v/2),(null!==(d=t.rightPadding)&&void 0!==d?d:0)*(v/2)))}}}catch(w){g.e(w)}finally{g.f()}1===t.type?(e.strokeStyle=e.fillStyle,e.stroke()):e.fill(),e.closePath()}(e,C,c,u,d,f,v,_),!0)};var a=new Map;function c(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.max(Math.min(e,t),i)}var l={C:function(e,t){return e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},L:function(e,t){return e.lineTo(t[0],t[1])},M:function(e,t){return e.moveTo(t[0],t[1])}};function h(e,t,i,r,n,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=e.map((function(e){return parseFloat(e)||parseInt(e)}));if(h.length<2)throw new Error("Too few arguments for instruction");for(var u=0;u<h.length;u+=2)h[u]*=t-s*a-l*a,o&&0!==h[u]&&(h[u]=c(Math.round(h[u]+.5)-.5,t,0)),h[u]+=r+s*a;for(var d=1;d<h.length;d+=2)h[d]*=i,o&&0!==h[d]&&(h[d]=c(Math.round(h[d]+.5)-.5,i,0)),h[d]+=n;return h}},56:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.observeDevicePixelDimensions=void 0;var r=i(859);t.observeDevicePixelDimensions=function(e,t,i){var n=new t.ResizeObserver((function(t){var r=t.find((function(t){return t.target===e}));if(r){if(!("devicePixelContentBoxSize"in r))return null==n||n.disconnect(),void(n=void 0);var o=r.devicePixelContentBoxSize[0].inlineSize,a=r.devicePixelContentBoxSize[0].blockSize;o>0&&a>0&&i(o,a)}}));try{n.observe(e,{box:["device-pixel-content-box"]})}catch(e){n.disconnect(),n=void 0}return(0,r.toDisposable)((function(){return null==n?void 0:n.disconnect()}))}},374:function(e,t){function i(e){return 57508<=e&&e<=57558}Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderDimensions=t.excludeFromContrastRatioDemands=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e},t.isPowerlineGlyph=i,t.isRestrictedPowerlineGlyph=function(e){return 57520<=e&&e<=57527},t.excludeFromContrastRatioDemands=function(e){return i(e)||function(e){return 9472<=e&&e<=9631}(e)},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createSelectionRenderModel=void 0;var i=function(){function e(){h(this,e),this.clear()}return d(e,[{key:"clear",value:function(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}},{key:"update",value:function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.selectionStart=t,this.selectionEnd=i,t&&i&&(t[0]!==i[0]||t[1]!==i[1])){var n=t[1]-e.buffer.active.viewportY,o=i[1]-e.buffer.active.viewportY,a=Math.max(n,0),s=Math.min(o,e.rows-1);a>=e.rows||s<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=r,this.viewportStartRow=n,this.viewportEndRow=o,this.viewportCappedStartRow=a,this.viewportCappedEndRow=s,this.startCol=t[0],this.endCol=i[0])}else this.clear()}},{key:"isCellSelected",value:function(e,t,i){return!!this.hasSelection&&(i-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&i>=this.viewportCappedStartRow&&t<this.endCol&&i<=this.viewportCappedEndRow:t<this.startCol&&i>=this.viewportCappedStartRow&&t>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol)}}]),e}();t.createSelectionRenderModel=function(){return new i}},509:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TextureAtlas=void 0;var r,a=i(237),c=i(855),l=i(147),u=i(160),f=i(860),v=i(374),_=i(485),g=i(385),p=i(345),y={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},C=function(){function e(t,i,r){h(this,e),this._document=t,this._config=i,this._unicodeService=r,this._didWarmUp=!1,this._cacheMap=new _.FourKeyMap,this._cacheMapCombined=new _.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new l.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new p.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new p.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=x(t,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,v.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}return d(e,[{key:"pages",get:function(){return this._pages}},{key:"dispose",value:function(){var e,t=s(this.pages);try{for(t.s();!(e=t.n()).done;)e.value.canvas.remove()}catch(i){t.e(i)}finally{t.f()}this._onAddTextureAtlasCanvas.dispose()}},{key:"warmUp",value:function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}},{key:"_doWarmUp",value:function(){for(var e=this,t=new g.IdleTaskQueue,i=function(i){t.enqueue((function(){if(!e._cacheMap.get(i,c.DEFAULT_COLOR,c.DEFAULT_COLOR,c.DEFAULT_EXT)){var t=e._drawToCache(i,c.DEFAULT_COLOR,c.DEFAULT_COLOR,c.DEFAULT_EXT);e._cacheMap.set(i,c.DEFAULT_COLOR,c.DEFAULT_COLOR,c.DEFAULT_EXT,t)}}))},r=33;r<126;r++)i(r)}},{key:"beginFrame",value:function(){return this._requestClearModel}},{key:"clearTexture",value:function(){if(0!==this._pages[0].currentRow.x||0!==this._pages[0].currentRow.y){var e,t=s(this._pages);try{for(t.s();!(e=t.n()).done;)e.value.clear()}catch(i){t.e(i)}finally{t.f()}this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}},{key:"_createNewPage",value:function(){var t=this;e.maxAtlasPages&&this._pages.length>=Math.max(4,e.maxAtlasPages/2)&&queueMicrotask((function(){for(var i=t._pages.filter((function(t){return 2*t.canvas.width<=(e.maxTextureSize||4096)})).sort((function(e,t){return t.canvas.width!==e.canvas.width?t.canvas.width-e.canvas.width:t.percentageUsed-e.percentageUsed})),r=-1,n=0,o=0;o<i.length;o++)if(i[o].canvas.width!==n)r=o,n=i[o].canvas.width;else if(o-r==3)break;var a=i.slice(r,r+4),s=a.map((function(e){return e.glyphs[0].texturePage})).sort((function(e,t){return e>t?1:-1})),c=s[0],l=t._mergePages(a,c);l.version++,t._pages[c]=l;for(var h=s.length-1;h>=1;h--)t._deletePage(s[h]);t._requestClearModel=!0,t._onAddTextureAtlasCanvas.fire(l.canvas)}));var i=new m(this._document,this._textureSize);return this._pages.push(i),this._activePages.push(i),this._onAddTextureAtlasCanvas.fire(i.canvas),i}},{key:"_mergePages",value:function(e,t){var i,r=2*e[0].canvas.width,n=new m(this._document,r,e),a=s(e.entries());try{for(a.s();!(i=a.n()).done;){var c=o(i.value,2),l=c[0],h=c[1],u=l*h.canvas.width%r,d=Math.floor(l/2)*h.canvas.height;n.ctx.drawImage(h.canvas,u,d);var f,v=s(h.glyphs);try{for(v.s();!(f=v.n()).done;){var _=f.value;_.texturePage=t,_.sizeClipSpace.x=_.size.x/r,_.sizeClipSpace.y=_.size.y/r,_.texturePosition.x+=u,_.texturePosition.y+=d,_.texturePositionClipSpace.x=_.texturePosition.x/r,_.texturePositionClipSpace.y=_.texturePosition.y/r}}catch(p){v.e(p)}finally{v.f()}this._onRemoveTextureAtlasCanvas.fire(h.canvas);var g=this._activePages.indexOf(h);-1!==g&&this._activePages.splice(g,1)}}catch(p){a.e(p)}finally{a.f()}return n}},{key:"_deletePage",value:function(e){this._pages.splice(e,1);for(var t=e;t<this._pages.length;t++){var i,r=this._pages[t],n=s(r.glyphs);try{for(n.s();!(i=n.n()).done;)i.value.texturePage--}catch(o){n.e(o)}finally{n.f()}r.version++}}},{key:"getRasterizedGlyphCombinedChar",value:function(e,t,i,r){return this._getFromCacheMap(this._cacheMapCombined,e,t,i,r)}},{key:"getRasterizedGlyph",value:function(e,t,i,r){return this._getFromCacheMap(this._cacheMap,e,t,i,r)}},{key:"_getFromCacheMap",value:function(e,t,i,n,o){return(r=e.get(t,i,n,o))||(r=this._drawToCache(t,i,n,o),e.set(t,i,n,o,r)),r}},{key:"_getColorFromAnsiIndex",value:function(e){if(e>=this._config.colors.ansi.length)throw new Error("No color found for idx "+e);return this._config.colors.ansi[e]}},{key:"_getBackgroundColor",value:function(e,t,i,r){if(this._config.allowTransparency)return u.NULL_COLOR;var n;switch(e){case 16777216:case 33554432:n=this._getColorFromAnsiIndex(t);break;case 50331648:var o=l.AttributeData.toColorRGB(t);n=u.rgba.toColor(o[0],o[1],o[2]);break;default:n=i?this._config.colors.foreground:this._config.colors.background}return r&&(n=u.color.blend(this._config.colors.background,u.color.multiplyOpacity(n,a.DIM_OPACITY))),n}},{key:"_getForegroundColor",value:function(e,t,i,r,n,o,s,c,h,d){var f,v=this._getMinimumContrastColor(e,t,i,r,n,o,!1,h,d);if(v)return v;switch(n){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&h&&o<8&&(o+=8),f=this._getColorFromAnsiIndex(o);break;case 50331648:var _=l.AttributeData.toColorRGB(o);f=u.rgba.toColor(_[0],_[1],_[2]);break;default:f=s?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(f=u.color.opaque(f)),c&&(f=u.color.multiplyOpacity(f,a.DIM_OPACITY)),f}},{key:"_resolveBackgroundRgba",value:function(e,t,i){switch(e){case 16777216:case 33554432:return this._getColorFromAnsiIndex(t).rgba;case 50331648:return t<<8;default:return i?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}},{key:"_resolveForegroundRgba",value:function(e,t,i,r){switch(e){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&r&&t<8&&(t+=8),this._getColorFromAnsiIndex(t).rgba;case 50331648:return t<<8;default:return i?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}},{key:"_getMinimumContrastColor",value:function(e,t,i,r,n,o,a,s,c){if(1!==this._config.minimumContrastRatio&&!c){var l=this._config.colors.contrastCache.getColor(e,r);if(void 0!==l)return l||void 0;var h=this._resolveBackgroundRgba(t,i,a),d=this._resolveForegroundRgba(n,o,a,s),f=u.rgba.ensureContrastRatio(h,d,this._config.minimumContrastRatio);if(f){var v=u.rgba.toColor(f>>24&255,f>>16&255,f>>8&255);return this._config.colors.contrastCache.setColor(e,r,v),v}this._config.colors.contrastCache.setColor(e,r,null)}}},{key:"_drawToCache",value:function(e,t,i,r){var n="number"==typeof e?String.fromCharCode(e):e,o=this._config.deviceCellWidth*Math.max(n.length,2)+4;this._tmpCanvas.width<o&&(this._tmpCanvas.width=o);var c=this._config.deviceCellHeight+8;if(this._tmpCanvas.height<c&&(this._tmpCanvas.height=c),this._tmpCtx.save(),this._workAttributeData.fg=i,this._workAttributeData.bg=t,this._workAttributeData.extended.ext=r,this._workAttributeData.isInvisible())return y;var h=!!this._workAttributeData.isBold(),u=!!this._workAttributeData.isInverse(),d=!!this._workAttributeData.isDim(),_=!!this._workAttributeData.isItalic(),g=!!this._workAttributeData.isUnderline(),p=!!this._workAttributeData.isStrikethrough(),C=this._workAttributeData.getFgColor(),m=this._workAttributeData.getFgColorMode(),x=this._workAttributeData.getBgColor(),b=this._workAttributeData.getBgColorMode();if(u){var L=C;C=x,x=L;var S=m;m=b,b=S}var M=this._getBackgroundColor(b,x,u,d);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=M.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";var k=h?this._config.fontWeightBold:this._config.fontWeight,R=_?"italic":"";this._tmpCtx.font="".concat(R," ").concat(k," ").concat(this._config.fontSize*this._config.devicePixelRatio,"px ").concat(this._config.fontFamily),this._tmpCtx.textBaseline=a.TEXT_BASELINE;var A=1===n.length&&(0,v.isPowerlineGlyph)(n.charCodeAt(0)),T=1===n.length&&(0,v.isRestrictedPowerlineGlyph)(n.charCodeAt(0)),D=this._getForegroundColor(t,b,x,i,m,C,u,d,h,(0,v.excludeFromContrastRatioDemands)(n.charCodeAt(0)));this._tmpCtx.fillStyle=D.css;var E=T?0:4,P=!1;!1!==this._config.customGlyphs&&(P=(0,f.tryDrawCustomChar)(this._tmpCtx,n,E,E,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));var O,B=!A;if(O="number"==typeof e?this._unicodeService.wcwidth(e):this._unicodeService.getStringCellWidth(e),g){this._tmpCtx.save();var I=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),F=I%2==1?.5:0;if(this._tmpCtx.lineWidth=I,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())B=!1,this._tmpCtx.strokeStyle="rgb(".concat(l.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(","),")");else{B=!1;var H=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&H<8&&(H+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(H).css}this._tmpCtx.beginPath();for(var W=E,j=Math.ceil(E+this._config.deviceCharHeight)-F,z=E+this._config.deviceCharHeight+I-F,U=Math.ceil(E+this._config.deviceCharHeight+2*I)-F,G=0;G<O;G++){this._tmpCtx.save();var N=W+G*this._config.deviceCellWidth,q=W+(G+1)*this._config.deviceCellWidth,$=N+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(N,j),this._tmpCtx.lineTo(q,j),this._tmpCtx.moveTo(N,U),this._tmpCtx.lineTo(q,U);break;case 3:var X=I<=1?U:Math.ceil(E+this._config.deviceCharHeight-I/2)-F,J=I<=1?j:Math.ceil(E+this._config.deviceCharHeight+I/2)-F,V=new Path2D;V.rect(N,j,this._config.deviceCellWidth,U-j),this._tmpCtx.clip(V),this._tmpCtx.moveTo(N-this._config.deviceCellWidth/2,z),this._tmpCtx.bezierCurveTo(N-this._config.deviceCellWidth/2,J,N,J,N,z),this._tmpCtx.bezierCurveTo(N,X,$,X,$,z),this._tmpCtx.bezierCurveTo($,J,q,J,q,z),this._tmpCtx.bezierCurveTo(q,X,q+this._config.deviceCellWidth/2,X,q+this._config.deviceCellWidth/2,z);break;case 4:this._tmpCtx.setLineDash([2*this._config.devicePixelRatio,this._config.devicePixelRatio]),this._tmpCtx.moveTo(N,j),this._tmpCtx.lineTo(q,j);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(N,j),this._tmpCtx.lineTo(q,j);break;default:this._tmpCtx.moveTo(N,j),this._tmpCtx.lineTo(q,j)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!P&&this._config.fontSize>=12&&!this._config.allowTransparency&&" "!==n){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";var K=this._tmpCtx.measureText(n);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in K&&K.actualBoundingBoxDescent>0){this._tmpCtx.save();var Y=new Path2D;Y.rect(W,j-Math.ceil(I/2),this._config.deviceCellWidth,U-j+Math.ceil(I/2)),this._tmpCtx.clip(Y),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=M.css,this._tmpCtx.strokeText(n,E,E+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(P||this._tmpCtx.fillText(n,E,E+this._config.deviceCharHeight),"_"===n&&!this._config.allowTransparency){var Q=w(this._tmpCtx.getImageData(E,E,this._config.deviceCellWidth,this._config.deviceCellHeight),M,D,B);if(Q)for(var Z=1;Z<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=M.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(n,E,E+this._config.deviceCharHeight-Z),Q=w(this._tmpCtx.getImageData(E,E,this._config.deviceCellWidth,this._config.deviceCellHeight),M,D,B));Z++);}if(p){var ee=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),te=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=ee,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(E,E+Math.floor(this._config.deviceCharHeight/2)-te),this._tmpCtx.lineTo(E+this._config.deviceCharWidth*O,E+Math.floor(this._config.deviceCharHeight/2)-te),this._tmpCtx.stroke()}this._tmpCtx.restore();var ie,re=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);if(ie=this._config.allowTransparency?function(e){for(var t=0;t<e.data.length;t+=4)if(e.data[t+3]>0)return!1;return!0}(re):w(re,M,D,B),ie)return y;for(var ne,oe,ae=this._findGlyphBoundingBox(re,this._workBoundingBox,o,T,P,E);;){if(0===this._activePages.length){var se=this._createNewPage();ne=se,(oe=se.currentRow).height=ae.size.y;break}oe=(ne=this._activePages[this._activePages.length-1]).currentRow;var ce,le=s(this._activePages);try{for(le.s();!(ce=le.n()).done;){var he=ce.value;ae.size.y<=he.currentRow.height&&(ne=he,oe=he.currentRow)}}catch(we){le.e(we)}finally{le.f()}for(var ue=this._activePages.length-1;ue>=0;ue--){var de,fe=s(this._activePages[ue].fixedRows);try{for(fe.s();!(de=fe.n()).done;){var ve=de.value;ve.height<=oe.height&&ae.size.y<=ve.height&&(ne=this._activePages[ue],oe=ve)}}catch(we){fe.e(we)}finally{fe.f()}}if(oe.y+ae.size.y>=ne.canvas.height||oe.height>ae.size.y+2){var _e=!1;if(ne.currentRow.y+ne.currentRow.height+ae.size.y>=ne.canvas.height){var ge,pe=void 0,ye=s(this._activePages);try{for(ye.s();!(ge=ye.n()).done;){var Ce=ge.value;if(Ce.currentRow.y+Ce.currentRow.height+ae.size.y<Ce.canvas.height){pe=Ce;break}}}catch(we){ye.e(we)}finally{ye.f()}if(pe)ne=pe;else{var me=this._createNewPage();ne=me,(oe=me.currentRow).height=ae.size.y,_e=!0}}_e||(ne.currentRow.height>0&&ne.fixedRows.push(ne.currentRow),oe={x:0,y:ne.currentRow.y+ne.currentRow.height,height:ae.size.y},ne.fixedRows.push(oe),ne.currentRow={x:0,y:oe.y+oe.height,height:0})}if(oe.x+ae.size.x<=ne.canvas.width)break;oe===ne.currentRow?(oe.x=0,oe.y+=oe.height,oe.height=0):ne.fixedRows.splice(ne.fixedRows.indexOf(oe),1)}return ae.texturePage=this._pages.indexOf(ne),ae.texturePosition.x=oe.x,ae.texturePosition.y=oe.y,ae.texturePositionClipSpace.x=oe.x/ne.canvas.width,ae.texturePositionClipSpace.y=oe.y/ne.canvas.height,ae.sizeClipSpace.x/=ne.canvas.width,ae.sizeClipSpace.y/=ne.canvas.height,oe.height=Math.max(oe.height,ae.size.y),oe.x+=ae.size.x,ne.ctx.putImageData(re,ae.texturePosition.x-this._workBoundingBox.left,ae.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ae.size.x,ae.size.y),ne.addGlyph(ae),ne.version++,ae}},{key:"_findGlyphBoundingBox",value:function(e,t,i,r,n,o){t.top=0;for(var a=r?this._config.deviceCellHeight:this._tmpCanvas.height,s=r?this._config.deviceCellWidth:i,c=!1,l=0;l<a;l++){for(var h=0;h<s;h++){var u=l*this._tmpCanvas.width*4+4*h+3;if(0!==e.data[u]){t.top=l,c=!0;break}}if(c)break}t.left=0,c=!1;for(var d=0;d<o+s;d++){for(var f=0;f<a;f++){var v=f*this._tmpCanvas.width*4+4*d+3;if(0!==e.data[v]){t.left=d,c=!0;break}}if(c)break}t.right=s,c=!1;for(var _=o+s-1;_>=o;_--){for(var g=0;g<a;g++){var p=g*this._tmpCanvas.width*4+4*_+3;if(0!==e.data[p]){t.right=_,c=!0;break}}if(c)break}t.bottom=a,c=!1;for(var y=a-1;y>=0;y--){for(var C=0;C<s;C++){var m=y*this._tmpCanvas.width*4+4*C+3;if(0!==e.data[m]){t.bottom=y,c=!0;break}}if(c)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:t.right-t.left+1,y:t.bottom-t.top+1},sizeClipSpace:{x:t.right-t.left+1,y:t.bottom-t.top+1},offset:{x:-t.left+o+(r||n?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-t.top+o+(r||n?1===this._config.lineHeight?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}]),e}();t.TextureAtlas=C;var m=function(){function e(t,i,r){if(h(this,e),this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],r){var o,a=s(r);try{for(a.s();!(o=a.n()).done;){var c,l=o.value;(c=this._glyphs).push.apply(c,n(l.glyphs)),this._usedPixels+=l._usedPixels}}catch(u){a.e(u)}finally{a.f()}}this.canvas=x(t,i,i),this.ctx=(0,v.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}return d(e,[{key:"percentageUsed",get:function(){return this._usedPixels/(this.canvas.width*this.canvas.height)}},{key:"glyphs",get:function(){return this._glyphs}},{key:"addGlyph",value:function(e){this._glyphs.push(e),this._usedPixels+=e.size.x*e.size.y}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}]),e}();function w(e,t,i,r){for(var n=t.rgba>>>24,o=t.rgba>>>16&255,a=t.rgba>>>8&255,s=i.rgba>>>24,c=i.rgba>>>16&255,l=i.rgba>>>8&255,h=Math.floor((Math.abs(n-s)+Math.abs(o-c)+Math.abs(a-l))/12),u=!0,d=0;d<e.data.length;d+=4)e.data[d]===n&&e.data[d+1]===o&&e.data[d+2]===a||r&&Math.abs(e.data[d]-n)+Math.abs(e.data[d+1]-o)+Math.abs(e.data[d+2]-a)<h?e.data[d+3]=0:u=!1;return u}function x(e,t,i){var r=e.createElement("canvas");return r.width=t,r.height=i,r}},577:function(e,t,i){var n=this&&this.__decorate||function(e,t,i,n){var o,a=arguments.length,s=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==("undefined"==typeof Reflect?"undefined":r(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(s=(a<3?o(s):a>3?o(t,i,s):o(t,i))||s);return a>3&&s&&Object.defineProperty(t,i,s),s},o=this&&this.__param||function(e,t){return function(i,r){t(i,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;var a=i(147),s=i(855),c=i(782),l=i(97),u=function(e){function t(e,i,r){var n;return h(this,t),(n=f(this,t)).content=0,n.combinedData="",n.fg=e.fg,n.bg=e.bg,n.combinedData=i,n._width=r,n}return p(t,e),d(t,[{key:"isCombined",value:function(){return 2097152}},{key:"getWidth",value:function(){return this._width}},{key:"getChars",value:function(){return this.combinedData}},{key:"getCode",value:function(){return 2097151}},{key:"setFromCharData",value:function(e){throw new Error("not implemented")}},{key:"getAsCharData",value:function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}]),t}(a.AttributeData);t.JoinedCellData=u;var v=function(){function e(t){h(this,e),this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new c.CellData}return d(e,[{key:"register",value:function(e){var t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}},{key:"deregister",value:function(e){for(var t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}},{key:"getJoinedCharacters",value:function(e){if(0===this._characterJoiners.length)return[];var t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];for(var i=[],r=t.translateToString(!0),n=0,o=0,a=0,c=t.getFg(0),l=t.getBg(0),h=0;h<t.getTrimmedLength();h++)if(t.loadCell(h,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==c||this._workCell.bg!==l){if(h-n>1)for(var u=this._getJoinedRanges(r,a,o,t,n),d=0;d<u.length;d++)i.push(u[d]);n=h,a=o,c=this._workCell.fg,l=this._workCell.bg}o+=this._workCell.getChars().length||s.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-n>1)for(var f=this._getJoinedRanges(r,a,o,t,n),v=0;v<f.length;v++)i.push(f[v]);return i}},{key:"_getJoinedRanges",value:function(t,i,r,n,o){var a=t.substring(i,r),s=[];try{s=this._characterJoiners[0].handler(a)}catch(u){}for(var c=1;c<this._characterJoiners.length;c++)try{for(var l=this._characterJoiners[c].handler(a),h=0;h<l.length;h++)e._mergeRanges(s,l[h])}catch(d){}return this._stringRangesToCellRanges(s,n,o),s}},{key:"_stringRangesToCellRanges",value:function(e,t,i){var r=0,n=!1,o=0,a=e[r];if(a){for(var c=i;c<this._bufferService.cols;c++){var l=t.getWidth(c),h=t.getString(c).length||s.WHITESPACE_CELL_CHAR.length;if(0!==l){if(!n&&a[0]<=o&&(a[0]=c,n=!0),a[1]<=o){if(a[1]=c,!(a=e[++r]))break;a[0]<=o?(a[0]=c,n=!0):n=!1}o+=h}}a&&(a[1]=this._bufferService.cols)}}}],[{key:"_mergeRanges",value:function(e,t){for(var i=!1,r=0;r<e.length;r++){var n=e[r];if(i){if(t[1]<=n[0])return e[r-1][1]=t[1],e;if(t[1]<=n[1])return e[r-1][1]=Math.max(t[1],n[1]),e.splice(r,1),e;e.splice(r,1),r--}else{if(t[1]<=n[0])return e.splice(r,0,t),e;if(t[1]<=n[1])return n[0]=Math.min(t[0],n[0]),e;t[0]<n[1]&&(n[0]=Math.min(t[0],n[0]),i=!0)}}return i?e[e.length-1][1]=t[1]:e.push(t),e}}]),e}();v=n([o(0,l.IBufferService)],v),t.CharacterJoinerService=v},160:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;var r,n,a,s=i(399),c=0,l=0,h=0,u=0;function d(e){var t=e.toString(16);return t.length<2?"0"+t:t}function f(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}t.NULL_COLOR={css:"#00000000",rgba:0},function(e){e.toCss=function(e,t,i,r){return void 0!==r?"#".concat(d(e)).concat(d(t)).concat(d(i)).concat(d(r)):"#".concat(d(e)).concat(d(t)).concat(d(i))},e.toRgba=function(e,t,i){return(e<<24|t<<16|i<<8|(arguments.length>3&&void 0!==arguments[3]?arguments[3]:255))>>>0}}(r=t.channels||(t.channels={})),function(e){function t(e,t){var i;return u=Math.round(255*t),i=o(a.toChannels(e.rgba),3),c=i[0],l=i[1],h=i[2],{css:r.toCss(c,l,h,u),rgba:r.toRgba(c,l,h,u)}}e.blend=function(e,t){if(1==(u=(255&t.rgba)/255))return{css:t.css,rgba:t.rgba};var i=t.rgba>>24&255,n=t.rgba>>16&255,o=t.rgba>>8&255,a=e.rgba>>24&255,s=e.rgba>>16&255,d=e.rgba>>8&255;return c=a+Math.round((i-a)*u),l=s+Math.round((n-s)*u),h=d+Math.round((o-d)*u),{css:r.toCss(c,l,h),rgba:r.toRgba(c,l,h)}},e.isOpaque=function(e){return 255==(255&e.rgba)},e.ensureContrastRatio=function(e,t,i){var r=a.ensureContrastRatio(e.rgba,t.rgba,i);if(r)return a.toColor(r>>24&255,r>>16&255,r>>8&255)},e.opaque=function(e){var t,i=(255|e.rgba)>>>0;return t=o(a.toChannels(i),3),c=t[0],l=t[1],h=t[2],{css:r.toCss(c,l,h),rgba:i}},e.opacity=t,e.multiplyOpacity=function(e,i){return t(e,(u=255&e.rgba)*i/255)},e.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]}}(t.color||(t.color={})),function(e){var t,i;if(!s.isNode){var n=document.createElement("canvas");n.width=1,n.height=1;var d=n.getContext("2d",{willReadFrequently:!0});d&&((t=d).globalCompositeOperation="copy",i=t.createLinearGradient(0,0,1,1))}e.toColor=function(e){var n;if(e.match(/#[\da-f]{3,8}/i))switch(e.length){case 4:return c=parseInt(e.slice(1,2).repeat(2),16),l=parseInt(e.slice(2,3).repeat(2),16),h=parseInt(e.slice(3,4).repeat(2),16),a.toColor(c,l,h);case 5:return c=parseInt(e.slice(1,2).repeat(2),16),l=parseInt(e.slice(2,3).repeat(2),16),h=parseInt(e.slice(3,4).repeat(2),16),u=parseInt(e.slice(4,5).repeat(2),16),a.toColor(c,l,h,u);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}var s=e.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(s)return c=parseInt(s[1]),l=parseInt(s[2]),h=parseInt(s[3]),u=Math.round(255*(void 0===s[5]?1:parseFloat(s[5]))),a.toColor(c,l,h,u);if(!t||!i)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=i,t.fillStyle=e,"string"!=typeof t.fillStyle)throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),n=o(t.getImageData(0,0,1,1).data,4),c=n[0],l=n[1],h=n[2],255!==(u=n[3]))throw new Error("css.toColor: Unsupported css format");return{rgba:r.toRgba(c,l,h,u),css:e}}}(t.css||(t.css={})),function(e){function t(e,t,i){var r=e/255,n=t/255,o=i/255;return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(n=t.rgb||(t.rgb={})),function(e){function t(e,t,i){for(var r=e>>24&255,o=e>>16&255,a=e>>8&255,s=t>>24&255,c=t>>16&255,l=t>>8&255,h=f(n.relativeLuminance2(s,c,l),n.relativeLuminance2(r,o,a));h<i&&(s>0||c>0||l>0);)s-=Math.max(0,Math.ceil(.1*s)),c-=Math.max(0,Math.ceil(.1*c)),l-=Math.max(0,Math.ceil(.1*l)),h=f(n.relativeLuminance2(s,c,l),n.relativeLuminance2(r,o,a));return(s<<24|c<<16|l<<8|255)>>>0}function i(e,t,i){for(var r=e>>24&255,o=e>>16&255,a=e>>8&255,s=t>>24&255,c=t>>16&255,l=t>>8&255,h=f(n.relativeLuminance2(s,c,l),n.relativeLuminance2(r,o,a));h<i&&(s<255||c<255||l<255);)s=Math.min(255,s+Math.ceil(.1*(255-s))),c=Math.min(255,c+Math.ceil(.1*(255-c))),l=Math.min(255,l+Math.ceil(.1*(255-l))),h=f(n.relativeLuminance2(s,c,l),n.relativeLuminance2(r,o,a));return(s<<24|c<<16|l<<8|255)>>>0}e.ensureContrastRatio=function(e,r,o){var a=n.relativeLuminance(e>>8),s=n.relativeLuminance(r>>8);if(f(a,s)<o){if(s<a){var c=t(e,r,o),l=f(a,n.relativeLuminance(c>>8));if(l<o){var h=i(e,r,o);return l>f(a,n.relativeLuminance(h>>8))?c:h}return c}var u=i(e,r,o),d=f(a,n.relativeLuminance(u>>8));if(d<o){var v=t(e,r,o);return d>f(a,n.relativeLuminance(v>>8))?u:v}return u}},e.reduceLuminance=t,e.increaseLuminance=i,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},e.toColor=function(e,t,i,n){return{css:r.toCss(e,t,i,n),rgba:r.toRgba(e,t,i,n)}}}(a=t.rgba||(t.rgba={})),t.toPaddedHex=d,t.contrastRatio=f},345:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=function(){function e(){h(this,e),this._listeners=[],this._disposed=!1}return d(e,[{key:"event",get:function(){var e=this;return this._event||(this._event=function(t){return e._listeners.push(t),{dispose:function(){if(!e._disposed)for(var i=0;i<e._listeners.length;i++)if(e._listeners[i]===t)return void e._listeners.splice(i,1)}}}),this._event}},{key:"fire",value:function(e,t){for(var i=[],r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(var n=0;n<i.length;n++)i[n].call(void 0,e,t)}},{key:"dispose",value:function(){this._listeners&&(this._listeners.length=0),this._disposed=!0}}]),e}(),t.forwardEvent=function(e,t){return e((function(e){return t.fire(e)}))}},859:function(e,t){function i(e){var t,i=s(e);try{for(i.s();!(t=i.n()).done;)t.value.dispose()}catch(r){i.e(r)}finally{i.f()}e.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.Disposable=void 0,t.Disposable=function(){function e(){h(this,e),this._disposables=[],this._isDisposed=!1}return d(e,[{key:"dispose",value:function(){this._isDisposed=!0;var e,t=s(this._disposables);try{for(t.s();!(e=t.n()).done;)e.value.dispose()}catch(i){t.e(i)}finally{t.f()}this._disposables.length=0}},{key:"register",value:function(e){return this._disposables.push(e),e}},{key:"unregister",value:function(e){var t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}}]),e}(),t.toDisposable=function(e){return{dispose:e}},t.disposeArray=i,t.getDisposeArrayDisposable=function(e){return{dispose:function(){return i(e)}}}},485:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;var i=function(){function e(){h(this,e),this._data={}}return d(e,[{key:"set",value:function(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}},{key:"get",value:function(e,t){return this._data[e]?this._data[e][t]:void 0}},{key:"clear",value:function(){this._data={}}}]),e}();t.TwoKeyMap=i,t.FourKeyMap=function(){function e(){h(this,e),this._data=new i}return d(e,[{key:"set",value:function(e,t,r,n,o){this._data.get(e,t)||this._data.set(e,t,new i),this._data.get(e,t).set(r,n,o)}},{key:"get",value:function(e,t,i,r){var n;return null===(n=this._data.get(e,t))||void 0===n?void 0:n.get(i,r)}},{key:"clear",value:function(){this._data.clear()}}]),e}()},399:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode="undefined"==typeof navigator;var i=t.isNode?"node":navigator.userAgent,r=t.isNode?"node":navigator.platform;t.isFirefox=i.includes("Firefox"),t.isLegacyEdge=i.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(i),t.getSafariVersion=function(){if(!t.isSafari)return 0;var e=i.match(/Version\/(\d+)/);return null===e||e.length<2?0:parseInt(e[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(r),t.isIpad="iPad"===r,t.isIphone="iPhone"===r,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(r),t.isLinux=r.indexOf("Linux")>=0,t.isChromeOS=/\bCrOS\b/.test(i)},385:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;var r=i(399),n=function(){function e(){h(this,e),this._tasks=[],this._i=0}return d(e,[{key:"enqueue",value:function(e){this._tasks.push(e),this._start()}},{key:"flush",value:function(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}},{key:"clear",value:function(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}},{key:"_start",value:function(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}},{key:"_process",value:function(e){this._idleCallback=void 0;var t=0,i=0;for(e.timeRemaining();this._i<this._tasks.length;)if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),1.5*(i=Math.max(t,i))>e.timeRemaining())return void this._start();this.clear()}}]),e}(),o=function(e){function t(){return h(this,t),f(this,t,arguments)}return p(t,e),d(t,[{key:"_requestCallback",value:function(e){var t=this;return setTimeout((function(){return e(t._createDeadline(16))}))}},{key:"_cancelCallback",value:function(e){clearTimeout(e)}},{key:"_createDeadline",value:function(e){var t=Date.now()+e;return{timeRemaining:function(){return Math.max(0,t-Date.now())}}}}]),t}(n);t.PriorityTaskQueue=o,t.IdleTaskQueue=!r.isNode&&"requestIdleCallback"in window?function(e){function t(){return h(this,t),f(this,t,arguments)}return p(t,e),d(t,[{key:"_requestCallback",value:function(e){return requestIdleCallback(e)}},{key:"_cancelCallback",value:function(e){cancelIdleCallback(e)}}]),t}(n):o,t.DebouncedIdleTask=function(){function e(){h(this,e),this._queue=new t.IdleTaskQueue}return d(e,[{key:"set",value:function(e){this._queue.clear(),this._queue.enqueue(e)}},{key:"flush",value:function(){this._queue.flush()}}]),e}()},147:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;var i=function(){function e(){h(this,e),this.fg=0,this.bg=0,this.extended=new r}return d(e,[{key:"clone",value:function(){var t=new e;return t.fg=this.fg,t.bg=this.bg,t.extended=this.extended.clone(),t}},{key:"isInverse",value:function(){return 67108864&this.fg}},{key:"isBold",value:function(){return 134217728&this.fg}},{key:"isUnderline",value:function(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}},{key:"isBlink",value:function(){return 536870912&this.fg}},{key:"isInvisible",value:function(){return 1073741824&this.fg}},{key:"isItalic",value:function(){return 67108864&this.bg}},{key:"isDim",value:function(){return 134217728&this.bg}},{key:"isStrikethrough",value:function(){return 2147483648&this.fg}},{key:"isProtected",value:function(){return 536870912&this.bg}},{key:"getFgColorMode",value:function(){return 50331648&this.fg}},{key:"getBgColorMode",value:function(){return 50331648&this.bg}},{key:"isFgRGB",value:function(){return 50331648==(50331648&this.fg)}},{key:"isBgRGB",value:function(){return 50331648==(50331648&this.bg)}},{key:"isFgPalette",value:function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}},{key:"isBgPalette",value:function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}},{key:"isFgDefault",value:function(){return 0==(50331648&this.fg)}},{key:"isBgDefault",value:function(){return 0==(50331648&this.bg)}},{key:"isAttributeDefault",value:function(){return 0===this.fg&&0===this.bg}},{key:"getFgColor",value:function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}},{key:"getBgColor",value:function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}},{key:"hasExtendedAttrs",value:function(){return 268435456&this.bg}},{key:"updateExtended",value:function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}},{key:"getUnderlineColor",value:function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}},{key:"getUnderlineColorMode",value:function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}},{key:"isUnderlineColorRGB",value:function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()}},{key:"isUnderlineColorPalette",value:function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}},{key:"isUnderlineColorDefault",value:function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()}},{key:"getUnderlineStyle",value:function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}],[{key:"toColorRGB",value:function(e){return[e>>>16&255,e>>>8&255,255&e]}},{key:"fromColorRGB",value:function(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]}}]),e}();t.AttributeData=i;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(this,e),this._ext=0,this._urlId=0,this._ext=t,this._urlId=i}return d(e,[{key:"ext",get:function(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext},set:function(e){this._ext=e}},{key:"underlineStyle",get:function(){return this._urlId?5:(469762048&this._ext)>>26},set:function(e){this._ext&=-469762049,this._ext|=e<<26&469762048}},{key:"underlineColor",get:function(){return 67108863&this._ext},set:function(e){this._ext&=-67108864,this._ext|=67108863&e}},{key:"urlId",get:function(){return this._urlId},set:function(e){this._urlId=e}},{key:"clone",value:function(){return new e(this._ext,this._urlId)}},{key:"isEmpty",value:function(){return 0===this.underlineStyle&&0===this._urlId}}]),e}();t.ExtendedAttrs=r},782:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;var r=i(133),n=i(855),o=i(147),a=function(e){function t(){var e;return h(this,t),(e=f(this,t,arguments)).content=0,e.fg=0,e.bg=0,e.extended=new o.ExtendedAttrs,e.combinedData="",e}return p(t,e),d(t,[{key:"isCombined",value:function(){return 2097152&this.content}},{key:"getWidth",value:function(){return this.content>>22}},{key:"getChars",value:function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,r.stringFromCodePoint)(2097151&this.content):""}},{key:"getCode",value:function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}},{key:"setFromCharData",value:function(e){this.fg=e[n.CHAR_DATA_ATTR_INDEX],this.bg=0;var t=!1;if(e[n.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[n.CHAR_DATA_CHAR_INDEX].length){var i=e[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){var r=e[n.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(i-55296)+r-56320+65536|e[n.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[n.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[n.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[n.CHAR_DATA_WIDTH_INDEX]<<22)}},{key:"getAsCharData",value:function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}],[{key:"fromCharData",value:function(e){var i=new t;return i.setFromCharData(e),i}}]),t}(o.AttributeData);t.CellData=a},855:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},133:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r="",n=t;n<i;++n){var o=e[n];o>65535?(o-=65536,r+=String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):r+=String.fromCharCode(o)}return r},t.StringToUtf32=function(){function e(){h(this,e),this._interim=0}return d(e,[{key:"clear",value:function(){this._interim=0}},{key:"decode",value:function(e,t){var i=e.length;if(!i)return 0;var r=0,n=0;if(this._interim){var o=e.charCodeAt(n++);56320<=o&&o<=57343?t[r++]=1024*(this._interim-55296)+o-56320+65536:(t[r++]=this._interim,t[r++]=o),this._interim=0}for(var a=n;a<i;++a){var s=e.charCodeAt(a);if(55296<=s&&s<=56319){if(++a>=i)return this._interim=s,r;var c=e.charCodeAt(a);56320<=c&&c<=57343?t[r++]=1024*(s-55296)+c-56320+65536:(t[r++]=s,t[r++]=c)}else 65279!==s&&(t[r++]=s)}return r}}]),e}(),t.Utf8ToUtf32=function(){function e(){h(this,e),this.interim=new Uint8Array(3)}return d(e,[{key:"clear",value:function(){this.interim.fill(0)}},{key:"decode",value:function(e,t){var i=e.length;if(!i)return 0;var r,n,o,a,s=0,c=0,l=0;if(this.interim[0]){var h=!1,u=this.interim[0];u&=192==(224&u)?31:224==(240&u)?15:7;for(var d,f=0;(d=63&this.interim[++f])&&f<4;)u<<=6,u|=d;for(var v=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,_=v-f;l<_;){if(l>=i)return 0;if(128!=(192&(d=e[l++]))){l--,h=!0;break}this.interim[f++]=d,u<<=6,u|=63&d}h||(2===v?u<128?l--:t[s++]=u:3===v?u<2048||u>=55296&&u<=57343||65279===u||(t[s++]=u):u<65536||u>1114111||(t[s++]=u)),this.interim.fill(0)}for(var g=i-4,p=l;p<i;){for(;!(!(p<g)||128&(r=e[p])||128&(n=e[p+1])||128&(o=e[p+2])||128&(a=e[p+3]));)t[s++]=r,t[s++]=n,t[s++]=o,t[s++]=a,p+=4;if((r=e[p++])<128)t[s++]=r;else if(192==(224&r)){if(p>=i)return this.interim[0]=r,s;if(128!=(192&(n=e[p++]))){p--;continue}if((c=(31&r)<<6|63&n)<128){p--;continue}t[s++]=c}else if(224==(240&r)){if(p>=i)return this.interim[0]=r,s;if(128!=(192&(n=e[p++]))){p--;continue}if(p>=i)return this.interim[0]=r,this.interim[1]=n,s;if(128!=(192&(o=e[p++]))){p--;continue}if((c=(15&r)<<12|(63&n)<<6|63&o)<2048||c>=55296&&c<=57343||65279===c)continue;t[s++]=c}else if(240==(248&r)){if(p>=i)return this.interim[0]=r,s;if(128!=(192&(n=e[p++]))){p--;continue}if(p>=i)return this.interim[0]=r,this.interim[1]=n,s;if(128!=(192&(o=e[p++]))){p--;continue}if(p>=i)return this.interim[0]=r,this.interim[1]=n,this.interim[2]=o,s;if(128!=(192&(a=e[p++]))){p--;continue}if((c=(7&r)<<18|(63&n)<<12|(63&o)<<6|63&a)<65536||c>1114111)continue;t[s++]=c}}return s}}]),e}()},726:function(e,t){function i(e,t,i){t.di$target===t?t.di$dependencies.push({id:e,index:i}):(t.di$dependencies=[{id:e,index:i}],t.di$target=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0,t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e.di$dependencies||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);var r=function e(t,r,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");i(e,t,n)};return r.toString=function(){return e},t.serviceRegistry.set(e,r),r}},97:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;var r,n=i(726);t.IBufferService=(0,n.createDecorator)("BufferService"),t.ICoreMouseService=(0,n.createDecorator)("CoreMouseService"),t.ICoreService=(0,n.createDecorator)("CoreService"),t.ICharsetService=(0,n.createDecorator)("CharsetService"),t.IInstantiationService=(0,n.createDecorator)("InstantiationService"),(r=t.LogLevelEnum||(t.LogLevelEnum={}))[r.DEBUG=0]="DEBUG",r[r.INFO=1]="INFO",r[r.WARN=2]="WARN",r[r.ERROR=3]="ERROR",r[r.OFF=4]="OFF",t.ILogService=(0,n.createDecorator)("LogService"),t.IOptionsService=(0,n.createDecorator)("OptionsService"),t.IOscLinkService=(0,n.createDecorator)("OscLinkService"),t.IUnicodeService=(0,n.createDecorator)("UnicodeService"),t.IDecorationService=(0,n.createDecorator)("DecorationService")}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,i),o.exports}var c={};return function(){var e=c;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasAddon=void 0;var t=i(949),r=i(345),n=i(859),o=function(e){function i(){var e;return h(this,i),(e=f(this,i,arguments))._onChangeTextureAtlas=e.register(new r.EventEmitter),e.onChangeTextureAtlas=e._onChangeTextureAtlas.event,e._onAddTextureAtlasCanvas=e.register(new r.EventEmitter),e.onAddTextureAtlasCanvas=e._onAddTextureAtlasCanvas.event,e}return p(i,e),d(i,[{key:"textureAtlas",get:function(){var e;return null===(e=this._renderer)||void 0===e?void 0:e.textureAtlas}},{key:"activate",value:function(e){var i=this,o=e._core;if(e.element){this._terminal=e;var a=o.coreService,s=o.optionsService,c=o.screenElement,l=o.linkifier2,h=o,u=h._bufferService,d=h._renderService,f=h._characterJoinerService,v=h._charSizeService,_=h._coreBrowserService,g=h._decorationService,p=h._themeService;this._renderer=new t.CanvasRenderer(e,c,l,u,v,s,f,a,_,g,p),this.register((0,r.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,r.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),d.setRenderer(this._renderer),d.handleResize(u.cols,u.rows),this.register((0,n.toDisposable)((function(){var t;d.setRenderer(i._terminal._core._createRenderer()),d.handleResize(e.cols,e.rows),null===(t=i._renderer)||void 0===t||t.dispose(),i._renderer=void 0})))}else this.register(o.onWillOpen((function(){return i.activate(e)})))}}]),i}(n.Disposable);e.CanvasAddon=o}(),c}()}(F);t("x",F.exports);var H=A({__name:"XtermAddHost",props:{compData:{default:function(){return{}}},type:{default:"default"}},emits:["success"],setup:function(t,r){var n=r.expose,o=r.emit,a=t,s=E().proxy,c=B().refs.refreshServerTable,l=T("password"),h=T([{value:s.$t("Verify",{text:s.$t("Password")}),label:"password"},{value:s.$t("Verify",{text:s.$t("PrivateKey")}),label:"private"}]),u=T({host:[{required:!0,message:"请输入服务器IP",trigger:"change"},P()],port:[{required:!0,message:"请输入端口",trigger:["change","blur"]},O()],username:[{required:!0,message:"请输入SSH账号",trigger:["change","blur"]}],password:[{required:!0,message:"请输入SSH密码",trigger:["change","blur"]}],pkey:[{required:!0,message:"请输入SSH私钥",trigger:["change","blur"]}]}),d=D({host:"",port:22,username:"root",password:"",pkey:"",pkey_passwd:"",ps:""}),f=function(){return new Promise((function(t,r){var n=a.compData.isEditHostView;s.$refs.AddHostForm.validate(function(){var a=i(e().mark((function i(a){var l,h,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=21;break}return l=s.$load("正在"+(n?"修改":"创建")+"主机信息，请稍后..."),e.prev=2,e.next=5,I(S(d));case 5:h=e.sent,(u=h.data).status&&s.$emit("close"),s.$message.request(u),t(u),u.status&&(c.value=!0),o("success",S(d)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(2),r(e.t0);case 18:return e.prev=18,l.close(),e.finish(18);case 21:case"end":return e.stop()}}),i,null,[[2,14,18,21]])})));return function(e){return a.apply(this,arguments)}}())}))},v=function(){var t=i(e().mark((function t(){var i,r,n,o,c,h,u;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.compData,r=i.isEditHostView,n=i.rowsData,!i.isLocal){e.next=5;break}for(o in n)d[o]=n[o];e.next=15;break;case 5:if(!r){e.next=14;break}return e.next=8,t=n.host,f=n.port,b.post("xterm/get_host_find",{data:{host:t,port:f}});case 8:for(u in c=e.sent,h=c.data)d[u]=h[u];h.pkey&&(l.value="private"),e.next=15;break;case 14:s.$refs.AddHostForm.resetFields();case 15:L(s.$el,"host");case 16:case"end":return e.stop()}var t,f}),t)})));return function(){return t.apply(this,arguments)}}();return n({onOpen:v,onConfirm:f}),{__sfc:!0,vm:s,refreshServerTable:c,props:a,emit:o,authType:l,authList:h,hostFormRules:u,hostForm:d,inputHostInfo:function(e){d.ps=e},autoFillHostInfo:function(){if(d.host){var e,t,i,r=d.host;if(-1!=r.indexOf("@")){var n=r.split("@");if(r=n[1],-1!=(t=n[0]).indexOf(":")){n=t.split(":");t=n[0],i=n[1]}}if(-1!=r.indexOf(":")){n=r.split(":");r=n[0],e=n[1]}r&&(d.host=r,d.ps=r),e&&(d.port=Number(e)),t&&(d.username=t),i&&(d.password=i)}},cutAuthType:function(e){s.$refs.AddHostForm.clearValidate(),"password"===e?(d.pkey="",d.pkey_passwd="",L(s.$el,"password")):(d.password="",L(s.$el,"pkey","textarea"))},onConfirm:f,recursiveParam:function(e){},onOpen:v}}}),W=function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("div",{staticClass:"flex flex-col"},[t(_,{ref:"AddHostForm",staticClass:"p-[2rem]",attrs:{model:i.hostForm,rules:i.hostFormRules,"label-width":"4rem"}},[t("div",{staticClass:"flex mb-[1.8rem]"},[t(y,{attrs:{label:e.$t("Server",{text:"IP"}),prop:"host"}},[t(u,{staticClass:"mr-16x",attrs:{placeholder:"请输入服务器IP",name:"host",width:"18rem"},on:{input:i.inputHostInfo,blur:i.autoFillHostInfo},model:{value:i.hostForm.host,callback:function(t){e.$set(i.hostForm,"host",t)},expression:"hostForm.host"}})],1),t(y,{staticClass:"w-[8.4rem] !mt-0",attrs:{id:"portInfo",prop:"port"}},[t(u,{staticClass:"w-[28rem]",attrs:{width:"8.4rem",placeholder:"端口"},model:{value:i.hostForm.port,callback:function(t){e.$set(i.hostForm,"port",t)},expression:"hostForm.port"}})],1)],1),t(y,{attrs:{label:e.$t("Account",{text:"SSH"}),prop:"username"}},[t(u,{staticClass:"mr-4",attrs:{placeholder:"请输入SSH账号",width:"28rem"},model:{value:i.hostForm.username,callback:function(t){e.$set(i.hostForm,"username",t)},expression:"hostForm.username"}})],1),t(y,{attrs:{label:e.$t("VerifyMethod")}},[t(w,{on:{input:i.cutAuthType},model:{value:i.authType,callback:function(e){i.authType=e},expression:"authType"}},[e._l(i.authList,(function(i,r){return[t(x,{key:r,attrs:{label:i.label}},[e._v(" "+e._s(i.value)+" ")])]}))],2)],1),"password"===i.authType?[t(y,{attrs:{label:e.$t("Password"),prop:"password"}},[t(u,{staticClass:"mr-4",attrs:{name:"password",placeholder:"请输入SSH密码",width:"28rem"},model:{value:i.hostForm.password,callback:function(t){e.$set(i.hostForm,"password",t)},expression:"hostForm.password"}})],1)]:[t(y,{attrs:{label:e.$t("PrivateKey"),prop:"pkey"}},[t(u,{staticClass:"mr-4",attrs:{type:"textarea",name:"pkey",placeholder:"请输入SSH私钥",autosize:{minRows:4,maxRows:4},width:"28rem"},model:{value:i.hostForm.pkey,callback:function(t){e.$set(i.hostForm,"pkey",t)},expression:"hostForm.pkey"}})],1),t(y,{attrs:{label:e.$t("PrivateKeyPaw"),prop:"pkeyPasswd"}},[t(u,{staticClass:"mr-4",attrs:{placeholder:"请输入私钥密码",width:"28rem"},model:{value:i.hostForm.pkey_passwd,callback:function(t){e.$set(i.hostForm,"pkey_passwd",t)},expression:"hostForm.pkey_passwd"}})],1)],"verify"!==e.type?t(y,{attrs:{label:e.$t("Ps"),prop:"ps"}},[t(u,{staticClass:"mr-4",attrs:{placeholder:"请输入备注,可为空",width:"28rem"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:i.onConfirm.apply(null,arguments)}},model:{value:i.hostForm.ps,callback:function(t){e.$set(i.hostForm,"ps",t)},expression:"hostForm.ps"}})],1):e._e(),"password"===i.authType&&"verify"!==e.type?t(l,{staticClass:"mt-20px"},[t("li",[e._v("支持快速填充主机信息，格式：[账号:密码@]服务器IP[:端口]")])]):e._e()],2)],1)},j=t("X",M(H,W,[],!1,null,"ecc0c4b0",null,null).exports),z=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"}));t("i",z)}}}))}();
