import{B as a}from"./element-lib.js?v=1714377894636";import{n as e}from"./main.js?v=1714377894636";import{e as t,b as s,h as o,j as l}from"./vue-lib.js?v=1714377894636";import{g as i,dJ as n,dK as r,B as p}from"./site.store.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./check.js?v=1714377894636";const c=e(t({__name:"ExternalNetMap",props:{compData:{default:{}}},setup(a){const e=a,{refs:{siteInfo:t}}=i(),{proxy:c}=l(),m=s(!1),u=s(!1),d=async()=>{var a;let e=null==(a=t.value.project_type)?void 0:a.toLowerCase();"node"===e&&(e="nodejs");let s={project_name:t.value.name};"python"===e&&(s.name=t.value.name,delete s.project_name);try{const a=await p({data:JSON.stringify(s)},e);a.status&&(m.value=!!a.data.project_config.bind_extranet,u.value="springboot"!==a.data.project_config.java_type&&"Java"===t.value.project_type,t.value=a.data)}catch(o){}};return o((()=>{var a;m.value=!!(null==(a=t.value.project_config)?void 0:a.bind_extranet),u.value="springboot"!==t.value.project_config.java_type&&"Java"===t.value.project_type,d()})),{__sfc:!0,props:e,siteInfo:t,vm:c,mappingStatus:m,mappingType:u,changeStatus:async a=>{var e;try{let s,o=null==(e=t.value.project_type)?void 0:e.toLowerCase(),l={project_name:t.value.name};"node"===o&&(o="nodejs"),"java"!==o&&(m.value=!a,await c.$confirm({width:40,title:"外网映射",message:"".concat(a?"开启":"关闭","外网映射后，").concat(a?"可以通过绑定域名进行访问":"已绑定域名将取消关联访问","，是否继续操作？"),icon:"warning"}),l.domains=t.value.project_config.domains),"python"===o&&(l.name=t.value.name,delete l.project_name);let i=c.$load("正在操作中，请稍后...");s=a?await n({data:JSON.stringify(l)},o):await r({data:JSON.stringify(l)},o),i.close(),"java"===o?c.$message.request(s):(s.data.status&&c.$message.success(s.data.msg||s.data.data),!s.data.status&&c.$message.error(s.data.error_msg)),d()}catch(s){}},getInfo:d}}}),(function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{staticClass:"flex flex-col"},[t("div",{staticClass:"flex items-center"},[e._v(" 外网映射"),t(a,{staticClass:"ml-8x",attrs:{disabled:s.mappingType},on:{change:s.changeStatus},model:{value:s.mappingStatus,callback:function(a){s.mappingStatus=a},expression:"mappingStatus"}})],1),t("ul",{staticClass:"mt-8x leading-8 text-[1.2rem] list-disc ml-20x"},[t("li",[e._v("如果您的是HTTP项目，且需要外网通过80/443访问，请开启外网映射")]),t("li",[e._v("开启外网映射前，请到【域名管理】中至少添加1个域名")]),"Java"===e.compData.project_type?t("li",{staticClass:"text-danger"},[e._v(" JAVA项目类型为内置项目和独立项目时无法关闭外网映射 ")]):e._e()])])}),[],!1,null,"9fb0121b",null,null).exports;export{c as default};
