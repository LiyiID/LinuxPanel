(function(){function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function p(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),s=new $(r||[]);return a(i,"_invoke",{value:j(e,n,s)}),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=p;var m="suspendedStart",f="suspendedYield",d="executing",v="completed",_={};function h(){}function y(){}function g(){}var x={};u(x,i,(function(){return this}));var b=Object.getPrototypeOf,D=b&&b(b(E([])));D&&D!==n&&r.call(D,i)&&(x=D);var w=g.prototype=h.prototype=Object.create(x);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function n(a,o,i,s){var c=l(e[a],e,o);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==_typeof(p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(p).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return o=o?o.then(a,a):a()}})}function j(t,n,r){var a=m;return function(o,i){if(a===d)throw new Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:e,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var c=T(s,r);if(c){if(c===_)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=l(t,n,r);if("normal"===u.type){if(a=r.done?v:f,u.arg===_)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),_;var o=l(a,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,_;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,_):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function E(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(_typeof(t)+" is not iterable")}return y.prototype=g,a(w,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:y,configurable:!0}),y.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},k(P.prototype),u(P.prototype,s,(function(){return this})),t.AsyncIterator=P,t.async=function(e,n,r,a,o){void 0===o&&(o=Promise);var i=new P(p(e,n,r,a),o);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=E,$.prototype={constructor:$,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return s.type="throw",s.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,_):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;S(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:E(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),_}},t}function asyncGeneratorStep(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep(o,r,a,i,s,"next",e)}function s(e){asyncGeneratorStep(o,r,a,i,s,"throw",e)}i(void 0)}))}}System.register(["./index-legacy85.js?v=1714377894636","./element-lib-legacy.js?v=1714377894636","./main-legacy.js?v=1714377894636","./form-item-legacy.js?v=1714377894636","./form-legacy.js?v=1714377894636","./index-legacy53.js?v=1714377894636","./index-legacy39.js?v=1714377894636","./index-legacy59.js?v=1714377894636","./preload-helper-legacy.js?v=1714377894636","./vue-lib-legacy.js?v=1714377894636","./confirm-legacy.js?v=1714377894636","./locales-lib-legacy.js?v=1714377894636","./site.store-legacy.js?v=1714377894636","./site.popup-legacy.js?v=1714377894636","./__commonjsHelpers__-legacy.js?v=1714377894636","./public-lib-legacy.js?v=1714377894636","./modulepreload-polyfill-legacy.js?v=1714377894636","./request-lib-legacy.js?v=1714377894636","./progress-legacy.js?v=1714377894636","./select-legacy.js?v=1714377894636","./empty-legacy.js?v=1714377894636","./config-legacy.js?v=1714377894636","./check-legacy.js?v=1714377894636","./index-legacy38.js?v=1714377894636","./index-legacy45.js?v=1714377894636","./element-ui.common-legacy.js?v=1714377894636","./date-util-legacy.js?v=1714377894636","./vdom-legacy.js?v=1714377894636","./index-legacy62.js?v=1714377894636","./cascader-panel-legacy.js?v=1714377894636"],(function(exports,module){"use strict";var __unplugin_components_2,__unplugin_components_0$1,__unplugin_components_1,__unplugin_components_3,getDataInfo,isRelease,dialogView,normalizeComponent,__unplugin_components_4,__unplugin_components_6,__unplugin_components_3$2,__unplugin_components_3$1,__unplugin_components_2$1,__unplugin_components_0,__vitePreload,defineComponent,reactive,ref$1,h,onMounted,getCurrentInstance,onDefaultConfirm,getSiteStore,delDomainMultiple,multiRemoveProjectDomain,delPhpAsyncDomain,proxyBatchDelDomain,removeProjectDomain,getPythonProjectDomain,getPhpAsyncDomain,proxyGetDomain,getProjectDomain,getProjectInfo,proxyDelDomain,removePythonProjectDomain,delDomain,addDomain,addPythonProjectDomain,addPhpAsyncDomain,proxyAddDomain,addProjectDomain,getHttpsPort,ProxySetHttps,setHttpsPort,resultDialog;return{setters:[function(e){__unplugin_components_2=e._},function(e){__unplugin_components_0$1=e.w,__unplugin_components_1=e.x},function(e){__unplugin_components_3=e.a,getDataInfo=e.ae,isRelease=e.o,dialogView=e.l,normalizeComponent=e.n,__unplugin_components_4=e.r,__unplugin_components_6=e.q,__unplugin_components_3$2=e.b},null,null,function(e){__unplugin_components_3$1=e._},function(e){__unplugin_components_2$1=e._},function(e){__unplugin_components_0=e._},function(e){__vitePreload=e._},function(e){defineComponent=e.e,reactive=e.v,ref$1=e.b,h=e.H,onMounted=e.h,getCurrentInstance=e.j},function(e){onDefaultConfirm=e.a},null,function(e){getSiteStore=e.g,delDomainMultiple=e.J,multiRemoveProjectDomain=e.K,delPhpAsyncDomain=e.L,proxyBatchDelDomain=e.M,removeProjectDomain=e.N,getPythonProjectDomain=e.O,getPhpAsyncDomain=e.P,proxyGetDomain=e.Q,getProjectDomain=e.R,getProjectInfo=e.B,proxyDelDomain=e.S,removePythonProjectDomain=e.T,delDomain=e.U,addDomain=e.V,addPythonProjectDomain=e.W,addPhpAsyncDomain=e.X,proxyAddDomain=e.Y,addProjectDomain=e.Z,getHttpsPort=e._,ProxySetHttps=e.$,setHttpsPort=e.a0},function(e){resultDialog=e.r},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function execute(){var _sfc_main=defineComponent({__name:"DomainManage",props:{compData:{default:function(){return{}}}},setup:function setup(__props){var _props$compData$proje,props=__props,_getCurrentInstance=getCurrentInstance(),vm=_getCurrentInstance.proxy,portForm=reactive({port:""}),_getSiteStore=getSiteStore(),siteInfo=_getSiteStore.refs.siteInfo,siteType=ref$1(null===(_props$compData$proje=props.compData.project_type)||void 0===_props$compData$proje?void 0:_props$compData$proje.toLowerCase()),checkedList=ref$1([]),portPopup=ref$1(!1),domainData=ref$1(""),port=ref$1("未开启"),tableData=ref$1([]),tableLoad=ref$1(!1),isBindExtranet=ref$1(!1),tableColumn=ref$1([{type:"selection",width:40},{label:"域名",prop:"name",width:400,render:function(e){return h(__unplugin_components_3,{attrs:{href:"http://".concat(e.name,":").concat(e.port)}},[e.name])}},{label:"端口",prop:"port"},{label:"操作",align:"right",render:function(e){return 1===tableData.value.length&&isBindExtranet.value?h("span",["不可操作"]):h(__unplugin_components_3,{on:{click:function(){deleteEvent(e)}}},"删除")}}]),resultColumn=ref$1([{label:"域名",prop:"name"},{label:"结果",render:function(e){return h("span",{class:e.status?"text-primary":"text-danger"},e.status?"操作成功":e.msg)}}]),batchGroup=ref$1([{label:"删除",value:"delete",diyBatch:(_diyBatch=_asyncToGenerator(_regeneratorRuntime().mark((function e(){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"php"===siteType.value?onDefaultConfirm({confirm:{title:"批量删除",message:"批量删除，该操作可能会存在风险，是否继续？",icon:"warning"},loading:"正在删除，请稍后...",request:function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[checkedList.value.map((function(e){return e.id}))],e.next=3,delDomainMultiple({domains_id:t,id:props.compData.id});case 3:return n=e.sent,r=[],e.next=7,n.success.forEach((function(e){r.push({name:e,msg:"删除成功",status:!0})}));case 7:return e.next=9,Object.keys(n.error).forEach((function(e){r.push({name:e,msg:n.data.error[e],status:!1})}));case 9:return e.next=11,resultDialog({resultData:r,resultColumn:resultColumn});case 11:getSiteNameList();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}):onDefaultConfirm({confirm:{title:"批量删除",message:"同时删除选中的域名，是否继续？",icon:"warning",type:"calc"},loading:"正在删除，请稍后...",request:function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],"python"!==siteType.value){e.next=11;break}return e.next=4,multiRemoveProjectDomain({name:props.compData.name,domain_ids:JSON.stringify(checkedList.value.map((function(e){return e.id})))});case 4:return t=e.sent,e.next=7,t.data.success.forEach((function(e){n.push({name:e,msg:"删除成功",status:!0})}));case 7:return e.next=9,Object.keys(t.data.error).forEach((function(e){n.push({name:e,msg:t.data.error[e],status:!1})}));case 9:e.next=26;break;case 11:if("phpasync"!=siteType.value){e.next=18;break}return e.next=14,delPhpAsyncDomain({sitename:props.compData.name,domain:JSON.stringify(checkedList.value.map((function(e){return e.name})))});case 14:r=e.sent,n=r.data,e.next=26;break;case 18:if("proxy"!=siteType.value&&"nginx"!==siteType.value){e.next=25;break}return e.next=21,proxyBatchDelDomain({id:props.compData.id,site_name:props.compData.name,domains:checkedList.value.map((function(e){return e.name})).join("\n")});case 21:a=e.sent,n=a.data,e.next=26;break;case 25:checkedList.value.forEach(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var r,a,o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,removeProjectDomain({data:JSON.stringify({project_name:props.compData.name,domain:t.name})},siteType.value);case 2:o=e.sent,n.push({name:t.name,msg:(null===(r=o.data)||void 0===r?void 0:r.data)||(null===(a=o.data)||void 0===a?void 0:a.error_msg)||o.msg,status:o.data.status});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 26:return e.next=28,resultDialog({resultData:n,resultColumn:resultColumn});case 28:return getSiteNameList(),e.abrupt("return",null);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 1:case"end":return e.stop()}}),e)}))),function(){return _diyBatch.apply(this,arguments)})}]),_diyBatch,batchConfig=reactive({isRecurrence:!1,describe:{title:"批量删除脚本",th:"脚本",message:"批量删除后脚本信息将无法恢复，是否继续？",propsValue:"name"}}),getInfo=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"node"===(n=null===(t=siteInfo.value.project_type)||void 0===t?void 0:t.toLowerCase())&&(n="nodejs"),r={project_name:siteInfo.value.name},"python"===n&&(r.name=siteInfo.value.name,delete r.project_name),e.prev=4,e.next=7,getProjectInfo({data:JSON.stringify(r)},n);case 7:(a=e.sent).status&&(siteInfo.value=a.data,isBindExtranet.value=1===(null===(o=a.data.project_config)||void 0===o?void 0:o.bind_extranet)||!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}(),handleSelect=function(e){checkedList.value=e},deleteEvent=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:onDefaultConfirm({confirm:{title:"删除【".concat(t.name,"】"),message:"删除".concat(t.name,"后，将无法使用该域名访问网站，是否继续操作？"),icon:"warning"},loading:"正在删除，请稍后...",request:function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var n,r;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("proxy"!==siteType.value&&"nginx"!==siteType.value){e.next=4;break}return e.next=3,proxyDelDomain({id:props.compData.id,site_name:props.compData.name,domain:t.name,port:t.port});case 3:case 7:case 13:case 23:return e.abrupt("return",e.sent);case 4:if("php"===siteType.value||"phpasync"===siteType.value||"python"===siteType.value){e.next=10;break}return e.next=7,removeProjectDomain({data:JSON.stringify({project_name:props.compData.name,domain:t.name})},siteType.value);case 10:if("python"!==siteType.value){e.next=16;break}return e.next=13,removePythonProjectDomain({data:JSON.stringify({name:props.compData.name,domain:t.name})});case 16:if("phpasync"!=siteType.value){e.next=21;break}return e.next=19,delPhpAsyncDomain({sitename:props.compData.name,domain:JSON.stringify([t.name])});case 19:return r=e.sent,e.abrupt("return",{status:r.status,msg:(null===(n=r.data[0])||void 0===n?void 0:n.msg)||r.msg});case 21:return e.next=23,delDomain({id:t.pid,webname:props.compData.name,domain:t.name,port:t.port});case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),complete:getSiteNameList});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),batchEvent=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n,r){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),addDomainData=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n,r,a,o,i,s,c,u,p;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=["21","25","443","888","8888","8443"],""!==domainData.value){e.next=4;break}return vm.$message.error("域名不能为空"),e.abrupt("return");case 4:if(n=String(domainData.value.match(/:(\d+)/g)).replace(/:/g,""),!t.includes(n)){e.next=8;break}return vm.$message.error("端口不能为常用端口21、25、443、888、8888、8443"),e.abrupt("return");case 8:if("java"!==siteType.value){e.next=16;break}return e.next=11,check_domain_list(domainData.value);case 11:if(r=e.sent){e.next=14;break}return e.abrupt("return",r);case 14:e.next=21;break;case 16:return e.next=18,check_domain_list(domainData.value,!0);case 18:if(a=e.sent){e.next=21;break}return e.abrupt("return",a);case 21:if(o=vm.$load("正在添加域名，请稍候..."),e.prev=22,"php"!==siteType.value){e.next=29;break}return e.next=26,addDomain({domain:domainData.value.replace(/\n/g,","),webname:props.compData.name,id:props.compData.id});case 26:c=e.sent,e.next=50;break;case 29:if("python"!=siteType.value){e.next=35;break}return e.next=32,addPythonProjectDomain({data:JSON.stringify({name:props.compData.name,domains:domainData.value.split("\n")})});case 32:c=e.sent,e.next=50;break;case 35:if("phpasync"!=siteType.value){e.next=41;break}return e.next=38,addPhpAsyncDomain({sitename:props.compData.name,domains:JSON.stringify(domainData.value.split("\n"))});case 38:c=e.sent,e.next=50;break;case 41:if("proxy"!=siteType.value&&"nginx"!==siteType.value){e.next=47;break}return e.next=44,proxyAddDomain({id:props.compData.id,site_name:props.compData.name,domains:domainData.value});case 44:c=e.sent,e.next=50;break;case 47:return e.next=49,addProjectDomain({data:JSON.stringify({project_name:props.compData.name,domains:domainData.value.split("\n")})},siteType.value);case 49:c=e.sent;case 50:if(null!==(i=c)&&void 0!==i&&i.status||null===(s=c)||void 0===s||!s.msg){e.next=53;break}return vm.$message.error(c.msg),e.abrupt("return");case 53:domainData.value="",u=[],p=c.data.domains,"proxy"!==siteType.value&&"nginx"!==siteType.value||(p=c.data),p.forEach(function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.push({name:t.name,msg:t.msg||"--",status:t.status}),n!==p.length-1){e.next=6;break}return o.close(),e.next=5,dialogView({title:"域名添加结果",area:46,component:function(){return __vitePreload((function(){return module.import("./index-legacy63.js?v=1714377894636")}),void 0,module.meta.url)},compData:{resultData:u,resultColumn:resultColumn,showMult:!1,resultTitle:"添加域名"}});case 5:getSiteNameList();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=63;break;case 60:e.prev=60,e.t0=e.catch(22);case 63:return e.prev=63,o.close(),e.finish(63);case 66:case"end":return e.stop()}}),e,null,[[22,60,63,66]])})));return function(){return e.apply(this,arguments)}}(),getPort=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tableLoad.value=!0,e.prev=1,e.next=4,getHttpsPort({siteName:props.compData.name});case 4:t=e.sent,port.value=t.data||"未开启",t.data&&(portForm.port=t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1);case 12:return e.prev=12,tableLoad.value=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(){return e.apply(this,arguments)}}(),getSiteNameList=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tableLoad.value=!0,t={table:"domain",list:"True",search:props.compData.id},e.prev=2,!specialData.value.includes(siteType.value)){e.next=9;break}return e.next=6,getDataInfo(t);case 6:n=e.sent,e.next=30;break;case 9:if("python"!=siteType.value){e.next=15;break}return e.next=12,getPythonProjectDomain({data:JSON.stringify({name:props.compData.name})});case 12:n=e.sent,e.next=30;break;case 15:if("phpasync"!=siteType.value){e.next=21;break}return e.next=18,getPhpAsyncDomain({sitename:props.compData.name});case 18:n=e.sent,e.next=30;break;case 21:if("nginx"!=siteType.value&&"proxy"!=siteType.value){e.next=27;break}return e.next=24,proxyGetDomain({site_name:props.compData.name,id:props.compData.id});case 24:n=e.sent,e.next=30;break;case 27:return e.next=29,getProjectDomain({data:JSON.stringify({project_name:props.compData.name})},siteType.value);case 29:n=e.sent;case 30:"nginx"==siteType.value||"proxy"==siteType.value?(port.value=Number(n.data.https_port)||"未开启",n.data&&(portForm.port=n.data.https_port),tableData.value=n.data.domain_list):tableData.value=n.data,e.next=36;break;case 33:e.prev=33,e.t0=e.catch(2);case 36:return e.prev=36,tableLoad.value=!1,e.finish(36);case 39:case"end":return e.stop()}}),e,null,[[2,33,36,39]])})));return function(){return e.apply(this,arguments)}}(),setPorxyPort=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=vm.$load("正在设置HTTPS端口，请稍候..."),e.prev=1,e.next=4,ProxySetHttps({site_name:props.compData.name,https_port:Number(portForm.port)});case 4:n=e.sent,vm.$message.request(n),port.value=Number(portForm.port),t.close(),portPopup.value=!1,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1);case 14:return e.prev=14,portPopup.value=!1,t.close(),e.finish(14);case 18:case"end":return e.stop()}}),e,null,[[1,11,14,18]])})));return function(){return e.apply(this,arguments)}}(),setPort=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("proxy"!==siteType.value){e.next=3;break}return setPorxyPort(),e.abrupt("return");case 3:return t=vm.$load("正在设置HTTPS端口，请稍候..."),e.prev=4,e.next=7,setHttpsPort({siteName:props.compData.name,port:Number(portForm.port)});case 7:n=e.sent,vm.$message.request(n),port.value=Number(portForm.port),t.close(),portPopup.value=!1,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4);case 17:return e.prev=17,portPopup.value=!1,t.close(),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[4,14,17,21]])})));return function(){return e.apply(this,arguments)}}(),check_domain_list=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,a,o;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.trim().replace(" ","").split("\n"),a=0;case 2:if(!(a<r.length)){e.next=13;break}if(o=r[a],!n||check_domain_port(o)){e.next=7;break}return vm.$message.error("第"+(a+1)+"行【"+o+"】域名格式错误"),e.abrupt("return",!1);case 7:if(n||check_domain(o)){e.next=10;break}return vm.$message.error("第"+(a+1)+"行【"+o+"】域名格式错误"),e.abrupt("return",!1);case 10:a++,e.next=2;break;case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),check_domain_port=function(e){return/^([\w\u4e00-\u9fa5\-\*]{1,100}\.){1,10}([\w\u4e00-\u9fa5\-]{1,24}|[\w\u4e00-\u9fa5\-]{1,24}\.[\w\u4e00-\u9fa5\-]{1,24})(:([1-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5]))?$/.test(strim(e))},check_domain=function(e){return/^([\w\u4e00-\u9fa5\-\*]{1,100}\.){1,10}([\w\u4e00-\u9fa5\-]{1,24}|[\w\u4e00-\u9fa5\-]{1,24}\.[\w\u4e00-\u9fa5\-]{1,24})$/.test(strim(e))},strim=function strim(str){var reg_str="/ /g",reg=eval(reg_str);return str=str.replace(reg,""),str},specialData=ref$1(["php","html"]),mountedEvent=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(){var t,n;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("node"===(n=null===(t=props.compData.project_type)||void 0===t?void 0:t.toLowerCase())&&(n="nodejs"),siteType.value=n,"php"!==n&&"proxy"!==n&&"nginx"!==n&&"html"!==n&&"phpasync"!==n){e.next=7;break}isBindExtranet.value=!0,e.next=9;break;case 7:return e.next=9,getInfo();case 9:return e.next=11,getSiteNameList();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return onMounted((function(){mountedEvent()})),{__sfc:!0,vm:vm,props:props,portForm:portForm,siteInfo:siteInfo,siteType:siteType,checkedList:checkedList,portPopup:portPopup,domainData:domainData,port:port,tableData:tableData,tableLoad:tableLoad,isBindExtranet:isBindExtranet,tableColumn:tableColumn,resultColumn:resultColumn,batchGroup:batchGroup,batchConfig:batchConfig,getInfo:getInfo,handleSelect:handleSelect,deleteEvent:deleteEvent,batchEvent:batchEvent,addDomainData:addDomainData,getPort:getPort,getSiteNameList:getSiteNameList,setPorxyPort:setPorxyPort,setPort:setPort,check_domain_list:check_domain_list,check_domain_port:check_domain_port,check_domain:check_domain,strim:strim,specialData:specialData,mountedEvent:mountedEvent,isRelease:isRelease,BtLink:__unplugin_components_3}}}),_sfc_render=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",[t("div",{staticClass:"flex items-end mb-12x"},[t(__unplugin_components_4,{ref:"popover",attrs:{placement:"top-start","popper-class":"green-tips-popover",trigger:"focus"}},[t("div",{staticClass:"!p-12x bg-[#20a53a] text-white"},[e._v(" 如需绑定外网，请换行填写，每行一个域名，默认为80端口"),t("br"),e._v(" IP地址格式：192.168.1.199"),t("br"),e._v(" 泛解析添加方法 *.domain.com"),t("br"),t("span",{directives:[{name:"show",rawName:"v-show",value:"java"!==n.siteType,expression:"siteType !== 'java'"}]},[e._v("如另加端口格式为 www.domain.com:88")]),t("span",{directives:[{name:"show",rawName:"v-show",value:"java"===n.siteType,expression:"siteType === 'java'"}]},[e._v("暂不支持添加端口格式的域名")])]),t(__unplugin_components_2,{attrs:{slot:"reference",type:"textarea",resize:"none",rows:4,width:"42rem",placeholder:"如需绑定外网，请换行填写，每行一个域名，默认为80端口\nIP地址格式：192.168.1.199\n泛解析添加方法 *.domain.com\n"+("java"!==n.siteType?"如另加端口格式为 www.domain.com:88":"暂不支持添加端口格式的域名 *.domain.com:88")},slot:"reference",model:{value:n.domainData,callback:function(e){n.domainData=e},expression:"domainData"}})],1),t(__unplugin_components_6,{staticClass:"absolute right-[4rem] top-[5rem]",on:{click:n.addDomainData}},[e._v("添加")])],1),t(__unplugin_components_0,{scopedSlots:e._u([{key:"header-right",fn:function(){return["php"!==n.siteType&&"proxy"!==n.siteType||n.isRelease?e._e():t("div",[e._v(" HTTPS端口："+e._s(n.port)+" "),t(n.BtLink,{directives:[{name:"show",rawName:"v-show",value:"number"==typeof n.port,expression:"typeof port === 'number'"}],on:{click:function(e){n.portPopup=!0}}},[e._v("更换")])],1)]},proxy:!0},{key:"content",fn:function(){return[t(__unplugin_components_2$1,{directives:[{name:"loading",rawName:"v-loading",value:n.tableLoad,expression:"tableLoad"}],attrs:{column:n.tableColumn,data:n.tableData,maxHeight:"440"},on:{"selection-change":n.handleSelect}})]},proxy:!0},{key:"footer-left",fn:function(){return[t(__unplugin_components_3$1,{staticClass:"mt-12x",attrs:{data:n.batchGroup,config:n.batchConfig,"batch-fn":n.batchEvent}})]},proxy:!0},{key:"popup",fn:function(){return[t(__unplugin_components_3$2,{attrs:{title:"更换端口",visible:n.portPopup,area:42,showFooter:""},on:{"update:visible":function(e){n.portPopup=e},confirm:n.setPort}},[t("div",{staticClass:"p-20x"},[t(__unplugin_components_0$1,{staticClass:"flex justify-center",attrs:{"label-position":"right",model:n.portForm}},[t(__unplugin_components_1,{attrs:{label:"HTTPS端口"}},[t("div",{staticClass:"w-[24rem]"},[t(__unplugin_components_2,{attrs:{type:"number",min:0},model:{value:n.portForm.port,callback:function(t){e.$set(n.portForm,"port",t)},expression:"portForm.port"}})],1)])],1)],1)])]},proxy:!0}])}),"php"!==n.siteType&&"java"!==n.siteType?t("ul",{staticClass:"mt-8x leading-8 text-[1.2rem] list-disc ml-20x"},[t("li",[e._v("如果您的是HTTP项目，且需要映射到外网，请至少绑定一个域名")]),t("li",[e._v("建议所有域名都使用默认的80端口")])]):e._e()],1)},_sfc_staticRenderFns=[],__component__=normalizeComponent(_sfc_main,_sfc_render,_sfc_staticRenderFns,!1,null,"ce5c63c3",null,null),DomainManage=exports("default",__component__.exports)}}}))})();
