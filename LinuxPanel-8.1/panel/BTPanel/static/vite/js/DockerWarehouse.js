import{_ as e}from"./index52.js?v=1714377894636";import{_ as t}from"./index53.js?v=1714377894636";import{_ as a}from"./index39.js?v=1714377894636";import{_ as s}from"./index54.js?v=1714377894636";import{_ as r}from"./index58.js?v=1714377894636";import{_ as n}from"./index59.js?v=1714377894636";import{e as o,b as i,v as l,L as c,h as m,j as p,H as u}from"./vue-lib.js?v=1714377894636";import{g as d,P as h,n as g}from"./main.js?v=1714377894636";import{g as f}from"./docker.store.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import{f as b}from"./docker.table.js?v=1714377894636";import{v as j,N as v}from"./docker.popup.js?v=1714377894636";import{o as x}from"./docker.api.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./check.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./element-ui.common.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./vdom.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";const y=g(o({__name:"DockerWarehouse",setup(e){var t;const{proxy:a}=p(),s=i(),r=i(JSON.parse(null!=(t=localStorage.getItem("dockerStashTableColumn"))?t:"[]")||[]),{refs:{stashTableData:n},getStash:o}=f(),{refs:{mainHeight:g}}=d(),y=l({selectList:[]}),D=i("");c("stashRowData",(()=>n.value.rowData)),c("selectList",(()=>y.selectList));const _=i([{label:"删除",value:"delete",event:()=>{}}]),k=i([{active:!0,content:a.$t("Docker.addStash"),event:()=>{j()}}]);let C=[],T=!1,S=0;const w=l({isRecurrence:!1,describe:{title:"",th:"",message:"",propsValue:"name"},tableDisplayConfig:{label:"状态",prop:"status",render:e=>u("span",{class:0!==C.length||T?C.includes(e.id)?"text-primary":"text-danger":"text-warning"},(()=>{if(0!==C.length||T){let t=C.includes(e.id)?"执行成功":"执行失败";return S++,t}return"等待执行"})())}}),P=e=>{j(e)},L=async e=>{await a.$confirm({title:"删除仓库【".concat(e.name,"】"),type:"calc",width:"35rem",message:"您真的要删除仓库【".concat(e.name,"】吗？")});const t={id:e.id},s=await x({data:JSON.stringify(t)});s.status?(a.$message.success(s.msg),o()):a.$message.error(s.msg)},B=async({id:e})=>{try{const{data:t}=await x({data:JSON.stringify({id:e})});return t.status?(C.push(e),t):Promise.reject(t)}catch(t){return Promise.reject(!1)}},N=b({editDataEvent:P,deleteDataEvent:L});return m((async()=>{o(),N.value=h(r.value,N.value)})),{__sfc:!0,vm:a,Table:s,stashTbaleColumnLocal:r,stashTableData:n,getStash:o,mainHeight:g,select:y,batchType:D,tableBatchData:_,tableBtnGroup:k,list:C,isComplete:T,index:S,batchConfig:w,batchEvent:(e,t,a)=>{if("delete"===e)return B(t)},handleBathComplete:e=>{T=!0,o()},changePageLimit:e=>{n.value.limit=e,n.value.p=1,o()},changePageSize:e=>{n.value.p=e,o()},editDataEvent:P,deleteDataEvent:L,batchDeleteData:B,handleBatch:e=>{T=!1,C=[],S=0;let t=[];if("delete"===e)t=["删除","彻底失去访问和操作权限"];D.value=e,w.isRecurrence=!0,w.describe.th="仓库名",w.describe.title="批量".concat(t[0],"仓库"),w.describe.message="批量".concat(t[0],"已选的仓库，是否继续操作！")},handleSelectionChange:e=>{y.selectList=e},tableColumn:N,NPSDialog:v}}}),(function(){var o=this,i=o._self._c,l=o._self._setupProxy;return i("div",{staticClass:"relative"},[i(n,{scopedSlots:o._u([{key:"header-left",fn:function(){return[i("div",{staticClass:"flex items-center"},[i(r,{attrs:{group:l.tableBtnGroup}}),i("a",{staticClass:"cursor-pointer ml-[1rem] text-[#20a53a] hover:text-[#1d9534]",on:{click:function(e){return l.NPSDialog()}}},[o._v("需求反馈")])],1)]},proxy:!0},{key:"header-right",fn:function(){return[i(s,{attrs:{name:"dockerStashTableColumn",column:l.tableColumn}})]},proxy:!0},{key:"content",fn:function(){return[i(a,{directives:[{name:"loading",rawName:"v-loading",value:l.stashTableData.loading,expression:"stashTableData.loading"}],key:"wareTable",ref:"Table",attrs:{column:l.tableColumn,"max-height":l.mainHeight-220,data:l.stashTableData.showList,description:"仓库列表为空","element-loading-text":"正在加载仓库列表，请稍后..."},on:{"selection-change":l.handleSelectionChange}})]},proxy:!0},{key:"footer-left",fn:function(){return[i(t,{attrs:{data:l.tableBatchData,config:l.batchConfig,"batch-fn":l.batchEvent},on:{"handle-batch":l.handleBatch,"handle-complete":l.handleBathComplete}})]},proxy:!0},{key:"footer-right",fn:function(){return[i(e,{attrs:{total:l.stashTableData.total,"current-page":l.stashTableData.p,"page-size":l.stashTableData.limit},on:{"update:currentPage":function(e){return o.$set(l.stashTableData,"p",e)},"update:current-page":function(e){return o.$set(l.stashTableData,"p",e)},"size-change":l.changePageLimit,"current-change":l.changePageSize}})]},proxy:!0},{key:"popup",fn:function(){},proxy:!0}])})],1)}),[],!1,null,"c1ead3c9",null,null).exports;export{y as default};
