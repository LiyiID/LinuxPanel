!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return n};var r,n={},a=Object.prototype,o=a.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},s=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",u=c.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(r){f=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var a=t&&t.prototype instanceof w?t:w,o=Object.create(a.prototype),c=new O(n||[]);return i(o,"_invoke",{value:P(e,r,c)}),o}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}n.wrap=p;var y="suspendedStart",g="suspendedYield",m="executing",v="completed",d={};function w(){}function b(){}function x(){}var _={};f(_,s,(function(){return this}));var k=Object.getPrototypeOf,j=k&&k(k(N([])));j&&j!==a&&o.call(j,s)&&(_=j);var L=x.prototype=w.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function V(t,r){function n(a,i,c,s){var l=h(t[a],t,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==e(f)&&o.call(f,"__await")?r.resolve(f.__await).then((function(e){n("next",e,c,s)}),(function(e){n("throw",e,c,s)})):r.resolve(f).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,s)}))}s(l.arg)}var a;i(this,"_invoke",{value:function(e,t){function o(){return new r((function(r,a){n(e,t,r,a)}))}return a=a?a.then(o,o):o()}})}function P(e,t,n){var a=y;return function(o,i){if(a===m)throw new Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:r,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var s=T(c,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===y)throw a=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var l=h(e,t,n);if("normal"===l.type){if(a=n.done?v:g,l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=v,n.method="throw",n.arg=l.arg)}}}function T(e,t){var n=t.method,a=e.iterator[n];if(a===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=r,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=h(a,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,d;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function e(){for(;++a<t.length;)if(o.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}throw new TypeError(e(t)+" is not iterable")}return b.prototype=x,i(L,"constructor",{value:x,configurable:!0}),i(x,"constructor",{value:b,configurable:!0}),b.displayName=f(x,u,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,f(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},n.awrap=function(e){return{__await:e}},S(V.prototype),f(V.prototype,l,(function(){return this})),n.AsyncIterator=V,n.async=function(e,t,r,a,o){void 0===o&&(o=Promise);var i=new V(p(e,t,r,a),o);return n.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(L),f(L,u,"Generator"),f(L,s,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},n.values=N,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,a){return c.type="throw",c.arg=e,t.next=n,a&&(t.method="next",t.arg=r),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),d}},n}function r(e,t,r,n,a,o,i){try{var c=e[o](i),s=c.value}catch(l){return void r(l)}c.done?t(s):Promise.resolve(s).then(n,a)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function c(e){r(i,a,o,c,s,"next",e)}function s(e){r(i,a,o,c,s,"throw",e)}c(void 0)}))}}System.register(["./index-legacy57.js?v=1714377894636","./date-picker-legacy.js?v=1714377894636","./main-legacy.js?v=1714377894636","./element-lib-legacy.js?v=1714377894636","./radio-button-legacy.js?v=1714377894636","./radio-group-legacy.js?v=1714377894636","./index-legacy46.js?v=1714377894636","./preload-helper-legacy.js?v=1714377894636","./vue-lib-legacy.js?v=1714377894636","./index-legacy33.js?v=1714377894636","./logs.table-legacy.js?v=1714377894636","./autocomplete-legacy.js?v=1714377894636","./__commonjsHelpers__-legacy.js?v=1714377894636","./date-util-legacy.js?v=1714377894636","./modulepreload-polyfill-legacy.js?v=1714377894636","./request-lib-legacy.js?v=1714377894636","./locales-lib-legacy.js?v=1714377894636","./public-lib-legacy.js?v=1714377894636","./switch-legacy.js?v=1714377894636","./index.vue_vue_type_style_index_0_lang-legacy.js?v=1714377894636","./index-legacy77.js?v=1714377894636","./tabs-legacy.js?v=1714377894636","./index-legacy42.js?v=1714377894636","./index-legacy43.js?v=1714377894636","./check-legacy.js?v=1714377894636","./index-legacy52.js?v=1714377894636","./index-legacy39.js?v=1714377894636","./empty-legacy.js?v=1714377894636","./index-legacy58.js?v=1714377894636","./dropdown-legacy.js?v=1714377894636","./index-legacy45.js?v=1714377894636","./index-legacy59.js?v=1714377894636"],(function(e,r){"use strict";var a,o,i,c,s,l,u,f,p,h,y,g,m,v,d,w,b,x,_,k,j,L,S,V,P,T,C,E,O;return{setters:[function(e){a=e._},function(e){o=e._},function(e){i=e.g,c=e.o,s=e.p,l=e.l,u=e.n,f=e.q,p=e.D,h=e._},function(e){y=e.y,g=e.ab},null,null,function(e){m=e._},function(e){v=e._},function(e){d=e.e,w=e.v,b=e.b,x=e.f,_=e.h,k=e.j},function(e){j=e.c,L=e.a},function(e){S=e.g,V=e.H,P=e.I,T=e.J,C=e.K,E=e.L,O=e.M},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var N=d({__name:"WebLogs",setup:function(e,a){var o=a.expose,u=k().proxy,f=S().refs,p=f.clearForm,h=f.webSiteName,y=f.webSiteLogTabActive,g=i().refs,m=g.authType,d=g.mainHeight,N=w({ipArea:!1,typeValue:"运行",timeValue:"",searchValue:"",keywordSwitch:!1,keywordConfig:{}}),A=b(""),D={disabledDate:function(e){return e.getTime()>Date.now()}},W=function(e){var t=[];switch(e){case"7":t=[(new Date).getTime()-6048e5,(new Date).getTime()];break;case"30":t=[(new Date).getTime()-2592e6,(new Date).getTime()];break;case"180":t=[(new Date).getTime()-15552e6,(new Date).getTime()]}return t},$=function(){var e=n(t().mark((function e(r){var n,a,o,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,n=u.$load("正在设置关键字告警..."),a={sitename:h.value},r&&(a.cycle=N.keywordConfig.cycle,a.keys=JSON.stringify(N.keywordConfig.keys),a.channel=N.keywordConfig.channel),e.next=7,V(a);case 7:o=e.sent,i=o.data,u.$message.request(i),i.status||(N.keywordSwitch=!r),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),N.keywordSwitch=!r;case 17:return e.prev=17,0!==N.keywordConfig.keys.length&&""!==N.keywordConfig.channel||G(),n.close(),e.finish(17);case 21:case"end":return e.stop()}}),e,null,[[1,13,17,21]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=n(t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l({title:"【".concat(h.value,"】关键字告警配置"),area:72,isAsync:!0,btn:"保存",compData:{config:N.keywordConfig,refreshEvent:F},component:function(){return v((function(){return r.import("./KeywordConfig-legacy.js?v=1714377894636")}),void 0,r.meta.url)}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=n(t().mark((function e(){var r,n,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.$load("正在加载数据中，请稍后...."),e.prev=1,n={ip_area:N.ipArea?1:0,siteName:h.value,time_search:JSON.stringify(N.timeValue),search:N.searchValue},N.timeValue&&(N.timeValue[0]=new Date(N.timeValue[0]).setHours(0,0,0,0),N.timeValue[1]=new Date(N.timeValue[1]).setHours(23,59,59,0),n.time_search=JSON.stringify([N.timeValue[0]/1e3,N.timeValue[1]/1e3])),!N.searchValue&&delete n.search,!N.timeValue&&delete n.time_search,e.next=8,P(n);case 8:a=e.sent,r.close(),A.value=a.msg?a.msg:"暂无数据",e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1);case 16:return e.prev=16,F(),r.close(),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[1,13,16,20]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=n(t().mark((function e(){var r,n,a;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.$load("正在加载数据中，请稍后...."),e.prev=1,n={siteName:h.value,time_search:JSON.stringify(N.timeValue),search:N.searchValue},!N.searchValue&&delete n.search,!N.timeValue&&delete n.time_search,N.timeValue&&(n.time_search=JSON.stringify([N.timeValue[0]/1e3,N.timeValue[1]/1e3])),e.next=8,T(n);case 8:a=e.sent,r.close(),A.value=a.msg?a.msg:"暂无数据",e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1);case 16:return e.prev=16,r.close(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(){return e.apply(this,arguments)}}(),J=function(){"运行"===N.typeValue?(p.value.webSiteLogType="access",H()):(p.value.webSiteLogType="error",I())},F=function(){var e=n(t().mark((function e(){var r,n;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C({sitename:h.value});case 3:r=e.sent,n=r.data,N.keywordConfig=n.config,N.keywordSwitch=n.status,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();x((function(){return h.value}),(function(){"WebLogs"===y.value&&H()})),x((function(){return y.value}),(function(){"WebLogs"===y.value&&H()}));var K=function(){J()};return _((function(){H()})),o({cutTab:K}),{__sfc:!0,vm:u,clearForm:p,webSiteName:h,webSiteLogTabActive:y,authType:m,mainHeight:d,logParams:N,msg:A,pickerOptions:D,changeIpArea:function(e){if("ltd"!==m.value)return N.ipArea=!e,s({sourceId:136});H()},clearWebSite:function(){j("清理相关日志可能会导致故障排查困难，请谨慎操作","website",function(){var e=n(t().mark((function e(r,n){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=W(r),e.prev=1,e.next=4,E({siteName:h.value,logType:n,time_search:JSON.stringify(a)});case 4:o=e.sent,u.$message.request(o),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}())},outWebSite:function(){L("website",function(){var e=n(t().mark((function e(r,n){var a,o;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=W(n),e.prev=1,e.next=4,O({siteName:h.value,logType:r,time_search:JSON.stringify(a)});case 4:o=e.sent,window.open("/download?filename="+o.msg),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,r){return e.apply(this,arguments)}}())},dateSwitch:W,onChangeKeyword:$,setKeywordConfig:G,getSiteAccessLogsData:H,getSiteErrorLogsData:I,changeWebLogType:J,getKeywordAlarmData:F,cutTab:K,isRelease:c}}});e("default",u(N,(function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t("div",{staticClass:"pt-20x flex flex-col"},[t("div",{staticClass:"flex items-center justify-end mb-12x"},[t("div",{staticClass:"flex justify-between w-full"},[t("div",{staticClass:"flex items-center"},[t(f,{attrs:{type:"defalut"},on:{click:r.clearWebSite}},[e._v("清理日志")]),t(f,{staticClass:"!mr-12x",attrs:{type:"defalut"},on:{click:r.outWebSite}},[e._v("导出日志")]),r.isRelease?e._e():[t(m,{attrs:{width:36},on:{change:r.onChangeKeyword},model:{value:r.logParams.keywordSwitch,callback:function(t){e.$set(r.logParams,"keywordSwitch",t)},expression:"logParams.keywordSwitch"}}),t("span",{staticClass:"pl-[1rem] mr-12x"},[e._v("日志关键词告警"),t("span",{staticClass:"cursor-pointer text-primary",on:{click:r.setKeywordConfig}},[e._v("[配置]")])]),"运行"===r.logParams.typeValue?t(p,{staticClass:"pr-[2rem]",on:{change:r.changeIpArea},model:{value:r.logParams.ipArea,callback:function(t){e.$set(r.logParams,"ipArea",t)},expression:"logParams.ipArea"}},[t("span",{staticClass:"text-[1.2rem]"},[e._v("显示IP归属地信息")]),t(h,{staticClass:"align-bottom ml-4x",attrs:{src:"/vip/icon-sub-vip-ltd.svg"}})],1):e._e()]],2),t("div",{staticClass:"flex items-center"},[t(y,{staticClass:"mr-12x",attrs:{size:"mini"},on:{change:r.changeWebLogType},model:{value:r.logParams.typeValue,callback:function(t){e.$set(r.logParams,"typeValue",t)},expression:"logParams.typeValue"}},[t(g,{attrs:{label:"运行"}}),t(g,{attrs:{label:"异常"}})],1),t(o,{staticClass:"!w-[24rem]",attrs:{size:"mini","value-format":"timestamp",type:"daterange","range-separator":"-","picker-options":r.pickerOptions,"start-placeholder":"开始","end-placeholder":"结束"},on:{change:r.changeWebLogType},model:{value:r.logParams.timeValue,callback:function(t){e.$set(r.logParams,"timeValue",t)},expression:"logParams.timeValue"}}),t(a,{staticClass:"ml-12x",attrs:{placeholder:"请输入搜索关键字"},on:{clear:r.changeWebLogType,search:r.changeWebLogType},model:{value:r.logParams.searchValue,callback:function(t){e.$set(r.logParams,"searchValue",t)},expression:"logParams.searchValue"}})],1)])]),t("pre",{staticClass:"bt-logs-pre",style:{height:r.mainHeight-282+"px"},domProps:{innerHTML:e._s(r.msg)}})])}),[],!1,null,null,null,null).exports)}}}))}();
