import{w as r,x as e,o as t}from"./element-lib.js?v=1714377894636";import{di as a,n as o}from"./main.js?v=1714377894636";import{e as s,Q as l,b as p,h as m,j as i}from"./vue-lib.js?v=1714377894636";import{o as n}from"./confirm.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./config.js?v=1714377894636";const f=o(s({__name:"tencentForm",props:{compData:{type:Object,default:{port:"",ip:"",remark:""}}},setup(r,{expose:e}){const t=r,{proxy:o}=i(),{compData:s}=l(t),{port:f,ip:c,remark:u}=s.value,d=p({port:"",ip:"",remark:""}),b=(r,e,t)=>{""===e?t(new Error("请输入端口")):/^\d+$/.test(e)?e<1||e>65535?t(new Error("端口范围为1-65535")):t():t(new Error("端口只能为数字"))},v=(r,e,t)=>{void 0===e||""===e||/^(\d{1,3}\.){3}\d{1,3}$/.test(e)?t():t(new Error("IP地址格式不正确"))},j=p({port:[{required:!0,message:"请输入端口",trigger:"blur"},{validator:b,trigger:"blur"}],ip:[{required:!1,message:"请输入IP地址",trigger:"blur"},{validator:v,trigger:"blur"}]}),k=p(!1),g=p(),_=()=>{o.$refs.tencentFormRef.validate((async r=>{if(r)try{n({$refs:g.value,loading:{disable:k,text:"提交中，请稍候..."},request:async()=>await a({port:d.value.port,ip:d.value.ip,remark:d.value.remark}),complete:async()=>{t.compData.refresh&&t.compData.refresh()}})}catch(e){}}))};return m((()=>{d.value.port=f||"",d.value.ip=c||"",d.value.remark=u||""})),e({onConfirm:_}),{__sfc:!0,props:t,vm:o,compData:s,port:f,ip:c,remark:u,form:d,validatePort:b,validateIp:v,rules:j,formDisabled:k,tencentFormRef:g,onConfirm:_}}}),(function(){var a=this,o=a._self._c,s=a._self._setupProxy;return o("div",{staticClass:"p-[2rem]"},[o(r,{ref:"tencentFormRef",attrs:{model:s.form,rules:s.rules,disabled:s.formDisabled}},[o(e,{attrs:{label:"端口",prop:"port"}},[o(t,{staticClass:"w-[35rem]",attrs:{placeholder:"请输入端口"},model:{value:s.form.port,callback:function(r){a.$set(s.form,"port",r)},expression:"form.port"}})],1),o(e,{attrs:{label:"允许访问IP地址",prop:"ip"}},[o(t,{staticClass:"w-[35rem]",attrs:{placeholder:"默认为空，表示所有来源，支持IP网段，可为空"},model:{value:s.form.ip,callback:function(r){a.$set(s.form,"ip",r)},expression:"form.ip"}})],1),o(e,{attrs:{label:"备注",prop:"remark"}},[o(t,{staticClass:"w-[35rem]",attrs:{type:"textarea",rows:"4",placeholder:"请输入备注"},model:{value:s.form.remark,callback:function(r){a.$set(s.form,"remark",r)},expression:"form.remark"}})],1)],1)],1)}),[],!1,null,"064afd81",null,null).exports;export{f as default};
