import{_ as e}from"./index52.js?v=1714377894636";import{_ as t}from"./index53.js?v=1714377894636";import{o as a,l as s,n,a as o}from"./main.js?v=1714377894636";import{_ as i}from"./index39.js?v=1714377894636";import{_ as r}from"./index54.js?v=1714377894636";import{_ as l}from"./index55.js?v=1714377894636";import{_ as m}from"./index57.js?v=1714377894636";import{q as c,s as p}from"./element-lib.js?v=1714377894636";import{_ as u}from"./index43.js?v=1714377894636";import{_ as d}from"./index58.js?v=1714377894636";import{_ as h}from"./index59.js?v=1714377894636";import{_ as y}from"./index60.js?v=1714377894636";import{_ as f}from"./preload-helper.js?v=1714377894636";import{e as g,b as v,v as b,h as _,j as x}from"./vue-lib.js?v=1714377894636";import{g as j,w as P,x as T,y as S,z as k,A as w,B as C}from"./site.store.js?v=1714377894636";import{B as L,C as E,y as D,c as M,N as B,D as N,p as O,g as A,r as $,i as J,E as R}from"./site.popup.js?v=1714377894636";import{o as q}from"./index61.js?v=1714377894636";import{s as V}from"./site.method.js?v=1714377894636";import{c as z}from"./check.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./element-ui.common.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./vdom.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";import"./confirm.js?v=1714377894636";import"./config.js?v=1714377894636";const F=n(g({__name:"index",setup(e){const{proxy:t}=x(),{refs:{modulesTableParams:n},getModulesList:o,getModulesTypeList:i}=j(),r=v(!1),l=v(!1),m=b({isRecurrence:!1,describe:{title:"",th:"",message:"",propsValue:""}}),c=[{content:"添加Python项目",active:!0,event:()=>{E()}},{content:"Python版本管理",event:()=>{D("py")}},{content:"命令行环境管理",hide:a,event:()=>{N()}},{content:"项目守护间隔时间",hide:a,event:()=>{O("python")}}],p=v([]),u=v({tableColumn:[{prop:"name",label:"网站名"},{prop:"status",label:"状态"}],callback:()=>{o("python")},isRecurrence:!0}),d=v([{label:"启动项目",value:"startPySite",diyBatch:()=>{q({title:"您正在启动选中的Python项目，是否继续操作？",titleType:"批量启动选中的站点",requestFun:async e=>await P({data:JSON.stringify({name:e.name})}),...u.value,dataList:p.value})}},{label:"停用项目",value:"stopPySite",diyBatch:()=>{q({title:"您正在批量停止选中的Python项目，是否继续操作？",dataList:p.value,titleType:"批量停止选中的站点",requestFun:async e=>await T({data:JSON.stringify({name:e.name})}),...u.value})}},{label:"重启项目",value:"restartPySite",diyBatch:()=>{q({title:"您正在重启选中的Python项目，是否继续操作？",dataList:p.value,titleType:"批量重启选中的站点",requestFun:async e=>await S({data:JSON.stringify({name:e.name})}),...u.value})}},{label:"删除项目",value:"delPySite",isRefBatch:!0}]),h=async(e,a,s)=>{try{const n=await k({data:JSON.stringify({name:e.name,remove_env:a?1:0})});return s&&t.$message.request(n),n}catch(n){}},y=async(e,a)=>{let s={};if(s=a?{inputText:"批量删除项目"}:{checkText:"同时删除虚拟环境",checkEvent:async a=>{let s=t.$load("正在删除，请稍后...");await h(e,a,!0),o("python"),s.close()}},await t.$confirm({title:a?"批量删除项目":"删除Python项目-"+e.name,message:a?"批量删除选中的项目后，项目将无法恢复，是否继续操作？":"风险操作，此操作不可逆，删除"+e.name+"项目后您将无法管理该项目，是否继续操作？",type:a?"input":"check",icon:"warning",...s}),a){let a=t.$load("正在删除，请稍后..."),s=[];const n=z(e,"array",[]);await n.forEach((async e=>{const t=await h(e,!0);s.push({name:e.name,status:t.status})})),await $({resultData:s,resultTitle:"删除项目"}),o("python"),a.close()}},g=async()=>{try{const e=await w();e.data.cpy_installed.length||e.data.pypy_installed.length||(l.value=!0)}catch(e){}},F=L({changeTaskTopEvent:e=>{},changeStatusEvent:e=>{V.setProjectStatus(e,e.run?"stop":"start",(()=>o("python")))},setQuotaEvent:e=>{},openBackupEvent:e=>{},deleteEvent:y,setSiteTime:e=>{J(e,!1,"python")},openPlugin:e=>{},openTotalFlow:e=>{},openSetting:async(e,a)=>{try{const s=await C({data:JSON.stringify({name:e.name})},"python");if(!s.status)return t.$message.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:s.msg,type:"error",duration:0,showClose:!0});R(e,a)}catch(s){}},openModules:e=>{s({title:"项目【".concat(e.name||"","】模块管理"),area:60,isAsync:!0,component:()=>f((()=>import("./PythonModuleManager.js?v=1714377894636")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),import.meta.url),compData:e})},openTerminal:e=>{s({title:"终端",area:[90,40.8],isAsync:!0,showFooter:!1,component:()=>f((()=>import("./PythonTerminal.js?v=1714377894636")),__vite__mapDeps([24,25,6,7,4,3,8,9,10,5,2,26,27,28,29,30,12,31,32,33,34,35,22]),import.meta.url),compData:{hostInfo:{pj_name:e.name}}})}});return _((async()=>{await g(),await o("python")})),{__sfc:!0,vm:t,modulesTableParams:n,getModulesList:o,getModulesTypeList:i,hovering:r,maskLayer:l,batchConfig:m,tableBtnGroup:c,checkedList:p,batchData:u,batchGroup:d,handleSelectionChange:e=>{p.value=e},handleBatch:e=>{switch(e){case"settingClass":A(p.value,"python");break;case"delPySite":y(p.value,!0)}},delApiEvent:h,deleteEvent:y,handleSerach:e=>{n.value.search=e,void 0===e&&(n.value.search=""),o("python")},changePage:e=>{n.value.p=e,o("python")},changeSize:e=>{var t;n.value.limit=e;let a=JSON.parse(null!=(t=localStorage.getItem("siteOtherPageLimit"))?t:"{}");a.python=e,localStorage.setItem("siteOtherPageLimit",JSON.stringify(a)),o("python")},getTableList:()=>{o("python")},refreshCheck:async()=>{l.value&&(await g(),await o("python"))},checkPythonVersion:g,tableColumns:F,pythonAddSiteDialog:E,sdkVersionManger:D,classSettingDialog:M,NPSDialog:B,isRelease:a}}}),(function(){var a=this,s=a._self._c,n=a._self._setupProxy;return s("div",{staticClass:"relative"},[s(y,{attrs:{visible:n.maskLayer,width:"30rem"}},[a._v(" 未安装Python版本，"),s(o,{staticClass:"!text-[1.4rem]",on:{click:function(e){return n.sdkVersionManger("py",n.refreshCheck)}}},[a._v("点击安装")])],1),s(h,{scopedSlots:a._u([{key:"header-left",fn:function(){return[s("div",{staticClass:"flex items-center"},[s(d,{attrs:{group:n.tableBtnGroup}}),s("div",{staticClass:"flex items-center ml-12x"},[s(o,{attrs:{href:"https://www.bt.cn/bbs/thread-125161-1-1.html"}},[a._v("Python项目教程")]),s("i",{staticClass:"el-icon-link text-primary text-[1.6rem] ml-4x"})],1),s(u,{staticClass:"ml-12x inline-block",attrs:{icon:"demand",iconClass:"text-1.6rem",content:"需求反馈"},on:{click:function(e){return n.NPSDialog()}}})],1)]},proxy:!0},{key:"header-right",fn:function(){return[n.isRelease?a._e():s("div",{staticClass:"flex items-center"},[s(c,{staticClass:"mr-8x w-[12rem]",on:{change:function(e){return n.getModulesList("python")}},model:{value:n.modulesTableParams.type_id,callback:function(e){a.$set(n.modulesTableParams,"type_id",e)},expression:"modulesTableParams.type_id"}},[s("div",{staticClass:"max-h-[20rem] overflow-auto",class:{"no-hover":n.hovering}},a._l(n.modulesTableParams.typeList,(function(e,t){return s(p,{key:t,attrs:{label:e.name,value:e.id}})})),1),s("div",{staticClass:"classify-item",on:{click:function(e){return n.classSettingDialog("python")},mouseover:function(e){n.hovering=!0},mouseout:function(e){n.hovering=!1}}},[a._v(" 分类设置 ")])])],1),s("div",{staticClass:"relative mr-8x"},[s(m,{attrs:{placeholder:a.$t("SitePhpModel.TableSearch"),width:"40rem"},model:{value:n.modulesTableParams.search,callback:function(e){a.$set(n.modulesTableParams,"search",e)},expression:"modulesTableParams.search"}})],1),s(l,{attrs:{refresh:()=>{n.getModulesList("python")}}}),s(r,{staticClass:"ml-8x",attrs:{name:"sitePyTable",column:n.tableColumns}})]},proxy:!0},{key:"content",fn:function(){return[s(i,{directives:[{name:"loading",rawName:"v-loading",value:n.modulesTableParams.loading,expression:"modulesTableParams.loading"}],ref:"sitePyTable",attrs:{"element-loading-text":"正在加载中...",data:n.modulesTableParams.list,column:n.tableColumns},on:{"selection-change":n.handleSelectionChange},scopedSlots:a._u([{key:"empty",fn:function(){return[s("div",{staticClass:"flex items-center justify-center"},[a._v(" 您的列表为空，您可以 "),s(o,{on:{click:function(e){return n.pythonAddSiteDialog()}}},[a._v("添加一个项目")])],1)]},proxy:!0}])})]},proxy:!0},{key:"footer-left",fn:function(){return[s(t,{attrs:{data:n.batchGroup,config:n.batchConfig,"batch-fn":()=>{}},on:{"handle-batch":n.handleBatch}})]},proxy:!0},{key:"footer-right",fn:function(){return[s(e,{attrs:{total:n.modulesTableParams.total,"current-page":n.modulesTableParams.p,"page-size":n.modulesTableParams.limit},on:{"current-change":n.changePage,"size-change":n.changeSize}})]},proxy:!0}])})],1)}),[],!1,null,"f5d7f5d1",null,null).exports;export{F as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./PythonModuleManager.js?v=1714377894636","./index39.js?v=1714377894636","./element-lib.js?v=1714377894636","./__commonjsHelpers__.js?v=1714377894636","./vue-lib.js?v=1714377894636","./public-lib.js?v=1714377894636","./main.js?v=1714377894636","./modulepreload-polyfill.js?v=1714377894636","./preload-helper.js?v=1714377894636","./request-lib.js?v=1714377894636","./locales-lib.js?v=1714377894636","./element-lib.js?v=1714377894636","./index85.js?v=1714377894636","./index59.js?v=1714377894636","./site.popup.js?v=1714377894636","./index38.js?v=1714377894636","./index45.js?v=1714377894636","./element-ui.common.js?v=1714377894636","./date-util.js?v=1714377894636","./vdom.js?v=1714377894636","./index62.js?v=1714377894636","./cascader-panel.js?v=1714377894636","./check.js?v=1714377894636","./site.store.js?v=1714377894636","./PythonTerminal.js?v=1714377894636","./index108.js?v=1714377894636","./index76.js?v=1714377894636","./element-lib.js?v=1714377894636","./xterm-lib.js?v=1714377894636","./xterm.js?v=1714377894636","./index109.js?v=1714377894636","./element-lib.js?v=1714377894636","./radio-button.js?v=1714377894636","./element-lib.js?v=1714377894636","./element-lib.js?v=1714377894636","./index110.js?v=1714377894636"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
