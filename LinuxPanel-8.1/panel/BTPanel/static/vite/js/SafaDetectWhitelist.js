import{_ as t}from"./index118.js?v=1714377894636";import{_ as e}from"./index53.js?v=1714377894636";import{_ as a}from"./index39.js?v=1714377894636";import{cC as i,aS as s,cD as r,cE as l,n as o,q as n}from"./main.js?v=1714377894636";import{_ as p}from"./index85.js?v=1714377894636";import{_ as c}from"./index59.js?v=1714377894636";import{e as m,b as h,v as d,h as u,j as f}from"./vue-lib.js?v=1714377894636";import{getFirewallStore as y}from"./firewall.store.js?v=1714377894636";import{h as j}from"./firewall.table.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./check.js?v=1714377894636";import"./index46.js?v=1714377894636";import"./index.vue_vue_type_style_index_0_lang.js?v=1714377894636";import"./firewall.popup.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./index45.js?v=1714377894636";const g=o(m({__name:"SafaDetectWhitelist",setup(t){const{proxy:e}=f(),{refs:{loading:a}}=y(),o=h([]),n=h([{useHtml:!0,text:'注意：添加白名单目录要以"/"结尾'}]),p=d({isRecurrence:!0,describe:{title:"批量删除脚本",th:"路径",message:"批量删除，该操作可能会存在风险，是否继续？",propsValue:"path"}}),c=d({path:"",type:"dir"}),m=h([{value:"deleteWhiteList",label:"删除白名单目录"}]),g=async()=>{try{const{data:t}=await i();o.value=[...t.dir.map((t=>({path:t,type:"dir",typeTitle:"目录"}))),...t.file.map((t=>({path:t,type:"file",typeTitle:"文件"})))]}catch(t){}},_=async(t,a)=>{let i;try{!a&&await e.$confirm({icon:"warning",title:"删除白名单目录",width:"34rem",message:"删除白名单目录【"+t.path+"】，是否继续操作？"}),!a&&(i=e.$load("正在删除白名单目录，请稍后..."));const s=await r({path:t.path,type:t.type});!a&&await e.$message.request(s),!a&&g()}catch(s){}finally{i&&i.close()}},x=j({deleteRow:_});return u((()=>{g()})),{__sfc:!0,vm:e,loading:a,getData:o,help_list:n,batchConfig:p,ruleForm:c,tableBatch:m,getWhitePathData:g,onPathChange:()=>{s({type:"all",change(t,e){c.path=t,c.type=e,"dir"!==e||t.endsWith("/")||(c.path+="/")}})},clearSpace:t=>{c[t]=c[t].replace(/\s+/g,"")},handleBatchClick:async(t,e)=>_(e,!0),deleteRow:_,addWhiteList:async()=>{try{if(!c.path)return void e.$message.error("请输入白名单目录");const t=e.$load("正在添加白名单目录，请稍后..."),a=await l({path:c.path});await e.$message.request(a),g(),t.close(),c.path=""}catch(t){}},tableColumn:x}}}),(function(){var i=this,s=i._self._c,r=i._self._setupProxy;return s("div",{staticClass:"p-[2rem]"},[s(c,{scopedSlots:i._u([{key:"header-left",fn:function(){return[s(p,{attrs:{name:"path",placeholder:"选择目录/文件全路径",iconType:"folder",width:"32rem"},on:{folder:function(t){return r.onPathChange()},"&change":function(t){return r.clearSpace("path")}},model:{value:r.ruleForm.path,callback:function(t){i.$set(r.ruleForm,"path",t)},expression:"ruleForm.path"}}),s(n,{staticClass:"!ml-8x",on:{click:r.addWhiteList}},[i._v("添加")])]},proxy:!0},{key:"content",fn:function(){return[s(a,{directives:[{name:"loading",rawName:"v-loading",value:r.loading,expression:"loading"}],ref:"whiteList",attrs:{column:r.tableColumn,data:r.getData,description:"白名单列表为空","element-loading-text":"正在加载白名单列表，请稍后..."}})]},proxy:!0},{key:"footer-left",fn:function(){return[s(e,{attrs:{data:r.tableBatch,config:r.batchConfig,"batch-fn":r.handleBatchClick},on:{"handle-complete":r.getWhitePathData}})]},proxy:!0}])}),s(t,{staticClass:"mx-[1.6rem] my-[0.6rem]",attrs:{list:r.help_list,listStyle:"disc"}})],1)}),[],!1,null,null,null,null).exports;export{g as default};
