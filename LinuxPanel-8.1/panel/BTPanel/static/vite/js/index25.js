import{_ as e}from"./index52.js?v=1714377894636";import{_ as t}from"./index53.js?v=1714377894636";import{n as a,a as s}from"./main.js?v=1714377894636";import{_ as n}from"./index39.js?v=1714377894636";import{_ as r}from"./index54.js?v=1714377894636";import{_ as l}from"./index55.js?v=1714377894636";import{_ as o}from"./index57.js?v=1714377894636";import{_ as i}from"./index43.js?v=1714377894636";import{_ as m}from"./index58.js?v=1714377894636";import{_ as c}from"./index59.js?v=1714377894636";import{e as p,b as u,v as d,H as h,h as f,j as g}from"./vue-lib.js?v=1714377894636";import{g as b,C as y,D as j}from"./site.store.js?v=1714377894636";import{r as v,L as x,M as _,N as P,O as S,P as C}from"./site.popup.js?v=1714377894636";import{a as T}from"./confirm.js?v=1714377894636";import{o as w}from"./index61.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./check.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./element-ui.common.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./vdom.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";import"./config.js?v=1714377894636";const k=a(p({__name:"index",setup(e){const{refs:{modulesTableParams:t},getModulesList:a}=b(),{proxy:s}=g(),n=u([]),r=d({isRecurrence:!0,describe:{title:"",th:"",message:"",propsValue:""},tableDisplayConfig:{label:"状态",prop:"status",render:e=>h("span",{})}}),l=[{content:"添加PHP动态项目",active:!0,event:()=>{_()}},{content:"项目编排",event:()=>{S()}}],o=u([{label:"启动项目",value:"startSite",diyBatch:()=>{p("start")}},{label:"停用项目",value:"stopSite",diyBatch:()=>{p("stop")}},{label:"删除项目",value:"delSite",diyBatch:()=>{m(n.value,!0)}}]),i=u([{label:"名称",prop:"name"},{label:"结果",render:e=>h("span",{class:e.status?"text-primary":"text-danger"},e.msg)}]),m=(e,t)=>{T({confirm:{icon:"warning",title:t?"批量删除项目":"删除PHP动态项目-"+e.name,message:t?"批量删除选中的项目后，项目将无法恢复，是否继续操作？":"风险操作，此操作不可逆，删除【"+e.name+"】项目后您将无法管理该项目，是否继续操作？",type:"input",inputText:t?"批量删除项目":"删除项目"},loading:"正在删除，请稍后...",request:async()=>{if(t){let t=e.map((e=>({name:e.name,id:e.id}))),s=[];return await t.forEach((async(e,n)=>{const r=await y({id:e.id,webname:e.name});s.push({name:e.name,status:r.status,msg:r.msg}),n===t.length-1&&(await v({resultData:s,resultTitle:"删除项目",resultColumn:i.value}),await a("phpAsync"))})),null}return await y({id:e.id,webname:e.name})},async complete(){a("phpAsync")}})},c=async e=>{try{let t;await s.$confirm({title:"提示",message:e.run?"停用站点【".concat(e.name,"】后，用户访问会显示当前网站停用后的提示页，是否继续操作？"):"启动站点【".concat(e.name,"】后，用户可以正常访问网站内容，是否继续操作？"),icon:"warning"}),t=await j({sitename:e.name,project_action:e.run?"stop":"start"}),s.$message.request(t),a("phpAsync")}catch(t){}},p=async e=>{const t="start"===e;w({title:t?"批量启用选中的项目后，项目将恢复正常访问，是否继续操作？":"批量停用选中的项目后，项目将无法正常访问，用户访问会显示当前项目停用后的提示页，是否继续操作？",dataList:n.value,titleType:t?"批量启用选中的项目":"批量停用选中的项目",requestFun:async t=>await j({sitename:t.name,project_action:e}),isRecurrence:!0,tableColumn:[{prop:"name",label:"项目名"},{prop:"result",label:"状态"}],isReturnResult:!0,callback:()=>{a("phpAsync")}})},k=x({openSetting:e=>{C(e)},changeStatusEvent:c,deleteEvent:m});return f((async()=>{await a("phpAsync")})),{__sfc:!0,modulesTableParams:t,getModulesList:a,vm:s,checkedList:n,batchConfig:r,tableBtnGroup:l,batchGroup:o,handleSelectionChange:e=>{n.value=e},handleBatch:e=>{},handleSerach:e=>{t.value.search=e,void 0===e&&(t.value.search=""),a("phpAsync")},changePage:e=>{t.value.p=e,a("phpAsync")},changeSize:e=>{var s;t.value.limit=e;let n=JSON.parse(null!=(s=localStorage.getItem("siteOtherPageLimit"))?s:"{}");n.phpAsync=e,localStorage.setItem("siteOtherPageLimit",JSON.stringify(n)),a("phpAsync")},resultColumn:i,deleteEvent:m,changeStatusEvent:c,multStatusEvent:p,tableColumns:k,refresh:()=>{a("phpAsync")},addPhpAsyncDialog:_,NPSDialog:P}}}),(function(){var a=this,p=a._self._c,u=a._self._setupProxy;return p("div",[p(c,{scopedSlots:a._u([{key:"header-left",fn:function(){return[p("div",{staticClass:"flex items-center"},[p(m,{attrs:{group:u.tableBtnGroup}}),p(i,{staticClass:"ml-12x inline-block",attrs:{icon:"demand",iconClass:"text-1.6rem",content:"需求反馈"},on:{click:function(e){return u.NPSDialog()}}})],1)]},proxy:!0},{key:"header-right",fn:function(){return[p("div",{staticClass:"relative mr-8x"},[p(o,{attrs:{placeholder:a.$t("SitePhpModel.TableSearch"),width:"40rem"},on:{search:u.handleSerach,clear:u.handleSerach},model:{value:u.modulesTableParams.search,callback:function(e){a.$set(u.modulesTableParams,"search",e)},expression:"modulesTableParams.search"}})],1),p(l,{staticClass:"!mr-8x",attrs:{refresh:u.refresh}}),p(r,{attrs:{name:"phpAsyncTableColumn",column:u.tableColumns,"is-request":!0}})]},proxy:!0},{key:"content",fn:function(){return[p(n,{directives:[{name:"loading",rawName:"v-loading",value:u.modulesTableParams.loading,expression:"modulesTableParams.loading"}],ref:"siteHtmlTable",attrs:{"element-loading-text":"正在加载中...",data:u.modulesTableParams.list,column:u.tableColumns},on:{"selection-change":u.handleSelectionChange},scopedSlots:a._u([{key:"empty",fn:function(){return[p("div",{staticClass:"flex items-center justify-center"},[a._v(" 您的列表为空，您可以 "),p(s,{on:{click:u.addPhpAsyncDialog}},[a._v("添加一个项目")])],1)]},proxy:!0}])})]},proxy:!0},{key:"footer-left",fn:function(){return[p(t,{attrs:{data:u.batchGroup,config:u.batchConfig,"batch-fn":()=>{}},on:{"handle-batch":u.handleBatch}})]},proxy:!0},{key:"footer-right",fn:function(){return[p(e,{attrs:{total:u.modulesTableParams.total,"current-page":u.modulesTableParams.p,"page-size":u.modulesTableParams.limit},on:{"current-change":u.changePage,"size-change":u.changeSize}})]},proxy:!0}])})],1)}),[],!1,null,null,null,null).exports;export{k as default};
