import{_ as e}from"./index85.js?v=1714377894636";import{w as t,x as r}from"./element-lib.js?v=1714377894636";import{eg as a,aS as o,n as l}from"./main.js?v=1714377894636";import{_ as s}from"./index41.js?v=1714377894636";import{e as m,b as i,f as p,j as c}from"./vue-lib.js?v=1714377894636";import{o as d}from"./confirm.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./config.js?v=1714377894636";const n=l(m({__name:"SystemAddProtectFiles",props:{compData:{default:()=>{}}},setup(e,{expose:t}){const r=e,{proxy:l}=c(),s=i({chattr:"i",path:"",d_mode:""}),m=i([{title:"只读",key:"i"},{title:"追加",key:"a"}]),n=i(),u=i(!1),h=i(r.compData);p((()=>r.compData),(e=>{h.value=e}));const f={path:[{validator:(e,t,r)=>{if(!(t.length>0))return r(new Error(l.$t("system.pathPlaceHolder")));r()},trigger:["blur","change"]}],d_mode:[{validator:(e,t,r)=>{if(!(t.length>0))return r(new Error(l.$t("system.s_modePlaceHolder")));r()},trigger:["blur","change"]}]},_=async()=>{d({$refs:n.value,loading:u,request:async()=>await a({path:s.value.path,chattr:s.value.chattr,d_mode:s.value.d_mode,s_key:r.compData.key}),complete:r.compData.refreshEvent})};return t({onConfirm:_}),{__sfc:!0,props:r,vm:l,ruleForm:s,chattrOptions:m,addProtectFiles:n,formDisabled:u,key:h,rules:f,submitFrom:_,onPathChange:()=>{o({type:"all",path:"",change:e=>{s.value.path=e}})}}}}),(function(){var a=this,o=a._self._c,l=a._self._setupProxy;return o(t,{ref:"addProtectFiles",staticClass:"p-[2rem] addfrom",attrs:{rules:l.rules,disabled:l.formDisabled,model:l.ruleForm,"label-width":"5rem"}},[o(r,{attrs:{label:l.vm.$t("system.path"),prop:"path"}},[o(e,{attrs:{width:"28rem",placeholder:a.$t("system.pathSearchPlaceHolder"),clearable:"",iconType:"folder"},on:{folder:l.onPathChange},model:{value:l.ruleForm.path,callback:function(e){a.$set(l.ruleForm,"path",e)},expression:"ruleForm.path"}})],1),o(r,{attrs:{label:a.$t("system.chattr")}},[o(s,{staticClass:"w-[28rem]",attrs:{options:l.chattrOptions},model:{value:l.ruleForm.chattr,callback:function(e){a.$set(l.ruleForm,"chattr",e)},expression:"ruleForm.chattr"}})],1),o(r,{attrs:{label:l.vm.$t("system.s_mode"),prop:"d_mode"}},[o(e,{attrs:{width:"28rem",placeholder:a.$t("system.s_modePlaceHolder"),clearable:""},model:{value:l.ruleForm.d_mode,callback:function(e){a.$set(l.ruleForm,"d_mode",e)},expression:"ruleForm.d_mode"}})],1)],1)}),[],!1,null,null,null,null).exports;export{n as default};
