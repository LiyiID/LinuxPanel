import{_ as e}from"./index118.js?v=1714377894636";import{_ as t}from"./index39.js?v=1714377894636";import{n as r,q as s}from"./main.js?v=1714377894636";import{_ as a}from"./index59.js?v=1714377894636";import{A as i,b as o,e as l,h as p,j as m}from"./vue-lib.js?v=1714377894636";import{m as d,z as n,A as u}from"./mysql.store.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./index.vue_vue_type_style_index_0_lang.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./element-ui.common.js?v=1714377894636";import{e as c}from"./index38.js?v=1714377894636";import{g as v,r as j}from"./index28.js?v=1714377894636";import{g as f}from"./database.popup.js?v=1714377894636";import{a as b}from"./confirm.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./check.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./vdom.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";import"./index77.js?v=1714377894636";import"./index42.js?v=1714377894636";import"./config.js?v=1714377894636";const _=d();i(_);o([]),o(!1);const x=r(l({__name:"CloudServer",props:{compData:{default:[]}},setup(e){const t=e,{refs:{tabActive:r,tableParam:s},getServerList:a}=v(),{getServerList:l}=d(),{getServerList:_}=j(),x=o([{text:"支持MySQL5.5、MariaDB10.1及以上版本"},{text:"支持阿里云、腾讯云等云厂商的云数据库"},{text:"注意1：请确保本服务器有访问数据库的权限"},{text:"注意2：请确保填写的管理员帐号具备足够的权限"},{text:"注意3：通过宝塔安装的数据库root默认不支持远程权限"}]),{proxy:y}=m(),{mysqlData:g}=i(d()),{tableParam:C}=i(j()),h=o({}),L=o([]),S=async e=>{f(D,e)},w=async e=>{b({confirm:{title:"删除【".concat(e.db_host,"】远程数据库"),message:"该操作仅删除管理关系以及面板中的数据库记录，不会删除远程数据库中的数据,是否继续？",icon:"warning"},loading:"正在删除远程数据库，请稍后...",request:async()=>"mysql"===r.value?await n({id:e.id}):await u({data:JSON.stringify({id:e.id})},r.value),complete:D})},D=async()=>{"mysql"===r.value?(await l(),L.value=g.value.serverList.filter((e=>0!==e.id&&""!==e.id))):"redis"===r.value?(await _(),L.value=C.value.serverList.filter((e=>0!==e.id&&""!==e.id))):(await a(),L.value=s.value.serverList.filter((e=>0!==e.id&&""!==e.id)))},q=(({editCloudEvent:e,delCloudEvent:t})=>o([{prop:"db_host",label:"服务器地址"},{prop:"db_port",label:"数据库端口"},{prop:"db_type",label:"数据库类型"},{prop:"db_user",label:"管理员名称"},{prop:"db_password",label:"管理员密码",width:150},{label:"备注",prop:"ps"},c([{onClick:e,title:"编辑"},{onClick:t,title:"删除"}])]))({delCloudEvent:w,editCloudEvent:S});return p((()=>{D(),"redis"===r.value&&(x.value.shift(),x.value.pop())})),{__sfc:!0,tabActive:r,tableParam:s,getModuleList:a,getServerList:l,getRedisServer:_,props:t,helpList:x,vm:y,mysqlData:g,redisParams:C,rowData:h,tableData:L,editCloudEvent:S,delCloudEvent:w,updateServerList:D,tableColumn:q,AddCloudServerDialog:f}}}),(function(){var r=this,i=r._self._c,o=r._self._setupProxy;return i("div",{staticClass:"p-20x"},[i(a,{scopedSlots:r._u([{key:"header-left",fn:function(){return[i(s,{attrs:{type:"primary"},on:{click:function(e){return o.AddCloudServerDialog(o.updateServerList)}}},[r._v("添加远程数据库")])]},proxy:!0},{key:"content",fn:function(){return[i(t,{attrs:{column:o.tableColumn,data:o.tableData,"max-height":300}})]},proxy:!0}])}),i(e,{staticClass:"ml-20x mt-12x",attrs:{list:o.helpList,"list-style":"disc"}})],1)}),[],!1,null,null,null,null).exports;export{x as default};
