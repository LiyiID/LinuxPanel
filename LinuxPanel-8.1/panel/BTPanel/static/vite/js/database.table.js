import{A as e,b as t,H as a,X as l}from"./vue-lib.js?v=1714377894636";import{i as s}from"./locales-lib.js?v=1714377894636";import{g as n,o as i,e as o,h as r,c as p,k as m,d as c,f as d}from"./index38.js?v=1714377894636";import{a as b,c as u,o as v,f as k}from"./main.js?v=1714377894636";import{c as C}from"./check.js?v=1714377894636";import{m as h}from"./mysql.store.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./index39.js?v=1714377894636";import"./index.vue_vue_type_style_index_0_lang.js?v=1714377894636";import"./index45.js?v=1714377894636";import{g as E}from"./index28.js?v=1714377894636";const{mysqlData:D}=e(h());h();const f=(e,t,a)=>{let l="本地数据库";return(e=C(e,"array",[])).forEach((e=>{e.id===a.sid&&(l="mysql"===t?e.db_host:e.ps,"127.0.0.1"===e.db_host&&(l="本地数据库"))})),l},{refs:{tableParam:w,tabActive:B}}=E(),_=({sqliteBackup:e,manageDabase:l,deleteDataEvent:r})=>t([n(),{label:s.t("DataBase.TableColumn.DataBaseName"),prop:"name"},{label:"备份",prop:"backup_count",minWidth:180,isCustom:!0,render:t=>a("span",{class:t.backup_count>0?"text-[#20a53a] cursor-pointer":"text-[#f0ad4e] cursor-pointer",on:{click:()=>{e(t)}}},[t.backup_count>0?"有备份(".concat(t.backup_count,")"):"点击备份"])},{label:"路径",prop:"path",minWidth:200,isCustom:!0,render:e=>a(b,{class:"w-full overflow-hidden overflow-ellipsis whitespace-nowrap inline-block",on:{click:()=>i(e)},attrs:{title:s.t("ClickOpenPath")}},[e.path])},{label:"大小",prop:"size",render:e=>a("span",u(e.size))},o([{onClick:l,title:"管理"},{onClick:r,title:"删除"}])]),y=({downBackEvent:e,delBackEvent:l})=>t([{label:"名称",prop:"name"},{label:"时间",prop:"mtime",width:140,render:e=>a("span",k(e.mtime))},{label:"大小",prop:"size",width:100,render:e=>a("span",u(e.size))},o([{onClick:e,title:"下载"},{onClick:l,title:"删除"}])]),g=()=>t([n(),{label:"数据库名称",prop:"name",width:200},{label:"表数量",prop:"table_num"},{label:"数据库位置",prop:"sid",render:e=>{let t="本地数据库";return D.value.serverList.forEach((a=>{a.id===e.sid&&(t=a.db_host,"0"==a.db_host&&(t="本地数据库"))})),a("span",t)}},{label:"大小",prop:"size"}]),P=({restoreBackEvent:e,downloadBackEvent:s,detailBackEvent:n,delBackEvent:i})=>t([{label:"文件名称",prop:"name",width:250},{label:"备份时间",prop:"mtime",width:200,render:e=>{const t=new Date(1e3*e.mtime);return a("span",l(t,"YYYY-MM-DD HH:mm:ss"))}},d({prop:"size"}),o([{onClick:n,title:"详情"},{onClick:e,title:"恢复"},{onClick:s,title:"下载"},{onClick:i,title:"删除"}])]),j=({importDbFileEvent:e,delDatabaseFileEvent:s})=>t([{label:"文件名",prop:"name",width:360},{label:"修改时间",width:200,render:e=>{const t=new Date(Math.floor(1e3*e.mtime));return a("span",l(t,"YYYY-MM-DD HH:mm:ss"))}},d({prop:"size"}),o([{onClick:e,title:"导入"},{onClick:s,title:"删除"}])]),x=({changePermissionEvent:e,editPasswordEvent:l,openToolsEvent:i,openPhpAdmin:d,deleteDataEvent:b,setBackupEvents:u,setQuotaEvent:v})=>t([n(),{label:s.t("DataBase.TableColumn.DataBaseName"),prop:"name",sortable:"custom",minWidth:110},{label:s.t("Username"),prop:"username",minWidth:100,sortable:"custom"},r(),p({isCustom:!0,event:v}),m({event:u}),{label:s.t("DataBase.TableColumn.DatabasePosition"),render:e=>{const t="mysql"===B.value?D.value.serverList:w.value.serverList;return a("span",f(t,B.value,e))}},c({table:"databases"}),o([{isHide:e=>!!e.sid,onClick:d,title:"管理"},{onClick:e,title:"权限"},{onClick:l,title:"改密"},{onClick:i,title:"工具"},{onClick:b,title:"删除"}])]),T=({editPasswordEvent:e,changePermissionEvent:l,deleteDataEvent:i,setBackupEvents:p})=>t([n(),{label:s.t("DataBase.TableColumn.DataBaseName"),prop:"name"},{label:s.t("Username"),prop:"username",minWidth:100},r(),m({event:p}),{label:s.t("DataBase.TableColumn.DatabasePosition"),render:e=>{let t="本地数据库";return w.value.serverList.forEach((a=>{a.id===e.sid&&(t=a.ps,"127.0.0.1"===a.db_host&&(t="本地数据库"))})),a("span",t)}},c({table:"databases"}),o([{onClick:l,title:"权限",isHide:v},{onClick:e,title:"改密"},{onClick:i,title:"删除"}])]),q=({editPasswordEvent:e,deleteDataEvent:l,setBackupEvents:i,toolEvents:p,permissionEvent:d})=>t([n(),{label:s.t("DataBase.TableColumn.DataBaseName"),prop:"name",sortable:!0},{label:s.t("Username"),prop:"username",minWidth:100,sortable:!0},r(),m({event:i}),{label:s.t("DataBase.TableColumn.DatabasePosition"),render:e=>{let t="本地数据库";return w.value.serverList.forEach((a=>{a.id===e.sid&&(t=a.ps,"127.0.0.1"===a.db_host&&(t="本地数据库"))})),a("span",t)}},c({table:"databases"}),o([{onClick:d,title:"权限"},{onClick:p,title:"工具"},{onClick:e,title:"改密"},{onClick:l,title:"删除"}])]),z=({editPasswordEvent:e,deleteDataEvent:a})=>t([n(),{label:s.t("DataBase.TableColumn.DataBaseName"),prop:"name"},{label:s.t("Username"),prop:"username",minWidth:100},r(),{label:s.t("DataBase.TableColumn.DatabasePosition"),render:e=>{let t="本地数据库";return w.value.serverList.forEach((a=>{a.id===e.sid&&(t=a.ps,"127.0.0.1"===a.db_host&&(t="本地数据库"))})),t}},c({table:"databases"}),o([{onClick:e,title:"改密"},{onClick:a,title:"删除"}])]),L=({executeEvent:e,editEvent:a,logEvent:l,delInBackEvent:s,recordsEvent:n})=>t([{prop:"db_name",label:"数据库名"},{prop:"tb_name",label:"表名"},{prop:"full_size",label:"备份大小"},{prop:"last_backup_time",label:"备份时间"},o([{onClick:e,title:"执行"},{onClick:a,title:"编辑"},{onClick:l,title:"日志"},{onClick:n,title:"记录"},{onClick:s,title:"删除"}])]),W={alioss:"阿里云OSS",ftp:"FTP",sftp:"SFTP",msonedrive:"微软OneDrive",qiniu:"七牛云",txcos:"腾讯COS",upyun:"又拍云",jdcloud:"京东云",aws_s3:"亚马逊存储","Google Cloud":"谷歌云","Google Drive":"谷歌网盘",bos:"百度云",obs:"华为云"},Y=({restoreBackEvent:e,downBackEvent:l,delBackEvent:s})=>t([n(),{label:"文件名称",prop:"name",width:200},{label:"存储对象",render:e=>{let t=!1,l="";return!Array.isArray(e.filename)&&"string"!=typeof e.filename||-1===e.filename.indexOf("|")?t=!1:(t=!0,l=e.filename.match(/\|(.+)\|/,"$1")),a("span",t?W[C(l,"array",[])[1]]:"本地")}},d({prop:"size"}),{width:120,prop:"addtime",label:"备份时间"},c({table:"backup"}),o([{onClick:e,title:"恢复"},{onClick:l,title:"下载"},{onClick:s,title:"删除"}])]),H=({setPsEvent:e,exportTableStructureEvent:l,repairEvent:s,optimizationEvent:i,conversionEngineEvent:r})=>{let p=[{onClick:l,title:"导出表结构",width:60},{onClick:e=>s(e),title:"修复"},{onClick:e=>i(e),title:"优化"},{onClick:e=>r(e),title:"转换引擎",width:70}];return p=p.slice(1),t([n(),{label:"表名",prop:"table_name"},{label:"备注",prop:"comment",minWidth:100,isCustom:!0,render:t=>{const l={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return t.comment=t.comment.replace(/&(lt|gt|nbsp|amp|quot);/gi,(function(e,t){return l[t]})),a("input",{attrs:{type:"text",placeholder:"点击编辑备注"},domProps:{value:t.comment},class:"bt-table-input w-full",on:{blur:a=>{if(t.comment===a.target.value)return!1;t.comment=a.target.value,e(t)},keyup:e=>{13===e.keyCode&&e.target.blur()}}})}},{label:"引擎",prop:"type",width:80},{label:"字符集",prop:"collation"},{label:"行数",align:"center",width:60,prop:"rows_count"},{label:"大小",prop:"data_size"},o(p)])},A=()=>{const{refs:{tableParam:e,tabActive:l,dbRecycle:s}}=E();return t([{label:"数据库名称",prop:"name"},{label:"数据库大小",prop:"total",render:e=>a("span",u(e.total,!0,2))},{label:"数据库位置",prop:"db_type",width:120,render:t=>{const s="mysql"===l.value?D.value.serverList:e.value.serverList;return a("span",f(s,l.value,t))}},{width:160,label:"创建时间",prop:"addtime"},{width:100,label:"删除结果",render:t=>{let n=a("span","移至回收站");const i="mysql"===l.value?D.value.serverList:e.value.serverList;return"本地数据库"!==f(i,l.value,t)?n=a("span",{style:"color: red"},"彻底删除"):(n=a("span",{style:"color: red"},"彻底删除"),s.value&&"mysql"===l.value&&(n=a("span","移至回收站"))),n}}])};export{z as a,q as b,H as c,T as d,_ as e,A as f,y as g,P as h,g as i,j,Y as k,L as l,x as u};
