import{n as e,r,a as s}from"./main.js?v=1714377894636";import{w as t,x as o}from"./element-lib.js?v=1714377894636";import{_ as a}from"./index40.js?v=1714377894636";import{_ as i}from"./index85.js?v=1714377894636";import{e as l,b as m,v as c,j as n}from"./vue-lib.js?v=1714377894636";import{o as p}from"./confirm.js?v=1714377894636";import{g as f,H as g,K as d}from"./logs.table.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./config.js?v=1714377894636";const u=e(l({__name:"KeywordConfig",props:{compData:{default:{}}},setup(e,{expose:r}){const s=e,{refs:{webSiteName:t}}=f(),{proxy:o}=n(),a=m(!1),i=s.compData.config.channel.split(",").filter((e=>""!==e)),l=s.compData.config.keys.join(","),u=s.compData.config.cycle,y=m(),b=c({give:i,keyword:l||"",cycle:u||""}),v=()=>{const{give:e,cycle:r,keyword:t}=b,i=Number(r);if(!Number.isInteger(i)||i<1||i>60)return o.$message.error("请输入1-60的正整数");if(""===t)return o.$message.error("请输入关键字");let l=t.split(","),m=e.join(",");if(0===m.indexOf(",")&&(m=m.substring(1)),0===e.length||""===m)return o.$message.error("请选择告警方式");const c={cycle:r,channel:m,keys:JSON.stringify(l)};p({$refs:y.value,loading:a,request:async()=>await g(c),async complete(){s.compData.refreshEvent()}})};return r({onConfirm:v}),{__sfc:!0,webSiteName:t,props:s,vm:o,formDisabled:a,give:i,keyword:l,cycle:u,logScanForm:y,msgForm:b,onConfirm:v,getScanData:async()=>{try{const{data:e}=await d({sitename:t.value});b.cycle=e.config.cycle,b.keyword=e.config.keys.join(","),""!=e.config.channel&&(b.give=e.config.channel.split(","))}catch(e){}}}}}),(function(){var e=this,l=e._self._c,m=e._self._setupProxy;return l("div",{staticClass:"p-20x"},[l(t,{ref:"logScanForm",attrs:{model:m.msgForm,disabled:m.formDisabled}},[l(o,{attrs:{label:"周期"}},[l(i,{attrs:{type:"number",min:"1",max:"60",textType:"分钟"},model:{value:m.msgForm.cycle,callback:function(r){e.$set(m.msgForm,"cycle",r)},expression:"msgForm.cycle"}})],1),l(o,{attrs:{label:"关键字"}},[l(r,{attrs:{placement:"top-start",width:"120","popper-class":"tips !bg-[#999] text-white text-[1.2rem] w-[40.6rem]",trigger:"focus","visible-arrow":!0,content:"多个用逗号隔开"}},[l(i,{attrs:{slot:"reference",type:"textarea",rows:5,placeholder:"多个用逗号隔开"},slot:"reference",model:{value:m.msgForm.keyword,callback:function(r){e.$set(m.msgForm,"keyword",r)},expression:"msgForm.keyword"}})],1)],1),l(o,{attrs:{label:"告警方式"}},[l(a,{attrs:{limitType:[]},model:{value:m.msgForm.give,callback:function(r){e.$set(m.msgForm,"give",r)},expression:"msgForm.give"}})],1),l(o,{attrs:{label:" "}},[l("div",{staticClass:"text-[#666]"},[e._v(" 配置后状态未更新,请尝试[ "),l(s,{on:{click:m.getScanData}},[e._v("手动刷新")]),e._v(" ] ")],1)]),l("div",{staticClass:"text-[#666] ml-[3rem] flex items-center"},[l("i",{staticClass:"inline-block mr-2 w-[.4rem] h-[.4rem] bg-[#999] rounded-[50%]"}),e._v("检查时只检查间隔时间内的日志内容 ")]),l("div",{staticClass:"text-[#666] ml-[3rem] flex items-center"},[l("i",{staticClass:"inline-block mr-2 w-[.4rem] h-[.4rem] bg-[#999] rounded-[50%]"}),e._v("周期时间请勿设置太小，建议10分钟以上以免导致服务器资源异常 ")])],1)],1)}),[],!1,null,null,null,null).exports;export{u as default};
