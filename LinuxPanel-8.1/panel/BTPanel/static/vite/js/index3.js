import{_ as e}from"./index39.js?v=1714377894636";import{e as t,A as a,b as i,H as s,j as l}from"./vue-lib.js?v=1714377894636";import{a1 as n,n as r}from"./main.js?v=1714377894636";import{f as o,h as m}from"./config.js?v=1714377894636";import{_ as p}from"./index46.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./index.vue_vue_type_style_index_0_lang.js?v=1714377894636";const u=r(t({__name:"index",setup(e,{expose:t}){const r=n(),{refreshRouterMenu:u}=a(r),{proxy:d}=l(),c=i([]),h=i(!1),g=i([{label:"菜单栏目",prop:"title"},{label:"是否显示",showOverflowTooltip:!1,align:"right",render:(e,t)=>["首页","软件商店","面板设置","退出"].includes(e.title)?"不可操作":s(p,{attrs:{value:e.show,size:"mini"},on:{change:()=>{f(e)}}})}]),_=async()=>{try{h.value=!0;const e=(await m()).data.map((({id:e,show:t,title:a,children:i})=>{var s;let l=null==(s=e.replace(/memu([A|_]?)/,"")||"home")?void 0:s.toLowerCase();return"dologin"===l&&(l="exit"),"btwaf"===l&&(l="waf"),i=!!i&&i.map((t=>{let a=t.id;return"proxy"===a&&(a="nginx"),{...t,parentId:e,name:a}})),{name:l,show:t,title:a,id:e}}));c.value=e,u.value=(new Date).getTime(),sessionStorage.setItem("MENU-LIST",JSON.stringify(c.value))}catch(e){}finally{h.value=!1}},f=async e=>{try{let t={hide_list:JSON.stringify([e.id])};e.parentId&&(t.site_menu=1);const a=await o(t);d.$message.request(a),await _()}catch(t){}},v=async()=>{await _()};return t({onOpen:v}),{__sfc:!0,globalStore:r,refreshRouterMenu:u,vm:d,menuList:c,loading:h,tableColumn:g,updateMenuItems:_,handleMenuChange:f,onOpen:v}}}),(function(){var t=this._self._c,a=this._self._setupProxy;return t("div",{staticClass:"p-[1.6rem]"},[t(e,{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:a.loading,expression:"loading"},{name:"bt-loading",rawName:"v-bt-loading:title",value:"正在加载菜单列表，请稍后...",expression:"'正在加载菜单列表，请稍后...'",arg:"title"}],attrs:{"max-height":"360","row-key":"id","tree-props":{children:"children"},column:a.tableColumn,data:a.menuList}})],1)}),[],!1,null,"d6e4188f",null,null).exports;export{u as default};
