import{_ as e}from"./index52.js?v=1714377894636";import{_ as t}from"./index53.js?v=1714377894636";import{_ as a}from"./index39.js?v=1714377894636";import{_ as r}from"./index54.js?v=1714377894636";import{_ as n}from"./index58.js?v=1714377894636";import{_ as l}from"./index59.js?v=1714377894636";import{e as i,b as s,v as o,L as c,h as m,j as p,H as d}from"./vue-lib.js?v=1714377894636";import{g as u,P as f,n as h}from"./main.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import{c as g}from"./docker.table.js?v=1714377894636";import{n as b,N as j,o as v,q as y}from"./docker.popup.js?v=1714377894636";import{g as x}from"./docker.store.js?v=1714377894636";import{p as D,j as _}from"./docker.api.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./element-ui.common.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./vdom.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";import"./check.js?v=1714377894636";const T=h(i({__name:"DockerProjectTemplate",setup(e){var t;const{proxy:a}=p(),r=s(),n=s(JSON.parse(null!=(t=localStorage.getItem("dockerTemplateTableColumn"))?t:"[]")||[]),{refs:{templateTableData:l},getTList:i}=x(),{refs:{mainHeight:h}}=u(),T=o({selectList:[]}),k=s("");c("RowData",(()=>l.value.rowData)),c("selectList",(()=>T.selectList));const C=s([{label:"删除",value:"delete",event:()=>{}}]),P=s([{active:!0,content:a.$t("Docker.add"),event:()=>{b()}}]);let S=[],L=!1,w=0;const B=o({isRecurrence:!1,describe:{title:"",th:"",message:"",propsValue:"name"},tableDisplayConfig:{label:"状态",prop:"status",render:e=>d("span",{class:0!==S.length||L?S.includes(e.id)?"text-primary":"text-danger":"text-warning"},(()=>{if(0!==S.length||L){let t=S.includes(e.id)?"执行成功":"执行失败";return w++,t}return"等待执行"})())}}),E=e=>{v(e)},N=async e=>{D({data:JSON.stringify({template_id:e.id})}),y()},H=async e=>{try{await a.$confirm({type:"calc",title:"删除项目模板【".concat(e.name,"】"),width:"35rem",message:"删除项目模板【".concat(e.name,"】，是否继续操作？")});const t=await _({data:JSON.stringify({template_id:e.id})});i(),a.$message.request(t)}catch(t){}},$=async({id:e})=>{try{const t={template_id:e},{data:a}=await _({data:JSON.stringify(t)});return a.status?(S.push(e),a):Promise.reject(a)}catch(t){return Promise.reject(!1)}},z=g({editDataEvent:E,pullDataEvent:N,deleteDataEvent:H});return m((async()=>{i(),z.value=f(n.value,z.value)})),{__sfc:!0,vm:a,Table:r,ftpTbaleColumnLocal:n,templateTableData:l,getTList:i,mainHeight:h,select:T,batchType:k,tableBatchData:C,tableBtnGroup:P,list:S,isComplete:L,index:w,batchConfig:B,batchEvent:(e,t,a)=>{if("delete"===e)return $(t)},handleBathComplete:e=>{L=!0,i()},changePageLimit:e=>{l.value.limit=e,l.value.p=1,i()},changePageSize:e=>{l.value.p=e,i()},editDataEvent:E,pullDataEvent:N,deleteDataEvent:H,batchDeleteData:$,handleBatch:e=>{L=!1,S=[],w=0;let t=[];if("delete"===e)t=["删除","彻底失去访问和操作权限"];k.value=e,B.isRecurrence=!0,B.describe.th="模板名",B.describe.title="批量".concat(t[0],"模板"),B.describe.message="批量".concat(t[0],"已选的模板，是否继续操作！")},handleSelectionChange:e=>{T.selectList=e},tableColumn:z,NPSDialog:j}}}),(function(){var i=this,s=i._self._c,o=i._self._setupProxy;return s("div",{staticClass:"relative"},[s(l,{scopedSlots:i._u([{key:"header-left",fn:function(){return[s("div",{staticClass:"flex items-center"},[s(n,{attrs:{group:o.tableBtnGroup}}),s("a",{staticClass:"cursor-pointer ml-[1rem] text-[#20a53a] hover:text-[#1d9534]",on:{click:function(e){return o.NPSDialog()}}},[i._v("需求反馈")])],1)]},proxy:!0},{key:"header-right",fn:function(){return[s(r,{attrs:{name:"dockerTemplateTableColumn",column:o.tableColumn}})]},proxy:!0},{key:"content",fn:function(){return[s(a,{directives:[{name:"loading",rawName:"v-loading",value:o.templateTableData.loading,expression:"templateTableData.loading"}],key:"templateTable",ref:"Table",attrs:{column:o.tableColumn,"max-height":o.mainHeight-220,data:o.templateTableData.showList,description:"模板列表为空","element-loading-text":"正在加载模板列表，请稍后..."},on:{"selection-change":o.handleSelectionChange}})]},proxy:!0},{key:"footer-left",fn:function(){return[s(t,{attrs:{data:o.tableBatchData,config:o.batchConfig,"batch-fn":o.batchEvent},on:{"handle-batch":o.handleBatch,"handle-complete":o.handleBathComplete}})]},proxy:!0},{key:"footer-right",fn:function(){return[s(e,{attrs:{total:o.templateTableData.total,"current-page":o.templateTableData.p,"page-size":o.templateTableData.limit},on:{"update:currentPage":function(e){return i.$set(o.templateTableData,"p",e)},"update:current-page":function(e){return i.$set(o.templateTableData,"p",e)},"size-change":o.changePageLimit,"current-change":o.changePageSize}})]},proxy:!0},{key:"popup",fn:function(){},proxy:!0}])})],1)}),[],!1,null,"358756f1",null,null).exports;export{T as default};
