import{_ as a}from"./index85.js?v=1714377894636";import{L as e,w as s,x as t}from"./element-lib.js?v=1714377894636";import{a as i,n as l,q as o,b as r}from"./main.js?v=1714377894636";import{_ as n}from"./index39.js?v=1714377894636";import{_ as m}from"./index59.js?v=1714377894636";import"./index45.js?v=1714377894636";import{e as p,b as d,v as c,H as u,h as f,j as y}from"./vue-lib.js?v=1714377894636";import{g as b,a9 as v,aa as _,ab as g,ac as x,ad as j,ae as h}from"./site.store.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./check.js?v=1714377894636";const C=l(p({__name:"SiteTyeSetting",props:{compData:{default:{}}},setup(a){const s=a,{refs:{phpModulesTableParams:t,modulesTableParams:l},getPhpModulesList:o,getTypeList:r,getModulesTypeList:n}=b(),{proxy:m}=y(),p=d(!1),C=d("添加分类"),w=c({name:"",id:0}),D=d(),L=d(!1),P=d(!1),T=d([{label:"分类名称",prop:"name"},{label:"操作",align:"right",render:a=>a.id<=0?"不可操作":u("div",[u(i,{on:{click:()=>{w.id=a.id,w.name=a.name,C.value="修改分类【"+a.name+"】",L.value=!0}}},["编辑"]),u(e,{attrs:{direction:"vertical"}}),u(i,{on:{click:async()=>{try{let e;await m.$confirm({title:"提示",icon:"warning",message:"是否确定删除分类？"}),e="string"==typeof s.compData?await v({type_id:a.id},s.compData):await _({id:a.id}),m.$message.request(e),M()}catch(e){}}}},["删除"])])}]),F=d([]),k=()=>{w.id=0,w.name=""},M=async()=>{"string"==typeof s.compData?(await n(s.compData),F.value=l.value.typeList.filter((a=>""!==a.id))):(await r(),F.value=t.value.typeList.filter((a=>-1!==a.id)))};return f((async()=>{M()})),{__sfc:!0,props:s,phpModulesTableParams:t,modulesTableParams:l,getPhpModulesList:o,getTypeList:r,getModulesTypeList:n,vm:m,formDisabled:p,classFormTitle:C,classForm:w,crontabClassForm:D,addClassPopup:L,tableLoading:P,tableColumns:T,tableData:F,addClass:()=>{C.value="添加分类",L.value=!0},addClassEvent:async()=>{let a,e;try{a=m.$load(m.$t("正在操作分类，请稍后...")),e=w.id?"string"==typeof s.compData?await j({type_name:w.name,type_id:w.id,ps:""},s.compData):await h({id:w.id,name:w.name}):"string"==typeof s.compData?await g({type_name:w.name,ps:""},s.compData):await x({name:w.name}),m.$message.request(e),e.status&&(k(),L.value=!1,M())}catch(t){}finally{a&&a.close()}},onCancel:k,getList:M}}}),(function(){var e=this,i=e._self._c,l=e._self._setupProxy;return i("div",{staticClass:"p-20x"},[i(m,{scopedSlots:e._u([{key:"header-left",fn:function(){return[i(o,{on:{click:l.addClass}},[e._v("添加分类")])]},proxy:!0},{key:"content",fn:function(){return[i(n,{directives:[{name:"loading",rawName:"v-loading",value:l.tableLoading,expression:"tableLoading"}],attrs:{column:l.tableColumns,"max-height":"250",data:l.tableData}})]},proxy:!0},{key:"popup",fn:function(){return[i(r,{attrs:{visible:l.addClassPopup,area:40,showFooter:"",title:l.classFormTitle},on:{"update:visible":function(a){l.addClassPopup=a},cancel:l.onCancel,confirm:l.addClassEvent}},[i("div",{staticClass:"p-20x"},[i(s,{ref:"crontabClassForm",attrs:{model:l.classForm,disabled:l.formDisabled}},[i(t,{attrs:{label:"分类名称",prop:"name"}},[i(a,{attrs:{placeholder:"请输入分类名称"},model:{value:l.classForm.name,callback:function(a){e.$set(l.classForm,"name",a)},expression:"classForm.name"}})],1)],1)],1)])]},proxy:!0}])}),e._m(0)],1)}),[function(){var a=this,e=a._self._c;return a._self._setupProxy,e("ul",{staticClass:"mt-8x leading-8 text-[1.2rem] list-disc ml-20x"},[e("li",[a._v("【站点批量操作-设置分类】可修改网站分类")])])}],!1,null,"9d8fa567",null,null).exports;export{C as default};
