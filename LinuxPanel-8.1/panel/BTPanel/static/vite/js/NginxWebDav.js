import{_ as a}from"./index85.js?v=1714377894636";import{L as s,w as e,x as t}from"./element-lib.js?v=1714377894636";import{n,q as i,b as o}from"./main.js?v=1714377894636";import{_ as l}from"./index46.js?v=1714377894636";import"./index45.js?v=1714377894636";import{e as m,b as r,h as c,j as u}from"./vue-lib.js?v=1714377894636";import{ed as d,ee as p,ef as v,eg as x,eh as h,ei as f}from"./site.store.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./index.vue_vue_type_style_index_0_lang.js?v=1714377894636";import"./check.js?v=1714377894636";const _=n(m({__name:"NginxWebDav",props:{compData:{default:()=>({})}},setup(a){const s=a,{proxy:e}=u(),t=r(!1),n=r(!1),i=r({auth:!1,site_name:"",site_path:"",domain:"",status:!1,user:"",pass:""}),o=r({domain:""}),l=async()=>{try{const{data:a}=await d({site_name:s.compData.name});if(!a)return void(n.value=!1);n.value=!0,i.value=Object.assign(i.value,a),i.value.auth=!!a.auth,a.auth&&(i.value.user=a.auth.auth_name,i.value.pass=a.auth.auth_value)}catch(a){}},m=()=>{t.value=!1,o.value.domain=""};return c((async()=>{await l()})),{__sfc:!0,vm:e,props:s,addPopup:t,webDavStatus:n,nginxForm:i,addForm:o,getNginxWebData:l,handleChangeAuth:async a=>{let t;i.value.auth=a;try{if(!a){t=e.$load("正在设置状态,请稍后..."),i.value.user="",i.value.pass="";const a=await p({site_name:s.compData.name});e.$message.request(a),t.close()}}catch(n){}finally{t.close()}},saveNginxAuth:async()=>{try{const a=await v({site_name:s.compData.name,auth_name:i.value.user,auth_value:i.value.pass});e.$message.request(a)}catch(a){}},handleChangeStatus:async a=>{let t=e.$load("正在设置状态,请稍后...");i.value.status=a;try{const n=await x({site_name:s.compData.name,option:a?1:0});e.$message.request(n),t.close()}catch(n){}finally{t.close()}},delWebDev:async()=>{let a=e.$load("正在删除,请稍后...");try{await e.$confirm({title:"删除【".concat(s.compData.name,"】webdav"),message:"是否删除【".concat(s.compData.name,"】webdav，删除后将不再对域名进行限制?"),icon:"warning"});const a=await h({site_name:s.compData.name});e.$message.request(a),l()}catch(t){}finally{a.close()}},onConfirmAdd:async()=>{let a=e.$load("正在添加,请稍后...");try{const a=await f({domain:o.value.domain,site_id:s.compData.id});m(),e.$message.request(a),l()}catch(t){}finally{a.close()}},handleCancelAdd:m}}}),(function(){var n=this,m=n._self._c,r=n._self._setupProxy;return m("div",{staticClass:"p-12x"},[r.webDavStatus?m("div",[m("div",{staticClass:"formItem"},[m("span",{staticClass:"formLabel"},[n._v("WebDav状态")]),m(l,{staticClass:"mr-12x",on:{change:r.handleChangeStatus},model:{value:r.nginxForm.status,callback:function(a){n.$set(r.nginxForm,"status",a)},expression:"nginxForm.status"}}),m(i,{attrs:{type:"default"},on:{click:r.delWebDev}},[n._v("删除WebDav")])],1),m(s),m("div",{staticClass:"formItem"},[m("span",{staticClass:"formLabel"},[n._v("域名")]),m(a,{staticClass:"mr-12x",attrs:{disabled:""},model:{value:r.nginxForm.domain,callback:function(a){n.$set(r.nginxForm,"domain",a)},expression:"nginxForm.domain"}})],1),m("div",{staticClass:"formItem"},[m("span",{staticClass:"formLabel"},[n._v("auth状态")]),m(l,{staticClass:"mr-12x",on:{change:r.handleChangeAuth},model:{value:r.nginxForm.auth,callback:function(a){n.$set(r.nginxForm,"auth",a)},expression:"nginxForm.auth"}})],1),r.nginxForm.auth?m("div",[m("div",{staticClass:"formItem"},[m("span",{staticClass:"formLabel"},[n._v("用户名")]),m(a,{staticClass:"mr-12x",model:{value:r.nginxForm.user,callback:function(a){n.$set(r.nginxForm,"user",a)},expression:"nginxForm.user"}})],1),m("div",{staticClass:"formItem"},[m("span",{staticClass:"formLabel"},[n._v("密码")]),m(a,{staticClass:"mr-12x",model:{value:r.nginxForm.pass,callback:function(a){n.$set(r.nginxForm,"pass",a)},expression:"nginxForm.pass"}})],1),m(i,{on:{click:r.saveNginxAuth}},[n._v("保存")])],1):n._e()],1):m("div",[m(i,{on:{click:function(a){r.addPopup=!0}}},[n._v("创建WebDav")]),m("br"),m("p",{staticClass:"mt-20x"},[n._v("WebDAV是一种用于在Web服务器上进行文件管理和协作的扩展协议。")]),m("p",[n._v(" WebDAV允许用户通过HTTP协议对远程服务器上的文件和目录进行读写操作。它提供了类似于本地文件系统的操作方式，使用户能够通过WebDAV客户端访问远程服务器上的文件 ")]),m(o,{attrs:{title:"创建WebDav",visible:r.addPopup,area:42,showFooter:""},on:{"update:visible":function(a){r.addPopup=a},cancel:r.handleCancelAdd,confirm:r.onConfirmAdd}},[m("div",{staticClass:"p-20x"},[m(e,{attrs:{model:r.addForm}},[m(t,{attrs:{label:"域名"}},[m(a,{attrs:{placeholder:"请输入域名"},model:{value:r.addForm.domain,callback:function(a){n.$set(r.addForm,"domain",a)},expression:"addForm.domain"}})],1)],1),m("ul",{staticClass:"mt-12x leading-8 text-[1.2rem] list-disc ml-20x"},[m("li",[n._v("域名格式为 www.domain.com:88,如未传端口信息,默认为80")])])],1)])],1)])}),[],!1,null,"864a1f6e",null,null).exports;export{_ as default};
