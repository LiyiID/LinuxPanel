import{_ as r}from"./index85.js?v=1714377894636";import{w as s,x as t}from"./element-lib.js?v=1714377894636";import{n as e}from"./main.js?v=1714377894636";import{_ as a}from"./cascader.js?v=1714377894636";import{e as i,b as o,v as p,w as l,h as m,j as n}from"./vue-lib.js?v=1714377894636";import{g as c}from"./index35.js?v=1714377894636";import{g as d}from"./crontab.api.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./index77.js?v=1714377894636";import"./index42.js?v=1714377894636";import"./index39.js?v=1714377894636";import"./index53.js?v=1714377894636";import"./index57.js?v=1714377894636";import"./index43.js?v=1714377894636";import"./upload.js?v=1714377894636";import"./index59.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./index61.js?v=1714377894636";const u=e(i({__name:"SelectShell",props:{compData:{default:()=>({})}},emits:["update:value"],setup(r,{expose:s,emit:t}){const e=r,{proxy:a}=n(),i=o(),u=o(!1),_=p({run_script_id:"",script:"",args:""}),g=p({is_args:"",args_holder:"",args_title:""}),{refs:{scriptLibraryData:j,selectScriptForm:v}}=c(),f=p({run_script_id:[{required:!0,message:"请选择脚本",trigger:"change"}],args:[{required:!0,message:"请输入值",trigger:"blur"}]}),x=o(e.compData.value),b=o([]);l((()=>{x.value=e.compData.value}));const h=async r=>{i.value.validate((s=>{if(!s)return!1;x.value=""!==x.value?x.value+"\n"+_.script:_.script,v.value.scriptText=x.value,v.value.args=_.args,r()}))},k=async()=>{try{const r=await d();j.value=r.data,b.value=r.data.filter((r=>"服务管理"==r.name))}catch(r){}};return m((()=>{k()})),s({onConfirm:h}),{__sfc:!0,props:e,vm:a,taskEvent:i,formDisabled:u,taskEventForm:_,argsForm:g,propsData:{label:"name",value:"script_id",children:"script_list"},scriptLibraryData:j,selectScriptForm:v,taskRules:f,inputValue:x,list:b,emit:t,changeScript:r=>{let s=a.$refs.scriptCascader.getCheckedNodes()[0].data;_.script=s.script,1===s.is_args?(g.is_args=!0,g.args_holder=s.args_ps,g.args_title=s.args_title):g.is_args=!1},onConfirm:h,getScriptData:k}}}),(function(){var e=this,i=e._self._c,o=e._self._setupProxy;return i("div",{staticClass:"p-20x"},[i(s,{ref:"taskEvent",attrs:{disabled:o.formDisabled,"label-width":"80px",model:o.taskEventForm,rules:o.taskRules}},[i(t,{attrs:{label:"选择脚本",prop:"run_script_id"}},[i(a,{ref:"scriptCascader",attrs:{"show-all-levels":!1,props:o.propsData,options:o.list,placeholder:"请选择脚本,支持搜索",filterable:""},on:{change:o.changeScript},model:{value:o.taskEventForm.run_script_id,callback:function(r){e.$set(o.taskEventForm,"run_script_id",r)},expression:"taskEventForm.run_script_id"}})],1),o.argsForm.is_args?i(t,{attrs:{label:o.argsForm.args_title,prop:"args"}},[i(r,{attrs:{placeholder:o.argsForm.args_holder,width:"17rem"},model:{value:o.taskEventForm.args,callback:function(r){e.$set(o.taskEventForm,"args",r)},expression:"taskEventForm.args"}})],1):e._e()],1)],1)}),[],!1,null,"c64e8552",null,null).exports;export{u as default};
