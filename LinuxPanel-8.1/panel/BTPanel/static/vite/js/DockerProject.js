import{_ as e}from"./index52.js?v=1714377894636";import{_ as t}from"./index53.js?v=1714377894636";import{_ as a}from"./index39.js?v=1714377894636";import{_ as s}from"./index54.js?v=1714377894636";import{g as n,P as i,n as r,a as o}from"./main.js?v=1714377894636";import{_ as l}from"./index58.js?v=1714377894636";import{_ as c}from"./index59.js?v=1714377894636";import{e as m,b as p,A as u,v as d,L as g,h,j as f,H as b}from"./vue-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import{b as j}from"./docker.table.js?v=1714377894636";import{A as v,N as y,m as D}from"./docker.popup.js?v=1714377894636";import{u as x}from"./docker.store.js?v=1714377894636";import{f as _,h as C,i as k}from"./docker.api.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./element-ui.common.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./vdom.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";import"./check.js?v=1714377894636";const T=r(m({__name:"DockerProject",setup(e){var t;const{proxy:a}=f(),s=p(),r=p(JSON.parse(null!=(t=localStorage.getItem("dockerStashTableColumn"))?t:"[]")||[]),o=x(),{itemTableData:l}=u(o),{getIList:c}=o,{refs:{mainHeight:m}}=n(),T=d({selectList:[]}),w=p("");g("RowData",(()=>l.value.rowData)),g("selectList",(()=>T.selectList));const S=p([{label:"删除",value:"delete",event:()=>{}}]),L=p([{active:!0,content:a.$t("Docker.addCompose"),event:()=>{v()}},{content:a.$t("Docker.clearItem"),event:async()=>{try{await a.$confirm({icon:"warning",title:"清理容器编排",width:"35rem",message:"将删除所有没有容器的容器编排,是否继续？"}),l.value.loading=!0;const e=await _();e.status&&c(),a.$message.request(e)}catch(e){}finally{l.value.loading=!1}}}]);let P=[],$=!1,E=0;const B=d({isRecurrence:!1,describe:{title:"",th:"",message:"",propsValue:"name"},tableDisplayConfig:{label:"状态",prop:"status",render:e=>b("span",{class:0!==P.length||$?P.includes(e.id)?"text-primary":"text-danger":"text-warning"},(()=>{if(0!==P.length||$){let t=P.includes(e.id)?"执行成功":"执行失败";return E++,t}return"等待执行"})())}}),N=e=>{v(e)},H=e=>{e.num&&0!==e.num?D(e):a.$message.warn("暂无容器")},z=async(e,t)=>{const s={project_id:e.id,status:t};l.value.loading=!0;const n=await C({data:JSON.stringify(s)});l.value.loading=!1,n.status?(c(),a.$message.success(n.msg)):a.$message.error(n.msg)},I=async e=>{await a.$confirm({type:"calc",title:"删除项目【".concat(e.name,"】"),width:"35rem",message:"您真的要删除项目【".concat(e.name,"】吗？")});const t={project_id:e.id},s=await k({data:JSON.stringify(t)});s.status?(c(),a.$message.success(s.msg)):a.$message.error(s.msg)},J=async({id:e})=>{try{const{data:t}=await k({project_id:e});return t.status?(P.push(e),t):Promise.reject(t)}catch(t){return Promise.reject(!1)}},O=j({editDataEvent:N,ListDataEvent:H,deleteDataEvent:I,setStatusEvent:z});return h((async()=>{c(),O.value=i(r.value,O.value)})),{__sfc:!0,vm:a,Table:s,ftpTbaleColumnLocal:r,store:o,itemTableData:l,getIList:c,mainHeight:m,select:T,batchType:w,tableBatchData:S,tableBtnGroup:L,list:P,isComplete:$,index:E,batchConfig:B,batchEvent:(e,t,a)=>{if("delete"===e)return J(t)},handleBathComplete:e=>{$=!0,c()},changePageLimit:e=>{l.value.limit=e,l.value.p=1,c()},changePageSize:e=>{l.value.p=e,c()},editDataEvent:N,ListDataEvent:H,setStatusEvent:z,deleteDataEvent:I,batchDeleteData:J,handleBatch:e=>{$=!1,P=[],E=0;let t=[];if("delete"===e)t=["删除","彻底失去访问和操作权限"];w.value=e,B.isRecurrence=!0,B.describe.th="Compose项目名",B.describe.title="批量".concat(t[0],"项目"),B.describe.message="批量".concat(t[0],"已选的项目，是否继续操作！")},handleSelectionChange:e=>{T.selectList=e},tableColumn:O,NPSDialog:y}}}),(function(){var n=this,i=n._self._c,r=n._self._setupProxy;return i("div",{staticClass:"relative container-table-tab"},[i(c,{scopedSlots:n._u([{key:"header-left",fn:function(){return[i("div",{staticClass:"flex items-center"},[i(l,{attrs:{group:r.tableBtnGroup}}),i(o,{staticClass:"ml-[1.6rem]",on:{click:function(e){return r.NPSDialog()}}},[n._v("需求反馈")])],1)]},proxy:!0},{key:"header-right",fn:function(){return[i(s,{attrs:{name:"dockerStashTableColumn",column:r.tableColumn}})]},proxy:!0},{key:"content",fn:function(){return[i(a,{directives:[{name:"loading",rawName:"v-loading",value:r.itemTableData.loading,expression:"itemTableData.loading"}],key:"ProjectTable",ref:"Table",attrs:{column:r.tableColumn,"max-height":r.mainHeight-220,data:r.itemTableData.showList,description:"项目列表为空","element-loading-text":"正在加载项目列表，请稍后..."},on:{"selection-change":r.handleSelectionChange}})]},proxy:!0},{key:"footer-left",fn:function(){return[i(t,{attrs:{data:r.tableBatchData,config:r.batchConfig,"batch-fn":r.batchEvent},on:{"handle-batch":r.handleBatch,"handle-complete":r.handleBathComplete}})]},proxy:!0},{key:"footer-right",fn:function(){return[i(e,{attrs:{total:r.itemTableData.total,"current-page":r.itemTableData.p,"page-size":r.itemTableData.limit},on:{"update:currentPage":function(e){return n.$set(r.itemTableData,"p",e)},"update:current-page":function(e){return n.$set(r.itemTableData,"p",e)},"size-change":r.changePageLimit,"current-change":r.changePageSize}})]},proxy:!0},{key:"popup",fn:function(){},proxy:!0}])})],1)}),[],!1,null,"772a0c44",null,null).exports;export{T as default};
