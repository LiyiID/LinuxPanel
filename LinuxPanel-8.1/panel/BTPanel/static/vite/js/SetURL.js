import{w as s,x as e,q as r,s as t}from"./element-lib.js?v=1714377894636";import{n as a}from"./main.js?v=1714377894636";import{e as l,A as o,v as i,b as m,h as c,j as n}from"./vue-lib.js?v=1714377894636";import{ai as p,J as u,aj as _}from"./docker.api.js?v=1714377894636";import{u as f}from"./docker.store.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./check.js?v=1714377894636";const d=a(l({__name:"SetURL",props:{compData:{default:()=>({})}},setup(s,{expose:e}){const r=s,{proxy:t}=n(),a=f(),{settingData:l}=o(a),{getSet:d}=a,v=i({registry_mirrors_address:""}),g=m([]);c((()=>{v.registry_mirrors_address=r.compData.url,g.value=[...l.value.options,{label:"不使用加速",value:""}]}));const b=async()=>{try{const s=await _({data:JSON.stringify(v)});s.status?(t.$emit("close"),d(),t.$message.success(s.msg)):t.$message.error(s.msg)}catch(s){}};return e({onConfirm:b}),{__sfc:!0,vm:t,store:a,settingData:l,getSet:d,props:r,urlForm:v,options:g,deleteUrl:async s=>{try{const e=await p({data:JSON.stringify({registry_mirrors_address:s})});if(e.status){t.$message.success(e.msg);const s=await u(),r=[];Object.entries(s.data.com_reg_mirrors).forEach((s=>{r.push({label:"".concat(s[0],"(").concat(s[1],")"),value:s[0]})})),g.value=r}else t.$message.error(e.msg)}catch(e){}},onConfirm:b}}}),(function(){var a=this,l=a._self._c,o=a._self._setupProxy;return l("div",{staticClass:"flex flex-col p-16x lib-box"},[l(s,{ref:"urlFormRef",staticClass:"relative w-full text-[1.2rem]",attrs:{size:"small",model:o.urlForm,"label-position":"right"},nativeOn:{submit:function(s){s.preventDefault()}}},[l(e,{staticClass:"check mb-[1.2rem] text-[1.2rem]",attrs:{prop:"registry_mirrors_address",label:"加速URL"}},[l(r,{staticClass:"w-[47rem] h-[3.2rem]",attrs:{filterable:"","allow-create":"",placeholder:"请输入加速URL"},model:{value:o.urlForm.registry_mirrors_address,callback:function(s){a.$set(o.urlForm,"registry_mirrors_address",s)},expression:"urlForm.registry_mirrors_address"}},a._l(o.options,(function(s){return l(t,{key:s.value,attrs:{label:s.label,value:s.value}},[l("span",{staticStyle:{float:"left"}},[a._v(a._s(s.label))]),""!==s.value?l("span",{staticClass:"float-right text-[#ef0808] hover:text-[#c9302c]",on:{click:function(e){return e.stopPropagation(),o.deleteUrl(s.value)}}},[a._v("删除")]):a._e()])})),1)],1)],1),a._m(0)],1)}),[function(){var s=this,e=s._self._c;return s._self._setupProxy,e("div",{staticClass:"tips mt-[1.5rem]"},[e("ul",{staticClass:"help-info-text c7 list-disc text-[#777] ml-[11.7rem]"},[e("li",[s._v("优先使用加速URL执行操作，请求超时将跳过使用默认加速方式")]),e("li",[s._v("设置加速后需要手动重启docker")]),e("li",[s._v("关闭加速请设置为空")])])])}],!1,null,"90118016",null,null).exports;export{d as default};
