import{_ as a}from"./index51.js?v=1714377894636";import{_ as t}from"./index98.js?v=1714377894636";import{P as e}from"./element-lib.js?v=1714377894636";import{g as i,y as s,c as l,n as o,q as n}from"./main.js?v=1714377894636";import{_ as r}from"./index39.js?v=1714377894636";import{_ as m}from"./index57.js?v=1714377894636";import{_ as c}from"./index43.js?v=1714377894636";import{_ as p}from"./index59.js?v=1714377894636";import{_ as u}from"./index33.js?v=1714377894636";import{e as d,b as f,v as g,h,j as b}from"./vue-lib.js?v=1714377894636";import{g as v,i as y,j}from"./logs.table.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./index77.js?v=1714377894636";import"./index42.js?v=1714377894636";import"./date-picker.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./radio-button.js?v=1714377894636";import"./check.js?v=1714377894636";import"./index52.js?v=1714377894636";import"./index58.js?v=1714377894636";import"./index45.js?v=1714377894636";const x=o(d({__name:"index",setup(a,{expose:t}){const{refs:{auditTabActive:e}}=v(),o=f(0),{refs:{authType:n,mainHeight:r,mainWidth:m}}=i(),{proxy:c}=b(),p=f([]),u=f(""),d=f(!0),x=f([]),_=f([]),w=f(!1),k=g({search:"",limit:10,p:1,list:[],total:0}),P=f(!1),C=g({title:"日志审计-功能介绍",ps:"对系统、网络、应用程序等进行记录的各种操作、事件、异常情况等信息进行收集、分析和审计，通过对这些日志信息的审计，可以发现系统存在的安全问题，及时采取措施进行修复和防范。",source:104,desc:["分析和解析常用日志"],tabImgs:[{title:"日志审计",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/logs/logAudit_2.png"}]}),D=async()=>{try{const a=await y();p.value=a,p.value.forEach((a=>{a.name="".concat(a.name,"-").concat(a.title,"(").concat(l(a.size),")")}))}catch(a){}},T=async(a,t,i)=>{t||(k.search="",o.value++),i&&(k.p=1),e.value=null==a?void 0:a.name,P.value=!0;try{const t=await j({data:JSON.stringify({log_name:a.log_file,...k})});if(0===t.length)return u.value="暂无数据",d.value=!0,_.value=[],k.total=0,void(k.p=1);"object"==typeof t[0]?(w.value=!1,d.value=!0,x.value=[],x.value=Object.keys(t[0]).map((a=>({label:a,prop:a}))),_.value=t,k.total=t.length):(w.value=!1,d.value=!1,u.value=t.join("\n"))}catch(s){}finally{P.value=!1}},H=async()=>{const a=c.$load("正在加载数据中...");try{await D(),await T(p.value[0]),e.value=p.value[0].name}catch(t){}finally{a.close()}},L=async()=>{await H()};return h((async()=>{await H()})),t({cutTab:L}),{__sfc:!0,auditTabActive:e,key:o,authType:n,mainHeight:r,mainWidth:m,vm:c,menuOptions:p,logsMsg:u,tableView:d,tableColumn:x,tableData:_,empty:w,tableParams:k,loading:P,productData:C,getMenuList:D,handleTabClick:async a=>{await T(a,!1,!0)},getLogsData:T,changePage:async a=>{k.p=a,await T(p.value.find((a=>a.name===e.value)),!1)},changePageLimit:a=>{k.p=1,k.limit=a,T(p.value.find((a=>a.name===e.value)),!1)},beforeUpdateData:a=>{const t=p.value.find((a=>a.name===e.value));T(t,!0)},init:H,cutTab:L,desiredNpsDialog:s}}}),(function(){var i=this,s=i._self._c,l=i._self._setupProxy;return s("div",{},["ltd"===l.authType?s("div",{staticClass:"items-start flex h-full"},[s(u,{staticClass:"mr-2.4rem",style:"height:"+(l.mainHeight-174)+"px",attrs:{width:"36","menu-options":l.menuOptions,"logs-type":"audit"},on:{tabClick:l.handleTabClick}}),s("div",{staticClass:"flex-1",style:"width:"+(l.mainWidth-500)+"px"},[l.tableView?s(p,{scopedSlots:i._u([{key:"header-left",fn:function(){return[s(n,{on:{click:l.beforeUpdateData}},[i._v("刷新日志")]),s(c,{staticClass:"ml-16x flex items-center",attrs:{icon:"demand",iconClass:"text-1.6rem",content:"需求反馈"},on:{click:function(a){return l.desiredNpsDialog({name:"日志",type:22})}}})]},proxy:!0},{key:"header-right",fn:function(){return[s(m,{key:l.key,staticClass:"ml-12x",attrs:{placeholder:"请输入来源/端口/角色/事件"},on:{clear:l.beforeUpdateData,search:l.beforeUpdateData},model:{value:l.tableParams.search,callback:function(a){i.$set(l.tableParams,"search",a)},expression:"tableParams.search"}})]},proxy:!0},{key:"content",fn:function(){return[s(r,{directives:[{name:"loading",rawName:"v-loading",value:l.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中...",column:l.tableColumn,"max-height":l.mainHeight-216,data:l.tableData}},[s(e,{attrs:{description:"暂无数据"}})],1)]},proxy:!0},{key:"footer-right",fn:function(){return[s(t,{attrs:{limit:l.tableParams.limit,p:l.tableParams.p,num:l.tableParams.total},on:{click:l.changePage}})]},proxy:!0}],null,!1,1594243017)}):s("pre",{staticClass:"bt-logs-pre",style:"height:"+(l.mainHeight-132)+"px",domProps:{innerHTML:i._s(l.logsMsg)}})],1)],1):s(a,{staticClass:"px-[20%] my-[8rem]",attrs:{data:l.productData}})],1)}),[],!1,null,"51bba423",null,null).exports;export{x as default};
