!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function n(t,r,n){var o;return o=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(r,"string"),(r="symbol"==e(o)?o:String(o))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function o(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return r};var t,r={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},l="function"==typeof Symbol?Symbol:{},c=l.iterator||"@@iterator",s=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,a=Object.create(o.prototype),l=new $(n||[]);return i(a,"_invoke",{value:L(e,r,l)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=d;var h="suspendedStart",m="suspendedYield",v="executing",y="completed",g={};function b(){}function w(){}function _(){}var x={};p(x,c,(function(){return this}));var S=Object.getPrototypeOf,j=S&&S(S(q([])));j&&j!==n&&a.call(j,c)&&(x=j);var F=_.prototype=b.prototype=Object.create(x);function O(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function k(t,r){function n(o,i,l,c){var s=f(t[o],t,i);if("throw"!==s.type){var u=s.arg,p=u.value;return p&&"object"==e(p)&&a.call(p,"__await")?r.resolve(p.__await).then((function(e){n("next",e,l,c)}),(function(e){n("throw",e,l,c)})):r.resolve(p).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,c)}))}c(s.arg)}var o;i(this,"_invoke",{value:function(e,t){function a(){return new r((function(r,o){n(e,t,r,o)}))}return o=o?o.then(a,a):a()}})}function L(e,r,n){var o=h;return function(a,i){if(o===v)throw new Error("Generator is already running");if(o===y){if("throw"===a)throw i;return{value:t,done:!0}}for(n.method=a,n.arg=i;;){var l=n.delegate;if(l){var c=P(l,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:m,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=f(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var i=a.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function q(r){if(r||""===r){var n=r[c];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,i=function e(){for(;++o<r.length;)if(a.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(e(r)+" is not iterable")}return w.prototype=_,i(F,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:w,configurable:!0}),w.displayName=p(_,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,p(e,u,"GeneratorFunction")),e.prototype=Object.create(F),e},r.awrap=function(e){return{__await:e}},O(k.prototype),p(k.prototype,s,(function(){return this})),r.AsyncIterator=k,r.async=function(e,t,n,o,a){void 0===a&&(a=Promise);var i=new k(d(e,t,n,o),a);return r.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(F),p(F,u,"Generator"),p(F,c,(function(){return this})),p(F,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=q,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return l.type="throw",l.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:q(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},r}function a(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(s){return void r(s)}l.done?t(c):Promise.resolve(c).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function l(e){a(i,n,o,l,c,"next",e)}function c(e){a(i,n,o,l,c,"throw",e)}l(void 0)}))}}System.register(["./index-legacy85.js?v=1714377894636","./element-lib-legacy.js?v=1714377894636","./main-legacy.js?v=1714377894636","./form-item-legacy.js?v=1714377894636","./index-legacy46.js?v=1714377894636","./select-legacy.js?v=1714377894636","./form-legacy.js?v=1714377894636","./vue-lib-legacy.js?v=1714377894636","./site.store-legacy.js?v=1714377894636","./locales-lib-legacy.js?v=1714377894636","./public-lib-legacy.js?v=1714377894636","./__commonjsHelpers__-legacy.js?v=1714377894636","./modulepreload-polyfill-legacy.js?v=1714377894636","./preload-helper-legacy.js?v=1714377894636","./request-lib-legacy.js?v=1714377894636","./switch-legacy.js?v=1714377894636","./index.vue_vue_type_style_index_0_lang-legacy.js?v=1714377894636","./check-legacy.js?v=1714377894636"],(function(e,t){"use strict";var n,a,l,c,s,u,p,d,f,h,m,v,y,g,b,w,_,x,S,j;return{setters:[function(e){n=e._},function(e){a=e.w,l=e.x,c=e.q,s=e.s},function(e){u=e.aS,p=e.e,d=e.bI,f=e.n,h=e.r},null,function(e){m=e._},null,null,function(e){v=e.e,y=e.b,g=e.v,b=e.h,w=e.j},function(e){_=e.g,x=e.i,S=e.G,j=e.aH},null,null,null,null,null,null,null,null,null],execute:function(){var t=v({__name:"AddSitePopup",setup:function(e,t){var n=t.expose,a=_().getModulesList,l=w().proxy,c=y({site_path:"/www/wwwroot",project_cmd:"",install_dependence:!0,php_version:"",domains:"",sql:!1,project_ps:"",project_port:"",codeing:"utf8mb4",open_proxy:!1,project_proxy_path:"",datauser:"",datapassword:""}),s=y([]),f=g({domains:[{validator:function(e,t,r){t?r():r(new Error("请输入绑定域名"))},trigger:["blur","input"]}],path:[{valitor:function(e,t,r){t?r():r(new Error("请输入项目目录"))},trigger:["blur","input"]}]}),h=function(){var e=i(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x({sName:"php-8.2"});case 3:t=e.sent,r=t.data,p({name:"php-8.2",type:r.type,softData:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=i(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:t=e.sent,s.value=t.data.filter((function(e){return"纯静态"!==e.name})),c.value.php_version=s.value[0].version,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),v=function(e){var t,n=r(r({},e),{},{sql_user:e.datauser,sql_pwd:e.datapassword,sql_codeing:e.codeing,install_dependence:e.install_dependence?1:0,open_proxy:e.open_proxy?1:0,webname:{domain:"",domainlist:[],count:0}});return(null===(t=e.domains)||void 0===t?void 0:t.split("\n")).forEach((function(e,t){var r=e.replace(/\r\n/,"").split(":");0===t?n.webname.domain=r[0]:n.webname.domainlist.push(r[0])})),n.webname.count=n.webname.domainlist.length,n.webname=JSON.stringify(n.webname),delete n.domains,delete n.datauser,delete n.datapassword,delete n.codeing,n},F=function(){var e=i(o().mark((function e(t){var r,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v(c.value),e.prev=2,e.next=5,j(r);case 5:n=e.sent,l.$message.request(n),n.status&&(t(),a("phpAsync")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return n({onConfirm:F}),b(i(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:case"end":return e.stop()}}),e)})))),{__sfc:!0,getModulesList:a,vm:l,addSiteForm:c,versionOptions:s,rules:f,onPathChange:function(){u({type:"dir",path:c.value.site_path,change:function(e){c.value.site_path=e}})},installOtherPhp:h,getPHPVersion:m,handleInputName:function(e){var t;c.value.domains=e,c.value.datauser=null===(t=e.split("\n")[0])||void 0===t?void 0:t.replace(/\./g,"_"),c.value.datapassword=d(12)},handleData:v,onConfirm:F}}});e("default",f(t,(function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t("div",{staticClass:"p-20x"},[t(a,{attrs:{model:r.addSiteForm,rules:r.rules,"label-width":"12rem"}},[t(l,{attrs:{label:"绑定域名"}},[t(h,{ref:"popover",attrs:{placement:"top-start","popper-class":"green-tips-popover",title:"",width:"400",trigger:"focus"}},[t("div",{staticClass:"!p-12x bg-[#20a53a] text-white"},[e._v(" 如需填写多个域名，请换行填写，每行一个域名，默认为80端口"),t("br"),e._v(" IP地址格式：192.168.1.199"),t("br"),e._v(" 泛解析添加方法 *.domain.com"),t("br"),e._v(" 如另加端口格式为 www.domain.com:88 ")]),t(n,{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],attrs:{slot:"reference",type:"textarea",width:"52rem",rows:8,resize:"none",placeholder:"如需填写多个域名，请换行填写，每行一个域名，默认为80端口\nIP地址格式：192.168.1.199\n泛解析添加方法 *.domain.com\n如另加端口格式为 www.domain.com:88"},on:{input:r.handleInputName},slot:"reference",model:{value:r.addSiteForm.domains,callback:function(t){e.$set(r.addSiteForm,"domains",t)},expression:"addSiteForm.domains"}})],1)],1),t(l,{attrs:{label:"项目目录",prop:"path"}},[t(n,{attrs:{placeholder:"请输入项目目录",iconType:"folder",width:"52rem"},on:{folder:r.onPathChange},model:{value:r.addSiteForm.site_path,callback:function(t){e.$set(r.addSiteForm,"site_path",t)},expression:"addSiteForm.site_path"}})],1),t(l,{attrs:{label:"PHP版本"}},[t(c,{model:{value:r.addSiteForm.php_version,callback:function(t){e.$set(r.addSiteForm,"php_version",t)},expression:"addSiteForm.php_version"}},e._l(r.versionOptions,(function(e){return t(s,{key:e.value,attrs:{label:e.name,value:e.version}})})),1)],1),t(l,{attrs:{label:"数据库"}},[t("div",{staticClass:"flex items-center"},[t(c,{model:{value:r.addSiteForm.sql,callback:function(t){e.$set(r.addSiteForm,"sql",t)},expression:"addSiteForm.sql"}},[t(s,{attrs:{label:"不创建",value:!1}}),t(s,{attrs:{label:"MySQL",value:"MYSQL"}})],1),r.addSiteForm.sql?t(c,{staticClass:"ml-8x",model:{value:r.addSiteForm.codeing,callback:function(t){e.$set(r.addSiteForm,"codeing",t)},expression:"addSiteForm.codeing"}},[t(s,{attrs:{label:"utf8mb4",value:"utf8mb4"}}),t(s,{attrs:{label:"utf8",value:"utf8"}}),t(s,{attrs:{label:"gbk",value:"gbk"}}),t(s,{attrs:{label:"big5",value:"big5"}})],1):e._e()],1)]),r.addSiteForm.sql?t(l,{attrs:{label:"数据库账号"}},[t("div",{staticClass:"flex items-center"},[t(n,{attrs:{placeholder:"创建数据库账号"},model:{value:r.addSiteForm.datauser,callback:function(t){e.$set(r.addSiteForm,"datauser",t)},expression:"addSiteForm.datauser"}}),t(l,{attrs:{label:"密码"}},[t(n,{attrs:{placeholder:"数据库密码"},model:{value:r.addSiteForm.datapassword,callback:function(t){e.$set(r.addSiteForm,"datapassword",t)},expression:"addSiteForm.datapassword"}})],1)],1),t("span",{staticClass:"text-[#999] text-[1.2rem]"},[e._v(" 创建站点的同时，为站点创建一个对应的数据库帐户，方便不同站点使用不同数据库。 ")])]):e._e(),t(l,{attrs:{label:"常驻服务启动命令"}},[t(n,{attrs:{type:"textarea",width:"52rem",rows:4,resize:"none",placeholder:"请输入项目的启动命令"},model:{value:r.addSiteForm.project_cmd,callback:function(t){e.$set(r.addSiteForm,"project_cmd",t)},expression:"addSiteForm.project_cmd"}})],1),t(l,{attrs:{label:"自动安装项目依赖"}},[t(m,{model:{value:r.addSiteForm.install_dependence,callback:function(t){e.$set(r.addSiteForm,"install_dependence",t)},expression:"addSiteForm.install_dependence"}})],1),t(l,{attrs:{label:"反向代理"}},[t(m,{model:{value:r.addSiteForm.open_proxy,callback:function(t){e.$set(r.addSiteForm,"open_proxy",t)},expression:"addSiteForm.open_proxy"}})],1),r.addSiteForm.open_proxy?t(l,{attrs:{label:"项目端口"}},[t(n,{attrs:{placeholder:"请输入项目端口",type:"number",width:"52rem"},model:{value:r.addSiteForm.project_port,callback:function(t){e.$set(r.addSiteForm,"project_port",t)},expression:"addSiteForm.project_port"}})],1):e._e(),r.addSiteForm.open_proxy?t(l,{attrs:{label:"代理路由"}},[t(n,{attrs:{placeholder:"请输入代理路由",width:"52rem"},model:{value:r.addSiteForm.project_proxy_path,callback:function(t){e.$set(r.addSiteForm,"project_proxy_path",t)},expression:"addSiteForm.project_proxy_path"}})],1):e._e(),t(l,{attrs:{label:"备注"}},[t(n,{attrs:{placeholder:"请输入备注,可为空",width:"52rem"},model:{value:r.addSiteForm.project_ps,callback:function(t){e.$set(r.addSiteForm,"project_ps",t)},expression:"addSiteForm.project_ps"}})],1)],1)],1)}),[],!1,null,"75739b9d",null,null).exports)}}}))}();
