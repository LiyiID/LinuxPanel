import{_ as e}from"./index53.js?v=1714377894636";import{_ as t}from"./index39.js?v=1714377894636";import{n as a,q as s}from"./main.js?v=1714377894636";import{_ as i}from"./index59.js?v=1714377894636";import{e as l,A as r,b as o,v as n,h as p,j as m}from"./vue-lib.js?v=1714377894636";import{u as c}from"./index28.js?v=1714377894636";import{e as u}from"./database.table.js?v=1714377894636";import{e as d,M as f,f as b}from"./database.popup.js?v=1714377894636";import{y as j,D as g}from"./mysql.store.js?v=1714377894636";import{o as h}from"./index61.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./index77.js?v=1714377894636";import"./index42.js?v=1714377894636";import"./check.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./index.vue_vue_type_style_index_0_lang.js?v=1714377894636";const y=a(l({__name:"index",setup(e){const{proxy:t}=m(),a=c(),{sqliteParam:s}=r(a),i=o([]),l=n({isRecurrence:!0,describe:{title:"批量删除数据库文件",th:"数据库文件",message:"删除选中的数据库文件后，该数据库文件将不在列表中显示，是否继续操作？",propsValue:"name"}}),y=o([{label:"备份数据库",value:"backup",diyBatch:()=>{h({title:"批量备份选中的数据库文件，是否继续操作？",dataList:i.value,titleType:"批量备份数据库",requestFun:async e=>await _(e),isRecurrence:!0,tableColumn:[{prop:"name",label:"数据库名"},{prop:"status",label:"状态"}],callback:()=>{a.getSqliteList()}})}},{label:"删除数据库",value:"delete",diyBatch:()=>{h({title:"批量删除选中的数据库文件后，该数据库文件将不在列表中显示，是否继续操作？",dataList:i.value,titleType:"批量删除数据库",requestFun:async e=>await x(e,0,!0),isRecurrence:!0,tableColumn:[{prop:"name",label:"数据库名"},{prop:"status",label:"状态"}],callback:()=>{a.getSqliteList()}})}}]),_=async e=>{try{const{data:t}=await j({data:JSON.stringify({path:e.path})});return t}catch(t){}},q=e=>{f(e)},x=async(e,s,i=!1)=>{try{if(i){const{data:t}=await g({data:JSON.stringify({path:e.path})},"sqlite");return t}{await t.$confirm({title:"删除数据库文件【"+(null==e?void 0:e.name)+"】",message:"删除选中的数据库文件后，该数据库文件将不在列表中显示，是否继续操作？",icon:"warning"});let s=t.$load("正在删除数据库文件...");const{data:i}=await g({data:JSON.stringify({path:e.path})},"sqlite");s.close(),t.$message.request(i),i.status&&a.getSqliteList()}}catch(l){}},v=e=>{b(e)},S=u({sqliteBackup:v,manageDabase:q,deleteDataEvent:x});return p((()=>{a.getSqliteList()})),{__sfc:!0,vm:t,store:a,sqliteParam:s,checkedList:i,batchConfig:l,batchGroup:y,backupSqlite:_,manageDabase:q,handleSelectionChange:e=>{i.value=e},deleteDataEvent:x,sqliteBackup:v,tableColumn:S,addSqliteDialog:d}}}),(function(){var a=this,l=a._self._c,r=a._self._setupProxy;return l("div",[l(i,{scopedSlots:a._u([{key:"header-left",fn:function(){return[l(s,{on:{click:r.addSqliteDialog}},[a._v("添加数据库文件")])]},proxy:!0},{key:"content",fn:function(){return[l(t,{directives:[{name:"loading",rawName:"v-loading",value:r.sqliteParam.loading,expression:"sqliteParam.loading"}],attrs:{column:r.tableColumn,data:r.sqliteParam.dbList,"element-loading-text":"正在加载数据库列表..."},on:{"selection-change":r.handleSelectionChange}})]},proxy:!0},{key:"footer-left",fn:function(){return[l(e,{attrs:{data:r.batchGroup,config:r.batchConfig,"batch-fn":()=>{}}})]},proxy:!0}])})],1)}),[],!1,null,null,null,null).exports;export{y as default};
