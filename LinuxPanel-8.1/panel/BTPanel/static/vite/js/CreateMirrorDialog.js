import{_ as e}from"./index85.js?v=1714377894636";import{w as t,x as a}from"./element-lib.js?v=1714377894636";import{a1 as s,aS as r,n as o}from"./main.js?v=1714377894636";import{_ as m}from"./index120.js?v=1714377894636";import{_ as i}from"./index41.js?v=1714377894636";import{e as l,A as p,v as c,b as n,f as d,j as f}from"./vue-lib.js?v=1714377894636";import{u}from"./docker.store.js?v=1714377894636";import{$ as h}from"./docker.api.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./check.js?v=1714377894636";const g=o(l({__name:"CreateMirrorDialog",props:{compData:{default:()=>({})}},setup(e,{expose:t}){const a=e,{proxy:o}=f(),{fileSelectionPath:m}=p(s()),{getMList:i}=u(),l=c({type:"path",path:"",data:"",tag:""}),g=n(!1),y=n(),v=n([{key:"path",title:"路径"},{key:"data",title:"内容"}]);d((()=>m.value),((e,t)=>{l.path=e}));const F=async()=>{try{if("data"==l.type){if(""==l.data)return void o.$message.error("请输入内容");const e=await h({data:JSON.stringify({data:l.data,tag:l.tag})});o.$emit("close"),e.status?(i(),o.$message.success(e.msg)):o.$message.error(e.msg)}else{if(""==l.path)return void o.$message.error("请选择路径");const e=await h({data:JSON.stringify({path:l.path,tag:l.tag})});o.$emit("close"),e.status?(i(),o.$message.success(e.msg)):o.$message.error(e.msg)}}catch(e){}};return t({onConfirm:F}),{__sfc:!0,vm:o,props:a,fileSelectionPath:m,getMList:i,cmdForm:l,more:g,cmdFormRef:y,cmdRules:{},options:v,changeType:e=>{l.type=e},openFile:()=>{r({type:"file",change:e=>{l.path=e}})},clearSpace:e=>{l.path=l.path.replace(/\s+/g,"")},onConfirm:F}}}),(function(){var s=this,r=s._self._c,o=s._self._setupProxy;return r("div",{staticClass:"flex flex-col p-16x lib-box"},[r(t,{ref:"cmdFormRef",staticClass:"relative w-full",attrs:{size:"small",model:o.cmdForm,rules:o.cmdRules,"label-position":"right"},nativeOn:{submit:function(e){e.preventDefault()}}},[r(a,{staticStyle:{"margin-bottom":"1.5rem"},attrs:{prop:"path",label:"Dockerfile"}},[r("div",{staticClass:"flex items-center"},[r(i,{staticClass:"w-[10rem]",attrs:{options:o.options,change:o.changeType},model:{value:o.cmdForm.type,callback:function(e){s.$set(o.cmdForm,"type",e)},expression:"cmdForm.type"}}),r(e,{directives:[{name:"show",rawName:"v-show",value:"path"==o.cmdForm.type,expression:"cmdForm.type == 'path'"}],staticClass:"w-[24rem] ml-[1rem]",attrs:{"icon-type":"folder",placeholder:"请输入或选择dockerfile文件"},on:{folder:o.openFile,"&change":function(e){return o.clearSpace("path")}},model:{value:o.cmdForm.path,callback:function(e){s.$set(o.cmdForm,"path",e)},expression:"cmdForm.path"}})],1)]),r("div",{directives:[{name:"show",rawName:"v-show",value:"data"==o.cmdForm.type,expression:"cmdForm.type == 'data'"}],staticClass:"w-[35rem] h-[29.3rem] ml-[10rem] mb-[1.5rem]"},[r(m,{model:{value:o.cmdForm.data,callback:function(e){s.$set(o.cmdForm,"data",e)},expression:"cmdForm.data"}})],1),r(a,{attrs:{prop:"path",label:"标签"}},[r(e,{attrs:{type:"textarea",width:"35rem",placeholder:"容器标签，一行一个，例：key=value"},model:{value:o.cmdForm.tag,callback:function(e){s.$set(o.cmdForm,"tag",e)},expression:"cmdForm.tag"}})],1)],1)],1)}),[],!1,null,"3cfbfee8",null,null).exports;export{g as default};
