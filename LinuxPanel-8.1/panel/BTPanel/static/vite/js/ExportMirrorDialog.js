import{_ as e}from"./index85.js?v=1714377894636";import{w as t,x as a}from"./element-lib.js?v=1714377894636";import{a1 as r,aS as s,n as o}from"./main.js?v=1714377894636";import{e as l,A as m,v as i,b as c,f as p,h as n,j as f}from"./vue-lib.js?v=1714377894636";import{Z as d}from"./docker.api.js?v=1714377894636";import{u}from"./docker.store.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./check.js?v=1714377894636";const h=o(l({__name:"ExportMirrorDialog",props:{compData:{default:()=>({})}},setup(e,{expose:t}){const a=e,{proxy:o}=f(),{fileSelectionPath:l}=m(r()),{getMList:h}=u(),j=i({path:"",name:"",id:""}),x=c(!1),b=c(),v={name:[{validator:(e,t,a)=>{""===t?a(new Error("请输入导出的文件名")):a()},trigger:["blur"]}]};p((()=>l.value),((e,t)=>{j.path=e}));n((()=>{j.id=a.compData.row.id}));const g=async()=>{try{if(""===j.path)return void o.$message.error("请选择镜像路径");await o.$refs.cmdFormRef.validate((async e=>{if(e){const e=await d({data:JSON.stringify(j)});e.status?(o.$emit("close"),h(),o.$message.success(e.msg)):o.$message.error(e.msg)}}))}catch(e){}};return t({onConfirm:g}),{__sfc:!0,vm:o,props:a,fileSelectionPath:l,getMList:h,cmdForm:j,more:x,cmdFormRef:b,cmdRules:v,openFile:()=>{s({type:"dir",change:e=>{j.path=e}})},clearSpace:e=>{j.path=j.path.replace(/\s+/g,"")},onConfirm:g}}}),(function(){var r=this,s=r._self._c,o=r._self._setupProxy;return s("div",{staticClass:"flex flex-col p-16x lib-box"},[s(t,{ref:"cmdFormRef",staticClass:"relative w-full",attrs:{size:"small",model:o.cmdForm,rules:o.cmdRules,"label-position":"right"},nativeOn:{submit:function(e){e.preventDefault()}}},[s(a,{attrs:{prop:"path",label:"路径"}},[s(e,{staticClass:"w-[24rem]",attrs:{"icon-type":"folder",placeholder:"请输入镜像路径"},on:{folder:o.openFile,"&change":function(e){return o.clearSpace("path")}},model:{value:o.cmdForm.path,callback:function(e){r.$set(o.cmdForm,"path",e)},expression:"cmdForm.path"}})],1),s("div",{staticClass:"flex mt-[1.5rem]"},[s(a,{attrs:{prop:"name",label:"文件名"}},[s(e,{staticClass:"w-[24rem]",attrs:{placeholder:"请输入导出的文件名"},model:{value:o.cmdForm.name,callback:function(e){r.$set(o.cmdForm,"name",e)},expression:"cmdForm.name"}})],1),s("span",{staticClass:"ml-[1rem] text-[#666] flex items-center"},[r._v(".tar")])],1)],1)],1)}),[],!1,null,"49f97a6c",null,null).exports;export{h as default};
