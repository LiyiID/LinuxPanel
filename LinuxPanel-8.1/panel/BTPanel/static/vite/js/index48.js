import{g as t,a2 as s,d as e,ad as n,n as a,r as i,a as o,q as r,F as l}from"./main.js?v=1714377894636";import{_ as p}from"./index45.js?v=1714377894636";import{e as u,b as c,c as m,v as d,f,h as v}from"./vue-lib.js?v=1714377894636";import{a as g}from"./confirm.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./config.js?v=1714377894636";var h=(t=>(t.stop="停止",t.start="启动",t.restart="重启",t.reload="重载",t))(h||{});const w=a(u({__name:"index",props:{pluginName:{default:""},isSetup:{type:Boolean,default:!1}},setup(a){const i=a,{refs:{webServerType:o}}=t(),r=c(!1),l=c(0),p=m((()=>l.value>1280)),u=d({title:"",name:"",status:!0,version:"",admin:!1,s_version:""});f((()=>i.isSetup),(t=>{t&&_()}));const w=m((()=>h[u.status?"stop":"start"])),_=async()=>{try{r.value=!0;const{data:{status:t,version:e,title:n,s_version:a,name:o,admin:l}}=await s({sName:i.pluginName});r.value=!1,u.title=n,u.name=o,u.status=t,u.version=e,u.s_version=a,u.admin=l}catch(t){}};return v((()=>{_(),l.value=document.body.clientWidth,window.onresize=()=>{l.value=document.body.clientWidth}})),{__sfc:!0,props:i,webServerType:o,btnLoading:r,screenWidth:l,isWidthShow:p,pluginInfo:u,softOperationType:h,softStatus:w,getSoftStatus:_,openPluginView:()=>{e({pluginInfo:u})},changeSoftStatus:async t=>{const s=h[t];g({confirm:{title:s+u.s_version,icon:"warning",message:"你确定要"+s+u.s_version+"服务，是否继续？"},loading:r,request:async()=>await n({name:u.s_version,type:t}),complete:_})}}}}),(function(){var t=this,s=t._self._c,e=t._self._setupProxy;return s(i,{attrs:{placement:"top-start",width:"200","popper-class":"white-tips-popover",trigger:"hover"}},[s("div",{staticClass:"px-12x py-8x flex items-center justify-between"},[s(o,{domProps:{textContent:t._s(e.softStatus)},on:{click:function(t){return e.changeSoftStatus(e.pluginInfo.status?"stop":"start")}}}),s(p),s(o,{domProps:{textContent:t._s("重启")},on:{click:function(t){return e.changeSoftStatus("restart")}}}),s(p),s(o,{domProps:{textContent:t._s("重载")},on:{click:function(t){return e.changeSoftStatus("reload")}}}),s(p),s(o,{domProps:{textContent:t._s("告警设置")},on:{click:e.openPluginView}})],1),s(r,{directives:[{name:"loading",rawName:"v-loading",value:e.btnLoading,expression:"btnLoading"}],staticClass:"plugin-status-btn",attrs:{slot:"reference",type:e.pluginInfo.status?"default":"danger",plain:""},on:{click:e.openPluginView},slot:"reference"},[s("div",{staticClass:"h-full inline-block flex items-center",class:e.pluginInfo.status?"hover:text-[#20a53a]":"hover:text-[#ef0808]"},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.isWidthShow,expression:"isWidthShow"}],staticClass:"h-[1.2rem] w-[4rem] flex overflow-hidden justify-center items-center status-icon"},[s("img",{staticClass:"inline-block",attrs:{src:"/static/vite/icons/soft/ico-"+t.pluginName+".svg"}})]),s("span",[t._v(" "+t._s(e.pluginInfo.title)+" ")]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.isWidthShow,expression:"isWidthShow"}]},[t._v(" "+t._s(e.pluginInfo.version))]),s(l,{staticClass:"ml-4x",attrs:{name:"icon-"+(e.pluginInfo.status?"pause":"start"),size:"1.2"}})],1)])],1)}),[],!1,null,"90d814f6",null,null).exports;export{w as default};
