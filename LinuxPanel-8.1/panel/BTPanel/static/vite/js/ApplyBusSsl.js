import{n as e,_ as t,q as s}from"./main.js?v=1714377894636";import{_ as i}from"./index129.js?v=1714377894636";import{a9 as l}from"./element-lib.js?v=1714377894636";import{e as a,b as c,c as r,h as n,j as o}from"./vue-lib.js?v=1714377894636";import{g as u,bp as v,bq as p}from"./site.store.js?v=1714377894636";import{_ as d}from"./site.popup.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./check.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./element-ui.common.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./vdom.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";const m=e(a({__name:"ApplyBusSsl",emits:["close"],setup(e,{emit:t}){const{proxy:s}=o(),{refs:{sslApplicationInfo:i}}=u(),l=c(!1),a={single:["仅支持绑定一个二级域名或者子域名，例如 bt.com、cloud.bt.com、dnspod.cloud.bt.com的其中之一 。","如需要绑定同级的所有子域名，例如*.bt.com，请购买泛域名证书。"],wildcard:["带通配符的域名，例如：*.bt.com、*.cloud.bt.com均为泛域名，包含同一级的全部子域名。","注意泛域名不支持跨级，例如*.bt.com 不包含 *.cloud.bt.com的支持"]},m={0:[],1:["宝塔提供9:00 - 24:00的人工部署证书部署服务，帮助客户排查部署证书部署生效问题，快速上线"],2:["宝塔提供9:00 - 24:00的人工部署国密算法证书部署服务，帮助客户排查部署证书部署生效问题，快速上线"]},f=c({num:1,certClassAcitve:"OV",certClass:[{name:"OV证书",title:"推荐企业使用",value:"OV",tips:[],data:[]},{name:"DV证书",title:"推荐个人，测试使用",value:"DV",subscript:"热销",tips:[]},{name:"EV证书",title:"推荐大型政企使用，高安全性",value:"EV",tips:[]}],certBrandAcitve:"",certBrand:[{name:"Positive",title:"Positive",value:"Positive",tips:[]},{name:"锐安信",title:"锐安信",value:"锐安信",tips:[]},{name:"CFCA",title:"CFCA",value:"CFCA",tips:[]},{name:"Digicert",title:"Digicert",value:"Digicert",tips:[]},{name:"GeoTrust",title:"GeoTrust",value:"GeoTrust",tips:[]},{name:"Sectigo",title:"Sectigo",value:"Sectigo",tips:[]}],certTypeAcitve:"single",certType:[{name:"single",title:"单域名",value:"single",tips:[]},{name:"multiple",title:"多域名",value:"multiple",tips:[]},{name:"wildcard",title:"泛域名",value:"wildcard",tips:[]}],certLifeAcitve:1,certLife:[{name:"1年",title:"1年",value:1,tips:[]},{name:"2年",title:"2年",value:2,tips:[]},{name:"3年",title:"3年",value:3,tips:[]},{name:"4年",title:"4年",value:4,tips:[]},{name:"5年",title:"5年",value:5,tips:[]}],certDeployAcitve:1,certDeploy:[{name:"不需要",title:"不需要",value:0,tips:[]},{name:"部署服务",title:"部署服务",value:1,tips:[]},{name:"部署服务（国密）",title:"部署服务（国密）",value:2,tips:[]}]}),C=c({}),y=c({productName:"",price:0,totalPrice:0,originalPrice:0,deploymentPrice:0,pid:0,years:1,yearsPrice:0,number:1,extraNumber:0,extraPrice:0,install:1}),b=c({oid:0,wxcode:"",alicode:"",qq:"",orderInfo:{}}),_={defalutList:[],domianNumList:[],classList:[],brandList:[],typeList:[]},x=r((()=>{const e=f.value.certClass.filter((e=>e.value===f.value.certClassAcitve));return e&&e.length>0?e[0].tips:[]})),g=r((()=>{const e=f.value.certBrand.filter((e=>e.value===f.value.certBrandAcitve));return e&&e.length>0?e[0].tips:[]})),S=r((()=>{const e=f.value.certType.filter((e=>e.value===f.value.certTypeAcitve));return e&&e.length>0?e[0].tips:[]})),T=r((()=>{const e=f.value.certLife.filter((e=>e.value===parseInt(f.value.certLifeAcitve)));return e&&e.length>0?e[0].tips:[]})),A=r((()=>{const e=f.value.certDeploy.filter((e=>e.value===parseInt(f.value.certDeployAcitve)));return e&&e.length>0?e[0].tips:[]})),I=async()=>{try{l.value=!0;const{data:{info:e,data:t,administrator:s}}=await v();C.value=e.recommend,w(),h(e),B(t),D(),i.value={...s}}catch(e){}finally{l.value=!1}},h=({type:e,brand:t,times:s})=>{f.value.certClass=q(f.value.certClass,e,((e,t)=>t["".concat(e.value).toLowerCase()])),a.multiple=a.single,f.value.certType=q(f.value.certType,a),f.value.certDeploy=q(f.value.certDeploy,m),f.value.certBrand=q(f.value.certBrand,t,((e,t)=>t["Positive"!==e.value?"".concat(e.value).toLowerCase():"Positive"])),f.value.certLife=q(f.value.certLife,s,((e,t)=>t[e.value+"_year"]))},B=e=>{const t=[];e.forEach((e=>{var s;const i=null==(s=e.type.match(/(OV|DV|EV)/))?void 0:s[0],l=-1!==e.code.indexOf("wildcard"),a=e.add_price>0;let c=l?"wildcard":a?"multiple":"single";"Digicert"===e.brand&&(c=l?"wildcard":"single"),t.push({...e,type:i,certType:c,isMulti:a})})),_.defalutList=t},L=(e={})=>{let{num:t,classify:s,brand:i,type:l,life:a,deploy:c}=e;const r=f.value;return t||(t=r.num),s||(s=r.certClassAcitve),i||(i=r.certBrandAcitve),l||(l=r.certTypeAcitve),a||(a=r.certLifeAcitve),c||(c=r.certDeployAcitve),{num:t,classify:s,brand:i,type:l,life:a,deploy:c}},w=()=>{f.value.certClassAcitve="OV",f.value.certBrandAcitve=j(),f.value.certTypeAcitve="single",f.value.certLifeAcitve=1,f.value.certDeployAcitve=1},D=()=>{P(_.defalutList),N(),H()},j=()=>{var e;return C.value[null==(e=f.value.certClassAcitve)?void 0:e.toLowerCase()]},N=()=>{const{domianNumList:e,classList:t,brandList:s,typeList:i}=_;f.value.certClass.forEach((t=>{let s=e.some((e=>e.type===t.value));"EV"==t.value&&"wildcard"===f.value.certTypeAcitve&&(s=!1),t.disable=!s})),f.value.certBrand.forEach((e=>{const s=!t.some((t=>t.brand===e.value));e.hidden=s,e.subscript=e.value===j()?"推荐":"",e.value===f.value.certBrandAcitve&&e.hidden&&(f.value.certBrandAcitve=j())})),f.value.certType.forEach((e=>{let t=!s.some((t=>t.certType===e.value));"single"===e.value&&f.value.num>1&&(t=!0),"multiple"===e.value&&1===f.value.num&&(t=!0),"multiple"===e.value&&f.value.num>1&&(t=!1),e.hidden=t}))},P=e=>{let{num:t}=L();const s=e.filter((e=>!(t>1)||e.isMulti));s.length>0&&(_.domianNumList=s,O(s))},O=e=>{const{classify:t}=L(),s=e.filter((e=>e.type===t));s.length>0&&(_.classList=s,k(s))},k=e=>{const{brand:t}=L(),s=e.filter((e=>e.brand===t));s.length>0&&(_.brandList=s,V(s))},V=e=>{const{type:t}=L();1===e.length&&(f.value.certTypeAcitve=e[0].certType);const s=e.filter((e=>{const s="multiple"===f.value.certTypeAcitve&&"wildcard"!==e.certType&&e.isMulti,i="wildcard"===f.value.certTypeAcitve&&"wildcard"===e.certType&&e.isMulti;return e.certType===t||s||i}));s.length>0&&(_.typeList=s)},H=()=>{const e=_.typeList[0]||null;if(e){const{num:t,life:s,deploy:i}=L(),{price:l,other_price:a,add_price:c,pid:r,num:n,install_price:o,install_price_v2:u}=e,v=t-n<0?0:t-n,p=[0,o,u][i],d=c*v,m=(d+l)*s+p,f=a+d+p;y.value={productName:e.title,price:l,totalPrice:m,originalPrice:f,deploymentPrice:p,pid:r,years:s,yearsPrice:l*s,number:t,extraNumber:v,extraPrice:d,install:Number(!!i)}}},q=(e,t,s)=>e.map(((e,i)=>{const l=s?s(e,t):t[e.value];return{...e,tips:l}}));return n((()=>{I()})),{__sfc:!0,vm:s,sslApplicationInfo:i,emit:t,loading:l,certTypeConfig:a,certDeployConfig:m,busCertBuyInfo:f,certRecomBrand:C,certSelectSslInfo:y,payOrderInfo:b,certBusSslList:_,certClassTips:x,certBrandTips:g,certTypeTips:S,certLifeTips:T,certDeployTips:A,getBusSslList:I,createCretTipsStructure:h,createCretMateSslList:B,getBusCertConifg:L,initCertConfig:w,cretSslHandle:D,getRecomBrand:j,cretSslConfigHandle:N,cretSslDataHandle:P,certClassHandle:O,certBrandHandle:k,certTypeHandle:V,cretDomianNumHandle:(e=f.value.num)=>{const t=Number(f.value.num+e)||1;if(t&&(t<1||t>99))return f.value.num=t<1?1:99,s.$message.error("域名数量范围为1-99");f.value.num=t,"wildcard"!==f.value.certTypeAcitve&&(f.value.certTypeAcitve=f.value.num>1?"multiple":"single"),D()},cutCertOption:(e,t,s)=>{s||(s=f.value[t].filter((t=>t.value===e))),s.disable||("".concat(t,"Acitve")in f.value&&(f.value["".concat(t,"Acitve")]=e),D())},calculateCretSslPrice:H,paymentSslOrder:async()=>{const e=s.$load("正在创建商业证书订单，请稍后...");try{const{pid:e,install:t,years:i,extraNumber:l}=y.value,{data:{oid:a,wxcode:c,alicode:r,qq:n,order_info:o}}=await p({pdata:JSON.stringify({pid:e,install:t,years:i,num:l})});b.value={oid:a,wxcode:c,alicode:r,qq:n,orderInfo:o},d({...b.value,productInfo:y.value}),s.$emit("close")}catch(t){}finally{e.close()}},mergeListTips:q}}}),(function(){var e=this,a=e._self._c,c=e._self._setupProxy;return a("div",{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:c.loading,expression:"loading"},{name:"bt-loading",rawName:"v-bt-loading:title",value:"正在获取商业证书信息，请稍后...",expression:"'正在获取商业证书信息，请稍后...'",arg:"title"}]},[a("div",{staticClass:"px-[3rem] py-[2rem] h-[70rem]"},[a(l,{attrs:{type:"error",closable:!1},scopedSlots:e._u([{key:"title",fn:function(){return[a("span",{staticClass:"text-[1.2rem]"},[a("i",{attrs:{calss:"el-icon-warning-outline text-[1.2rem]"}}),a("span",[e._v(" 禁止含有诈骗、赌博、色情、木马、病毒等违法违规业务信息的站点申请SSL证书，如有违反，撤销申请，停用账号。 ")])])]},proxy:!0}])}),a("div",{staticClass:"ssl-bus-pay-form"},[a("div",{staticClass:"ssl-line"},[a("div",{staticClass:"ssl-label"},[e._v("域名数量")]),a("div",{staticClass:"ssl-content"},[a("div",{staticClass:"ssl-box mb-4x"},[a("div",{staticClass:"ssl-number-select"},[a("div",{staticClass:"del-number",class:{"is-disable":1===c.busCertBuyInfo.num},on:{click:function(e){return c.cretDomianNumHandle(-1)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:c.busCertBuyInfo.num,expression:"busCertBuyInfo.num"}],staticClass:"input-number",attrs:{type:"number",min:"1",max:"99"},domProps:{value:c.busCertBuyInfo.num},on:{input:[function(t){t.target.composing||e.$set(c.busCertBuyInfo,"num",t.target.value)},function(e){return c.cretDomianNumHandle()}]}}),a("div",{staticClass:"add-number",class:{"is-disable":99===c.busCertBuyInfo.num},on:{click:function(e){return c.cretDomianNumHandle(1)}}})]),a("div",{staticClass:"ssl-service"},[a(i,{attrs:{placement:"right"}},[a("div",{staticClass:"flex items-center"},[a(t,{staticClass:"mx-4x w-1.6rem h-1.6rem",attrs:{src:"../icons/service-icon.svg"}}),a("span",{staticClass:"ml5"},[e._v("教我选择？")])],1)])],1),a("div",{staticClass:"ssl-tips"},[e._v("默认包含3个域名，超出数量每个域名{{}}元/个/年")])]),a("div",{staticClass:"ssl-tips"},[e._v("请选择当前证书包含的域名数量")])])]),a("div",{staticClass:"ssl-line"},[a("div",{staticClass:"ssl-label"},[e._v("证书分类")]),a("div",{staticClass:"ssl-content"},[a("div",{staticClass:"ssl-option-list w-full"},e._l(c.busCertBuyInfo.certClass,(function(t){return a("div",{key:t.value,staticClass:"ssl-option-item flex-1",class:{"is-active":t.value===c.busCertBuyInfo.certClassAcitve,"is-disabled":t.disable,"!hidden":t.hidden},on:{click:function(e){return c.cutCertOption(t.value,"certClass",t)}}},[a("div",{staticClass:"ssl-type-title"},[e._v(e._s(t.name))]),a("div",{staticClass:"ssl-type-tips"},[e._v(e._s(t.title))]),t.subscript?a("em",{staticClass:"ssl-subscript-tips"},[e._v(e._s(t.subscript))]):e._e()])})),0),a("div",{staticClass:"ssl-tips-list mb-4x"},e._l(c.certClassTips,(function(t){return a("p",{staticClass:"mt-4x"},[e._v(e._s(t))])})),0)])]),a("div",{staticClass:"ssl-line"},[a("div",{staticClass:"ssl-label"},[e._v("证书品牌")]),a("div",{staticClass:"ssl-content"},[a("div",{staticClass:"ssl-option-list"},e._l(c.busCertBuyInfo.certBrand,(function(t){return a("div",{key:t.value,staticClass:"ssl-option-item min-w-[9rem]",class:{"is-active":t.value===c.busCertBuyInfo.certBrandAcitve,"is-disabled":t.disable,"!hidden":t.hidden},on:{click:function(e){return c.cutCertOption(t.value,"certBrand",t)}}},[a("div",{staticClass:"ssl-type-title !font-normal border-none"},[e._v(e._s(t.title))]),t.subscript?a("em",{staticClass:"ssl-subscript-tips"},[e._v(e._s(t.subscript))]):e._e()])})),0),a("div",{staticClass:"ssl-tips-list mb-4x"},e._l(c.certBrandTips,(function(t){return a("p",{staticClass:"mt-4x"},[e._v(e._s(t))])})),0)])]),a("div",{staticClass:"ssl-line"},[a("div",{staticClass:"ssl-label"},[e._v("证书类型")]),a("div",{staticClass:"ssl-content"},[a("div",{staticClass:"ssl-option-list"},e._l(c.busCertBuyInfo.certType,(function(t){return a("div",{key:t.value,staticClass:"ssl-option-item min-w-[9rem]",class:{"is-active":t.value===c.busCertBuyInfo.certTypeAcitve,"is-disabled":t.disable,"!hidden":t.hidden},on:{click:function(e){return c.cutCertOption(t.value,"certType",t)}}},[a("div",{staticClass:"ssl-type-title !font-normal border-none"},[e._v(e._s(t.title))]),t.subscript?a("em",{staticClass:"ssl-subscript-tips"},[e._v(e._s(t.subscript))]):e._e()])})),0),a("div",{staticClass:"ssl-tips-list mb-4x"},e._l(c.certTypeTips,(function(t){return a("p",{staticClass:"mt-4x"},[e._v(e._s(t))])})),0)])]),a("div",{staticClass:"ssl-line"},[a("div",{staticClass:"ssl-label"},[e._v("购买年限")]),a("div",{staticClass:"ssl-content"},[a("div",{staticClass:"ssl-option-list"},e._l(c.busCertBuyInfo.certLife,(function(t){return a("div",{key:t.value,staticClass:"ssl-option-item min-w-[9rem]",class:{"is-active":t.value===c.busCertBuyInfo.certLifeAcitve},on:{click:function(e){return c.cutCertOption(t.value,"certLife",t)}}},[a("div",{staticClass:"ssl-type-title !font-normal border-none"},[e._v(e._s(t.title))]),t.subscript?a("em",{staticClass:"ssl-subscript-tips"},[e._v(e._s(t.subscript))]):e._e()])})),0),a("div",{staticClass:"ssl-tips-list mb-4x"},e._l(c.certLifeTips,(function(t){return a("p",{staticClass:"mt-4x"},[e._v(e._s(t))])})),0)])]),a("div",{staticClass:"ssl-line"},[a("div",{staticClass:"ssl-label"},[e._v("部署服务")]),a("div",{staticClass:"ssl-content"},[a("div",{staticClass:"ssl-option-list"},e._l(c.busCertBuyInfo.certDeploy,(function(t){return a("div",{key:t.value,staticClass:"ssl-option-item min-w-[9rem]",class:{"is-active":t.value===c.busCertBuyInfo.certDeployAcitve},on:{click:function(e){return c.cutCertOption(t.value,"certDeploy",t)}}},[a("div",{staticClass:"ssl-type-title !font-normal border-none"},[e._v(e._s(t.title))]),t.subscript?a("em",{staticClass:"ssl-subscript-tips"},[e._v(e._s(t.subscript))]):e._e()])})),0),a("div",{staticClass:"ssl-tips-list mb-4x"},e._l(c.certDeployTips,(function(t){return a("p",{staticClass:"mt-4x"},[e._v(e._s(t))])})),0)])])])],1),a("div",{staticClass:"ssl-info-view rounded-sm"},[a("div",{staticClass:"flex justify-between w-full"},[a("div",{staticClass:"flex flex-col"},[a("div",{staticClass:"mb-[4px]"},[e._v(" 商品包含："),a("span",{staticClass:"mr-[1rem]"},[e._v(e._s("".concat(c.certSelectSslInfo.productName," - 默认包含").concat(c.certSelectSslInfo.number,"个域名 ").concat(c.certSelectSslInfo.yearsPrice,"元/").concat(c.certSelectSslInfo.years,"年"))+e._s(c.certSelectSslInfo.extraNumber>0?"，额外超出".concat(c.certSelectSslInfo.extraNumber,"个域名").concat(c.certSelectSslInfo.extraPrice*c.certSelectSslInfo.extraNumber,"元/").concat(c.certSelectSslInfo.years,"年"):""))])]),a("div",{staticClass:"flex flex-col"},[a("div",{staticClass:"flex h-[2.2rem] items-end mb-[4px]"},[a("span",[e._v("总计费用：")]),a("div",{staticClass:"text-[#FC6D26] text-[1.2rem]"},[a("span",{staticClass:"text-[2rem] font-bold"},[e._v(e._s(c.certSelectSslInfo.totalPrice.toFixed(2)))]),a("span",[e._v("元/"+e._s(c.certSelectSslInfo.years)+"年")]),a("span",{directives:[{name:"show",rawName:"v-show",value:c.certSelectSslInfo.install,expression:"certSelectSslInfo.install"}]},[e._v("（包含部署服务）")])])]),a("div",{staticClass:"pl-[6rem] text-[1.2rem] text-[#aaa] line-through"},[e._v(" 原价"+e._s(c.certSelectSslInfo.originalPrice)+"元/"+e._s(c.certSelectSslInfo.years)+"年 ")])])]),a("div",{staticClass:"flex items-center"},[a(s,{attrs:{size:"defalut"},on:{click:c.paymentSslOrder}},[e._v("立即购买")])],1)])])])}),[],!1,null,"1fbabf3c",null,null).exports;export{m as default};
