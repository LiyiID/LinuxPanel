!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return n};var r,n={},a=Object.prototype,i=a.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(r){f=function(t,e,r){return t[e]=r}}function p(t,e,r,n){var a=e&&e.prototype instanceof b?e:b,i=Object.create(a.prototype),c=new G(n||[]);return o(i,"_invoke",{value:P(t,r,c)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}n.wrap=p;var v="suspendedStart",d="suspendedYield",y="executing",m="completed",g={};function b(){}function x(){}function w(){}var j={};f(j,u,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(N([])));k&&k!==a&&i.call(k,u)&&(j=k);var L=w.prototype=b.prototype=Object.create(j);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function E(e,r){function n(a,o,c,u){var s=h(e[a],e,o);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==t(f)&&i.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):r.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,e){function i(){return new r((function(r,a){n(t,e,r,a)}))}return a=a?a.then(i,i):i()}})}function P(t,e,n){var a=v;return function(i,o){if(a===y)throw new Error("Generator is already running");if(a===m){if("throw"===i)throw o;return{value:r,done:!0}}for(n.method=i,n.arg=o;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===v)throw a=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=y;var s=h(t,e,n);if("normal"===s.type){if(a=n.done?m:d,s.arg===g)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=m,n.method="throw",n.arg=s.arg)}}}function O(t,e){var n=e.method,a=t.iterator[n];if(a===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=r,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=h(a,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,g;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,g):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function G(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[u];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}throw new TypeError(t(e)+" is not iterable")}return x.prototype=w,o(L,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:x,configurable:!0}),x.displayName=f(w,l,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},n.awrap=function(t){return{__await:t}},S(E.prototype),f(E.prototype,s,(function(){return this})),n.AsyncIterator=E,n.async=function(t,e,r,a,i){void 0===i&&(i=Promise);var o=new E(p(t,e,r,a),i);return n.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(L),f(L,l,"Generator"),f(L,u,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},n.values=N,G.prototype={constructor:G,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(D),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,a){return c.type="throw",c.arg=t,e.next=n,a&&(e.method="next",e.arg=r),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),s=i.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;D(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),g}},n}function r(t,e,r,n,a,i,o){try{var c=t[i](o),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,a)}function n(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function c(t){r(o,a,i,c,u,"next",t)}function u(t){r(o,a,i,c,u,"throw",t)}c(void 0)}))}}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(e,r,n){var a;return a=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,r||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"),(r="symbol"==t(a)?a:String(a))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}System.register(["./index-legacy52.js?v=1714377894636","./index-legacy53.js?v=1714377894636","./index-legacy39.js?v=1714377894636","./index-legacy57.js?v=1714377894636","./element-lib-legacy.js?v=1714377894636","./main-legacy.js?v=1714377894636","./tabs-legacy.js?v=1714377894636","./index-legacy77.js?v=1714377894636","./select-legacy.js?v=1714377894636","./index-legacy58.js?v=1714377894636","./index-legacy59.js?v=1714377894636","./index-legacy45.js?v=1714377894636","./index-legacy60.js?v=1714377894636","./vue-lib-legacy.js?v=1714377894636","./index-legacy38.js?v=1714377894636","./index-legacy28.js?v=1714377894636","./locales-lib-legacy.js?v=1714377894636","./preload-helper-legacy.js?v=1714377894636"],(function(t,r){"use strict";var a,o,c,u,s,l,f,p,h,v,d,y,m,g,b,x,w,j,_,k,L,S,E,P,O,C,D,G,N,T,B,A,$,F;return{setters:[function(t){a=t._},function(t){o=t._},function(t){c=t._},function(t){u=t._},function(t){s=t.q,l=t.s,f=t.u},function(t){p=t.f,h=t.l,v=t.g,d=t.a2,y=t.e,m=t.n,g=t.a,b=t.F},null,function(t){x=t._},null,function(t){w=t._},function(t){j=t._},function(t){_=t._},function(t){k=t._},function(t){L=t.b,S=t.H,E=t.e,P=t.A,O=t.v,C=t.h,D=t.j},function(t){G=t.g,N=t.e,T=t.f},function(t){B=t.g,A=t.r,$=t.d},null,function(t){F=t._}],execute:function(){B();t("u",(function(t){var e=t.restoreBackEvent,r=t.deleteBackEvent;return L([{label:"名称",prop:"name"},{label:"路径",prop:"filepath"},{label:"备份时间",prop:"mtime",render:function(t){return S("span",p(t.mtime))}},T({prop:"size"}),N([{onClick:e,title:"恢复"},{onClick:r,title:"删除"}])])}));var R=function(t){return h({isAsync:!0,component:function(){return F((function(){return r.import("./CloudServer-legacy.js?v=1714377894636")}),void 0,r.meta.url)},title:"远程数据库",area:86,compData:t,showFooter:!1})},V=function(t){return h({isAsync:!0,component:function(){return F((function(){return r.import("./AddRedis-legacy.js?v=1714377894636")}),void 0,r.meta.url)},title:t?"编辑key":"添加key",area:42,compData:i({},t),showFooter:!0})},z=E({__name:"index",setup:function(t){var a=v().refs,i=a.authType,o=a.mainHeight,c=A(),u=c.getDbValue,s=c.checkDbStatus,l=c.getDbList,f=c.getServerList,p=P(A()),m=p.tableParam,g=p.redisStatus,b=D().proxy,x=L(!1),w=L(String(m.value.db_idx)),j=L(0),_=L(!1),k=L([{active:!0,content:b.$t("BtnGroup.AddKey"),event:function(){V()}},{content:b.$t("BtnGroup.RemoteServer"),event:function(){R(m.value.serverList)}},{content:b.$t("BtnGroup.BackupList"),hide:function(){return 0!==j.value},event:function(){h({isAsync:!0,component:function(){return F((function(){return r.import("./RedisBackList-legacy.js?v=1714377894636")}),void 0,r.meta.url)},title:"备份列表",area:92})}}]),E=L([{content:b.$t("BtnGroup.ClearDatabase"),event:function(){h({isAsync:!0,component:function(){return F((function(){return r.import("./ClearRedis-legacy.js?v=1714377894636")}),void 0,r.meta.url)},title:"清空数据库",area:42,showFooter:!0})}}]),T=[],B=0,z=L([{label:"删除",value:"delete"}]),H=O({isRecurrence:!0,describe:{title:"批量删除数据库文件",th:"数据库名",message:"批量删除已选数据库文件，是否继续？",propsValue:"name"},tableDisplayConfig:{label:"状态",prop:"status",render:function(t){return S("span",{class:0===T.length?"text-warning":T.includes(t.name)?"text-primary":"text-danger"},function(){if(0===T.length)return"等待执行";var e=T.includes(t.name)?"执行成功":"执行失败";return B===2*T.length?(T=[],B=0):B++,e}())}}}),I=function(){var t=n(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{V(r)}catch(e){}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=function(){var t=n(e().mark((function t(r){var n,a,i=arguments;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("boolean"!=typeof(n=i.length>1&&void 0!==i[1]&&i[1])&&(n=!1),t.prev=2,t.t0=!n,!t.t0){t.next=7;break}return t.next=7,b.$confirm({title:"删除键值",message:"是否删除【".concat(r.name,"】?"),icon:"warning"});case 7:return t.next=9,$({data:JSON.stringify({key:r.name,db_idx:m.value.db_idx,sid:m.value.sid})});case 9:(a=t.sent).status&&n&&T.push(r.name),!n&&b.$message.request(a),!n&&u(),!n&&l(),t.next=19;break;case 16:t.prev=16,t.t1=t.catch(2);case 19:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(e){return t.apply(this,arguments)}}(),Y=function(){var t=n(e().mark((function t(r){var n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=b.$load("正在获取服务器数据信息，请稍候..."),m.value.sid=Number(r),j.value=Number(r),t.next=5,s();case 5:return t.next=7,l();case 7:n.close();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=n(e().mark((function t(){var r,n;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d({sName:"redis"});case 2:r=t.sent,n=r.data,y({name:null==n?void 0:n.name,type:null==n?void 0:n.type,pluginInfo:n});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),K=function(t){var e=t.editDataEvent,r=t.deleteDataEvent;return L([G(),{label:"键",prop:"name"},{label:"值",prop:"val"},{label:"数据类型",prop:"type"},{label:"数据长度",prop:"len"},{label:"有效期",prop:"endtime",render:function(t){return 0===t.endtime?S("span","永久"):S("span","".concat(t.endtime,"秒"))}},N([{onClick:e,title:"编辑"},{onClick:r,title:"删除"}])])}({editDataEvent:I,deleteDataEvent:q});return C(n(e().mark((function t(){var r;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:if(j.value=m.value.sid,null!==(r=m.value.serverList)&&void 0!==r&&r.length||(_.value=!0),_.value){t.next=9;break}return t.next=7,s();case 7:return t.next=9,l();case 9:case"end":return t.stop()}}),t)})))),{__sfc:!0,authType:i,mainHeight:o,getDbValue:u,checkDbStatus:s,getDbList:l,getServerList:f,tableParam:m,redisStatus:g,vm:b,tableLoad:x,activeName:w,selectValue:j,maskLayer:_,tableBtnGroup:k,tableBtnGroupRight:E,resList:T,index:B,batchGroup:z,batchConfig:H,pageChange:function(t){m.value.p=t,u()},sizeChange:function(t){m.value.limit=t,u()},batchEvent:function(t,e,r){return q(e,!0)},searchSubmit:function(t){m.value.search=t,void 0===t&&(m.value.search=""),u()},editDataEvent:I,redisTabClick:function(t){var e;m.value.p=1;var r=null===(e=m.value.keyList[t.index])||void 0===e?void 0:e.id;m.value.db_idx=r,u()},deleteDataEvent:q,changeServer:Y,openAddServer:function(){R(m.value.serverList)},installLocal:J,tableColumn:K}}}),H=function(){var t=this,e=t._self._c,r=t._self._setupProxy;return e("div",[e(k,{attrs:{visible:r.maskLayer,width:"52rem"}},[t._v(" 当前未安装Redis环境/远程数据库， "),e(g,{staticClass:"!text-[1.4rem]",on:{click:r.openAddServer}},[t._v("添加远程数据库")]),e(g,{staticClass:"!text-[1.4rem]",on:{click:r.installLocal}},[e(_),t._v("安装Redis环境")],1)],1),e(j,{scopedSlots:t._u([{key:"header-left",fn:function(){return[e("div",{staticClass:"flex items-center"},[e(w,{attrs:{group:r.tableBtnGroup}}),e("div",{staticClass:"bg-[#ececec] w-[1px] h-10 mx-[1.2rem]"}),e(w,{attrs:{group:r.tableBtnGroupRight}})],1)]},proxy:!0},{key:"header-right",fn:function(){return[e("div",{staticClass:"flex items-center mx-4x"},[e("span",{staticClass:"text-warning"},[e("i",{staticClass:"el-icon-info"}),t._v("当前所有操作都关联至 ")]),e(s,{staticClass:"w-[12rem] mx-4x",on:{change:r.changeServer},model:{value:r.selectValue,callback:function(t){r.selectValue=t},expression:"selectValue"}},t._l(r.tableParam.serverList,(function(t){return e(l,{key:t.ps,attrs:{label:t.ps,value:t.id}})})),1)],1),e("div",{staticClass:"flex items-center"},[e(b,{staticClass:"mr-4x",attrs:{size:"1.6",name:r.redisStatus.status?"icon-success":"icon-error"}}),e("div",{staticClass:"mr-[1.6rem] text-[1.2rem]"},[e("span",[t._v("状态：")]),e(g,{class:r.redisStatus.status?"":"!text-[#ef0808]"},[t._v(" "+t._s(r.redisStatus.status?"正常":r.redisStatus.msg)+" ")])],1)],1)]},proxy:!0},{key:"content",fn:function(){return[e(x,{attrs:{type:"card"},on:{"tab-click":r.redisTabClick},model:{value:r.activeName,callback:function(t){r.activeName=t},expression:"activeName"}},t._l(r.tableParam.keyList,(function(t,r){return e(f,{key:r,staticClass:"h-0 !p-0",attrs:{label:t.name+"【"+t.keynum+"】",name:String(t.id)}})})),1),e(u,{staticClass:"float-right mb-8x",attrs:{placeholder:"请输入键名称"},on:{clear:r.searchSubmit,search:r.searchSubmit},model:{value:r.tableParam.search,callback:function(e){t.$set(r.tableParam,"search",e)},expression:"tableParam.search"}}),e(c,{directives:[{name:"loading",rawName:"v-loading",value:r.tableLoad,expression:"tableLoad"}],ref:"redisTable",attrs:{"max-height":r.mainHeight-346,column:r.tableColumn,data:r.tableParam.valueList}})]},proxy:!0},{key:"footer-left",fn:function(){return[e(o,{attrs:{data:r.batchGroup,config:r.batchConfig,"batch-fn":r.batchEvent},on:{"handle-complete":function(t){return r.changeServer(r.selectValue)}}})]},proxy:!0},{key:"footer-right",fn:function(){return[e(a,{attrs:{total:r.tableParam.total,"current-page":r.tableParam.p,"page-size":r.tableParam.limit},on:{"update:currentPage":function(e){return t.$set(r.tableParam,"p",e)},"update:current-page":function(e){return t.$set(r.tableParam,"p",e)},"size-change":r.sizeChange,"current-change":r.pageChange}})]},proxy:!0}])})],1)},I=m(z,H,[],!1,null,"14cd33a3",null,null).exports,q=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));t("i",q)}}}))}();
