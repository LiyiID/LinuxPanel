import{_ as t}from"./index118.js?v=1714377894636";import{n as e,q as a}from"./main.js?v=1714377894636";import{_ as o}from"./index120.js?v=1714377894636";import{e as s,b as i,h as l,j as r}from"./vue-lib.js?v=1714377894636";import{al as n,ai as c}from"./site.store.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./check.js?v=1714377894636";const m=e(s({__name:"TomcatConfig",props:{compData:{default:()=>({})}},setup(t){const e=t,{proxy:a}=r(),o=i(!1),s=i(""),m=i(""),p=i({mode:"ace/mode/nginx",theme:"ace/theme/chrome",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!1,fontSize:"12px"}),u=i([{text:"此处为Tomcat配置文件,若您不了解配置规则,请勿随意修改"}]),f=async()=>{try{o.value=!0;const{data:t}=await c({path:"/usr/local/bttomcat/tomcat".concat(m.value,"/conf/server.xml")});s.value=t.data,o.value=!1}catch(t){}finally{o.value=!1}};return l((()=>{m.value=e.compData.project_config.tomcat_version,f()})),{__sfc:!0,vm:a,props:e,textLoading:o,configContent:s,tomcateVersion:m,config:p,helpList:u,saveData:async()=>{let t=a.$load("正在保存内容，请稍候...");try{const t=await n({data:s.value,encoding:"utf-8",path:"/usr/local/bttomcat/tomcat".concat(m.value,"/conf/server.xml")});a.$message.msg({dangerouslyUseHTMLString:!0,message:t.msg,type:t.status?"success":"error",duration:t.status?2e3:0,showClose:!t.status}),f()}catch(e){}finally{t.close()}},getConfigData:f}}}),(function(){var e=this,s=e._self._c,i=e._self._setupProxy;return s("div",[s("span",{staticClass:"my-4x text-[#666]"},[e._v("提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换")]),s(o,{directives:[{name:"loading",rawName:"v-loading",value:i.textLoading,expression:"textLoading"}],staticClass:"!h-[54rem] !w-[64rem] my-12x border border-[#e8e8e8]",attrs:{id:"tomcatContent","file-path":"/usr/local/bttomcat/tomcat".concat(i.tomcateVersion,"/conf/server.xml"),config:i.config},model:{value:i.configContent,callback:function(t){i.configContent=t},expression:"configContent"}}),s("div",[s(a,{on:{click:i.saveData}},[e._v("保存")])],1),s(t,{staticClass:"ml-20x mt-20x",attrs:{list:i.helpList}})],1)}),[],!1,null,"373ef896",null,null).exports;export{m as default};
