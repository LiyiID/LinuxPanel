!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=r(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw i}}}}function a(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function s(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */s=function(){return a};var t,a={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,a){e[t]=a.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function m(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{m({},"")}catch(t){m=function(e,t,a){return e[t]=a}}function v(e,t,a,r){var n=t&&t.prototype instanceof g?t:g,s=Object.create(n.prototype),o=new E(r||[]);return i(s,"_invoke",{value:j(e,a,o)}),s}function f(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}a.wrap=v;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",x={};function g(){}function w(){}function _(){}var b={};m(b,l,(function(){return this}));var C=Object.getPrototypeOf,k=C&&C(C(L([])));k&&k!==r&&n.call(k,l)&&(b=k);var S=_.prototype=g.prototype=Object.create(b);function D(e){["next","throw","return"].forEach((function(t){m(e,t,(function(e){return this._invoke(t,e)}))}))}function R(t,a){function r(s,i,o,l){var c=f(t[s],t,i);if("throw"!==c.type){var u=c.arg,m=u.value;return m&&"object"==e(m)&&n.call(m,"__await")?a.resolve(m.__await).then((function(e){r("next",e,o,l)}),(function(e){r("throw",e,o,l)})):a.resolve(m).then((function(e){u.value=e,o(u)}),(function(e){return r("throw",e,o,l)}))}l(c.arg)}var s;i(this,"_invoke",{value:function(e,t){function n(){return new a((function(a,n){r(e,t,a,n)}))}return s=s?s.then(n,n):n()}})}function j(e,a,r){var n=p;return function(s,i){if(n===h)throw new Error("Generator is already running");if(n===y){if("throw"===s)throw i;return{value:t,done:!0}}for(r.method=s,r.arg=i;;){var o=r.delegate;if(o){var l=T(o,r);if(l){if(l===x)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===p)throw n=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=h;var c=f(e,a,r);if("normal"===c.type){if(n=r.done?y:d,c.arg===x)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=y,r.method="throw",r.arg=c.arg)}}}function T(e,a){var r=a.method,n=e.iterator[r];if(n===t)return a.delegate=null,"throw"===r&&e.iterator.return&&(a.method="return",a.arg=t,T(e,a),"throw"===a.method)||"return"!==r&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+r+"' method")),x;var s=f(n,e.iterator,a.arg);if("throw"===s.type)return a.method="throw",a.arg=s.arg,a.delegate=null,x;var i=s.arg;return i?i.done?(a[e.resultName]=i.value,a.next=e.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,x):i:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,x)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function L(a){if(a||""===a){var r=a[l];if(r)return r.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length)){var s=-1,i=function e(){for(;++s<a.length;)if(n.call(a,s))return e.value=a[s],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(e(a)+" is not iterable")}return w.prototype=_,i(S,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:w,configurable:!0}),w.displayName=m(_,u,"GeneratorFunction"),a.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,m(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},a.awrap=function(e){return{__await:e}},D(R.prototype),m(R.prototype,c,(function(){return this})),a.AsyncIterator=R,a.async=function(e,t,r,n,s){void 0===s&&(s=Promise);var i=new R(v(e,t,r,n),s);return a.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},D(S),m(S,u,"Generator"),m(S,l,(function(){return this})),m(S,"toString",(function(){return"[object Generator]"})),a.keys=function(e){var t=Object(e),a=[];for(var r in t)a.push(r);return a.reverse(),function e(){for(;a.length;){var r=a.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},a.values=L,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var a=this;function r(r,n){return o.type="throw",o.arg=e,a.next=r,n&&(a.method="next",a.arg=t),!!n}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var s=r;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return i.type=e,i.arg=t,s?(this.method="next",this.next=s.finallyLoc,x):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),x},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),I(a),x}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;I(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,a,r){return this.delegate={iterator:L(e),resultName:a,nextLoc:r},"next"===this.method&&(this.arg=t),x}},a}function i(e,t,a,r,n,s,i){try{var o=e[s](i),l=o.value}catch(c){return void a(c)}o.done?t(l):Promise.resolve(l).then(r,n)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var s=e.apply(t,a);function o(e){i(s,r,n,o,l,"next",e)}function l(e){i(s,r,n,o,l,"throw",e)}o(void 0)}))}}System.register(["./element-lib-legacy.js?v=1714377894636","./main-legacy.js?v=1714377894636","./empty-legacy.js?v=1714377894636","./__commonjsHelpers__-legacy.js?v=1714377894636","./collapse-legacy.js?v=1714377894636","./progress-legacy.js?v=1714377894636","./index-legacy118.js?v=1714377894636","./index-legacy39.js?v=1714377894636","./index-legacy119.js?v=1714377894636","./preload-helper-legacy.js?v=1714377894636","./vue-lib-legacy.js?v=1714377894636","./home.api-legacy.js?v=1714377894636","./firewall.store-legacy.js?v=1714377894636","./public-lib-legacy.js?v=1714377894636","./modulepreload-polyfill-legacy.js?v=1714377894636","./request-lib-legacy.js?v=1714377894636","./locales-lib-legacy.js?v=1714377894636","./check-legacy.js?v=1714377894636"],(function(e,r){"use strict";var n,i,l,c,u,m,v,f,p,d,h,y,x,g,w,_,b,C,k,S,D,R,j,T,A,I,E,L,N,O,F,P,H,B,$,M,J;return{setters:[function(e){n=e.Y,i=e.C,l=e.j,c=e.F,u=e.P},function(e){m=e.g,v=e.aY,f=e.s,p=e.bY,d=e.j,h=e.p,y=e.n,x=e.q,g=e.D,w=e.a,_=e.F,b=e.b},null,function(e){C=e.g},null,null,function(e){k=e._},function(e){S=e._},function(e){D=e._},function(e){R=e._},function(e){j=e.e,T=e.b,A=e.v,I=e.c,E=e.H,L=e.i,N=e.j},function(e){O=e.n,F=e.o,P=e.p,H=e.q,B=e.t,$=e.v,M=e.w},function(e){J=e.getFirewallStore},null,null,null,null,null],execute:function(){var G=n(),Y=C(G),q=j({__name:"HomeSecurityRisks",setup:function(e,n){var i=n.expose,l=m().refs.authType,c=J().refs,u=c.firewallTabActive,y=c.safeDetectActive,x=N().proxy,g=T(""),w=T(""),_=T(!1),b=T(!1),C=T(""),k=T(!1),S=T(!1),D=T(!1),j=T(!1),G=T(),Y=T(!0),q=T(!1),z=T("primary"),V=T(100),U=T("!text-[#20a53A]"),K=T("safe"),Q=T(),W=T("当前服务器未进行安全扫描，可能存在风险"),X=T(""),Z=T(),ee=T([]),te=T([]),ae=T([]),re=T(!0),ne=T([]),se=T([]),ie=T(!0),oe=T(!1),le=T("正在扫描中，请耐心等待..."),ce=A({progress:1,repairProgress:!1,repairText:"修复中.."}),ue=A({processPercentage:0,processColor:"#20a53a"}),me={risk:{type:"danger",label:x.$t("HomeSecurityRisks.RiskClass[0]"),list:[]},security:{type:"primary",label:x.$t("HomeSecurityRisks.RiskClass[1]"),list:[]},ignore:{type:"warning",label:x.$t("HomeSecurityRisks.RiskClass[2]"),list:[]}},ve=A({cannot_automatically:0,failed:0,success:0}),fe=T(0),pe=I((function(){return te.value.filter((function(e){return 1==e.selection})).map((function(e){return e.m_name})).length})),de=T([{label:"风险项",prop:"m_name",width:150,render:function(e){return E("span",[e.m_name])}},{label:"修复内容",prop:"msg",width:150},{label:"相关信息",prop:"type",align:"center",render:function(e){return Array.isArray(e.type)&&e.type.length>0?E("span",{class:"h-[3.2rem] inline-block whitespace-pre-wrap"},[e.type.join("，")]):"无"}},{label:"操作结果",align:"right",render:function(e){return e.status?E("span",{class:"text-[#20a53a]"},["修复成功"]):E("span",{class:"text-[red]"},["修复失败"])}}]),he=A({1:{text:x.$t("HomeSecurityRisks.RiskLevel[0]"),bg:"rgba(232, 213, 68, 0.1)",color:"#D4BB00"},2:{text:x.$t("HomeSecurityRisks.RiskLevel[1]"),bg:"rgba(240, 173, 78, 0.14)",color:"#f0ad4e"},3:{text:x.$t("HomeSecurityRisks.RiskLevel[2]"),bg:"rgba(239, 8, 8, 0.1)",color:"#EF0808"}}),ye=function(){var e=o(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie.value=!1,D.value=!1,V.value=100,K.value="safe",U.value="!text-[#20a53A]","info"!=z.value){e.next=21;break}return clearInterval(Q.value),e.next=9,O();case 9:return e.next=11,F();case 11:t=e.sent,xe(t.data),V.value="?",U.value="!text-[#EF0808]",K.value="danger",_.value=!1,fe.value=t.data.risk.length,W.value="扫描中断，",e.next=32;break;case 21:ue.processPercentage=0,j.value=!0,W.value="正在进行安全扫描...",fe.value=0,X.value="正在检测...",G.value="",z.value="info",Y.value=!0,k.value=!1,ge(!0);try{clearInterval(Q.value),Q.value=setInterval(o(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:t=e.sent,ue.processPercentage=t.data.percentage,fe.value=t.data.count,X.value=t.data.status,V.value=t.data.score,t.data.count&&"100"!=t.data.percentage&&(U.value="!text-[#EF0808]",K.value="danger",W.value="正在进行安全扫描，"),"100"==t.data.percentage&&clearInterval(Q.value),V.value>=80&&V.value<=99?(U.value="!text-[#E8D544]",K.value="risk",ue.processColor="#E8D544"):V.value>=60&&V.value<=79?(U.value="!text-[#F0AD4E]",ue.processColor="#F0AD4E",K.value="warn"):V.value<60&&(U.value="!text-[#EF0808]",ue.processColor="#EF0808",K.value="danger");case 10:case"end":return e.stop()}}),e)}))),1e3)}catch(a){}case 32:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(e){for(var t in ae.value=e.is_autofix,me){var r=e[t];if(Array.isArray(r)){for(var n=0;n<r.length;n++){var s=me[t].list[n];r[n].show=(null==s?void 0:s.show)||!1,r[n].selection=(null==s?void 0:s.selection)||!1}Object.keys(me).includes(t)&&"risk"==t&&(te.value=[].concat(a(te.value),a(r))),me[t].list=r}}C.value=e.check_time,z.value="primary",k.value=!0,q.value=!0,we(!0),G.value=" !animate-none",localStorage.setItem("scanData",JSON.stringify(te.value)),localStorage.setItem("ignoreData",JSON.stringify(me.ignore.list)),f("lastScanTime",C.value)},ge=function(){var e=o(s().mark((function e(){var t,a,r,n,i=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]&&i[0],_.value=!0,le.value="正在扫描中，请稍等...",e.prev=3,a={},t&&(a.force=1),e.next=8,$(a);case 8:r=e.sent,n=r.data,te.value=[],n.interrupt||(te.value=[],xe(n),V.value=n.score,fe.value=te.value.length,W.value="已完成安全扫描，",se.value=n.ignore),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3);case 17:_.value=!1;case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(){return e.apply(this,arguments)}}(),we=function(e){var t=!1;ne.value=[],te.value.forEach((function(e){ae.value.includes(e.m_name)&&(e.selection=!0,ne.value.push(e),t=!0)})),t&&e?(re.value=!1,b.value=ne.value.every((function(e){return 1==e.selection}))):t&&!e&&(b.value=!b.value,b.value||(ne.value=[],te.value.forEach((function(e){ae.value.includes(e.m_name)&&(e.selection=!1)}))))},_e=function(){var e=o(s().mark((function e(t,a){var r,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ltd"===l.value){e.next=3;break}return De(),e.abrupt("return");case 3:if(r=te.value.filter((function(e){return 1==e.selection})).map((function(e){return e.m_name})),e.prev=4,t||0!=r.length){e.next=10;break}return x.$message.error("请选择需要修复的风险项！"),e.abrupt("return");case 10:ne.value.length;case 11:return _.value=!0,le.value="正在修复中,可能耗时较长,请耐心等候...",e.next=15,H({data:JSON.stringify({m_name:t?[a.m_name]:r})});case 15:n=e.sent,i=n.data,t&&i.success.length>0?(x.$message.success("修复成功"),fe.value--,te.value=te.value.filter((function(e){return e.m_name!==a.m_name})),Ce(i)):Ce(i),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4);case 23:return e.prev=23,_.value=!1,e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[4,20,23,26]])})));return function(t,a){return e.apply(this,arguments)}}(),be=function(){var e=o(s().mark((function e(t,a){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_.value=!0,le.value="正在忽略风险项,请耐心等候...",e.next=5,M({m_name:t.m_name});case 5:r=e.sent,n=r.data,x.$message.request(n),n.status&&(a?se.value=se.value.filter((function(e){return e.m_name!==t.m_name})):te.value=te.value.filter((function(e){return e.m_name!==t.m_name})),ge(!0)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:return e.prev=14,_.value=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})));return function(t,a){return e.apply(this,arguments)}}(),Ce=function(){var e=o(s().mark((function e(a){var r,n,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in Z.value=[],S.value=!0,ve.cannot_automatically=a.cannot_automatically.length,ve.failed=a.failed.length,ve.success=a.success.length,a){n=t(a[r]);try{for(n.s();!(i=n.n()).done;)o=i.value,ee.value.push({m_name:o.m_name,type:o.result.type,msg:o.result.msg,status:o.result.status,name:r})}catch(s){n.e(s)}finally{n.f()}}Z.value=ee,_.value=!1,te.value=te.value.filter((function(e){return!a.success.some((function(t){return t.m_name===e.m_name}))})),fe.value=te.value.length,localStorage.setItem("scanData",JSON.stringify(te.value));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=localStorage.getItem("scanData"),t=localStorage.getItem("ignoreData");t&&JSON.parse(t).length&&(se.value=JSON.parse(t)),e&&JSON.parse(e).length?(te.value=JSON.parse(e),q.value=!0,k.value=!0,ie.value=!1):(D.value=!0,k.value=!1),Y.value=!1,C.value=p("lastScanTime")},Se=function(){var e=o(s().mark((function e(t,a){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R((function(){return r.import("./main-legacy.js?v=1714377894636").then((function(e){return e.ek}))}),void 0,r.meta.url);case 2:u.value=t,a&&(y.value=a),d("/firewall"),x.$emit("close");case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),De=function(){h({sourceId:68})};return L((function(){clearInterval(Q.value)})),i({onOpen:ke}),{__sfc:!0,authType:l,firewallTabActive:u,safeDetectActive:y,vm:x,activeMent:g,activeMentIgnore:w,loading:_,allSelect:b,lastScanTime:C,repairAutoRiskButton:k,resultConfirm:S,emptyDetail:D,showAnimation:j,animateFlag:G,cookieRepair:Y,scanSelectShow:q,scanButtonType:z,scanScore:V,scanTextClass:U,scanOuterClass:K,scanTimer:Q,scanPreText:W,scanItemText:X,resultTable:Z,tableData:ee,allData:te,is_autofix:ae,allSelectionDis:re,checkedData:ne,ignoreData:se,isShow:ie,isIgnoreAll:oe,loadingText:le,repairData:ce,processData:ue,scanData:me,resultItemLength:ve,riskNum:fe,repairCheckedFlag:pe,resultColumn:de,levelData:he,vulnerabilityInvolvesSoftware:function(e){var t=Object.keys(e.soft_name),a="";return t.forEach((function(r,n){n===t.length-1?a+="".concat(t,":").concat(e.soft_name[r]):a+="".concat(t,":").concat(e.soft_name[r],"\n")})),a},handleDownloadReport:function(){window.open("/project/security/report/html","_blank")},changeSelectValue:function(e){e.selection=!e.selection,b.value=ne.value.every((function(e){return 1==e.selection}))},scanningProcess:ye,handleRepairAutoRisk:function(){if("ltd"!==l.value)return De();try{var e=te.value.filter((function(e){return 1==e.selection})).map((function(e){return e.m_name}));if(0==e.length)return _.value=!1,void x.$message.error("暂无可自动修复的风险项！");_.value=!0,le.value="正在修复中,可能耗时较长,请耐心等候...",ce.progress=0;var t=H({data:JSON.stringify({m_name:e})});ce.repairProgress=!0;var a=setInterval(o(s().mark((function e(){var r,n,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:if(r=e.sent,n=r.data,ce.progress=n.percentage,ce.repairText=n.status,100!==n.percentage){e.next=16;break}return ce.repairText="修复完成",ce.repairProgress=!1,ce.progress=100,clearInterval(a),e.next=13,t;case 13:i=e.sent,Ce(i.data),ge(!0);case 16:case"end":return e.stop()}}),e)}))),800)}catch(r){}finally{_.value=!1}},resultAssignment:xe,getScanList:ge,handelAllSelection:we,handleRepair:_e,handleIgnore:be,getRepairResult:Ce,onToggle:function(e,t){e.show||t.forEach((function(e){return e.show=!1})),e.show=!e.show},onOpen:ke,jumpFirewall:Se,openPayView:De,onlineServiceDialog:v}}}),z=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"h-full p-4rem"},[t("div",{staticClass:"scan-header flex items-center"},[t("div",{staticClass:"flex items-center w-full"},[a.showAnimation?e._e():t("div",{staticClass:"w-[10rem] h-[10rem] relative flex-shrink-0"},[t("span",{staticClass:"inline-block scan-icon-img icon-img-safe"}),t("span",{staticClass:"scan-icon-img-bg"}),t("span",{staticClass:"text-[3.2rem] h-[3.4rem] w-[0.7rem] text-[#20a53a] font-bold absolute-center"},[e._v("i")])]),a.showAnimation?t("div",{staticClass:"w-[10rem] h-[10rem] relative flex-shrink-0"},[t("p",{class:"box-text w-[5.8rem] "+a.scanTextClass},[e._v(" "+e._s(a.scanScore)+" "),t("span",[e._v("分")])]),t("span",{class:"scan-icon-img icon-img-"+a.scanOuterClass}),t("span",{staticClass:"circle-inner"}),t("span",{class:"circle-outer "+a.scanOuterClass}),t("div",{class:"animate-box"+a.animateFlag},[t("div",{class:"animate-box-left linear-"+a.scanOuterClass}),t("div",{staticClass:"animate-box-right"}),t("div",{staticClass:"animate-box-bottom"})])]):e._e(),t("div",{staticClass:"w-full text-[#333] text-[2rem] flex flex-col ml-[3rem]"},[t("div",{staticClass:"flex items-center w-full justify-between"},[t("span",[e._v(e._s(a.scanPreText)),a.riskNum?t("span",[e._v("已检测到"),t("span",{staticClass:"mx-4x text-[2.4rem] mx-4x text-danger"},[e._v(e._s(a.riskNum))]),e._v("个风险")]):e._e()]),t("div",{staticClass:"flex items-center"},[a.repairAutoRiskButton&&a.cookieRepair?e._e():t(x,{class:"w-[9rem] "+("info"==a.scanButtonType?"bg-[#CBCBCB]":""),attrs:{type:a.scanButtonType,round:""},nativeOn:{click:function(e){return a.scanningProcess.apply(null,arguments)}}},[e._v(" "+e._s("info"==a.scanButtonType?"停止扫描":"立即扫描")+" ")]),a.repairAutoRiskButton&&a.cookieRepair?t(x,{staticClass:"!p-[0]",attrs:{type:"text",round:""},on:{click:a.scanningProcess}},[e._v(" 重新扫描 ")]):e._e(),a.repairAutoRiskButton&&a.cookieRepair?t(x,{staticClass:"w-[9rem]",attrs:{round:"",type:a.scanButtonType},on:{click:a.handleRepairAutoRisk}},[e._v(" 一键修复 ")]):e._e()],1)]),"info"===a.scanButtonType||a.repairAutoRiskButton?e._e():t("span",{staticClass:"text-[1.4rem] text-[#666] mt-[1rem]"},[e._v(" 扫描后将自动修复所有可修复的风险项，并获取最新安全扫描报告 ")]),"info"===a.scanButtonType||a.repairAutoRiskButton?e._e():t(x,{staticClass:"w-[1.6rem] !p-0 !mt-12x text-[1.4rem]",attrs:{type:"text"},on:{click:a.handleDownloadReport}},[e._v(" >>下载当前安全扫描报告 ")]),"info"==a.scanButtonType?t("span",{staticClass:"text-[1.4rem] text-[#666] mt-[1rem]"},[e._v(e._s(a.scanItemText))]):e._e(),"info"==a.scanButtonType?t(D,{staticClass:"mt-[1.6rem] h-[1rem]",attrs:{"process-color":a.processData.processColor,percentage:a.processData.processPercentage,"stroke-width":10,"show-text":!1}}):e._e(),a.repairAutoRiskButton?t("span",{staticClass:"text-[1.4rem] mt-12x text-[#666] flex items-center"},[e._v(" 上次扫描时间："+e._s(a.lastScanTime)+" ")]):e._e(),a.repairAutoRiskButton&&a.cookieRepair?t("span",{staticClass:"text-[1.4rem] mt-12x text-[#F0AD4E] flex items-center"},[e._v(" 若安装了【系统加固】，请先关闭再进行一键修复 ")]):e._e()],1)])]),a.scanSelectShow?t("div",{staticClass:"mt-[4rem] text-[1.4rem] w-full flex items-center justify-between"},[t("div",{staticClass:"items-center flex"},[t(g,{staticClass:"text-[#666] font-500",attrs:{value:a.allSelect,disabled:a.allSelectionDis},on:{change:a.handelAllSelection}},[e._v("全选")]),t("span",{class:a.repairCheckedFlag?"ml-20x text-[1.4rem] text-[#20a53a] cursor-pointer hover:text-[#1d9534]":"ml-20x text-[1.4rem] text-[#999] cursor-not-allowed ",on:{click:function(e){return a.handleRepair(!1,null)}}},[e._v("修复选中项 ")])],1),t("div",[t(w,{staticClass:"mr-[1rem]",on:{click:function(e){a.isIgnoreAll=!0}}},[e._v("忽略扫描项")]),t("span",{staticClass:"text-[#999] mx-4x"},[e._v("|")]),t(x,{staticClass:"text-[#20a53a] !text-[1.4rem]",attrs:{type:"text"},on:{click:a.handleDownloadReport}},[t(_,{staticClass:"mr-4x",attrs:{name:"icon-safe-report",size:"1.4"}}),e._v("下载安全扫描报告")],1)],1)]):e._e(),a.emptyDetail?e._e():t("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],staticClass:"scan-body my-[2rem]",class:a.isShow?"h-[28rem]":"h-[38rem]",attrs:{"element-loading-text":a.loadingText}},[t(i,{attrs:{accordion:""},model:{value:a.activeMent,callback:function(e){a.activeMent=e},expression:"activeMent"}},[t("div",{staticClass:"module-list overflow-auto",class:a.isShow?"h-[28rem]":"h-[38rem]"},e._l(a.allData,(function(r,n){return t("div",{key:"".concat(n),staticClass:"module-item text-[1.2rem]"},[t("div",{staticClass:"module-head flex items-center h-[5.4rem] justify-between border-b-1 pr-[0.8rem] w-full"},[t("div",{staticClass:"w-full flex items-center"},[t(g,{attrs:{value:r.selection,disabled:!a.is_autofix.includes(r.m_name)},on:{change:function(e){return a.changeSelectValue(r)}}}),t("span",{staticClass:"text-[1.2rem] h-[2.2rem] flex items-center px-8x rounded-[0.2rem] ml-8x mr-[1rem]",style:{color:a.levelData[r.level].color,backgroundColor:a.levelData[r.level].bg}},[e._v(e._s(a.levelData[r.level].text))]),t("div",{staticClass:"w-[16rem] max-w-[16rem] truncate",style:{color:a.levelData[r.level].color},attrs:{title:r.ps?r.ps:r.vuln_name}},[e._v(" "+e._s(r.ps?r.ps:r.vuln_name)+" ")]),a.is_autofix.includes(r.m_name)?e._e():t("div",{staticClass:"text-[#666] text-[1.2rem] ml-[6rem]"},[e._v(" 无法自动修复，请手动处理或"),t(w,{on:{click:function(e){return a.onlineServiceDialog()}}},[e._v("联系人工")])],1)],1),t("div",{staticClass:"flex items-center"},[t(w,{directives:[{name:"show",rawName:"v-show",value:!!a.is_autofix.includes(r.m_name),expression:"is_autofix.includes(item.m_name) ? true : false"}],staticClass:"w-[4.2rem]",on:{click:function(e){return a.handleRepair(!0,r)}}},[e._v(" 修复 "),t("span",{staticClass:"text-[#999] mx-4x"},[e._v("|")])]),t(w,{staticClass:"w-[4.2rem]",attrs:{type:"info",underline:!1},on:{click:function(e){return a.handleIgnore(r,!1)}}},[e._v(" 忽略 "),t("span",{staticClass:"text-[#999] mx-4x"},[e._v("|")])]),t(w,{staticClass:"w-[5.4rem] flex items-center",on:{click:function(e){return a.onToggle(r,a.allData)}}},[e._v(" "+e._s(r.show?e.$t("HomeSecurityRisks.Fold"):e.$t("HomeSecurityRisks.Details"))),t("i",{class:"text-[1.4rem] text-[#999] ml-4x el-icon-arrow-"+(r.show?"up":"down")})])],1)]),t(Y,[t("div",{directives:[{name:"show",rawName:"v-show",value:r.show,expression:"item.show"}],staticClass:"px-[3rem] py-[3.2rem] bg-[#F8F8F8]"},[t("div",{staticClass:"flex items-center"},[t("div",{staticClass:"text-[#333]"},[e._v(" "+e._s(r.ps?e.$t("HomeSecurityRisks.RiskDetails[2]"):e.$t("HomeSecurityRisks.RiskDetails[5]"))+" ")]),t("div",{directives:[{name:"show",rawName:"v-show",value:r.msg,expression:"item.msg"}],staticClass:"collapse-item",domProps:{innerHTML:e._s(r.msg)}}),t("div",{directives:[{name:"show",rawName:"v-show",value:r.soft_name,expression:"item.soft_name"}],staticClass:"collapse-item"},[e._v(" "+e._s(r.soft_name?a.vulnerabilityInvolvesSoftware(r):"")+" ")])]),t("div",{staticClass:"flex mt-16x items-center"},[t("div",{directives:[{name:"t",rawName:"v-t",value:"HomeSecurityRisks.RiskDetails[3]",expression:"`HomeSecurityRisks.RiskDetails[3]`"}]}),r.tips?t("div",{staticClass:"collapse-item flex-col !items-start"},e._l(r.tips,(function(a,r){return t("p",{key:r,class:0==r?"":"mt-4x"},[e._v(" "+e._s(r+1)+"、"+e._s(a)+" ")])})),0):e._e(),r.vuln_solution?t("div",{staticClass:"collapse-item"},[e._v(" "+e._s(r.vuln_solution)+" ")]):e._e()]),t("div",{directives:[{name:"show",rawName:"v-show",value:r.remind,expression:"item.remind"}],staticClass:"flex mt-16x items-center"},[t("div",{directives:[{name:"t",rawName:"v-t",value:"HomeSecurityRisks.RiskDetails[6]",expression:"`HomeSecurityRisks.RiskDetails[6]`"}]}),t("div",{staticClass:"collapse-item"},[e._v(" "+e._s(r.remind)+" ")])])])])],1)})),0)])],1),a.emptyDetail?t("div",{staticClass:"scan-body flex justify-center flex-col my-[2rem] relative",class:a.isShow?"h-[30rem]":"h-[40rem]"},[t("span",{staticClass:"bg-[#f2f2f2] h-[3rem] w-[33%] mb-12x"}),e._l(4,(function(e,a){return t("span",{staticClass:"bg-[#f2f2f2] h-[3rem] w-full mb-12x"})})),t("span",{staticClass:"bg-[#f2f2f2] h-[3rem] w-[60%] mb-12x"}),e._l(3,(function(e,a){return t("span",{staticClass:"bg-[#f2f2f2] h-[3rem] w-full mb-12x"})})),t("span",{staticClass:"bg-[#f2f2f2] h-[3rem] w-[40%] mb-12x"})],2):e._e(),t("div",{staticClass:"scan-recommend"},[t("span",{staticClass:"cursor-pointer",on:{click:function(e){a.isShow=!a.isShow}}},[t("i",{staticClass:"mr-[0.6rem]",class:a.isShow?"el-icon-arrow-up":"el-icon-arrow-down"}),t("span",[e._v("更多安全工具")])]),a.isShow?t("div",{staticClass:"scan-recommend-body"},[t(l,{staticClass:"relative item",attrs:{effect:"dark",content:"点击跳转到功能页",placement:"top-start"}},[t("div",{staticClass:"scan-recommend-body-box",on:{click:function(e){return a.jumpFirewall("safeDetect")}}},[t("div",{staticClass:"scan-recommend-body-box-title"},[e._v("动态查杀")]),t("div",{staticClass:"scan-recommend-body-box-desc"},[e._v("支持定时动态查杀木马隔离")]),t(_,{staticClass:"absolute bottom-0 left-[0.8rem]",attrs:{name:"icon-dynamic-kill",size:"5"}})],1)]),t(l,{staticClass:"relative tem",attrs:{effect:"dark",content:"点击跳转到功能页",placement:"top-start"}},[t("div",{staticClass:"scan-recommend-body-box safaty-detect",on:{click:function(e){return a.jumpFirewall("safeDetect","safeDetect")}}},[t("div",{staticClass:"scan-recommend-body-box-title"},[e._v("安全检测")]),t("div",{staticClass:"scan-recommend-body-box-desc"},[e._v("更全面的服务器检测")]),t(_,{staticClass:"absolute bottom-0 left-[0.8rem]",attrs:{name:"icon-safaty-detect",size:"5"}})],1)]),t(l,{staticClass:"relative item",attrs:{effect:"dark",content:"点击跳转到功能页",placement:"top-start"}},[t("div",{staticClass:"scan-recommend-body-box bug-scan",on:{click:function(e){return a.jumpFirewall("safeDetect","vulnerabilityScanning")}}},[t("div",{staticClass:"scan-recommend-body-box-title"},[e._v("网站漏洞扫描")]),t("div",{staticClass:"scan-recommend-body-box-desc"},[e._v("针对网站漏洞的专享扫描工具")]),t(_,{staticClass:"absolute bottom-0 left-[0.8rem]",attrs:{name:"icon-bug-scan",size:"5"}})],1)])],1):e._e()]),t(b,{attrs:{title:"结果确认","show-footer":!1,area:54,visible:a.resultConfirm},on:{"update:visible":function(e){a.resultConfirm=e}}},[t("div",{staticClass:"flex flex-col p-20x"},[t("span",{staticClass:"text-[1.6rem] mb-20x"},[e._v("修复结果：修复成功"),t("span",{staticClass:"text-primary"},[e._v(e._s(a.resultItemLength.success))]),e._v("项，修复失败"),t("span",{staticClass:"text-danger"},[e._v(" "+e._s(a.resultItemLength.failed))]),e._v("项，忽略"),t("span",{staticClass:"text-medium"},[e._v(e._s(a.resultItemLength.cannot_automatically))]),e._v("项")]),t(S,{attrs:{"max-height":"400",data:a.resultTable,column:a.resultColumn}}),t(k,{staticClass:"ml-8x mt-12x",attrs:{list:[{text:"如有修复失败项，请关闭当前窗口，根据解决方案手动进行修复"}]}})],1)]),t(b,{attrs:{title:"","show-footer":!1,area:54,visible:a.repairData.repairProgress,showClose:!1},on:{"update:visible":function(t){return e.$set(a.repairData,"repairProgress",t)}}},[t("div",{staticClass:"p-12x flex flex-col items-start"},[t(c,{staticClass:"!w-full",attrs:{color:"#20a53a","text-inside":!0,"stroke-width":20,percentage:a.repairData.progress}}),t("span",[e._v(e._s(a.repairData.repairText))])],1)]),t(b,{attrs:{title:"忽略风险项",area:66,visible:a.isIgnoreAll,"show-footer":!1},on:{"update:visible":function(e){a.isIgnoreAll=e}}},[a.emptyDetail?e._e():t("div",{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:a.loading,expression:"loading"}],staticClass:"scan-body p-[2rem]"},[t(i,{class:"".concat(a.ignoreData.length?"":"!border-top-0"),attrs:{accordion:""},model:{value:a.activeMentIgnore,callback:function(e){a.activeMentIgnore=e},expression:"activeMentIgnore"}},[t("div",{staticClass:"module-list overflow-auto h-[38rem]"},[e._l(a.ignoreData,(function(r,n){return t("div",{key:"".concat(n),staticClass:"module-item text-[1.2rem]"},[t("div",{staticClass:"module-head flex items-center h-[5.4rem] justify-between border-b-1 pr-[0.8rem] w-full"},[t("div",{staticClass:"w-full flex items-center"},[t("span",{staticClass:"text-[1.2rem] h-[2.2rem] flex items-center px-8x rounded-[0.2rem] ml-8x mr-[1rem]",style:{color:a.levelData[r.level].color,backgroundColor:a.levelData[r.level].bg}},[e._v(e._s(a.levelData[r.level].text))]),t("div",{staticClass:"w-[36rem] max-w-[36rem] truncate",style:{color:a.levelData[r.level].color},attrs:{title:r.ps?r.ps:r.vuln_name}},[e._v(" "+e._s(r.ps?r.ps:r.vuln_name)+" ")])]),t("div",{staticClass:"flex items-center"},[t(w,{staticClass:"w-[6.6rem]",on:{click:function(e){return a.handleIgnore(r,!0)}}},[e._v(" 移除忽略 "),t("span",{staticClass:"text-[#999] mx-4x"},[e._v("|")])]),t(w,{staticClass:"w-[5.4rem] flex items-center",on:{click:function(e){return a.onToggle(r,a.ignoreData)}}},[e._v(" "+e._s(r.show?e.$t("HomeSecurityRisks.Fold"):e.$t("HomeSecurityRisks.Details"))),t("i",{class:"text-[1.4rem] text-[#999] ml-4x el-icon-arrow-"+(r.show?"up":"down")})])],1)]),t(Y,[t("div",{directives:[{name:"show",rawName:"v-show",value:r.show,expression:"item.show"}],staticClass:"px-[3rem] py-[3.2rem] bg-[#F8F8F8]"},[t("div",{staticClass:"flex items-center"},[t("div",{staticClass:"text-[#333]"},[e._v(" "+e._s(r.ps?e.$t("HomeSecurityRisks.RiskDetails[2]"):e.$t("HomeSecurityRisks.RiskDetails[5]"))+" ")]),t("div",{directives:[{name:"show",rawName:"v-show",value:r.msg,expression:"item.msg"}],staticClass:"collapse-item",domProps:{innerHTML:e._s(r.msg)}}),t("div",{directives:[{name:"show",rawName:"v-show",value:r.soft_name,expression:"item.soft_name"}],staticClass:"collapse-item"},[e._v(" "+e._s(r.soft_name?a.vulnerabilityInvolvesSoftware(r):"")+" ")])]),t("div",{staticClass:"flex mt-16x items-center"},[t("div",{directives:[{name:"t",rawName:"v-t",value:"HomeSecurityRisks.RiskDetails[3]",expression:"`HomeSecurityRisks.RiskDetails[3]`"}]}),r.tips?t("div",{staticClass:"collapse-item flex-col !items-start"},e._l(r.tips,(function(a,r){return t("p",{key:r,class:0==r?"":"mt-4x"},[e._v(" "+e._s(r+1)+"、"+e._s(a)+" ")])})),0):e._e(),r.vuln_solution?t("div",{staticClass:"collapse-item"},[e._v(" "+e._s(r.vuln_solution)+" ")]):e._e()]),t("div",{directives:[{name:"show",rawName:"v-show",value:r.remind,expression:"item.remind"}],staticClass:"flex mt-16x items-center"},[t("div",{directives:[{name:"t",rawName:"v-t",value:"HomeSecurityRisks.RiskDetails[6]",expression:"`HomeSecurityRisks.RiskDetails[6]`"}]}),t("div",{staticClass:"collapse-item"},[e._v(" "+e._s(r.remind)+" ")])])])])],1)})),a.ignoreData.length?e._e():t(u,{attrs:{description:"暂无忽略的风险项"}})],2)])],1)])],1)};e("default",y(q,z,[],!1,null,"aa0aeb05",null,null).exports)}}}))}();
