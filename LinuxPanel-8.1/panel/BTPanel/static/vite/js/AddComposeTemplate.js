import{_ as a}from"./index120.js?v=1714377894636";import{w as e,x as r,o as s}from"./element-lib.js?v=1714377894636";import{n as t}from"./main.js?v=1714377894636";import{e as o,v as m,b as i,h as l,j as n}from"./vue-lib.js?v=1714377894636";import{ae as d,af as c,ag as p}from"./docker.api.js?v=1714377894636";import{u}from"./docker.store.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./check.js?v=1714377894636";const f=t(o({__name:"AddComposeTemplate",props:{compData:{default:()=>({})}},setup(a,{expose:e}){const r=a,{proxy:s}=n(),t=s.$root,{getTList:o}=u(),f=m({name:"",remark:"",data:""}),g=i(),b=i({mode:"ace/mode/nginx",theme:"ace/theme/monokai",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!1,fontSize:"12px"}),v=i(),w=i(!1),x=i(!1),k={name:[{validator:(a,e,r)=>{""===e?r(new Error("请输入模板名")):r()},trigger:["blur"]}]};l((async()=>{var a;if(null==(a=r.compData.row)?void 0:a.id){x.value=!0,f.name=r.compData.row.name,f.remark=r.compData.row.remark;const a=await d({data:JSON.stringify({template_id:r.compData.row.id})});a.status?f.data=a.data.msg:s.$message.error(a.msg),x.value=!1}}));const j=()=>{v.value.validate((async a=>{var e;let m=null;if(a){if(m=t.loading(w,"提交中..."),null==(e=r.compData.row)?void 0:e.id){const a=await c({data:JSON.stringify({id:r.compData.row.id,name:f.name,remark:f.remark,data:f.data})});return void(a.status?(s.$emit("close"),o(),s.$message.success(a.msg)):(m.close(),s.$message.error(a.msg)))}{const a=await p({data:JSON.stringify({name:f.name,remark:f.remark,data:f.data})});a.status?(s.$emit("close"),o(),s.$message.success(a.msg)):(m.close(),s.$message.error(a.msg))}}}))};return e({onConfirm:j}),{__sfc:!0,vm:s,popupVm:t,getTList:o,props:r,cmdForm:f,aceEditor:g,config:b,cmdFormRef:v,disabled:w,loading:x,cmdRules:k,onConfirm:j}}}),(function(){var t=this,o=t._self._c,m=t._self._setupProxy;return o("div",{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:m.loading,expression:"loading"},{name:"bt-loading",rawName:"v-bt-loading:title",value:"正在获取模板消息，请稍候...",expression:"'正在获取模板消息，请稍候...'",arg:"title"}],staticClass:"flex flex-col p-16x lib-box"},[o(e,{ref:"cmdFormRef",staticClass:"relative w-full",attrs:{size:"small",model:m.cmdForm,rules:m.cmdRules,disabled:m.disabled,"label-position":"right"},nativeOn:{submit:function(a){a.preventDefault()}}},[o(r,{attrs:{prop:"name",label:"创建模板"}},[o(s,{staticClass:"!w-[35rem]",attrs:{placeholder:"请输入模板名"},model:{value:m.cmdForm.name,callback:function(a){t.$set(m.cmdForm,"name",a)},expression:"cmdForm.name"}})],1),o(r,{attrs:{prop:"remark",label:"备注"}},[o(s,{staticClass:"!w-[35rem]",attrs:{placeholder:"备注"},model:{value:m.cmdForm.remark,callback:function(a){t.$set(m.cmdForm,"remark",a)},expression:"cmdForm.remark"}})],1),o(r,{attrs:{prop:"data",label:"内容"}},[o("div",{staticClass:"max-h-[30rem] h-[30rem]"},[o(a,{ref:"aceEditor",attrs:{id:"templateEditor",config:m.config},model:{value:m.cmdForm.data,callback:function(a){t.$set(m.cmdForm,"data",a)},expression:"cmdForm.data"}})],1)])],1)],1)}),[],!1,null,"542928b2",null,null).exports;export{f as default};
