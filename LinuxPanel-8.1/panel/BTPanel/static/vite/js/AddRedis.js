import{_ as e}from"./index85.js?v=1714377894636";import{w as t,x as a,q as s,s as l}from"./element-lib.js?v=1714377894636";import{n as i}from"./main.js?v=1714377894636";import{e as r,A as m,v as o,b as d,f as n,j as p}from"./vue-lib.js?v=1714377894636";import{r as c,e as u}from"./index28.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./index77.js?v=1714377894636";import"./index42.js?v=1714377894636";import"./check.js?v=1714377894636";import"./mysql.store.js?v=1714377894636";const b=i(r({__name:"AddRedis",props:{compData:{default:{}}},setup(e,{expose:t}){const a=e,{tableParam:s}=m(c()),{getDbList:l,getDbValue:i}=c(),{proxy:r}=p(),b=o({db_idx:s.value.db_idx,name:"",val:"",endtime:""}),f=d(s.value.keyList),x=d([{title:"string",key:"string"},{title:"hash",key:"hash"},{title:"set",key:"set"},{title:"zset",key:"zset"},{title:"list",key:"list"}]),_=async e=>{let t=r.$load("正在操作中，请稍后...");try{let t={...b,sid:s.value.sid};""!==b.endtime&&"0"!==b.endtime&&0!==b.endtime||delete t.endtime;const a=await u({data:JSON.stringify(t)});if(r.$message.request(a),!a.status)return;i(),l(),await e()}catch(a){}finally{t&&t.close()}};return n((()=>a.compData),(e=>{e&&(b.name=e.name,b.val=e.val,b.endtime=e.endtime)}),{immediate:!0}),t({onConfirm:_}),{__sfc:!0,tableParam:s,getDbList:l,getDbValue:i,vm:r,props:a,addForm:b,dbList:f,typeOptions:x,onSubmit:_}}}),(function(){var i=this,r=i._self._c,m=i._self._setupProxy;return r("div",{staticClass:"p-20x"},[r(t,{attrs:{"label-position":"right","label-width":"80px",model:m.addForm}},[r(a,{attrs:{label:"数据库"}},[r(s,{staticClass:"w-[24rem]",attrs:{disabled:!!i.compData.val},model:{value:m.addForm.db_idx,callback:function(e){i.$set(m.addForm,"db_idx",e)},expression:"addForm.db_idx"}},i._l(m.dbList,(function(e,t){return r(l,{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),r(a,{attrs:{label:"键"}},[r(e,{attrs:{width:"24rem",placeholder:"请输入键名",disabled:!!i.compData.val},model:{value:m.addForm.name,callback:function(e){i.$set(m.addForm,"name",e)},expression:"addForm.name"}})],1),r(a,{attrs:{label:"值"}},[r(e,{attrs:{width:"24rem",placeholder:"请输入值",rows:"6",type:"textarea"},model:{value:m.addForm.val,callback:function(e){i.$set(m.addForm,"val",e)},expression:"addForm.val"}})],1),r(a,{attrs:{label:"有效期"}},[r(e,{attrs:{width:"24rem",placeholder:"为空则永不过期","text-type":"秒",min:0,type:"number"},model:{value:m.addForm.endtime,callback:function(e){i.$set(m.addForm,"endtime",e)},expression:"addForm.endtime"}})],1)],1),i._m(0)],1)}),[function(){var e=this,t=e._self._c;return e._self._setupProxy,t("ul",{staticClass:"mt-20x leading-8 text-[1.2rem] list-disc ml-36x"},[t("li",[e._v("有效期为0表示永久")])])}],!1,null,null,null,null).exports;export{b as default};
