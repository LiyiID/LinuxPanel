import{G as t,b1 as e,bF as s,n as a,q as l}from"./main.js?v=1714377894636";import{w as i,x as r,o}from"./element-lib.js?v=1714377894636";import{e as n,v as m,b as u,h as p,j as c}from"./vue-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";const f=a(n({__name:"index",setup(a){const{proxy:l}=c();let i=m({mustData:"",data:[]}),r=u([]),o=u([]);return p((async()=>{const{data:e}=await t({product_type:19,version:-1});r.value=e.value;for(let t=0;t<e.value.length;t++)i.data.push("");o.value=e.value.slice(1)})),{__sfc:!0,vm:l,formLabelAlign:i,questionsList:r,questionsListNoFirst:o,questionsRules:{mustData:[{required:!0,message:"请输入内容",trigger:"blur"}]},submit:async()=>{if(await l.$refs.formLabelAlignFrom.validate()){let a=l.$load("正在提交问卷，请稍后..."),o={};for(let t=0;t<r.value.length;t++)o[r.value[t].id]=0==t?i.mustData:i.data[t];try{await e({questions:JSON.stringify(o),product_type:19,software_name:"Enterprise-Edition-Survey",rate:0}),a.close(),localStorage.setItem("ltd_nps","1"),s(),l.$listeners.close()}catch(t){}finally{a.close()}}}}}}),(function(){var t,e,s=this,a=s._self._c,n=s._self._setupProxy;return a("div",{staticClass:"nps_survey_box"},[s._m(0),a("div",{staticClass:"text-[1.9rem] font-bold text-center text-[#000] mt-[2rem]",attrs:{"data-v-30672cd2":""}},[s._v(" "+s._s(null==(t=n.questionsList[0])?void 0:t.hint)+" ")]),a("div",{staticClass:"p-[2rem] flex flex-col items-center"},[a("div",{staticClass:"w-[100%]"},[a(i,{ref:"formLabelAlignFrom",attrs:{"label-position":"top","label-width":"80px",model:n.formLabelAlign,rules:n.questionsRules}},[a(r,{attrs:{label:null==(e=n.questionsList[0])?void 0:e.question,prop:"mustData"}},[a(o,{attrs:{type:"textarea",rows:3,maxlength:500,resize:"none",placeholder:"请留下您的建议"},model:{value:n.formLabelAlign.mustData,callback:function(t){s.$set(n.formLabelAlign,"mustData",t)},expression:"formLabelAlign.mustData"}})],1),s._l(n.questionsListNoFirst,(function(t,e){return a(r,{key:e,attrs:{label:t.question}},[a(o,{attrs:{type:"textarea",rows:3,maxlength:500,resize:"none",placeholder:"请留下您的建议"},model:{value:n.formLabelAlign.data[e+1],callback:function(t){s.$set(n.formLabelAlign.data,e+1,t)},expression:"formLabelAlign.data[index + 1]"}})],1)}))],2)],1),a(l,{staticClass:"w-[12.5rem] mt-[2rem]",attrs:{size:"large"},on:{click:n.submit}},[s._v("提交")])],1)])}),[function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"nps_survey_banner"},[e("span",[e("i"),t._v(" "),e("span",{staticStyle:{"vertical-align":"4px"}},[t._v("企业版用户专属调研")])])])}],!1,null,"fe0856ca",null,null).exports;export{f as default};
