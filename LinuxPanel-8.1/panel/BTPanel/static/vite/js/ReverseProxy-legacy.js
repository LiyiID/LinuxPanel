!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return r};var t,r={},a=Object.prototype,o=a.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(t){p=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,o=Object.create(a.prototype),c=new $(n||[]);return i(o,"_invoke",{value:S(e,r,c)}),o}function y(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var d="suspendedStart",m="suspendedYield",h="executing",v="completed",x={};function b(){}function g(){}function w(){}var k={};p(k,u,(function(){return this}));var j=Object.getPrototypeOf,D=j&&j(j(R([])));D&&D!==a&&o.call(D,u)&&(k=D);var _=w.prototype=b.prototype=Object.create(k);function E(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function L(t,r){function n(a,i,c,u){var s=y(t[a],t,i);if("throw"!==s.type){var l=s.arg,p=l.value;return p&&"object"==e(p)&&o.call(p,"__await")?r.resolve(p.__await).then((function(e){n("next",e,c,u)}),(function(e){n("throw",e,c,u)})):r.resolve(p).then((function(e){l.value=e,c(l)}),(function(e){return n("throw",e,c,u)}))}u(s.arg)}var a;i(this,"_invoke",{value:function(e,t){function o(){return new r((function(r,a){n(e,t,r,a)}))}return a=a?a.then(o,o):o()}})}function S(e,r,n){var a=d;return function(o,i){if(a===h)throw new Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var u=O(c,n);if(u){if(u===x)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var s=y(e,r,n);if("normal"===s.type){if(a=n.done?v:m,s.arg===x)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a=v,n.method="throw",n.arg=s.arg)}}}function O(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,O(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),x;var o=y(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,x;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,x):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,x)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function $(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function R(r){if(r||""===r){var n=r[u];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,i=function e(){for(;++a<r.length;)if(o.call(r,a))return e.value=r[a],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(e(r)+" is not iterable")}return g.prototype=w,i(_,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:g,configurable:!0}),g.displayName=p(w,l,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},r.awrap=function(e){return{__await:e}},E(L.prototype),p(L.prototype,s,(function(){return this})),r.AsyncIterator=L,r.async=function(e,t,n,a,o){void 0===o&&(o=Promise);var i=new L(f(e,t,n,a),o);return r.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(_),p(_,l,"Generator"),p(_,u,(function(){return this})),p(_,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=R,$.prototype={constructor:$,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,a){return c.type="throw",c.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),s=o.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,x):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),x},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),x}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;C(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),x}},r}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(t,r,n){var a;return a=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,r||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(r,"string"),(r="symbol"==e(a)?a:String(a))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function c(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(s){return void r(s)}c.done?t(u):Promise.resolve(u).then(n,a)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){c(o,n,a,i,u,"next",e)}function u(e){c(o,n,a,i,u,"throw",e)}i(void 0)}))}}System.register(["./main-legacy.js?v=1714377894636","./index-legacy120.js?v=1714377894636","./index-legacy118.js?v=1714377894636","./index-legacy85.js?v=1714377894636","./element-lib-legacy.js?v=1714377894636","./form-item-legacy.js?v=1714377894636","./index-legacy46.js?v=1714377894636","./form-legacy.js?v=1714377894636","./index-legacy53.js?v=1714377894636","./index-legacy39.js?v=1714377894636","./index-legacy59.js?v=1714377894636","./vue-lib-legacy.js?v=1714377894636","./confirm-legacy.js?v=1714377894636","./index-legacy38.js?v=1714377894636","./site.store-legacy.js?v=1714377894636","./index-legacy61.js?v=1714377894636","./site.popup-legacy.js?v=1714377894636","./locales-lib-legacy.js?v=1714377894636","./modulepreload-polyfill-legacy.js?v=1714377894636","./preload-helper-legacy.js?v=1714377894636","./request-lib-legacy.js?v=1714377894636","./__commonjsHelpers__-legacy.js?v=1714377894636","./public-lib-legacy.js?v=1714377894636","./switch-legacy.js?v=1714377894636","./index.vue_vue_type_style_index_0_lang-legacy.js?v=1714377894636","./progress-legacy.js?v=1714377894636","./select-legacy.js?v=1714377894636","./empty-legacy.js?v=1714377894636","./config-legacy.js?v=1714377894636","./index-legacy45.js?v=1714377894636","./check-legacy.js?v=1714377894636","./element-ui.common-legacy.js?v=1714377894636","./date-util-legacy.js?v=1714377894636","./vdom-legacy.js?v=1714377894636","./index-legacy62.js?v=1714377894636","./cascader-panel-legacy.js?v=1714377894636"],(function(e,r){"use strict";var a,i,c,s,l,p,f,y,d,m,h,v,x,b,g,w,k,j,D,_,E,L,S,O,P,C,$,R,F,N,T,q,U,G,A,I,J,M,V,B,H;return{setters:[function(e){a=e.g,i=e.a,c=e.o,s=e.n,l=e.q,p=e.b},function(e){f=e._},function(e){y=e._},function(e){d=e._},function(e){m=e.w,h=e.x},null,function(e){v=e._},null,function(e){x=e._},function(e){b=e._},function(e){g=e._},function(e){w=e.e,k=e.b,j=e.v,D=e.H,_=e.h,E=e.j},function(e){L=e.o,S=e.a},function(e){O=e.a,P=e.e},function(e){C=e.cU,$=e.cV,R=e.cW,F=e.cX,N=e.cY,T=e.cZ,q=e.c_,U=e.c$,G=e.d0,A=e.d1,I=e.d2,J=e.d3,M=e.d4,V=e.d5},function(e){B=e.o},function(e){H=e.r},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var r=w({__name:"ReverseProxy",props:{compData:{default:function(){return{}}}},setup:function(e){var r,s,l,p=e,f=E().proxy,y=a().refs.webServerType,d=k(""),m=k([]),h=k(""),v=k([]),x=k([]),b=k(!1),g=k(!1),w=k({}),Y=j({proxyname:[{required:!0,message:"请输入代理名称",trigger:["blur","change"]},{trigger:["blur","input","change"],validator:function(e,t,r){t.length<3||t.length>40?r(new Error("代理名称必须大于3小于40个字符串")):r()}}],proxysite:[{required:!0,message:"请输入目标url",trigger:"blur",validator:function(e,t,r){t?r():r(new Error("目标URL不能为空"))}}],todomain:[{required:!0,message:"请输入发送域名",trigger:["blur","change"]}]}),z=k({isEdit:!1,type:!0,cache:!1,advanced:!1,proxyname:"",cachetime:1,proxydir:"/",proxysite:"http://",todomain:"",subfilter:[{sub1:"",sub2:"",id:1}],subNum:1,path:"",content:""}),W=k({mode:"ace/mode/nginx",theme:"ace/theme/chrome",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!1,fontSize:"12px"}),X=k(!1),Z=k(!1),K=k([{text:"代理目录：访问这个目录时将会把目标URL的内容返回并显示(需要开启高级功能)"},{text:"目标URL：可以填写你需要代理的站点，目标URL必须为可正常访问的URL，否则将返回错误"},{text:"发送域名：将域名添加到请求头传递到代理服务器，默认为目标URL域名，若设置不当可能导致代理无法正常运行"},{text:"内容替换：只能在使用nginx时提供，最多可以添加3条替换内容,如果不需要替换请留空"}]),Q=function(){var e=u(n().mark((function e(t,r){var a,i,c,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=f.$load("正在修改状态中，请稍后..."),e.prev=1,u={},"cache"===r?u.cache=t.cache?0:1:u.type=t.type?0:1,"proxy"!==p.compData.project_type){e.next=10;break}return e.next=7,T(o(o({},t),{},{subfilter:JSON.stringify(t.subfilter)},u));case 7:c=e.sent,e.next=19;break;case 10:if("phpasync"!==p.compData.project_type){e.next=16;break}return e.next=13,C(o(o({},t),{},{subfilter:JSON.stringify(t.subfilter)},u));case 13:c=e.sent,e.next=19;break;case 16:return e.next=18,$(o(o({},t),{},{subfilter:JSON.stringify(t.subfilter)},u));case 18:c=e.sent;case 19:f.$message.request(c),(null!==(i=c.data)&&void 0!==i&&i.status||c.status)&&he(),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(1);case 26:return e.prev=26,a.close(),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[1,23,26,29]])})));return function(t,r){return e.apply(this,arguments)}}(),ee=function(){var e=u(n().mark((function e(t){var r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q({sitename:p.compData.name,proxyname:t.proxyname,webserver:y.value});case 3:r=e.sent,!1===(a=r.data).status?f.$message.request(a):(z.value.content=a[0].data,z.value.path=a[1],z.value.proxyname=t.proxyname,Z.value=!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=u(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=f.$load("正在保存配置文件，请稍后..."),"phpasync"!==p.compData.project_type){e.next=8;break}return e.next=5,U({path:z.value.path,config:z.value.content,encoding:"utf-8"});case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,G({path:z.value.path,data:z.value.content,encoding:"utf-8"});case 10:r=e.sent;case 11:t.close(),f.$message.request(r.data),r.data.status&&(Z.value=!1,ae(),he()),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=u(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z.value.isEdit=!0,z.value.proxyname=t.proxyname,z.value.proxydir=t.proxydir,z.value.proxysite=t.proxysite,z.value.todomain=t.todomain,z.value.type=!!t.type,z.value.cache=!!t.cache,z.value.advanced=!!t.advanced,z.value.cachetime=t.cachetime,z.value.subfilter=t.subfilter.map((function(e,t){return{sub1:e.sub1,sub2:e.sub2,id:t}})).filter((function(e){return""!==e.sub1})),X.value=!0;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=u(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ae(),X.value=!0;case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=u(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z.value.isEdit=!1,z.value.proxyname="",z.value.proxydir="/",z.value.proxysite="http://",z.value.todomain="",z.value.type=!0,z.value.cache=!1,z.value.advanced=!1,z.value.cachetime=1,z.value.subfilter=[{sub1:"",sub2:"",id:1}],z.value.subNum=1;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=u(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(3!==z.value.subfilter.length){e.next=3;break}return f.$message.error("最多添加三条内容替换"),e.abrupt("return");case 3:z.value.subfilter.push({sub1:"",sub2:"",id:100*Math.random()});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=u(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==z.value.subfilter.length){e.next=3;break}return f.$message.error("至少保留一条内容替换"),e.abrupt("return");case 3:z.value.subfilter=z.value.subfilter.filter((function(e){return e.id!==t.id}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(e){for(var r=t(e);r.length<3;)r.push({sub1:"",sub2:""});return r.map((function(e,t){return{sub1:e.sub1,sub2:e.sub2,id:100*Math.random()}}))},ue=function(){var e=u(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.$refs.proxyForm.validate(function(){var e=u(n().mark((function e(t){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.abrupt("return");case 4:r=f.$load("正在提交中，请稍后..."),L({$refs:w.value,loading:{disable:g,text:"提交中，请稍候..."},request:function(){var e=u(n().mark((function e(){var t,a,o,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ce(z.value.subfilter).map((function(e){return{sub1:e.sub1,sub2:e.sub2}})),o={subfilter:JSON.stringify(a),type:z.value.type?1:0,cache:z.value.cache?1:0,advanced:z.value.advanced?1:0,sitename:p.compData.name,proxyname:z.value.proxyname,proxydir:z.value.proxydir,proxysite:z.value.proxysite,todomain:z.value.todomain,cachetime:z.value.cachetime},"phpasync"!==p.compData.project_type){e.next=15;break}if(!z.value.isEdit){e.next=9;break}return e.next=6,C(o);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,A(o);case 11:e.t0=e.sent;case 12:i=e.t0,e.next=25;break;case 15:if(!z.value.isEdit){e.next=21;break}return e.next=18,$(o);case 18:e.t1=e.sent,e.next=24;break;case 21:return e.next=23,I(o);case 23:e.t1=e.sent;case 24:i=e.t1;case 25:f.$message.request(i.data?i.data:i),(null!==(t=i.data)&&void 0!==t&&t.status||i.status)&&(he(),X.value=!1),r.close();case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=k([{label:"名称",prop:"proxyname"},{label:"结果",render:function(e){return D("span",{class:e.status?"text-primary":"text-danger"},e.msg)}}]),le=function(){var e=u(n().mark((function e(t,r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S({confirm:{icon:"warning",title:r?"批量删除反向代理规则":"删除反向代理规则".concat(t.proxyname),message:r?"批量删除选中的规则后，配置的反向代理规则将会彻底失效，是否继续操作？":"删除选中的规则后，配置的反向代理规则将会彻底失效，是否继续操作？"},loading:"正在删除，请稍后...",request:function(){var e=u(n().mark((function e(){var a,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return a=t.map((function(e){return{proxyname:e.proxyname,id:e.id}})),o=[],e.next=5,a.forEach(function(){var e=u(n().mark((function e(t,r){var i,c,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("proxy"!==p.compData.project_type){e.next=6;break}return e.next=3,J({sitename:p.compData.name,proxyname:[t.proxyname]});case 3:u=e.sent,e.next=15;break;case 6:if("phpasync"!==p.compData.project_type){e.next=12;break}return e.next=9,M({sitename:p.compData.name,proxyname:t.proxyname});case 9:u=e.sent,e.next=15;break;case 12:return e.next=14,V({sitename:p.compData.name,proxyname:[t.proxyname]});case 14:u=e.sent;case 15:if(o.push({proxyname:t.proxyname,status:(null===(i=u.data)||void 0===i?void 0:i.status)||u.status,msg:(null===(c=u.data)||void 0===c?void 0:c.msg)||u.msg}),r!==a.length-1){e.next=21;break}return e.next=19,H({resultData:o,resultTitle:"删除反向代理规则",resultColumn:se.value});case 19:he(),close();case 21:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",null);case 8:if("proxy"!==p.compData.project_type){e.next=14;break}return e.next=11,J({sitename:p.compData.name,proxyname:[t.proxyname]});case 11:case 17:case 22:return e.abrupt("return",e.sent);case 14:if("phpasync"!==p.compData.project_type){e.next=20;break}return e.next=17,M({sitename:p.compData.name,proxyname:t.proxyname});case 20:return e.next=22,V({sitename:p.compData.name,proxyname:[t.proxyname]});case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),complete:function(){return u(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:he();case 1:case"end":return e.stop()}}),e)})))()}});case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),pe=k([{type:"selection"},{label:"名称",prop:"proxyname"},{label:"代理目录",prop:"proxydir"},{label:"目标URL",prop:"proxysite",width:140,render:function(e){return D(i,{class:"truncate block",on:{click:function(){window.open(e.proxysite)}}},e.proxysite)}},{prop:"cache",label:"缓存",width:60,render:function(e){return D(i,{class:e.cache?"text-primary":"!text-danger",on:{click:function(){Q(e,"cache")}}},e.cache?"已开启":"已关闭")}},O({prop:"type",event:Q,data:["已暂停","运行中"]}),P([{onClick:ee,title:"配置文件",width:50},{onClick:re,title:"编辑"},{onClick:function(e){le(e)},title:"删除"}])]),fe=k([{label:"启用反向代理规则",value:"enable",diyBatch:(l=u(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de(!0);case 1:case"end":return e.stop()}}),e)}))),function(){return l.apply(this,arguments)})},{label:"停用反向代理规则",value:"disable",diyBatch:(s=u(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:de(!1);case 1:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})},{label:"删除反向代理规则",value:"delete",diyBatch:(r=u(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le(v.value,!0);case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})}]),ye=j({isRecurrence:!1,describe:{title:"批量删除脚本",th:"脚本",message:"批量删除后脚本信息将无法恢复，是否继续？",propsValue:"name"}}),de=function(){var e=u(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B({title:t?"批量启用当前选中的规则后，配置的反向代理规则将继续生效，是否继续操作？":"批量停用当前选中的规则后，配置的反向代理规则将会失效，是否继续操作？",dataList:v.value,titleType:t?"批量启用反向代理规则":"批量停用反向代理规则",requestFun:function(){var e=u(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("phpasync"!==p.compData.project_type){e.next=6;break}return e.next=3,C(o(o({},r),{},{subfilter:JSON.stringify(r.subfilter),type:t?1:0}));case 3:case 8:return e.abrupt("return",e.sent);case 6:return e.next=8,$(o(o({},r),{},{subfilter:JSON.stringify(r.subfilter),type:t?1:0}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),isRecurrence:!0,tableColumn:[{prop:"proxyname",label:"名称"},{prop:"result",label:"状态"}],isReturnResult:!0,callback:function(){he()}});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=u(n().mark((function e(t,r,a){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),he=function(){var e=u(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b.value=!0,e.prev=1,"proxy"!==p.compData.project_type){e.next=8;break}return e.next=5,R({sitename:p.compData.name});case 5:t=e.sent,e.next=17;break;case 8:if("phpasync"!==p.compData.project_type){e.next=14;break}return e.next=11,F({sitename:p.compData.name});case 11:t=e.sent,e.next=17;break;case 14:return e.next=16,N({sitename:p.compData.name});case 16:t=e.sent;case 17:x.value=t.data,b.value=!1,e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(){return e.apply(this,arguments)}}();return _(u(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:he();case 1:case"end":return e.stop()}}),e)})))),{__sfc:!0,vm:f,props:p,webServerType:y,domainValue:d,pathData:m,pathValue:h,checkedList:v,tableData:x,tableLoading:b,formDisabled:g,proxyForm:w,proxyFormRules:Y,rowData:z,config:W,proxyPopup:X,configFilePopup:Z,helpList:K,handelInputTodo:function(e){var t=e.replace(/^http[s]?:\/\//,"");t=t.replace(/(:|\?|\/|\\)(.*)$/,""),z.value.todomain=t},changeEvent:Q,configFileEvent:ee,saveFile:te,editDataEvent:re,addProxy:ne,resetProxy:ae,addSub:oe,delSub:ie,subfilterHandle:ce,editProxyConfirm:ue,resultColumn:se,deleteDataEvent:le,tableColumns:pe,batchGroup:fe,batchConfig:ye,multStatusEvent:de,handleSelect:function(e){v.value=e},batchEvent:me,getReverseProxy:he,isRelease:c}}});e("default",s(r,(function(){var e=this,t=e._self._c,r=e._self._setupProxy;return t("div",[t(g,{scopedSlots:e._u([{key:"header-left",fn:function(){return[t(l,{on:{click:r.addProxy}},[e._v("添加反向代理")])]},proxy:!0},{key:"header-right",fn:function(){},proxy:!0},{key:"content",fn:function(){return[t(b,{directives:[{name:"loading",rawName:"v-loading",value:r.tableLoading,expression:"tableLoading"}],attrs:{column:r.tableColumns,data:r.tableData},on:{"selection-change":r.handleSelect}})]},proxy:!0},{key:"footer-left",fn:function(){return[t(x,{staticClass:"mt-12x",attrs:{data:r.batchGroup,config:r.batchConfig,"batch-fn":r.batchEvent}})]},proxy:!0},{key:"footer-right",fn:function(){},proxy:!0},{key:"popup",fn:function(){},proxy:!0}])}),e._m(0),t(p,{attrs:{title:r.rowData.isEdit?"修改反向代理【".concat(r.rowData.proxyname,"】"):"添加反向代理",visible:r.proxyPopup,"show-footer":!0,area:68},on:{"update:visible":function(e){r.proxyPopup=e},confirm:r.editProxyConfirm}},[t("div",{staticClass:"p-20x"},[t(m,{ref:"proxyForm",attrs:{model:r.rowData,rules:r.proxyFormRules,disabled:r.formDisabled,"label-width":"80px"}},[t(h,{attrs:{label:"开启代理"}},[t("div",{staticClass:"flex items-center"},[t(v,{model:{value:r.rowData.type,callback:function(t){e.$set(r.rowData,"type",t)},expression:"rowData.type"}}),r.isRelease?e._e():t(h,{staticClass:"!mt-0",attrs:{label:"开启缓存"}},[t(v,{model:{value:r.rowData.cache,callback:function(t){e.$set(r.rowData,"cache",t)},expression:"rowData.cache"}})],1),t(h,{staticClass:"!mt-0",attrs:{label:"高级功能"}},[t(v,{model:{value:r.rowData.advanced,callback:function(t){e.$set(r.rowData,"advanced",t)},expression:"rowData.advanced"}})],1)],1)]),t(h,{attrs:{label:"代理名称",prop:"proxyname"}},[t(d,{attrs:{disabled:r.rowData.isEdit,placeholder:"请输入代理名称",width:"20rem"},model:{value:r.rowData.proxyname,callback:function(t){e.$set(r.rowData,"proxyname",t)},expression:"rowData.proxyname"}})],1),r.rowData.cache?t(h,{attrs:{label:"缓存时间",prop:"cachetime"}},[t(d,{attrs:{placeholder:"请输入缓存时间",width:"20rem",textType:"分钟"},model:{value:r.rowData.cachetime,callback:function(t){e.$set(r.rowData,"cachetime",t)},expression:"rowData.cachetime"}})],1):e._e(),r.rowData.advanced?t(h,{attrs:{label:"代理目录",prop:"proxydir"}},[t(d,{attrs:{placeholder:"请输入代理目录",width:"20rem"},model:{value:r.rowData.proxydir,callback:function(t){e.$set(r.rowData,"proxydir",t)},expression:"rowData.proxydir"}})],1):e._e(),t(h,{attrs:{label:"目标URL",prop:"proxysite","label-width":"80px"}},[t("div",{staticClass:"flex items-center"},[t(d,{attrs:{placeholder:"请输入目标URL",width:"20rem"},on:{input:r.handelInputTodo},model:{value:r.rowData.proxysite,callback:function(t){e.$set(r.rowData,"proxysite",t)},expression:"rowData.proxysite"}}),t(h,{attrs:{label:"发送域名",prop:"todomain","label-width":"50px"}},[t(d,{attrs:{placeholder:"请输入发送域名",width:"20rem"},model:{value:r.rowData.todomain,callback:function(t){e.$set(r.rowData,"todomain",t)},expression:"rowData.todomain"}})],1)],1)]),t(h,{attrs:{label:"内容替换"}},[e._l(r.rowData.subfilter,(function(n,a){return[t("div",{key:n.id,staticClass:"flex items-center mb-1rem"},[t(d,{staticClass:"mr-2rem",attrs:{placeholder:"被替换的文本，可留空",width:"20rem"},model:{value:n.sub1,callback:function(t){e.$set(n,"sub1",t)},expression:"item.sub1"}}),t(d,{staticClass:"mr-1rem",attrs:{placeholder:"替换为，可留空",width:"20rem"},model:{value:n.sub2,callback:function(t){e.$set(n,"sub2",t)},expression:"item.sub2"}}),t(i,{attrs:{type:"danger"},on:{click:function(e){return r.delSub(n)}}},[e._v("删除")])],1)]})),t(l,{staticClass:"!mt-1rem",attrs:{disabled:3===r.rowData.subfilter.length,icon:"el-icon-plus"},on:{click:r.addSub}},[e._v("添加内容替换")])],2)],1),t(y,{staticClass:"mt-2rem",attrs:{list:r.helpList,"list-type":"disc"}})],1)]),t(p,{attrs:{title:"编辑配置文件【".concat(r.rowData.proxyname,"】"),visible:r.configFilePopup,area:55},on:{"update:visible":function(e){r.configFilePopup=e}}},[t("div",{staticClass:"p-2rem"},[t("div",{staticClass:"text-[#666] h-[2rem] leading-[2rem] mb-[1rem]"},[e._v("提示：Ctrl+S 保存")]),t(f,{staticClass:"!h-38rem",attrs:{filePath:r.rowData.path,config:r.config,"is-request":!1},model:{value:r.rowData.content,callback:function(t){e.$set(r.rowData,"content",t)},expression:"rowData.content"}}),t(l,{staticClass:"!mt-2rem",on:{click:r.saveFile}},[e._v("保存")])],1)])],1)}),[function(){var e=this,t=e._self._c;return e._self._setupProxy,t("ul",{staticClass:"mt-20x leading-8 text-[1.2rem] list-disc ml-20x"},[t("li",[e._v("设置了反向代理后，【访问限制】中的相应路径的规则将会失效")])])}],!1,null,"d153b984",null,null).exports)}}}))}();
