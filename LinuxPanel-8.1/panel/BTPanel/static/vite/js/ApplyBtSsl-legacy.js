!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t=function(){return n};var r,n={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},l="function"==typeof Symbol?Symbol:{},i=l.iterator||"@@iterator",c=l.asyncIterator||"@@asyncIterator",u=l.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(r){p=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,a=Object.create(o.prototype),l=new O(n||[]);return s(a,"_invoke",{value:k(e,r,l)}),a}function g(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}n.wrap=f;var h="suspendedStart",y="suspendedYield",d="executing",m="completed",v={};function b(){}function w(){}function x(){}var S={};p(S,i,(function(){return this}));var L=Object.getPrototypeOf,I=L&&L(L($([])));I&&I!==o&&a.call(I,i)&&(S=I);var _=x.prototype=b.prototype=Object.create(S);function j(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function C(t,r){function n(o,s,l,i){var c=g(t[o],t,s);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==e(p)&&a.call(p,"__await")?r.resolve(p.__await).then((function(e){n("next",e,l,i)}),(function(e){n("throw",e,l,i)})):r.resolve(p).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,i)}))}i(c.arg)}var o;s(this,"_invoke",{value:function(e,t){function a(){return new r((function(r,o){n(e,t,r,o)}))}return o=o?o.then(a,a):a()}})}function k(e,t,n){var o=h;return function(a,s){if(o===d)throw new Error("Generator is already running");if(o===m){if("throw"===a)throw s;return{value:r,done:!0}}for(n.method=a,n.arg=s;;){var l=n.delegate;if(l){var i=E(l,n);if(i){if(i===v)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=g(e,t,n);if("normal"===c.type){if(o=n.done?m:y,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function E(e,t){var n=t.method,o=e.iterator[n];if(o===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=r,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var a=g(o,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,v;var s=a.arg;return s?s.done?(t[e.resultName]=s.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,v):s:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function $(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function e(){for(;++o<t.length;)if(a.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return s.next=s}}throw new TypeError(e(t)+" is not iterable")}return w.prototype=x,s(_,"constructor",{value:x,configurable:!0}),s(x,"constructor",{value:w,configurable:!0}),w.displayName=p(x,u,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,p(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},n.awrap=function(e){return{__await:e}},j(C.prototype),p(C.prototype,c,(function(){return this})),n.AsyncIterator=C,n.async=function(e,t,r,o,a){void 0===a&&(a=Promise);var s=new C(f(e,t,r,o),a);return n.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},j(_),p(_,u,"Generator"),p(_,i,(function(){return this})),p(_,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},n.values=$,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return l.type="throw",l.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],l=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var i=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(i&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(i){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:$(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),v}},n}function r(e,t,r,n,o,a,s){try{var l=e[a](s),i=l.value}catch(c){return void r(c)}l.done?t(i):Promise.resolve(i).then(n,o)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var s=e.apply(t,n);function l(e){r(s,o,a,l,i,"next",e)}function i(e){r(s,o,a,l,i,"throw",e)}l(void 0)}))}}System.register(["./main-legacy.js?v=1714377894636","./element-lib-legacy.js?v=1714377894636","./form-item-legacy.js?v=1714377894636","./index-legacy130.js?v=1714377894636","./select-legacy.js?v=1714377894636","./form-legacy.js?v=1714377894636","./alert-legacy.js?v=1714377894636","./vue-lib-legacy.js?v=1714377894636","./site.store-legacy.js?v=1714377894636","./check-legacy.js?v=1714377894636","./locales-lib-legacy.js?v=1714377894636","./modulepreload-polyfill-legacy.js?v=1714377894636","./preload-helper-legacy.js?v=1714377894636","./request-lib-legacy.js?v=1714377894636","./__commonjsHelpers__-legacy.js?v=1714377894636","./public-lib-legacy.js?v=1714377894636"],(function(e,r){"use strict";var o,a,s,l,i,c,u,p,f,g,h,y,d,m,v,b,w,x;return{setters:[function(e){o=e.n,a=e.q},function(e){s=e.a9,l=e.w,i=e.x,c=e.q,u=e.s},null,function(e){p=e._},null,null,null,function(e){f=e.e,g=e.b,h=e.h,y=e.j},function(e){d=e.g,m=e.by,v=e.bz,b=e.bA,w=e.bB},function(e){x=e.e},null,null,null,null,null,null],execute:function(){var r=f({__name:"ApplyBtSsl",setup:function(e){var r,o=d(),a=o.refs,s=a.domainAllList,l=a.siteInfo,i=o.getDomainAllList,c=o.getSslInfoConfig,u=o.getTrustAsiaDataList,p=o.getPhpModulesList,f=o.getModulesList,S=y().proxy,L=g(),I=g({domain:l.value.name||(null===(r=s.value)||void 0===r||null===(r=r.data[0])||void 0===r?void 0:r.name),orgName:"",orgRegion:"",orgCity:"",orgAddress:"",orgPhone:"",orgPostalCode:"",orgDivision:"总务",path:l.value.path}),_=g({orgName:[{required:!0,message:"请输入个人/公司名称",trigger:["bulr","change"]}],orgRegion:[{required:!0,message:"请输入所在省份",trigger:["bulr","change"]}],orgCity:[{required:!0,message:"请输入所在市/县",trigger:["bulr","change"]}],orgAddress:[{required:!0,message:"请输入个人/公司地址",trigger:["bulr","change"]}],orgPhone:[{required:!0,message:"请输入手机号码",validator:function(e,t,r){x(t)?r():r(new Error("请输入正确的手机号码"))},trigger:["bulr","change"]}],orgPostalCode:[{required:!0,message:"请输入邮政编码",validator:function(e,t,r){6===t.length?r():r(new Error("请输入正确的邮政编码"))},trigger:["bulr","change"]}]}),j=function(){var e=n(t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null,S.$refs.applySslInfoForm.validate(function(){var e=n(t().mark((function e(n){var o,a,s,i,c,p,f;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=34;break}return e.prev=1,r=S.$load("正在提交证书申请资料，请稍后..."),e.next=5,m(I.value);case 5:if(o=e.sent,a=o.data,s=o.msg,!o.status){e.next=23;break}return S.$emit("close"),S.$message.success(a.msg||s||"申请成功"),r&&r.close(),r=S.$load("正在验证证书申请状态，请稍后..."),e.next=16,v({partnerOrderId:a.partnerOrderId,siteName:l.value.name});case 16:i=e.sent,c=i.data,p=i.status,f=i.msg,p?"COMPLETED"==c.stateCode?(S.$message.success("验证成功！即将开始证书部署！"),C(a)):S.$message.success("等待CA验证中，若长时间未能成功验证，请登录官网使用DNS方式重新申请..."):S.$message.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:f,type:"error",duration:0,showClose:!0}),e.next=24;break;case 23:S.$message.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:a.msg||s,type:"error",duration:0,showClose:!0});case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1);case 29:return e.prev=29,r&&r.close(),e.next=33,u();case 33:return e.finish(29);case 34:case"end":return e.stop()}}),e,null,[[1,26,29,34]])})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=n(t().mark((function e(r){var n,o,a,s,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,e.prev=1,n=S.$load("正在部署证书，请稍后..."),"proxy"!=l.value.project_type&&"nginx"!=l.value.project_type){e.next=9;break}return e.next=6,b({site_name:l.value.name,partnerOrderId:r.partnerOrderId});case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,w({partnerOrderId:r.partnerOrderId,siteName:l.value.name});case 11:e.t0=e.sent;case 12:if(o=e.t0,!(a=o.data).status){e.next=22;break}return S.$message.request(a),e.next=18,u();case 18:c(),"PHP"===l.value.project_type?p():("node"===(i=null===(s=l.value.project_type)||void 0===s?void 0:s.toLowerCase())&&(i="nodejs"),f(i)),e.next=23;break;case 22:S.$message.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:"当前证书已成功申请并验证，自动部署失败，请尝试手动部署证书！\n"+a.msg,type:res.status?"success":"error",showClose:!res.status});case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(1);case 28:return e.prev=28,n&&n.close(),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[1,25,28,31]])})));return function(t){return e.apply(this,arguments)}}();return h((function(){})),{__sfc:!0,domainAllList:s,siteInfo:l,getDomainAllList:i,getSslInfoConfig:c,getTrustAsiaDataList:u,getPhpModulesList:p,getModulesList:f,vm:S,applySslInfoForm:L,applySslInfo:I,rules:_,onConfirm:j,deployCert:C}}});e("default",o(r,(function(){var e,t=this,r=t._self._c,n=t._self._setupProxy;return r("div",{staticClass:"p-16x"},[r(s,{attrs:{type:"error",closable:!1},scopedSlots:t._u([{key:"title",fn:function(){return[r("span",{staticClass:"text-[1.2rem]"},[r("i",{attrs:{calss:"el-icon-warning-outline text-[1.2rem]"}}),r("span",[t._v(" 禁止含有诈骗、赌博、色情、木马、病毒等违法违规业务信息的站点申请SSL证书，如有违反，撤销申请，停用账号。 ")])])]},proxy:!0}])}),r(l,{ref:"applySslInfoForm",staticClass:"mt-16x pb-16x",attrs:{rules:n.rules,model:n.applySslInfo,"label-width":"100px"}},[r(i,{attrs:{label:"证书信息"}},[r("span",{staticClass:"text-primary"},[t._v(" TrustAsia TLS RSA CA(免费版)")])]),r(i,{attrs:{label:"域名",prop:"domain"}},[r(c,{attrs:{placeholder:"请选择"},model:{value:n.applySslInfo.domain,callback:function(e){t.$set(n.applySslInfo,"domain",e)},expression:"applySslInfo.domain"}},t._l(null===(e=n.domainAllList)||void 0===e?void 0:e.data,(function(e){return r(u,{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),r(i,{attrs:{label:"个人/公司名称",prop:"orgName"}},[r(p,{attrs:{"custom-class":"!w-[36rem]","placeholder-tips":"请输入个人/公司名称，必填项"},model:{value:n.applySslInfo.orgName,callback:function(e){t.$set(n.applySslInfo,"orgName",e)},expression:"applySslInfo.orgName"}})],1),r(i,{attrs:{label:"所在地区",prop:"orgRegion"}},[r("div",{staticClass:"flex flex-row"},[r(p,{attrs:{"custom-class":"mr-16x !w-[17rem]","placeholder-tips":"请输入所在省份，必填项"},model:{value:n.applySslInfo.orgRegion,callback:function(e){t.$set(n.applySslInfo,"orgRegion",e)},expression:"applySslInfo.orgRegion"}}),r(p,{attrs:{"custom-class":"!w-[17.4rem]","placeholder-tips":"请输入所在市/县，必填项"},model:{value:n.applySslInfo.orgCity,callback:function(e){t.$set(n.applySslInfo,"orgCity",e)},expression:"applySslInfo.orgCity"}})],1)]),r(i,{attrs:{label:"地址",prop:"orgAddress"}},[r(p,{attrs:{"custom-class":"!w-[36rem]","placeholder-tips":"请输入个人/公司地址，必填项"},model:{value:n.applySslInfo.orgAddress,callback:function(e){t.$set(n.applySslInfo,"orgAddress",e)},expression:"applySslInfo.orgAddress"}})],1),r(i,{attrs:{label:"手机",prop:"orgPhone"}},[r(p,{attrs:{"custom-class":"!w-[36rem]","placeholder-tips":"请输入手机号码，必填项"},model:{value:n.applySslInfo.orgPhone,callback:function(e){t.$set(n.applySslInfo,"orgPhone",e)},expression:"applySslInfo.orgPhone"}})],1),r(i,{attrs:{label:"邮政编码",prop:"orgPostalCode"}},[r(p,{attrs:{"custom-class":"!w-[36rem]","placeholder-tips":"请输入邮政编码，必填项"},model:{value:n.applySslInfo.orgPostalCode,callback:function(e){t.$set(n.applySslInfo,"orgPostalCode",e)},expression:"applySslInfo.orgPostalCode"}})],1),r(i,{attrs:{label:" "}},[r(a,{on:{click:n.onConfirm}},[t._v("申请证书")])],1)],1)],1)}),[],!1,null,"5f0dc5a7",null,null).exports)}}}))}();
