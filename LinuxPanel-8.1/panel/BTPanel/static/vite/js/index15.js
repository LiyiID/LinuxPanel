import{w as e,x as t,o as s,j as a}from"./element-lib.js?v=1714377894636";import{n as r,_ as i,l as o,a1 as l,G as n,b1 as c,b2 as u,r as v,q as p,g as m,b3 as d,a as f}from"./main.js?v=1714377894636";import{e as _,A as h,b as y,v as x,J as g,h as b,j as C}from"./vue-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";const w=r(_({__name:"Thanks",setup:e=>({__sfc:!0})}),(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"qa_thank_box",staticStyle:{"background-color":"#f1f9f3","text-align":"center",padding:"20px 0"}},[t(i,{staticStyle:{width:"55px"},attrs:{src:"feedback/QA_like.png"}}),t("p",{staticStyle:{"margin-top":"15px"}},[e._v("感谢您的参与!")])],1)}),[],!1,null,"be0658d9",null,null).exports;const k=r(_({__name:"index",setup(e,{expose:t}){const{panelVersion:s,panelNps:a}=h(l()),{proxy:r}=C();let i=y(0);const v=x({}),p=y([]),m=y(!1),d=(e,t,s)=>{r.$refs[t][0].className="act",10===t&&(r.$refs[t][0].className="act ten"),"small"===e?r.$refs[t][0].style.backgroundColor="#ff0200":"medium"===e?r.$refs[t][0].style.backgroundColor="rgb(255, 127, 0)":"large"===e&&(r.$refs[t][0].style.backgroundColor="rgb(32, 165, 58)"),r.$refs[t][0].style.opacity=s},f=async()=>{await u()};return t({onCancel:f}),g((async()=>{try{const e=await n({version:-1,product_type:0});p.value=e.data.value,p.value=[{id:4,hint:"您在使用产品过程中有什么需求没有被满足，或遇到什么BUG没被解决，请将您的问题或需求详细描述给我们，我们尽力为您解决及开发对应的功能",product_type:0,question:"您的哪些需求在宝塔面板上还没有被满足的?",required:1,version:0,textarea:!0,isHint:!0}],p.value.forEach((e=>{v[e.id]=""}))}catch(e){}})),b((async()=>{a.value=!0})),{__sfc:!0,panelVersion:s,panelNps:a,vm:r,score:i,questions:v,questionList:p,thanks:m,scoreMouseOver:(e,t)=>{if(i.value===t)return!1;d(e,t,.8)},changeInputEvent:(e,t,s)=>{p.value[s].error=""==e?"问题答案不可为空":"",v[t]=e,r.$forceUpdate()},scoreMouseLeave:(e,t)=>{if(i.value===t)return!1;r.$refs[t][0].removeAttribute("style"),r.$refs[t][0].removeAttribute("class")},scoreClick:(e,t)=>{var s;if(p.value&&!(null==(s=p.value)?void 0:s.length))return r.$message.error("暂时无法进行评分哦~请刷新页面重试"),!1;0!==i.value&&(r.$refs[i.value][0].removeAttribute("style"),r.$refs[i.value][0].removeAttribute("class")),i.value=t,d(e,t,1)},chooseCss:d,submit:async()=>{try{if(-1==p.value.findIndex((e=>""==e.error)))return r.$message.error("还有必填项没有填写哦~");let e=r.$load("正在提交问卷，请稍后...");await c({questions:JSON.stringify(v),product_type:0,rate:i.value,software_name:"panel"});e.close(),o({area:23,component:w}),r.$listeners.close()}catch(e){}},onCancel:f}}}),(function(){var a=this,r=a._self._c,i=a._self._setupProxy;return r("div",{staticClass:"nps_survey_box"},[a._m(0),r("div",{staticStyle:{padding:"30px 40px"}},[r("div",{staticClass:"nps_survey_score",staticStyle:{height:"130px"}},[r("div",{staticClass:"text-[1.9rem] font-bold text-center text-[#000]"},[a._v(" 您向朋友或同事推荐宝塔面板的可能性有多大? ")]),r("div",{staticClass:"flex items-center justify-around",attrs:{id:"survey_score"}},[r("ul",{staticClass:"survey_score_num small"},a._l([1,2,3,4,5,6],(function(e){return r("li",{ref:e,refInFor:!0,attrs:{"data-content":e},on:{mouseover:function(t){return i.scoreMouseOver("small",e)},mouseleave:function(t){return i.scoreMouseLeave("small",e)},click:function(t){return i.scoreClick("small",e)}}},[a._v(" "+a._s(e)+" ")])})),0),r("ul",{staticClass:"survey_score_num medium"},a._l([7,8],(function(e){return r("li",{ref:e,refInFor:!0,attrs:{"data-content":e},on:{mouseover:function(t){return i.scoreMouseOver("medium",e)},mouseleave:function(t){return i.scoreMouseLeave("medium",e)},click:function(t){return i.scoreClick("medium",e)}}},[a._v(" "+a._s(e)+" ")])})),0),r("ul",{staticClass:"survey_score_num large"},a._l([9,10],(function(e){return r("li",{ref:e,refInFor:!0,attrs:{"data-content":e},on:{mouseover:function(t){return i.scoreMouseOver("large",e)},mouseleave:function(t){return i.scoreMouseLeave("large",e)},click:function(t){return i.scoreClick("large",e)}}},[a._v(" "+a._s(e)+" ")])})),0)])]),r("div",{directives:[{name:"show",rawName:"v-show",value:0!==i.score,expression:"score !== 0"}],staticClass:"flex flex-col items-center"},[r(e,{ref:"npsForm",attrs:{"label-position":"top",model:i.questions,size:"medium"}},a._l(i.questionList,(function(e,o){return r(t,{key:o,attrs:{label:"",error:e.error}},[r("template",{slot:"label"},[r("span",{staticClass:"nps_survey_title"},[e.required?r("span",{staticClass:"text-danger"},[a._v("*")]):a._e(),a._v(a._s(e.question))]),e.textarea?a._e():r("span",{staticClass:"nps_surver_tips"},[a._v(" "+a._s(e.hint)+" ")])]),e.textarea?[r(v,{ref:"popover",refInFor:!0,attrs:{placement:"top","popper-class":"popover-primary",title:"",width:"500",trigger:"focus",content:e.hint}}),r(s,{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"!w-[51.2rem]",attrs:{type:"textarea",rows:6,maxlength:500,placeholder:e.isHint?e.hint:""},on:{input:function(t){return i.changeInputEvent(t,e.id,o)},focus:function(t){e.isHint=!1},blur:function(t){e.isHint=!0}},model:{value:i.questions[e.id],callback:function(t){a.$set(i.questions,e.id,t)},expression:"questions[item.id]"}})]:[r(s,{staticClass:"w-[51.2rem]",attrs:{maxlength:500,placeholder:"请填写问题答案"},on:{input:function(t){return i.changeInputEvent(t,e.id,o)}},model:{value:i.questions[e.id],callback:function(t){a.$set(i.questions,e.id,t)},expression:"questions[item.id]"}})]],2)})),1),r("div",{staticClass:"text-primary leading-[3.5rem] mb-[1rem]"},[a._v(" 我们特别重视您的需求反馈，我们会每周进行需求评审。希望能更好的帮到您 ")]),r(p,{staticClass:"w-[12.5rem]",attrs:{size:"large"},on:{click:i.submit}},[a._v("提交")])],1)])])}),[function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"nps_survey_banner"},[t("span",[t("i"),e._v(" "),t("span",{staticStyle:{"vertical-align":"4px"}},[e._v("宝塔面板产品体验调查")])])])}],!1,null,"055b291a",null,null).exports,A=()=>o({area:68,component:k});const S=r(_({__name:"index",setup(e){const{refs:{panelNps:t}}=m(),s=y(!0),a=y(!0),r=y(!1),i=y(!1);let o=0;return b((async()=>{if(!t.value){const e=await d({version:"v2",productType:0,softwareName:"panel"});e.data.nps&&e.data.safe_day>=5&&A()}})),{__sfc:!0,panelNps:t,service:s,feedback:a,openCustomer:r,serviceCloseBtnShow:i,time:o,serviceMouseOver:()=>{if(i.value)return!1;clearTimeout(o),s.value=!1,r.value=!0},serviceMouseLeave:()=>!i.value&&(0!==o?(s.value=!0,r.value=!1,void(o=0)):void(o=setTimeout((()=>{s.value=!0,r.value=!1}),500))),serviceClickFun:()=>{s.value=!0,r.value=!0,i.value=!0},closeCustomer:()=>{s.value=!0,r.value=!1,setTimeout((()=>{i.value=!1}),500)},feedbackShow:()=>{r.value=!1,s.value=!0,clearTimeout(o),a.value=!1},BtNPSDialog:A}}}),(function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{staticClass:"toolbar-right"},[t(v,{attrs:{trigger:"manual",placement:"left",effect:"light","popper-class":" white-popover","visible-arrow":!1},model:{value:s.openCustomer,callback:function(e){s.openCustomer=e},expression:"openCustomer"}},[t("div",{staticClass:"wechat-customer",attrs:{id:"wechat-customer"},on:{mouseover:s.serviceMouseOver,mouseleave:s.serviceMouseLeave}},[t("div",{staticStyle:{background:"rgba(32, 165, 58, 0.1)",width:"100%",height:"46px",display:"flex","flex-direction":"row","align-items":"center","justify-content":"center"}},[t(f,{staticStyle:{"font-size":"16px",display:"flex","flex-direction":"row","flex-wrap":"nowrap","align-items":"center"},attrs:{href:"https://www.bt.cn/new/wechat_customer"}},[t("div",{staticStyle:{"border-bottom":"1px solid",display:"flex"}},[e._v(" 点击咨询客服 "),t("div",{staticClass:"icon-r1",staticStyle:{width:"15px",height:"18px","margin-top":"1px","margin-left":"5px"}})])])],1),t("div",{staticClass:"qrcode-wechat",staticStyle:{width:"128px",height:"128px",margin:"8px 0 4px 0"}},[t("div",{attrs:{id:"wechatCustomerQrcode"}},[t(i,{attrs:{src:"customer/customer-qrcode.png"}})],1)]),t("div",{staticClass:"wechat-title"},[t("img",{staticClass:"icon",staticStyle:{width:"17px",height:"17px"},attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAATlJREFUSEvtVrFOw0AMfed8AxJsZWGAgQHBXP4DCQa+Ioou7g18BRIg9T/KDGJggIGFbiDxDXGQowSBuGvrFISEmtF+7/nis312RVEMiWgIoMT375aIjpj5KeJrTMy8JSJjAPsRzEhErl1Zlhd1XZ8kRKZEdMjM0xlBBiIyATCIYZxzl857X6uTiHaY+TElZrUz87aIPCjvI0gIwVmF5uG7H1gFmZepxv85XTdqCCEcLMQ0gLz3jbbTOm/rPdkLBt0v0E77xysq2it9T2nhuTzPN4ho10KyYEXkXvvkBcC6hWjEvmqQMwCnANZa8p1RJAbfa41vAM7/0cUzczOiZ43zvunrtPVOntuO3+wrluJ12qspvFBm/+bR+u03nhPrkKZk2ZVINUZO964sy44Ta9FSK5GuQ1VVXb0DLf+sHQ9tLL0AAAAASUVORK5CYII="}}),t("div",{staticClass:"scan-title",staticStyle:{"font-size":"16px"}},[e._v("扫一扫")])]),t("span",{staticClass:"layui-layer-setwin wechat-close",staticStyle:{display:"block"}},[t("a",{staticClass:"layui-layer-ico layui-layer-close layui-layer-close2",attrs:{href:"javascript:;"}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:s.serviceCloseBtnShow,expression:"serviceCloseBtnShow"}],staticClass:"absolute -top-1.5rem -right-1.5rem z-999 w-[3rem] h-3rem rounded-1/2 cursor-pointer",on:{click:s.closeCustomer}},[t("div",{staticClass:"absolute w-[3rem] h-3rem top-0 left-0 origin-center close-popup-btn",attrs:{"data-v-48b1409d":""}})])]),t("a",{staticClass:"basic",class:s.service?"service":"service-active",attrs:{slot:"reference",href:"javascript:"},on:{mouseover:s.serviceMouseOver,mouseleave:s.serviceMouseLeave,click:s.serviceClickFun},slot:"reference"})]),t(a,{attrs:{effect:"dark",content:"点击打开调查问卷",placement:"left",enterable:!1}},[t("a",{staticClass:"basic",class:s.feedback?"feedback":"feedback-active",attrs:{href:"javascript:"},on:{mouseleave:function(e){s.feedback=!0},mouseover:s.feedbackShow,click:s.BtNPSDialog}})])],1)}),[],!1,null,"3759f052",null,null).exports;export{S as default};
