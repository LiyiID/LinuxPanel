import{_ as e}from"./index52.js?v=1714377894636";import{_ as t}from"./index39.js?v=1714377894636";import{_ as a}from"./index57.js?v=1714377894636";import{_ as l}from"./index41.js?v=1714377894636";import{J as o,n as i,q as r}from"./main.js?v=1714377894636";import{_ as n}from"./index59.js?v=1714377894636";import{e as s,S as p,b as m,H as c,v as u,h as g,j as d}from"./vue-lib.js?v=1714377894636";import{B as b}from"./ftp.store.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";const f=i(s({__name:"actionLogs",setup(e,{expose:t}){const{proxy:a}=d(),l=p("ftpRowData"),i=m(l),r=m([{width:120,label:a.$t("Username"),prop:"name",render:()=>c("span",i.value.name)},{label:a.$t("ActionIp"),prop:"ip"},{width:240,label:a.$t("File"),prop:"file"},{width:70,label:a.$t("ActionType"),prop:"type"},{label:a.$t("ActionTime"),prop:"time"}]),n=u({p:1,limit:10,search:"",type:"all",userName:""}),s=u({loading:!1,list:[],total:0}),f=m([{title:"全部",key:"all"},{title:"上传",key:"upload"},{title:"下载",key:"download"},{title:"删除",key:"delete"},{title:"重命名",key:"rename"}]),y=async()=>{try{s.loading=!0;const e=await b({...n,user_name:i.value.name});let{data:t,page:a}=e.data;s.list=t,s.total=o(a)}catch(e){}finally{s.loading=!1}},h=()=>{y()},j=()=>h();return g((()=>{h()})),t({cutTab:j}),{__sfc:!0,vm:a,getRowData:l,rowData:i,tableColumn:r,tableParam:n,tableData:s,typeList:f,getActionLogs:y,changeActionType:e=>{n.type=e,y()},changePageLimit:e=>{n.limit=e,y()},changePageSize:e=>{n.p=e,y()},init:h,cutTab:j}}}),(function(){var o=this,i=o._self._c,s=o._self._setupProxy;return i(n,{scopedSlots:o._u([{key:"header-left",fn:function(){return[i(r,{attrs:{type:"default"},on:{click:s.getActionLogs}},[o._v("刷新日志")])]},proxy:!0},{key:"header-right",fn:function(){return[i(l,{staticClass:"w-[10rem] mr-8x",attrs:{options:s.typeList,change:s.changeActionType},model:{value:s.tableParam.type,callback:function(e){o.$set(s.tableParam,"type",e)},expression:"tableParam.type"}}),i(a,{attrs:{placeholder:"请输入操作IP/文件/类型/时间"},on:{clear:s.getActionLogs,search:s.getActionLogs},model:{value:s.tableParam.search,callback:function(e){o.$set(s.tableParam,"search",e)},expression:"tableParam.search"}})]},proxy:!0},{key:"content",fn:function(){return[i(t,{directives:[{name:"loading",rawName:"v-loading",value:s.tableData.loading,expression:"tableData.loading"}],ref:"ftpLogTable",attrs:{maxHeight:400,column:s.tableColumn,data:s.tableData.list,"element-loading-text":"正在加载FTP操作日志，请稍后..."}})]},proxy:!0},s.tableData.list.length>0?{key:"footer-right",fn:function(){return[i(e,{attrs:{total:s.tableData.total,"current-page":s.tableParam.p,"page-size":s.tableParam.limit},on:{"size-change":s.changePageLimit,"current-change":s.changePageSize}})]},proxy:!0}:null],null,!0)})}),[],!1,null,null,null,null).exports;export{f as default};
