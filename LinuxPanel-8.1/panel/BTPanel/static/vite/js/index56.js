import{g as t,a8 as e,a9 as a,n as s,q as i}from"./main.js?v=1714377894636";import{e as c,b as o,c as r,f as n,h as l}from"./vue-lib.js?v=1714377894636";import{a as m}from"./confirm.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";const p=c({__name:"index",props:{compData:{default:()=>({recomList:[],historySearch:[],name:"",key:""})}},emits:["close"],setup(s,{expose:i,emit:c}){const p=s,u=o(p.compData.historySearch),h=o(""),y=o(""),{refs:{pageSerachVal:v}}=t(),d=r((()=>document.querySelector(".el-icon-search")||""));n((()=>p.compData.historySearch),(()=>{u.value=p.compData.historySearch}),{immediate:!0});const f=(t=!1)=>{const e=document.querySelector(".el-icon-search");if(e){const{top:a,right:s}=e.getBoundingClientRect();h.value=a+(t?22:76)+"px",y.value=window.innerWidth-s-(t?14:22)+"px"}};return window.addEventListener("resize",(()=>{f(!0)})),l((async()=>{const t=document.querySelector(".el-alert");f(!t)})),i({}),{__sfc:!0,props:p,historySearch:u,searchTop:h,searchRight:y,pageSerachVal:v,emit:c,elSearch:d,delHistory:async(t,a)=>{try{m({confirm:{icon:"warning",title:"删除搜索历史记录",message:"确定要删除该条搜索历史【"+t+"】吗？"},loading:"正在删除搜索历史记录，请稍后...",request:async()=>await e({name:p.compData.name,key:p.compData.key,val:t}),complete:t=>(u.value.splice(a,1),Promise.resolve())})}catch(s){}},clearHistory:async()=>{try{m({confirm:{icon:"warning",title:"清空搜索历史",message:"确定要清空搜索历史记录吗？"},loading:"正在清空搜索历史记录，请稍后...",request:async()=>await a({key:p.compData.key,name:p.compData.name}),complete:t=>(u.value=[],Promise.resolve())})}catch(t){}},setValue:t=>{v.value=t},adjustPosition:f}}}),u=""+new URL("../png/hots.png",import.meta.url).href;const h=s(p,(function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e("div",{staticClass:"hotCon",style:"top: ".concat(a.searchTop," !important;right: ").concat(a.searchRight," !important;"),on:{mousedown:function(t){t.preventDefault()}}},[e("div",{staticClass:"box"},[e("div",{staticClass:"history-title"},[e("span",{staticClass:"text-[#999]"},[t._v("搜索历史")]),e(i,{attrs:{type:"default",size:"mini"},on:{click:a.clearHistory}},[e("i",{staticClass:"el-icon-delete mr-4x"}),t._v("清空 ")])],1),e("div",{staticClass:"list-box"},[a.historySearch.length?e("div",{staticClass:"list-box-body"},t._l(a.historySearch,(function(s,i){return e("div",{staticClass:"body-item",on:{click:function(t){return a.setValue(s.value)}}},[e("span",{attrs:{title:s.value}},[t._v(t._s(s.value))]),e("i",{staticClass:"el-icon-close",on:{click:function(t){return t.stopPropagation(),a.delHistory(s.value,i)}}})])})),0):e("div",{staticClass:"py-[1rem] text-[#999] text-center"},[t._v("暂无搜索历史")])])]),e("div",{staticClass:"box"},[t._m(0),e("div",{staticClass:"list",class:"php"===t.compData.key?"!grid-cols-4":""},t._l(t.compData.recomList,(function(a,s){return e("div",{key:s},[e("span",{staticClass:"item",on:{"!click":function(t){return a.callback()}}},[t._v(" "+t._s(a.name)+" ")])])})),0)])])}),[function(){var t=this,e=t._self._c;return t._self._setupProxy,e("div",{staticClass:"title"},[t._v(" 您可能感兴趣"),e("img",{staticClass:"w-[1.4rem] h-[1.4rem] ml-[.5rem]",attrs:{src:u,alt:""}})])}],!1,null,"ae5a8b58",null,null).exports;export{h as _};
