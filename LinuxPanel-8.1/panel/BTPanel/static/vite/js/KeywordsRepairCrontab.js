import{_ as e}from"./index85.js?v=1714377894636";import{_ as r}from"./index41.js?v=1714377894636";import{w as t,x as a}from"./element-lib.js?v=1714377894636";import{d6 as l,n as o}from"./main.js?v=1714377894636";import{e as s,b as i,f as m,S as n,h as u,j as p,v as y}from"./vue-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";const c=o(s({__name:"KeywordsRepairCrontab",props:{compData:{default:()=>{}}},setup(e,{expose:r}){const t=e,{proxy:a}=p(),o=i({type:"day",week:1,where1:1,hour:1,minute:19}),s=i([{title:"每天",key:"day"},{title:"N天",key:"day-n"},{title:"每星期",key:"week"},{title:"每月",key:"month"}]),c=i([{title:"周一",key:1},{title:"周二",key:2},{title:"周三",key:3},{title:"周四",key:4},{title:"周五",key:5},{title:"周六",key:6},{title:"周日",key:7}]);m((()=>t.compData),(e=>{w("day")}));const d={type:[{validator:(e,r,t)=>"day-n"!==r&&"month"!==r||!(o.value.where1<0||o.value.where1>31)?o.value.hour<0||o.value.hour>23?t(new Error("请输入正确小时范围[0-23]")):o.value.minute<0||o.value.minute>59?t(new Error("请输入正确分钟范围[0-59]")):void t():t(new Error("请输入正确天数范围[0-31]")),trigger:["blur","change"]}]},w=e=>{o.value.type=e;let r=Math.round(5*Math.random()),t=Math.round(59*Math.random());o.value.hour=r,o.value.minute=t,"day-n"===e?o.value.where1=3:"week"===e?o.value.week=1:o.value.where1=3},h=n("reload",(()=>{})),v=()=>{a.$refs.repairCron.resetFields(),h()},k=async e=>{a.$refs.repairCron.validate((async r=>{let s=a.$load(a.$t("Loading"));try{if(r){var i=y({id:t.compData.id,type:o.value.type,hour:o.value.hour,minute:o.value.minute});"day-n"!==o.value.type&&"month"!==o.value.type||(i.where1=o.value.where1),"week"===o.value.type&&(i.week=o.value.week);const r=await l({data:JSON.stringify(i)});await a.$message.request(r),v(),e()}}catch(m){}finally{s.close()}}))};return u((()=>{})),r({onConfirm:k,onCancel:v}),{__sfc:!0,props:t,vm:a,ruleForm:o,typeOptions:s,weekOptions:c,rules:d,typeChange:w,reloadData:h,onCancel:v,submitFrom:k,repairCron:l}}}),(function(){var l=this,o=l._self._c,s=l._self._setupProxy;return o(t,{ref:"repairCron",staticClass:"p-[2rem] addfrom",attrs:{model:s.ruleForm,rules:s.rules,"label-width":"5rem"}},[o(a,{attrs:{label:l.$t("keywords.detectionFrequency"),prop:"type"}},[o("div",{staticClass:"flex"},[o(r,{staticClass:"w-[8rem] mr-4",attrs:{options:s.typeOptions,change:s.typeChange},model:{value:s.ruleForm.type,callback:function(e){l.$set(s.ruleForm,"type",e)},expression:"ruleForm.type"}}),"week"===s.ruleForm.type?o(r,{staticClass:"w-[8rem] mr-4",attrs:{options:s.weekOptions},model:{value:s.ruleForm.week,callback:function(e){l.$set(s.ruleForm,"week",e)},expression:"ruleForm.week"}}):l._e(),"day-n"===s.ruleForm.type||"month"===s.ruleForm.type?o(e,{staticClass:"w-[13rem] mr-4",attrs:{type:"number",min:"0",max:"31",iconTitle:"day-n"===s.ruleForm.type?"天":"日",textType:"day-n"===s.ruleForm.type?"天":"日"},model:{value:s.ruleForm.where1,callback:function(e){l.$set(s.ruleForm,"where1",e)},expression:"ruleForm.where1"}}):l._e(),o(e,{staticClass:"w-[13rem] mr-4",attrs:{type:"number",min:"0",max:"23",iconTitle:"小时",textType:"小时"},model:{value:s.ruleForm.hour,callback:function(e){l.$set(s.ruleForm,"hour",e)},expression:"ruleForm.hour"}}),o(e,{staticClass:"w-[13rem]",attrs:{type:"number",min:"0",max:"59",iconTitle:"分钟",textType:"分钟"},model:{value:s.ruleForm.minute,callback:function(e){l.$set(s.ruleForm,"minute",e)},expression:"ruleForm.minute"}})],1)])],1)}),[],!1,null,null,null,null).exports;export{c as default};
