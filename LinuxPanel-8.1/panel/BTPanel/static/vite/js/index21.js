import{_ as e}from"./index52.js?v=1714377894636";import{_ as t}from"./index53.js?v=1714377894636";import{g as a,o as s,e as o,n as i,a as n}from"./main.js?v=1714377894636";import{_ as l}from"./index39.js?v=1714377894636";import{_ as r}from"./index54.js?v=1714377894636";import{_ as c}from"./index55.js?v=1714377894636";import{_ as m}from"./index57.js?v=1714377894636";import{L as u,q as p,s as d}from"./element-lib.js?v=1714377894636";import{_ as g}from"./index43.js?v=1714377894636";import{_ as f}from"./index58.js?v=1714377894636";import{_ as h}from"./index59.js?v=1714377894636";import"./index45.js?v=1714377894636";import{_ as v}from"./index60.js?v=1714377894636";import{e as b,b as y,v as j,h as x,j as _}from"./vue-lib.js?v=1714377894636";import{g as S,t as P,u as T,v as C,i as k}from"./site.store.js?v=1714377894636";import{w,x as G,c as L,N,y as O,p as I,f as B,g as D,i as J,z as M}from"./site.popup.js?v=1714377894636";import{o as F}from"./index61.js?v=1714377894636";import{s as R}from"./site.method.js?v=1714377894636";import{c as q}from"./check.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./element-ui.common.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./vdom.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";import"./confirm.js?v=1714377894636";import"./config.js?v=1714377894636";const z=i(b({__name:"index",setup(e){const{proxy:t}=_(),{refs:{modulesTableParams:i},getModulesList:n,getModulesTypeList:l}=S(),{getPublicConfigInfo:r}=a(),c=y(!1),m=y([]),u=y(!1),p=j({isRecurrence:!1,describe:{title:"",th:"",message:"",propsValue:""}}),d=[{content:"添加GO项目",active:!0,event:()=>{G()}},{hide:s,content:"SDK版本管理",event:()=>{O("go")}},{hide:s,content:"项目守护间隔时间",event:e=>{I("go")}}],g=y({tableColumn:[{prop:"name",label:"网站名"},{prop:"status",label:"状态"}],callback:()=>{n("go")},isRecurrence:!0}),f=y([{label:"启动项目",value:"startGoSite",diyBatch:()=>{F({title:"您正在批量启动选中的Go项目，是否继续操作？",dataList:m.value,titleType:"批量启动选中的站点",requestFun:async e=>(await P({data:JSON.stringify({project_name:e.name})},"go")).data,...g.value})}},{label:"停用项目",value:"stopGoSite",diyBatch:()=>{F({title:"您正在批量停止选中的Go项目，是否继续操作？",dataList:m.value,titleType:"批量停止选中的站点",requestFun:async e=>(await T({data:JSON.stringify({project_name:e.name})},"go")).data,...g.value})}},{label:"重启项目",value:"restartGoSite",diyBatch:()=>{F({title:"您正在批量重启选中的Go项目，是否继续操作？",dataList:m.value,titleType:"批量重启选中的站点",requestFun:async e=>(await C({data:JSON.stringify({project_name:e.name})},"go")).data,...g.value})}},{label:"部署证书",value:"setCertificates",isRefBatch:!0},{label:"删除项目",value:"delGoSite",isRefBatch:!0}]),h=async()=>{var e,t;let a=q(null==(e=JSON.parse(sessionStorage.getItem("BT-CONFIG")||"{}"))?void 0:e.web,"object",{});a.hasOwnProperty("setup")&&!a.setup&&(await r(),a=null==(t=JSON.parse(sessionStorage.getItem("BT-CONFIG")||"{}"))?void 0:t.web),a.hasOwnProperty("setup")&&!(null==a?void 0:a.setup)&&(u.value=!0)},v=w({changeTaskTopEvent:e=>{},changeStatusEvent:e=>{R.setProject(e,e.run?"stop":"start","go",(()=>n("go")))},setQuotaEvent:e=>{},openBackupEvent:e=>{},deleteEvent:e=>{R.delProject(e,{},"go",!1)},setSiteTime:e=>{J(e,!1,"go")},openPlugin:e=>{},openTotalFlow:e=>{},openSetting:(e,t)=>{M(e,t)}});return x((async()=>{h(),await n("go")})),{__sfc:!0,vm:t,modulesTableParams:i,getModulesList:n,getModulesTypeList:l,getPublicConfigInfo:r,hovering:c,checkedList:m,maskLayer:u,batchConfig:p,tableBtnGroup:d,batchData:g,batchGroup:f,handleSelectionChange:e=>{m.value=e},handleBatch:e=>{switch(e){case"settingClass":D(m.value,"go");break;case"delGoSite":R.delProject({},m.value,"go",!0);break;case"setCertificates":B(m.value)}},handleSerach:e=>{i.value.search=e,void 0===e&&(i.value.search=""),n("go")},changePage:e=>{i.value.p=e,n("go")},changeSize:e=>{i.value.limit=e;let t=JSON.parse(localStorage.getItem("siteOtherPageLimit")||"{}");t.go=e,localStorage.setItem("siteOtherPageLimit",JSON.stringify(t)),n("go")},openInstall:async e=>{const{data:a}=await k({sName:e.name});if("-1"===a.task)return t.$message.error("当前插件正在安装，不可重复安装");o({name:a.name,type:a.type,pluginInfo:a})},checkInstall:h,tableColumns:v,goAddSiteDialog:G,classSettingDialog:L,NPSDialog:N,isRelease:s}}}),(function(){var a=this,s=a._self._c,o=a._self._setupProxy;return s("div",[s(v,{attrs:{visible:o.maskLayer,width:"38rem"}},[s("div",{staticClass:"flex items-center"},[s("span",[a._v("未安装运行环境，")]),s(n,{staticClass:"!font-bold !text-[1.4rem]",on:{click:function(e){return o.openInstall({name:"nginx"})}}},[a._v("安装Nginx")]),s(u,{attrs:{direction:"vertical"}}),s(n,{staticClass:"!font-bold !text-[1.4rem]",on:{click:function(e){return o.openInstall({name:"apache"})}}},[a._v("安装Apache")])],1)]),s(h,{scopedSlots:a._u([{key:"header-left",fn:function(){return[s("div",{staticClass:"flex items-center"},[s(f,{attrs:{group:o.tableBtnGroup}}),s(g,{staticClass:"ml-12x inline-block",attrs:{icon:"demand",iconClass:"text-1.6rem",content:"需求反馈"},on:{click:function(e){return o.NPSDialog()}}})],1)]},proxy:!0},{key:"header-right",fn:function(){return[o.isRelease?a._e():s("div",{staticClass:"flex items-center"},[s(p,{staticClass:"mr-8x w-[12rem]",on:{change:function(e){return o.getModulesList("go")}},model:{value:o.modulesTableParams.type_id,callback:function(e){a.$set(o.modulesTableParams,"type_id",e)},expression:"modulesTableParams.type_id"}},[s("div",{staticClass:"max-h-[20rem] overflow-auto",class:{"no-hover":o.hovering}},a._l(o.modulesTableParams.typeList,(function(e,t){return s(d,{key:t,attrs:{label:e.name,value:e.id}})})),1),s("div",{staticClass:"classify-item",on:{click:function(e){return o.classSettingDialog("go")},mouseover:function(e){o.hovering=!0},mouseout:function(e){o.hovering=!1}}},[a._v(" 分类设置 ")])])],1),s("div",{staticClass:"relative mr-8x"},[s(m,{attrs:{placeholder:a.$t("SitePhpModel.TableSearch"),width:"40rem"},on:{search:o.handleSerach,clear:o.handleSerach},model:{value:o.modulesTableParams.search,callback:function(e){a.$set(o.modulesTableParams,"search",e)},expression:"modulesTableParams.search"}})],1),s(c,{attrs:{refresh:()=>{o.getModulesList("go")}}}),s(r,{staticClass:"ml-8x",attrs:{name:"siteGoTable",column:o.tableColumns}})]},proxy:!0},{key:"content",fn:function(){return[s(l,{directives:[{name:"loading",rawName:"v-loading",value:o.modulesTableParams.loading,expression:"modulesTableParams.loading"}],ref:"siteGoTable",attrs:{"element-loading-text":"正在加载中...",data:o.modulesTableParams.list,column:o.tableColumns},on:{"selection-change":o.handleSelectionChange},scopedSlots:a._u([{key:"empty",fn:function(){return[s("div",{staticClass:"flex items-center justify-center"},[a._v(" 您的列表为空，您可以 "),s(n,{on:{click:function(e){return o.goAddSiteDialog()}}},[a._v("添加一个项目")])],1)]},proxy:!0}])})]},proxy:!0},{key:"footer-left",fn:function(){return[s(t,{attrs:{data:o.batchGroup,config:o.batchConfig,"batch-fn":()=>{}},on:{"handle-batch":o.handleBatch}})]},proxy:!0},{key:"footer-right",fn:function(){return[s(e,{attrs:{total:o.modulesTableParams.total,"current-page":o.modulesTableParams.p,"page-size":o.modulesTableParams.limit},on:{"current-change":o.changePage,"size-change":o.changeSize}})]},proxy:!0}])})],1)}),[],!1,null,"028d59f7",null,null).exports;export{z as default};
