import{g as e,a5 as a,n as t,D as n,a as i}from"./main.js?v=1714377894636";import{Q as s}from"./element-lib.js?v=1714377894636";import{e as o,b as c,f as l,h as u,j as r}from"./vue-lib.js?v=1714377894636";import{g as p,a as f}from"./config.js?v=1714377894636";const g=t(o({__name:"index",props:{value:{default:()=>[]},name:{default:"give"},prop:null,limitType:{default:()=>["sms"]}},emits:["input","change"],setup(t,{expose:n,emit:i}){const s=t,{proxy:o}=r(),{refs:{checkedLoad:g,pushConfigInfo:m},getPushConfigInfo:d}=e(),h=c([]);l((()=>s.value),(e=>{h.value=e}),{immediate:!0}),l(h,(e=>{o.$emit("input",e)}),{immediate:!0});const v=async()=>{g.value=!0,await d(),g.value=!1};return u((()=>{m.length||v()})),n({renderPushConfig:v}),{__sfc:!0,props:s,emit:i,vm:o,checkedLoad:g,pushConfigInfo:m,getPushConfigInfo:d,giveGroupModel:h,checkChange:e=>{o.$emit("change",e)},configMessageChannels:async e=>{let t={title:"",type:""},n=null;switch(e.name){case"dingding":t={title:"钉钉机器人配置",type:"dingding"};break;case"feishu":t={title:"飞书机器人配置",type:"feishu"};break;case"mail":t={title:"发送者配置",type:"mail"};break;case"weixin":t={title:"企业微信机器人配置",type:"weixin"};break;case"wx_account":if(e.setup)t={title:"微信公众号",type:"wx_account"};else try{n=o.$load(o.$t("正在安装微信公众号模块，请稍后..."));const{data:e}=await p();if(!e.wx_account.setup){const{status:e}=await f("wx_account");if(!e)return void o.$message.error("微信公众号模块安装失败");await v(),t={title:"微信公众号",type:"wx_account"}}}catch(i){}finally{n&&n.close()}}a({...t,callback:v})},renderPushConfig:v}}}),(function(){var e=this,a=e._self._c,t=e._self._setupProxy;return a(s,{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:t.checkedLoad,expression:"checkedLoad"}],ref:"checkboxRef",model:{value:t.giveGroupModel,callback:function(e){t.giveGroupModel=e},expression:"giveGroupModel"}},e._l(t.pushConfigInfo,(function(s,o){return e.limitType.includes(s.name)?e._e():a(n,{key:o,attrs:{name:e.name,label:s.name,disabled:!s.setup||!s.isConfig},on:{change:function(e){return t.checkChange(s)}}},[a("div",[a("span",[e._v(e._s(s.title))]),s.setup&&s.isConfig?e._e():a("span",[e._v(" ["),a(i,{attrs:{type:"danger"},on:{click:function(e){return t.configMessageChannels(s)}}},[s.isConfig&&s.setup?e._e():[e._v("未配置")]],2),e._v("] ")],1)])])})),1)}),[],!1,null,"63ff2b73",null,null).exports;export{g as _};
