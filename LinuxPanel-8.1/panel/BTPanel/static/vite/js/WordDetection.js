import{_ as t}from"./index51.js?v=1714377894636";import{_ as e}from"./index39.js?v=1714377894636";import{_ as a}from"./index59.js?v=1714377894636";import{g as o,dD as n,n as r,q as s,a as i,b as l}from"./main.js?v=1714377894636";import{_ as c}from"./index85.js?v=1714377894636";import{w as p,x as u}from"./element-lib.js?v=1714377894636";import{_ as d}from"./index55.js?v=1714377894636";import{e as m,b as f,v as y,H as w,h as g,j as _}from"./vue-lib.js?v=1714377894636";import{a as b}from"./confirm.js?v=1714377894636";import{b as v,e as h}from"./index38.js?v=1714377894636";import{v as x,z as k,A as j,u as D,w as S}from"./firewall.popup.js?v=1714377894636";import{eF as L,eG as P,eH as C}from"./site.store.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./config.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./check.js?v=1714377894636";const F=r(m({__name:"WordDetection",props:{compData:{default:{}}},setup(t){const e=t,{proxy:a}=_(),{refs:{authType:r}}=o(),s=f([]),i=f(!1),l=y({word:""}),c=f([v(),{label:"违规词",prop:"key"}]),p=f([]),u=f(!1),d=f(!1),m=f(!1),F=y({title:"违规词检测-功能介绍",ps:"违规词检测能帮助检测网站内容中的合法及非法字段，并输出对应的检测结果，利用图表充分展示各个域名的风险历史、检测情况、敏感词排行等，并实时输出风险动态。",source:111,desc:["违规词内容检测","网页内容修改检测","输出检测报告"],tabImgs:[{title:"概览",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/firewall/content_detect_detail_1.png"},{title:"监控列表",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/firewall/content_detect_detail_2.png"},{title:"检测历史",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/firewall/content_detect_detail_3.png"},{title:"风险列表",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/firewall/content_detect_detail_4.png"},{title:"检测报告",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/firewall/content_detect_detail_5.png"}]}),K=async()=>{i.value=!0;try{const t=await L({site_name:e.compData.name});s.value=t.data}catch(t){}finally{i.value=!1}},H=async t=>{b({confirm:{title:"删除违规词检测",message:"删除后无法继续监控该网站，是否继续？",icon:"warning"},loading:"正在删除，请稍后...",request:async()=>P({data:JSON.stringify({id:t.id})}),complete:K})},R=()=>{a.$refs.scanRef.resetFields(),d.value=!1},T=async t=>{try{const e=a.$load("正在检测，请稍后..."),o=await n({data:JSON.stringify({id:t.id})});let r={};r={name:t.name,id:t.id,path_info:o.path_info},e.close(),S(r)}catch(e){}},E=f([{label:"监控名称",prop:"name"},{label:"网站/URL",prop:"url"},{label:"状态",prop:"content",render:t=>{if(1===t.crontab_status)return"正常"}},{label:"发送告警",prop:"send_msg",render:t=>1===t.send_msg?w("span",{class:"text-primary"},["已开启"]):"未开启"},{label:"检测频率",prop:"crontab_info.cycle"},h([{onClick:T,title:"检测"},{onClick:t=>{D({callback:K,...t},!0)},title:"编辑"},{onClick:H,title:"删除"}])]);return g((()=>{K()})),{__sfc:!0,props:e,vm:a,authType:r,tableData:s,tableLoading:i,scanForm:l,resultColumns:c,resultData:p,resultLoading:u,userScanPopup:d,resultPopup:m,productData:F,getList:K,addEventListener:async()=>{D({callback:K,...e.compData,id:!1},!0)},delEvent:H,cancelScan:R,scanUserKey:async()=>{let t=a.$load("正在扫描，请稍后...");try{const t=await C({search:l.word,path:"/www/wwwroot/"+e.compData.name});p.value=t.data.result.map((t=>({path:t.name,key:l.word}))),R(),m.value=!0}catch(o){}finally{d.value=!1,t.close()}},getScanEvent:T,tableColumns:E,editKeywordsThesaurusDialog:x,editKeywordsHistoryDialog:k,editKeywordsRiskListDialog:j}}}),(function(){var o=this,n=o._self._c,r=o._self._setupProxy;return n("div",{staticClass:"py-20x"},["ltd"===r.authType?n(a,{scopedSlots:o._u([{key:"header-left",fn:function(){return[n(s,{on:{click:r.addEventListener}},[o._v("添加监控")]),n(s,{attrs:{type:"default"},on:{click:function(t){r.userScanPopup=!0}}},[o._v("自定义扫描")]),n(s,{attrs:{type:"default"},on:{click:r.editKeywordsThesaurusDialog}},[o._v("自定义词库")]),n(s,{attrs:{type:"default"},on:{click:function(t){return r.editKeywordsHistoryDialog(o.compData)}}},[o._v("检测历史")]),n(s,{attrs:{type:"default"},on:{click:r.editKeywordsRiskListDialog}},[o._v("风险列表")])]},proxy:!0},{key:"header-right",fn:function(){return[n(d,{attrs:{refresh:r.getList}})]},proxy:!0},{key:"content",fn:function(){return[n(e,{directives:[{name:"loading",rawName:"v-loading",value:r.tableLoading,expression:"tableLoading"}],attrs:{column:r.tableColumns,data:r.tableData},scopedSlots:o._u([{key:"empty",fn:function(){return[n("div",{staticClass:"flex items-center justify-center"},[o._v(" 您的列表为空，您可以 "),n(i,{on:{click:function(t){}}},[o._v("添加一个监控")])],1)]},proxy:!0}],null,!1,3801442897)})]},proxy:!0},{key:"footer-left",fn:function(){},proxy:!0},{key:"footer-right",fn:function(){},proxy:!0},{key:"popup",fn:function(){return[n(l,{attrs:{title:"自定义扫描",visible:r.userScanPopup,area:42,showFooter:""},on:{"update:visible":function(t){r.userScanPopup=t},confirm:r.scanUserKey,cancel:r.cancelScan}},[n("div",{staticClass:"p-20x"},[n(p,{ref:"scanRef",attrs:{"label-position":"right",model:r.scanForm}},[n(u,{attrs:{label:"扫描违规词",prop:"word"}},[n(c,{attrs:{placeholder:"请输入要扫描的词汇"},model:{value:r.scanForm.word,callback:function(t){o.$set(r.scanForm,"word",t)},expression:"scanForm.word"}})],1)],1)],1)]),n(l,{attrs:{title:"扫描结果",visible:r.resultPopup,area:52},on:{"update:visible":function(t){r.resultPopup=t}}},[n("div",{staticClass:"p-20x"},[n(a,{scopedSlots:o._u([{key:"header-left",fn:function(){},proxy:!0},{key:"header-right",fn:function(){},proxy:!0},{key:"content",fn:function(){return[n(e,{directives:[{name:"loading",rawName:"v-loading",value:r.resultLoading,expression:"resultLoading"}],attrs:{column:r.resultColumns,data:r.resultData,"max-height":400}})]},proxy:!0},{key:"footer-left",fn:function(){},proxy:!0},{key:"footer-right",fn:function(){},proxy:!0},{key:"popup",fn:function(){},proxy:!0}],null,!1,2849093082)})],1)])]},proxy:!0}],null,!1,4001485522)}):n(t,{attrs:{data:r.productData}})],1)}),[],!1,null,"618c681c",null,null).exports;export{F as default};
