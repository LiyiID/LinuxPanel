import e from"./index48.js?v=1714377894636";import{_ as t}from"./index58.js?v=1714377894636";import{_ as a}from"./index76.js?v=1714377894636";import{_ as s}from"./preload-helper.js?v=1714377894636";import{e as o,A as i,W as r,b as n,h as l,j as m}from"./vue-lib.js?v=1714377894636";import{g as p,l as c,p as u,a as d,j as y,n as v}from"./main.js?v=1714377894636";import{g as b}from"./index28.js?v=1714377894636";import{m as j,b as _,c as f}from"./mysql.store.js?v=1714377894636";import{u as h}from"./database.table.js?v=1714377894636";import{c as x}from"./check.js?v=1714377894636";import{A as g,p as L,q as B,d as D,t as k,i as w}from"./database.popup.js?v=1714377894636";import{D as E}from"./index131.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./confirm.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./config.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./index77.js?v=1714377894636";import"./index42.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./index39.js?v=1714377894636";import"./index.vue_vue_type_style_index_0_lang.js?v=1714377894636";import"./index85.js?v=1714377894636";import"./index52.js?v=1714377894636";import"./index53.js?v=1714377894636";import"./index57.js?v=1714377894636";import"./index54.js?v=1714377894636";import"./index56.js?v=1714377894636";import"./index43.js?v=1714377894636";import"./index59.js?v=1714377894636";import"./index60.js?v=1714377894636";const q=v(o({__name:"index",setup(e){var t;const{proxy:a}=m(),{mysqlData:o,mysqlSetup:v}=i(j()),{refs:{isSearchClick:q,mysqlNotLocal:A}}=b(),{refs:{authType:P}}=p(),{initMysql:S}=j(),C=r(o.value,"databaseList"),M=n(!1),T=n([{name:"企业增量备份",ename:"BackupDataBaseTable",callback:()=>{R("BackupDataBaseTable")}},{name:"远程数据库",ename:"remote_database",callback:()=>{c({title:"Mysql远程数据库",area:86,isAsync:!0,component:()=>s((()=>import("./CloudServer.js?v=1714377894636")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]),import.meta.url),compData:o.value.serverList,showFooter:!1})}},{name:"容量限制",ename:"capacityLimit",callback:()=>{if(!o.value.serverList.length)return a.$message.error("暂无数据库，请先添加数据库");q.value=!0,W(o.value.databaseList.filter((e=>0===e.sid))[0])}}]),R=e=>{q.value=!0,g(e)},$=n([{label:"设置权限",value:"settingPermisstion",isRefBatch:!0,event:()=>{}},{label:"同步数据库",value:"Synchronization",event:()=>{}},{label:"备份数据库",value:"BackDatabase",event:()=>{}},{label:"删除数据库",isRefBatch:!0,value:"delete",event:()=>{}}]),I=n(null==(t=x(o.value.serverList,"array",[]))?void 0:t.every((e=>0!==e.id))),G=n([{content:a.$t("BtnGroup.PhpMyAdmin"),hide:()=>I.value,event:()=>{L()}},{content:"高级设置",dropdown:!0,dropdownClass:"bg-white",splitButton:!0,settingList:[{label:"数据库备份",name:"mysqlBackup"},{label:"企业增量备份",name:"BackupDataBaseTable"}],event:e=>{q.value=!1,g(e)}}]),V=n([{content:a.$t("BtnGroup.RecyclingStation"),icon:!1,elIcon:"el-icon-delete",event:async()=>{localStorage.setItem("MYSQL-RECYCLE","true"),window.location.href="/files"}}]),N=e=>{c({title:"设置数据库"+e.name+"密码",area:53,isAsync:!0,component:()=>s((()=>import("./SetPwd.js?v=1714377894636")),__vite__mapDeps([32,33,4,5,2,3,6,7,8,9,10,34,35,30,31,14,15,25,26,27,28]),import.meta.url),compData:e,showFooter:!0})},O=async e=>{c({title:"设置数据库权限",area:42,isAsync:!0,component:()=>s((()=>import("./SetMysqlPermession.js?v=1714377894636")),__vite__mapDeps([36,33,4,5,2,3,6,7,8,9,10,34,37,38,35,14,15,30,31]),import.meta.url),compData:e,showFooter:!0})},F=async e=>{try{const t=await _({sName:"phpmyadmin"});if("panel"===e){if(t.data.ext.auth)return void a.$message.error("当前phpMyAdmin已开启密码访问，请使用【通过公共访问");if("false"===t.data.setup)return void a.$message.error("当前phpMyAdmin未安装，请先安装phpMyAdmin");window.open("/phpmyadmin/index.php?lang=zh_cn")}else t.status?window.open(t.data.ext.url):a.$message.error("未开启公共访问权限，请开启后再访问")}catch(t){}},Q=async e=>{if(0!==e.sid)return a.$message.error("远程数据库暂不支持管理工具");await F("panel")},Y=async e=>{c({title:"MYSQL工具箱【"+e.name+"】",area:78,isAsync:!0,component:()=>s((()=>import("./MysqlTool.js?v=1714377894636")),__vite__mapDeps([39,33,4,5,2,3,6,7,8,9,10,34,35,1,40,41,11,12,38,42,13,14,15,43,24,18,16,17,25,26,27,28,44]),import.meta.url),compData:e,showFooter:!1})},z=async e=>{let t=[];t.push(e.id),D(t,"single")},H=async(e,t)=>{"back"==t&&k(e),"import"==t&&w(e)},W=async e=>{if("ltd"!==P.value)return void u({sourceId:q.value?260:52});const{name:t,quota:s}=e;0===e.sid?await B(t,s):a.$message.error("仅本地数据库支持设置容量配额")},J=h({editPasswordEvent:N,openPhpAdmin:Q,deleteDataEvent:z,openToolsEvent:Y,changePermissionEvent:O,setBackupEvents:H,setQuotaEvent:W}),K=async()=>{try{const e=await f();e.status?M.value=!1:M.value=!0,-1!==e.msg.indexOf("本地数据库")?(I.value=!1,A.value=!1):(I.value=!0,A.value=!0)}catch(e){}};return l((async()=>{K()})),{__sfc:!0,vm:a,mysqlData:o,mysqlSetup:v,isSearchClick:q,mysqlNotLocal:A,authType:P,initMysql:S,tableData:C,maskLayer:M,recomList:T,searchClick:R,tableBatchData:$,isNotLocal:I,tableBtnGroup:G,tableBtnGroupRight:V,editPasswordEvent:N,changePermissionEvent:O,goPhpAdmin:F,openPhpAdmin:Q,openToolsEvent:Y,deleteDataEvent:z,setBackupEvents:H,setQuotaEvent:W,goCrontab:()=>{y("/crontab")},tableColumn:J,getMysqlStatusEvent:K,DatabaseView:E,BtLink:d}}}),(function(){var s=this,o=s._self._c,i=s._self._setupProxy;return o("div",[o(a,{staticClass:"!mb-12x",attrs:{type:"info",closable:!1},scopedSlots:s._u([{key:"title",fn:function(){return[o("span",[s._v("请在添加数据库后，务必到")]),o(i.BtLink,{on:{click:i.goCrontab}},[s._v("[计划任务]")]),o("span",[s._v(s._s(s.$t("DataBase.MysqlTips")))])]},proxy:!0}])}),o(i.DatabaseView,{attrs:{databaseType:"Mysql",maskLayer:i.maskLayer,tableData:i.tableData,tableBatch:i.tableBatchData,tableColumn:i.tableColumn,recomList:i.recomList},scopedSlots:s._u([{key:"btn-left",fn:function(){return[o(t,{attrs:{group:i.tableBtnGroup}})]},proxy:!0},{key:"btn-right",fn:function(){return[o(t,{attrs:{group:i.tableBtnGroupRight}}),i.isNotLocal?s._e():o(e,{staticClass:"ml-[1rem] mysql-status",attrs:{"plugin-name":"mysql","is-setup":i.mysqlSetup}})]},proxy:!0}])})],1)}),[],!1,null,"7ea5a46a",null,null).exports;export{q as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./CloudServer.js?v=1714377894636","./index118.js?v=1714377894636","./vue-lib.js?v=1714377894636","./__commonjsHelpers__.js?v=1714377894636","./main.js?v=1714377894636","./modulepreload-polyfill.js?v=1714377894636","./preload-helper.js?v=1714377894636","./request-lib.js?v=1714377894636","./locales-lib.js?v=1714377894636","./public-lib.js?v=1714377894636","./element-lib.js?v=1714377894636","./index39.js?v=1714377894636","./element-lib.js?v=1714377894636","./index59.js?v=1714377894636","./mysql.store.js?v=1714377894636","./check.js?v=1714377894636","./element-lib.js?v=1714377894636","./index.vue_vue_type_style_index_0_lang.js?v=1714377894636","./index45.js?v=1714377894636","./element-ui.common.js?v=1714377894636","./date-util.js?v=1714377894636","./vdom.js?v=1714377894636","./index62.js?v=1714377894636","./cascader-panel.js?v=1714377894636","./index38.js?v=1714377894636","./index28.js?v=1714377894636","./index77.js?v=1714377894636","./element-lib.js?v=1714377894636","./index42.js?v=1714377894636","./database.popup.js?v=1714377894636","./confirm.js?v=1714377894636","./config.js?v=1714377894636","./SetPwd.js?v=1714377894636","./index85.js?v=1714377894636","./element-lib.js?v=1714377894636","./element-lib.js?v=1714377894636","./SetMysqlPermession.js?v=1714377894636","./index41.js?v=1714377894636","./element-lib.js?v=1714377894636","./MysqlTool.js?v=1714377894636","./index53.js?v=1714377894636","./element-lib.js?v=1714377894636","./element-lib.js?v=1714377894636","./database.table.js?v=1714377894636","./index61.js?v=1714377894636"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
