import{w as __unplugin_components_0,x as __unplugin_components_1,q as __unplugin_components_11,s as __unplugin_components_12,u as __unplugin_components_2$1}from"./element-lib.js?v=1714377894636";import{g as getGlobalStore,e as pluginInstallDialog,aS as fileSelectionDialog,bI as getRandomChart,l as dialogView,n as normalizeComponent,r as __unplugin_components_4,a as __unplugin_components_3,a2 as getPluginInfo$1,R as __unplugin_components_1$1,b as __unplugin_components_3$1}from"./main.js?v=1714377894636";import{_ as __unplugin_components_0$1}from"./index77.js?v=1714377894636";import{e as defineComponent,v as reactive,b as ref$1,f as watch,h as onMounted,j as getCurrentInstance,H as h}from"./vue-lib.js?v=1714377894636";import{_ as __unplugin_components_2}from"./index85.js?v=1714377894636";import{_ as __vitePreload}from"./preload-helper.js?v=1714377894636";import{c as checkVariable}from"./check.js?v=1714377894636";import{g as getSiteStore,i as getPluginInfo,G as GetPHPVersion,E as addPhpSite,F as createWebsiteMultiple,H as getDeploymentList,I as setDeploymentInfo}from"./site.store.js?v=1714377894636";import{c as classSettingDialog,T as templateDialog}from"./site.popup.js?v=1714377894636";import{o as onDefaultFormSubmit}from"./confirm.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./index42.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./element-ui.common.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./vdom.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";import"./config.js?v=1714377894636";const _sfc_main$3=defineComponent({__name:"AddSiteDefault",setup(e,{expose:t}){var a,s,n,o;const{refs:{phpModulesTableParams:l},getPhpModulesList:r}=getSiteStore();getGlobalStore();const{proxy:i}=getCurrentInstance(),p=reactive({database:(null==(s=JSON.parse(null!=(a=sessionStorage.getItem("BT-CONFIG"))?a:"{}").mysql)?void 0:s.setup)||!1,ftp:(null==(o=JSON.parse(null!=(n=sessionStorage.getItem("BT-CONFIG"))?n:"{}")["pure-ftpd"])?void 0:o.setup)||!1}),u=ref$1(!1),d=ref$1(),_=ref$1({menuType:"addDefault",path:"/www/wwwroot",ftp:!1,type:"PHP",type_id:0,ps:"",port:"",version:"",need_index:0,need_404:0,sql:!1,codeing:"utf8mb4",webname:"",ftp_username:"",ftp_password:"",datauser:"",datapassword:""}),m=ref$1({ftp:!0,ftpStatus:!0,ftpData:{username:"",password:""},sql:!0,databaseStatus:!0,sqlData:{username:"",password:""},siteStatus:!1,site:{name:!1}});let c="/www/wwwroot/";const f=ref$1([]),v=reactive({path:[{required:!0,message:"请选择路径",trigger:"change"}],webname:[{required:!0,message:"请输入域名",trigger:"blur"}]}),g=ref$1([]),b=async()=>{var e;try{const t=await GetPHPVersion();f.value=t.data;let a="00";null==(e=f.value)||e.forEach((e=>{Number(e.version)>Number(a)&&(a=e.version)})),_.value.version=a}catch(t){}},h=async e=>{let t=Object.assign({},_.value);t.ftp?(m.value.ftpData.username=t.ftp_username,m.value.ftpData.password=t.ftp_password):(delete t.ftp_username,delete t.ftp_password,m.value.ftp=!1),t.sql?(m.value.sqlData.username=t.datauser,m.value.sqlData.password=t.datapassword):(delete t.datauser,delete t.datapassword,m.value.sql=!1),-1!==t.webname.split("\n")[0].indexOf(":")?t.port=t.webname.split("\n")[0].split(":")[1]:t.port=80;let a=t.webname.split("\n");a.shift(),t.webname=JSON.stringify({domain:t.webname.split("\n")[0],domainlist:a,count:a.length}),delete t.menuType,onDefaultFormSubmit({$refs:d.value,loading:{disable:u,text:"提交中，请稍候..."},request:async()=>{const e=await addPhpSite(t);i.$root.close(),(t.ftp||t.sql)&&(m.value.ftpStatus=e.data.ftpStatus,m.value.databaseStatus=e.data.databaseStatus,m.value.siteStatus=e.data.siteStatus,m.value.site.name=!1,dialogView({title:"网站添加结果",area:46,component:()=>__vitePreload((()=>import("./AddResult.js?v=1714377894636")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url),compData:m.value})),i.$message.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:e.status?"添加网站成功":e.msg,type:e.status?"success":"error",duration:e.status?3e3:0,showClose:!e.status}),r()}})};return watch((()=>l.value.typeList),(()=>{g.value=Object.assign([],l.value.typeList),-1===g.value[0].id&&g.value.shift()})),onMounted((async()=>{var e,t;g.value=Object.assign([],l.value.typeList),-1===g.value[0].id&&g.value.shift(),await b();const a=JSON.parse(null!=(e=sessionStorage.getItem("BT-CONFIG"))?e:"{}").sites_path;if(a){const e=checkVariable(a,"string","");_.value.path=e,c=null==(t=e+"/")?void 0:t.replace(/\/\//g,"/")}})),t({onConfirm:h}),{__sfc:!0,phpModulesTableParams:l,getPhpModulesList:r,vm:i,softStatus:p,formDisabled:u,addSiteFormRef:d,addSiteForm:_,resultData:m,defaultPathValue:c,versionOptions:f,rules:v,typeList:g,installPlugin:async e=>{const{data:t}=await getPluginInfo({sName:e});pluginInstallDialog({name:t.name,type:t.type,pluginInfo:t})},onPathChange:()=>{fileSelectionDialog({type:"dir",path:_.value.path,change:e=>{var t;const a=checkVariable(e,"string","");_.value.path=a,c=null==(t=a+"/")?void 0:t.replace(/\/\//g,"/")}})},getPHPVersion:b,installOtherPhp:async()=>{try{const{data:e}=await getPluginInfo({sName:"php-8.2"});pluginInstallDialog({name:"php-8.2",type:e.type,softData:e})}catch(e){}},handleInputName:e=>{var t,a,s,n,o,l;_.value.webname=e,_.value.ps=e.split("\n")[0],_.value.path=(null==c?void 0:c.replace(/\/\//g,"/"))+(null==(a=null==(t=e.split("\n")[0])?void 0:t.replace(/:/g,"_"))?void 0:a.trim()),_.value.ftp_username=null==(n=null==(s=e.split("\n")[0])?void 0:s.replace(/\./g,"_"))?void 0:n.replace(/:/g,"_"),_.value.ftp_password=getRandomChart(12),_.value.datauser=null==(l=null==(o=e.split("\n")[0])?void 0:o.replace(/\./g,"_"))?void 0:l.replace(/:/g,"_"),_.value.datapassword=getRandomChart(12)},onConfirm:h,classSettingDialog:classSettingDialog}}});var _sfc_render$3=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"p-20x"},[t(__unplugin_components_0,{ref:"addSiteFormRef",attrs:{model:a.addSiteForm,rules:a.rules,disabled:a.formDisabled}},[t(__unplugin_components_1,{attrs:{label:"域名",prop:"webname"}},[t(__unplugin_components_4,{ref:"popover",attrs:{placement:"top-start","popper-class":"green-tips-popover",title:"",width:"400",trigger:"focus"}},[t("div",{staticClass:"!p-12x bg-[#20a53a] text-white"},[e._v(" 如需填写多个域名，请换行填写，每行一个域名，默认为80端口"),t("br"),e._v(" IP地址格式：192.168.1.199"),t("br"),e._v(" 泛解析添加方法 *.domain.com"),t("br"),e._v(" 如另加端口格式为 www.domain.com:88 ")]),t(__unplugin_components_2,{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],attrs:{slot:"reference",type:"textarea",width:"52rem",rows:7,resize:"none",placeholder:"如需填写多个域名，请换行填写，每行一个域名，默认为80端口\nIP地址格式：192.168.1.199\n泛解析添加方法 *.domain.com\n如另加端口格式为 www.domain.com:88"},on:{input:a.handleInputName},slot:"reference",model:{value:a.addSiteForm.webname,callback:function(t){e.$set(a.addSiteForm,"webname",t)},expression:"addSiteForm.webname"}})],1)],1),t(__unplugin_components_1,{attrs:{label:"备注"}},[t(__unplugin_components_2,{attrs:{placeholder:"请输入备注,可为空",width:"52rem"},model:{value:a.addSiteForm.ps,callback:function(t){e.$set(a.addSiteForm,"ps",t)},expression:"addSiteForm.ps"}})],1),t(__unplugin_components_1,{attrs:{label:"根目录",prop:"path"}},[t(__unplugin_components_2,{attrs:{placeholder:"请输入根目录",iconType:"folder",width:"52rem"},on:{folder:a.onPathChange},model:{value:a.addSiteForm.path,callback:function(t){e.$set(a.addSiteForm,"path",t)},expression:"addSiteForm.path"}})],1),t(__unplugin_components_1,{attrs:{label:"FTP"}},[t("div",{staticClass:"items-center flex"},[t(__unplugin_components_11,{attrs:{disabled:!a.softStatus.ftp},model:{value:a.addSiteForm.ftp,callback:function(t){e.$set(a.addSiteForm,"ftp",t)},expression:"addSiteForm.ftp"}},[t(__unplugin_components_12,{attrs:{label:"不创建",value:!1}}),t(__unplugin_components_12,{attrs:{label:"创建",value:!0}})],1),a.softStatus.ftp?e._e():t("span",{staticClass:"ml-4x text-danger cursor-pointer !text-[1.2rem]",on:{click:function(e){return a.installPlugin("pureftpd")}}},[e._v("未安装FTP，点击安装")])],1)]),a.addSiteForm.ftp?t(__unplugin_components_1,{attrs:{label:"FTP账号"}},[t("div",{staticClass:"flex items-center"},[t(__unplugin_components_2,{attrs:{placeholder:"创建FTP账号"},model:{value:a.addSiteForm.ftp_username,callback:function(t){e.$set(a.addSiteForm,"ftp_username",t)},expression:"addSiteForm.ftp_username"}}),t(__unplugin_components_1,{attrs:{label:"密码"}},[t(__unplugin_components_2,{attrs:{placeholder:"FTP密码"},model:{value:a.addSiteForm.ftp_password,callback:function(t){e.$set(a.addSiteForm,"ftp_password",t)},expression:"addSiteForm.ftp_password"}})],1)],1),t("span",{staticClass:"text-[#999] text-[1.2rem]"},[e._v(" 创建站点的同时，为站点创建一个对应FTP帐户，并且FTP目录指向站点所在目录。 ")])]):e._e(),t(__unplugin_components_1,{attrs:{label:"数据库"}},[t("div",{staticClass:"flex items-center"},[t(__unplugin_components_11,{attrs:{disabled:!a.softStatus.database},model:{value:a.addSiteForm.sql,callback:function(t){e.$set(a.addSiteForm,"sql",t)},expression:"addSiteForm.sql"}},[t(__unplugin_components_12,{attrs:{label:"不创建",value:!1}}),t(__unplugin_components_12,{attrs:{label:"MySQL",value:"MySQL"}})],1),a.softStatus.database?e._e():t("span",{staticClass:"ml-4x text-danger cursor-pointer !text-[1.2rem]",on:{click:function(e){return a.installPlugin("mysql")}}},[e._v("未安装数据库，点击安装")]),a.addSiteForm.sql?t(__unplugin_components_11,{staticClass:"ml-8x",model:{value:a.addSiteForm.codeing,callback:function(t){e.$set(a.addSiteForm,"codeing",t)},expression:"addSiteForm.codeing"}},[t(__unplugin_components_12,{attrs:{label:"utf8mb4",value:"utf8mb4"}}),t(__unplugin_components_12,{attrs:{label:"utf8",value:"utf8"}}),t(__unplugin_components_12,{attrs:{label:"gbk",value:"gbk"}}),t(__unplugin_components_12,{attrs:{label:"big5",value:"big5"}})],1):e._e()],1)]),a.addSiteForm.sql?t(__unplugin_components_1,{attrs:{label:"数据库账号"}},[t("div",{staticClass:"flex items-center"},[t(__unplugin_components_2,{attrs:{placeholder:"创建数据库账号"},model:{value:a.addSiteForm.datauser,callback:function(t){e.$set(a.addSiteForm,"datauser",t)},expression:"addSiteForm.datauser"}}),t(__unplugin_components_1,{attrs:{label:"密码"}},[t(__unplugin_components_2,{attrs:{placeholder:"数据库密码"},model:{value:a.addSiteForm.datapassword,callback:function(t){e.$set(a.addSiteForm,"datapassword",t)},expression:"addSiteForm.datapassword"}})],1)],1),t("span",{staticClass:"text-[#999] text-[1.2rem]"},[e._v(" 创建站点的同时，为站点创建一个对应的数据库帐户，方便不同站点使用不同数据库。 ")])]):e._e(),t(__unplugin_components_1,{attrs:{label:"PHP版本"}},[t(__unplugin_components_11,{model:{value:a.addSiteForm.version,callback:function(t){e.$set(a.addSiteForm,"version",t)},expression:"addSiteForm.version"}},e._l(a.versionOptions,(function(e){return t(__unplugin_components_12,{key:e.value,attrs:{label:e.name,value:e.version}})})),1)],1),t(__unplugin_components_1,{attrs:{label:"网站分类"}},[t(__unplugin_components_11,{model:{value:a.addSiteForm.type_id,callback:function(t){e.$set(a.addSiteForm,"type_id",t)},expression:"addSiteForm.type_id"}},e._l(a.typeList,(function(e){return t(__unplugin_components_12,{key:e.value,attrs:{label:e.name,value:e.id}})})),1),t(__unplugin_components_3,{staticClass:"ml-8x",on:{click:function(e){return a.classSettingDialog()}}},[e._v("分类设置")])],1)],1)],1)},_sfc_staticRenderFns$3=[],__component__$3=normalizeComponent(_sfc_main$3,_sfc_render$3,_sfc_staticRenderFns$3,!1,null,"21b2925f",null,null);const AddSiteDefault=__component__$3.exports,_sfc_main$2=defineComponent({__name:"BatchAddSite",setup(__props,{expose:expose}){const{refs:{batchContent:batchContent},getPhpModulesList:getPhpModulesList}=getSiteStore(),{proxy:vm}=getCurrentInstance(),content=ref$1("域名|1|0|0|0\n域名|1|0|0|0\n域名|1|0|0|0"),strim=str=>{let reg_str="/ /g",reg=eval(reg_str);return str=str.replace(reg,""),str},check_domain=e=>/^([\w\u4e00-\u9fa5\-\*]{1,100}\.){1,10}([\w\u4e00-\u9fa5\-]{1,24}|[\w\u4e00-\u9fa5\-]{1,24}\.[\w\u4e00-\u9fa5\-]{1,24})$/.test(strim(e)),check_port=e=>/^([1-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/.test(e),resultColumn=[{label:"名称",prop:"name"},{label:"FTP",prop:"db_status",render:e=>"boolean"==typeof e.db_status?h("span",{class:e.db_status?"text-primary":""},e.db_status?"已配置":"未配置"):h("span",e.db_status)},{label:"数据库",prop:"ftp_status",render:e=>"boolean"==typeof e.ftp_status?h("span",{class:e.ftp_status?"text-primary":""},e.ftp_status?"已配置":"未配置"):h("span",e.ftp_status)},{label:"结果",render:e=>h("span",{class:e.status?"text-primary":"text-danger truncate !w-[9.6rem] inline-block"},e.status?"操作成功":e.msg)}],onConfirm=async e=>{let t=batchContent.value.split("\n"),a=[];for(let o=0;o<t.length;o++){let e=t[o],s=e.split("|"),n=[];if(""!==e){for(let e=0;e<s.length;e++){let t=o+1,a=strim(s[e]);switch(n.push(a),e){case 0:let e=a.split(",");for(let a=0;a<e.length;a++){let s=e[a].trim().split(":");if(!check_domain(s[0]))return vm.$message.error("第"+t+"行,域名格式错误【"+s[0]+"】"),!1;if(void 0!==s[1]&&!check_port(s[1]))return vm.$message.error("第"+t+"行,端口格式错误【"+s[1]+"】"),!1}break;case 1:if("1"!==a&&a.indexOf("/")<-1)return vm.$message.error("第"+t+"行,站点目录格式错误【"+a+"】"),!1}}a.push(n.join("|").replace(/\r|\n/,""))}}let s=vm.$load("正在批量添加站点,请稍后...");try{const e=await createWebsiteMultiple({create_type:"txt",websites_content:JSON.stringify(a)});let t=[];Object.keys(e.success).forEach((a=>{t.push({name:a,status:!0,ftp_status:e.success[a].ftp_status,db_status:e.success[a].db_status})})),Object.keys(e.error).forEach((a=>{t.push({name:a,status:!1,ftp_status:"--",db_status:"--",msg:e.error[a]})})),getPhpModulesList(),vm.$root.close(),dialogView({title:"批量添加结果",area:46,isAsync:!0,component:()=>__vitePreload((()=>import("./index63.js?v=1714377894636")),__vite__mapDeps([11,12,9,4,3,8,1,2,5,6,7,13]),import.meta.url),compData:{resultColumn:resultColumn,resultData:t}}),batchContent.value="域名|1|0|0|0\n域名|1|0|0|0\n域名|1|0|0|0"}catch(n){}finally{s.close()}};return expose({onConfirm:onConfirm}),{__sfc:!0,batchContent:batchContent,getPhpModulesList:getPhpModulesList,vm:vm,content:content,strim:strim,check_domain:check_domain,check_port:check_port,resultColumn:resultColumn,onConfirm:onConfirm}}});var _sfc_render$2=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"p-20x"},[t(__unplugin_components_2,{attrs:{type:"textarea",rows:12,resize:"none",width:"72rem"},model:{value:a.batchContent,callback:function(e){a.batchContent=e},expression:"batchContent"}}),e._m(0)],1)},_sfc_staticRenderFns$2=[function(){var e=this,t=e._self._c;return e._self._setupProxy,t("ul",{staticClass:"mt-8x text-[#999] leading-10"},[t("li",[e._v("批量格式：域名|根目录|FTP|数据库|PHP版本")]),t("li",[e._v("域名参数：多个域名用 , 分割")]),t("li",[e._v("根目录参数：填写 1 为自动创建，或输入具体目录")]),t("li",[e._v("FTP参数：填写 1 为自动创建，填写 0 为不创建")]),t("li",[e._v("数据库参数：填写 1 为自动创建，填写 0 为不创建")]),t("li",[e._v("PHP版本参数：填写 0 为静态，或输入PHP具体版本号列如：56、71、74")]),t("li",[e._v("如需添加多个站点，请换行填写")]),t("li",[e._v("案例："),t("span",[e._v("bt.cn,test.cn:8081|/www/wwwroot/bt.cn|1|1|56")])])])}],__component__$2=normalizeComponent(_sfc_main$2,_sfc_render$2,_sfc_staticRenderFns$2,!1,null,"31108bda",null,null);const AddSiteBatch=__component__$2.exports,_sfc_main$1=defineComponent({__name:"AddDeployment",setup(e,{expose:t}){const{proxy:a}=getCurrentInstance(),s=ref$1(!1),n=ref$1(),o=reactive({path:[{required:!0,message:"请选择日志路径",trigger:"change"}],webname:[{required:!0,message:"请输入域名",trigger:["change","blur"]}]}),{refs:{templateId:l,tempList:r},getPhpModulesList:i}=getSiteStore(),p=ref$1({menuType:"addDeployment",path:"/www/wwwroot",ftp:!1,type:"PHP",type_id:0,ps:"",port:"",version:"",need_index:0,need_404:0,sql:!1,codeing:"utf8mb4",webname:"",ftp_username:"",ftp_password:"",datauser:"",datapassword:""}),u=ref$1({ftp:!0,ftpData:{username:"",password:""},sql:!0,databaseStatus:!0,sqlData:{username:"",password:""},siteStatus:!1,site:{name:""}}),d=ref$1({isSetup:!1,versions:[],version:"",code:"utf8mb4"}),_=ref$1({title:"111",version:"222"}),m=reactive({datauser:"",datapassword:"",type:"MySQL",code:"utf8mb4",version:""}),c=ref$1(null),f=ref$1([]),v=ref$1(!1),g=ref$1(!1),b=async()=>{try{const{data:e}=await getDeploymentList();r.value=e.list,f.value=e.list,c.value=e}catch(e){}},h=async e=>{let t=[];const a=null==e?void 0:e.php.split(",");d.value.versions.forEach((e=>{a.forEach((a=>{e.version===a&&t.push(a)}))})),d.value.version=t[t.length-1],m.version=d.value.version,p.value.version=d.value.version},w=async()=>{try{const{data:e}=await getPluginInfo$1({sName:"mysql"}),t=await GetPHPVersion();d.value.isSetup=e.setup,d.value.versions=t.data.filter((e=>"00"!==e.version))}catch(e){}},S=async e=>{let t=Object.assign({},p.value);t.ftp?(u.value.ftpData.username=t.ftp_username,u.value.ftpData.password=t.ftp_password):(delete t.ftp_username,delete t.ftp_password,u.value.ftp=!1),t.sql?(u.value.sqlData.username=t.user,u.value.sqlData.password=t.password):(delete t.datauser,delete t.datapassword,u.value.sql=!1),-1!==t.webname.split("\n")[0].indexOf(":")?t.port=t.webname.split("\n")[0].split(":")[1]:t.port=80;let o=t.webname.split("\n");o.shift(),t.webname=JSON.stringify({domain:t.webname.split("\n")[0],domainlist:o,count:o.length}),delete t.menuType,onDefaultFormSubmit({$refs:n.value,loading:{disable:s,text:"提交中，请稍候..."},request:async()=>{const e=await addPhpSite(t);a.$root.close();let s=a.$load("正在部署中...");const n=await setDeploymentInfo({source:1,site_name:JSON.parse(t.webname).domain,php_version:t.version,dname:r.value.find((e=>e.id===l.value)).name});s.close(),e.data.siteStatus&&(u.value.siteStatus=!0,u.value.site.name=JSON.parse(t.webname).domain+n.data.success_url),t.ftp||t.sql?(u.value.sqlData.username=t.datauser,u.value.sqlData.password=t.datapassword,u.value.databaseStatus=e.data.databaseStatus,dialogView({title:"网站添加结果",area:46,component:()=>__vitePreload((()=>import("./AddResult.js?v=1714377894636")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url),compData:u.value})):a.$message.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:e.status?"添加网站成功":e.msg,type:e.status?"success":"error",duration:e.status?3e3:0,showClose:!e.status}),i()}})};return watch((()=>l.value),(e=>{const t=f.value.findIndex((t=>t.id===e));t<5?(_.value={},h(f.value[t])):(_.value=f.value.find((t=>t.id===e)),h(_.value)),p.value.datauser="sql"+getRandomChart(6),p.value.datapassword=getRandomChart(6,"password")}),{immediate:!0}),watch((()=>d.version),(()=>{p.value.version=d.value.version})),t({onConfirm:S}),onMounted((async()=>{var e,t;g.value=!0,await w(),await b(),l.value=null==(e=f.value[0])?void 0:e.id,await h(f.value[0]),g.value=!1,p.value.sql="MySQL",_.value={};const a=JSON.parse(null!=(t=sessionStorage.getItem("BT-CONFIG"))?t:"{}").sites_path;a&&(p.value.path=a)})),{__sfc:!0,vm:a,formDisabled:s,addDeploySiteFormRef:n,rules:o,templateId:l,tempList:r,getPhpModulesList:i,addDeploySiteForm:p,resultData:u,configData:d,selectedTemplate:_,editForm:m,templateData:c,templateList:f,editPopup:v,columnLoad:g,onPathChange:()=>{fileSelectionDialog({type:"dir",path:p.value.path,change:e=>{p.value.path=e}})},handleInputName:e=>{var t,a,s;p.value.webname=e,p.value.ps=e.split("\n")[0],p.value.path="/www/wwwroot/"+(null==(a=null==(t=e.split("\n")[0])?void 0:t.replace(/:/g,"_"))?void 0:a.trim()),p.value.datapassword=getRandomChart(),p.value.datauser=null==(s=e.split("\n")[0])?void 0:s.replace(/\./g,"_")},getTemplateList:b,hansleSelected:e=>{l.value=e.id},openOtherTemplate:()=>{templateDialog(c.value)},handleOpen:()=>{v.value=!0,m.datauser=p.value.datauser,m.datapassword=p.value.datapassword,m.version=d.value.version},getPhpVersion:h,getConfig:w,onConfirmConfig:async()=>{v.value=!1,p.value.datauser=m.datauser,p.value.datapassword=m.datapassword,p.value.codeing=m.code,p.value.version=d.value.version},onConfirm:S}}});var _sfc_render$1=function(){var e,t,a=this,s=a._self._c,n=a._self._setupProxy;return s("div",{staticClass:"p-20x pb-0 w-full"},[s("span",{staticClass:"py-8x px-12x text-[#666] bg-[#e8f6eb] !w-full block"},[a._v("快速的部署网站程序，商城、论坛、博客、框架等程序，"),s(__unplugin_components_3,{attrs:{href:"https://www.bt.cn/bbs/thread-33063-1-1.html"}},[a._v("免费入驻平台")])],1),s(__unplugin_components_0,{ref:"addDeploySiteFormRef",staticClass:"pt-12x",attrs:{model:n.addDeploySiteForm,rules:n.rules}},[s(__unplugin_components_1,{attrs:{label:"模板部署"}},[s("div",{directives:[{name:"loading",rawName:"v-loading",value:n.columnLoad,expression:"columnLoad"}],staticClass:"inline-grid grid-cols-3 text-[1.2rem] gap-x-6 gap-y-2 !w-[60rem] !h-[12.3rem]"},[a._l(n.templateList,(function(e,t){return s("div",{directives:[{name:"show",rawName:"v-show",value:t<5,expression:"index < 5"}],key:e.id,staticClass:"mb-4x w-full flex items-center border border-[#ccc] py-4x px-8x rounded-4x cursor-pointer template-hover",class:{"template-focus":n.templateId===e.id},on:{click:function(t){return n.hansleSelected(e)}}},[s(__unplugin_components_4,{ref:"popover",refInFor:!0,attrs:{placement:"top-start","popper-class":"white-tips-popover",trigger:"hover"}},[s("div",{staticClass:"!p-12x flex flex-col text-[#666]"},[s("span",[a._v("名称："+a._s(e.title))]),s("span",[a._v("版本："+a._s(e.version))]),s("span",[a._v("简介："+a._s(e.ps.split("<")[0]))]),s("span",[a._v("官网："+a._s(e.official))]),s("span",[a._v("评价："+a._s(e.score))])]),s("div",{staticClass:"w-full flex items-center",attrs:{slot:"reference"},slot:"reference"},[s(__unplugin_components_1$1,{staticClass:"w-[3.6rem] mr-4x",attrs:{src:"/static/vite/images/site_dep_ico/".concat(e.name,".png")}}),s("div",{staticClass:"flex flex-col items-start leading-9 w-full"},[s("span",{staticClass:"truncate font-bold"},[a._v(a._s(e.title)+" "+a._s(e.version))]),s("span",{staticClass:"w-[14rem] truncate"},[a._v(a._s(e.ps.split("<")[0]))])])],1)])],1)})),s("div",{staticClass:"mb-8x w-full flex items-center border border-[#ccc] py-8x px-12x rounded-4x cursor-pointer template-hover",class:{"justify-center":!n.selectedTemplate.id,"template-focus":n.selectedTemplate.id},on:{click:n.openOtherTemplate}},[s("div",{staticClass:"flex items-center"},[(null==(e=n.selectedTemplate)?void 0:e.id)?s("i",{staticClass:"el-icon-success text-[3.2rem] mr-8x"}):a._e(),s("div",{staticClass:"flex flex-col items-start leading-10 w-full"},[(null==(t=n.selectedTemplate)?void 0:t.id)?s("span",{staticClass:"truncate font-bold"},[a._v(a._s(n.selectedTemplate.title)+" "+a._s(n.selectedTemplate.version))]):a._e(),s(__unplugin_components_3,[a._v("更多模板 >>")])],1)])])],2)]),s(__unplugin_components_1,{attrs:{label:"域名",prop:"webname"}},[s(__unplugin_components_4,{ref:"popover",attrs:{placement:"top-start","popper-class":"green-tips-popover",title:"",width:"400",trigger:"focus"}},[s("div",{staticClass:"!p-12x bg-[#20a53a] text-white"},[a._v(" 如需填写多个域名，请换行填写，每行一个域名，默认为80端口"),s("br"),a._v(" IP地址格式：192.168.1.199"),s("br"),a._v(" 泛解析添加方法 *.domain.com"),s("br"),a._v(" 如另加端口格式为 www.domain.com:88 ")]),s(__unplugin_components_2,{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],attrs:{slot:"reference",type:"textarea",width:"52rem",rows:4,resize:"none",placeholder:"如需填写多个域名，请换行填写，每行一个域名，默认为80端口\nIP地址格式：192.168.1.199\n泛解析添加方法 *.domain.com\n如另加端口格式为 www.domain.com:88"},on:{input:n.handleInputName},slot:"reference",model:{value:n.addDeploySiteForm.webname,callback:function(e){a.$set(n.addDeploySiteForm,"webname",e)},expression:"addDeploySiteForm.webname"}})],1)],1),s(__unplugin_components_1,{attrs:{label:"备注"}},[s(__unplugin_components_2,{attrs:{placeholder:"请输入备注,可为空",width:"52rem"},model:{value:n.addDeploySiteForm.ps,callback:function(e){a.$set(n.addDeploySiteForm,"ps",e)},expression:"addDeploySiteForm.ps"}})],1),s(__unplugin_components_1,{attrs:{label:"根目录",prop:"path"}},[s(__unplugin_components_2,{attrs:{placeholder:"请输入根目录",iconType:"folder",width:"52rem"},on:{folder:n.onPathChange},model:{value:n.addDeploySiteForm.path,callback:function(e){a.$set(n.addDeploySiteForm,"path",e)},expression:"addDeploySiteForm.path"}})],1),s(__unplugin_components_1,{attrs:{label:"其他配置",prop:"other"}},[s("div",{staticClass:"flex flex-col bg-[#f8f8f8] p-12x px-16x text-[1.2rem]"},[s("div",{staticClass:"flex items-center justify-between"},[s("span",{class:{"text-danger":!n.configData.isSetup}},[a._v("数据库："+a._s(n.configData.isSetup?"MySQL数据库":"数据库未安装！"))]),s("span",[a._v("编码："+a._s(n.configData.code))]),s("span",[a._v("账号："+a._s(n.addDeploySiteForm.datauser))]),s("span",[a._v("密码："+a._s(n.addDeploySiteForm.datapassword))]),s("span",[a._v("PHP版本："+a._s(n.configData.version))])])]),s("span",{staticClass:"text-[#999]"},[a._v("其他配置初始状态为默认选择的配置项，如需修改请点击 "),s(__unplugin_components_3,{on:{click:n.handleOpen}},[a._v("编辑配置")])],1)])],1),s(__unplugin_components_3$1,{attrs:{title:"编辑配置",visible:n.editPopup,showFooter:"",area:62},on:{"update:visible":function(e){n.editPopup=e},confirm:n.onConfirmConfig}},[s("div",{staticClass:"p-20x"},[s(__unplugin_components_0,{attrs:{model:n.editForm}},[s(__unplugin_components_1,{attrs:{label:"数据库"}},[s(__unplugin_components_11,{model:{value:n.addDeploySiteForm.sql,callback:function(e){a.$set(n.addDeploySiteForm,"sql",e)},expression:"addDeploySiteForm.sql"}},[s(__unplugin_components_12,{attrs:{label:"MySQL",value:"MySQL"}})],1),s(__unplugin_components_11,{staticClass:"ml-8x",model:{value:n.editForm.code,callback:function(e){a.$set(n.editForm,"code",e)},expression:"editForm.code"}},[s(__unplugin_components_12,{attrs:{label:"utf8mb4",value:"utf8mb4"}}),s(__unplugin_components_12,{attrs:{label:"utf8",value:"utf8"}}),s(__unplugin_components_12,{attrs:{label:"gbk",value:"gbk"}}),s(__unplugin_components_12,{attrs:{label:"big5",value:"big5"}})],1)],1),s(__unplugin_components_1,{attrs:{label:"数据库账号"}},[s("div",{staticClass:"flex items-center"},[s(__unplugin_components_2,{attrs:{placeholder:"创建数据库账号",width:"17rem"},model:{value:n.editForm.datauser,callback:function(e){a.$set(n.editForm,"datauser",e)},expression:"editForm.datauser"}}),s(__unplugin_components_1,{attrs:{label:""}},[s(__unplugin_components_2,{staticClass:"ml-8x",attrs:{width:"16rem",placeholder:"数据库密码"},model:{value:n.editForm.datapassword,callback:function(e){a.$set(n.editForm,"datapassword",e)},expression:"editForm.datapassword"}})],1)],1),s("span",{staticClass:"text-[#999] text-[1.2rem]"},[a._v(" 创建站点的同时，为站点创建一个对应的数据库帐户，方便不同站点使用不同数据库。 ")])]),s(__unplugin_components_1,{attrs:{label:"PHP版本"}},[s(__unplugin_components_11,{model:{value:n.editForm.version,callback:function(e){a.$set(n.editForm,"version",e)},expression:"editForm.version"}},a._l(n.configData.versions,(function(e){return s(__unplugin_components_12,{key:e.value,attrs:{label:e.name,value:e.version}})})),1)],1)],1)],1)])],1)},_sfc_staticRenderFns$1=[],__component__$1=normalizeComponent(_sfc_main$1,_sfc_render$1,_sfc_staticRenderFns$1,!1,null,"a486c5a7",null,null);const AddDeployment=__component__$1.exports,_sfc_main=defineComponent({__name:"index",setup(e,{expose:t}){const{proxy:a}=getCurrentInstance(),s=ref$1("addDefault"),n=ref$1(),o=ref$1(),l=ref$1(),r=async e=>{var t,a,r;"addDefault"!==s.value?"addDeployment"!==s.value?"addBatch"!==s.value||await(null==(r=l.value)?void 0:r.onConfirm()):await(null==(a=o.value)?void 0:a.onConfirm()):await(null==(t=n.value)?void 0:t.onConfirm())};return t({onConfirm:r}),{__sfc:!0,vm:a,tabActive:s,AddSiteDefaultRef:n,AddDeploymentRef:o,AddSiteBatchRef:l,onConfirm:r,AddSiteDefault:AddSiteDefault,AddSiteBatch:AddSiteBatch,AddDeployment:AddDeployment}}});var _sfc_render=function(){var e=this._self._c,t=this._self._setupProxy;return e("div",{staticClass:"p-20x"},[e(__unplugin_components_0$1,{attrs:{type:"navtwo"},model:{value:t.tabActive,callback:function(e){t.tabActive=e},expression:"tabActive"}},[e(__unplugin_components_2$1,{attrs:{label:"创建站点",name:"addDefault"}},[e(t.AddSiteDefault,{ref:"AddSiteDefaultRef"})],1),e(__unplugin_components_2$1,{attrs:{label:"一键部署",name:"addDeployment",lazy:!0}},[e(t.AddDeployment,{ref:"AddDeploymentRef"})],1),e(__unplugin_components_2$1,{attrs:{label:"批量创建",name:"addBatch",lazy:!0}},[e(t.AddSiteBatch,{ref:"AddSiteBatchRef"})],1)],1)],1)},_sfc_staticRenderFns=[],__component__=normalizeComponent(_sfc_main,_sfc_render,_sfc_staticRenderFns,!1,null,"df13e210",null,null);const index=__component__.exports;export{index as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./AddResult.js?v=1714377894636","./main.js?v=1714377894636","./modulepreload-polyfill.js?v=1714377894636","./vue-lib.js?v=1714377894636","./__commonjsHelpers__.js?v=1714377894636","./preload-helper.js?v=1714377894636","./request-lib.js?v=1714377894636","./locales-lib.js?v=1714377894636","./public-lib.js?v=1714377894636","./element-lib.js?v=1714377894636","./index45.js?v=1714377894636","./index63.js?v=1714377894636","./index39.js?v=1714377894636","./element-lib.js?v=1714377894636"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
