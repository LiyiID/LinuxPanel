import{_ as e}from"./index118.js?v=1714377894636";import{_ as t}from"./index85.js?v=1714377894636";import{w as s,x as r,q as l,s as a}from"./element-lib.js?v=1714377894636";import{ck as o,ct as i,n as p}from"./main.js?v=1714377894636";import{e as m,b as c,S as n,f as d,j as u}from"./vue-lib.js?v=1714377894636";import{o as f}from"./confirm.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import{getFirewallStore as b}from"./firewall.store.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./config.js?v=1714377894636";import"./check.js?v=1714377894636";const y=p(m({__name:"FirewallEditIpRules",props:{compData:{default:()=>{}}},setup(e,{expose:t}){const s=e,{getFirewalInfoEvent:r}=b(),{proxy:l}=u(),a=c({types:"accept",brief:"",address:"",id:""}),p=c([{text:'支持添加IP：如果添加多个IP请用","隔开'},{text:"支持添加IP段,如：192.168.0.0/24"},{text:"支持添加IP范围,格式如：192.168.1.xx-192.168.1.xx，暂不支持跨网段范围"}]),m=c([{title:"允许",key:"accept"},{title:"拒绝",key:"drop"}]),y=c(),j=c(!1),x={address:[{validator:(e,t,s)=>{t.length>0?s():s(new Error(l.$t("safety.specifiedIPPlaceHolder")))},trigger:["blur","change"]}]},v=n("reload",(()=>{})),F=()=>{l.$refs.editIpRules.resetFields(),v()},_=async e=>{let t=a.value;s.compData.selectOptions||delete t.id,f({$refs:y.value,loading:j,request:async()=>s.compData.selectOptions?await o({data:JSON.stringify(t)}):await i({data:JSON.stringify(t)}),async complete(){s.compData.refreshEvent(),r(),e()}})};return d((()=>s.compData.selectOptions),(e=>{e&&(Object.assign(a.value,s.compData.selectOptions),a.value.types=s.compData.selectOptions.types)}),{immediate:!0}),t({onConfirm:_,onCancel:F}),{__sfc:!0,props:s,getFirewalInfoEvent:r,vm:l,ruleForm:a,helpList:p,typesOptions:m,editIpRules:y,formDisabled:j,rules:x,reloadData:v,onCancel:F,submitFrom:_}}}),(function(){var o=this,i=o._self._c,p=o._self._setupProxy;return i(s,{ref:"editIpRules",staticClass:"p-[2rem] addfrom",attrs:{rules:p.rules,disabled:p.formDisabled,model:p.ruleForm,"label-width":"5rem"}},[i(r,{attrs:{label:"IP"}},[i(t,{attrs:{type:"textarea",width:"20rem",resize:"none",rows:4,placeholder:o.$t("safety.ipPlaceHolder"),disabled:!!p.props.compData.selectOptions,clearable:""},model:{value:p.ruleForm.address,callback:function(e){o.$set(p.ruleForm,"address",e)},expression:"ruleForm.address"}})],1),i(r,{attrs:{label:o.$t("safety.policy")}},[i(l,{staticClass:"w-[20rem]",model:{value:p.ruleForm.types,callback:function(e){o.$set(p.ruleForm,"types",e)},expression:"ruleForm.types"}},o._l(p.typesOptions,(function(e){return i(a,{key:e.key,attrs:{label:e.title,value:e.key}})})),1)],1),i(r,{attrs:{label:p.vm.$t("safety.brief")}},[i(t,{attrs:{width:"20rem",placeholder:o.$t("safety.briefPlaceHolder"),clearable:""},model:{value:p.ruleForm.brief,callback:function(e){o.$set(p.ruleForm,"brief",e)},expression:"ruleForm.brief"}})],1),i(e,{staticClass:"pl-[5.6rem] pt-[2.4rem]",attrs:{list:p.helpList,listStyle:"disc"}})],1)}),[],!1,null,null,null,null).exports;export{y as default};
