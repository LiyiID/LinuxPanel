import{_ as e}from"./index85.js?v=1714377894636";import{w as r,x as a}from"./element-lib.js?v=1714377894636";import{o as t,n as o}from"./main.js?v=1714377894636";import{_ as s}from"./index41.js?v=1714377894636";import{e as l,v as m,b as i,j as n}from"./vue-lib.js?v=1714377894636";import{u as c}from"./docker.store.js?v=1714377894636";import{a0 as p}from"./docker.api.js?v=1714377894636";import{g as d,a as b}from"./check.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";const u=o(l({__name:"AddNetDialog",props:{compData:{default:()=>({})}},setup(e,{expose:r}){const a=e,{proxy:o}=n(),{getNList:s}=c(),l=m({name:"",driver:"bridge",options:"",subnet:"",gateway:"",iprange:"",labels:"",remark:""}),u=i(!1),f=i(),v=i(!1),g={name:[{validator:(e,r,a)=>{""===r?a(new Error("请输入网络名")):a()},trigger:["blur"]}],subnet:[{validator:(e,r,a)=>{""===r?a(new Error("请输入子网")):d(r)?a():a(new Error("请输入正确的子网"))},trigger:["blur"]}],gateway:[{validator:(e,r,a)=>{""===r?a(new Error("请输入网关")):b(r)?a():a(new Error("请输入正确的网关"))},trigger:["blur"]}],iprange:[{validator:(e,r,a)=>{""===r?a(new Error("请输入IP范围")):d(r)?a():a(new Error("请输入正确的IP范围"))},trigger:["blur"]}]},w=i([{key:"bridge",title:"bridge"},{key:"ipvlan",title:"ipvlan"},{key:"macvlan",title:"macvlan"},{key:"overlay",title:"overlay"}]),h=async e=>{try{await o.$refs.cmdFormRef.validate((async e=>{if(e){const e=await p({data:JSON.stringify(l)});e.status?(o.$emit("close"),s(),o.$message.success(e.msg)):o.$message.error(e.msg)}}))}catch(r){}},F=()=>{};return r({onConfirm:h,onOpen:F}),{__sfc:!0,vm:o,props:a,getNList:s,cmdForm:l,more:u,cmdFormRef:f,formDisabled:v,cmdRules:g,options:w,changeType:e=>{l.driver=e},onConfirm:h,onOpen:F,isRelease:t}}}),(function(){var t=this,o=t._self._c,l=t._self._setupProxy;return o("div",{staticClass:"flex flex-col p-16x lib-box"},[o(r,{ref:"cmdFormRef",staticClass:"relative w-full",attrs:{size:"small",model:l.cmdForm,rules:l.cmdRules,disabled:l.formDisabled,"label-position":"right"},nativeOn:{submit:function(e){e.preventDefault()}}},[o(a,{staticStyle:{"margin-bottom":"1.5rem"},attrs:{prop:"name",label:"网络名"}},[o(e,{attrs:{width:"35rem",placeholder:"请输入网络名"},model:{value:l.cmdForm.name,callback:function(e){t.$set(l.cmdForm,"name",e)},expression:"cmdForm.name"}})],1),l.isRelease?t._e():o(a,{staticClass:"!mb-[1.5rem]",attrs:{prop:"path",label:"设备"}},[o(s,{staticClass:"w-[35rem]",attrs:{options:l.options,change:l.changeType},model:{value:l.cmdForm.driver,callback:function(e){t.$set(l.cmdForm,"driver",e)},expression:"cmdForm.driver"}})],1),o("div",{staticClass:"flex items-center mb-[1.5rem]",attrs:{id:"netInfo"}},[o(a,{attrs:{prop:"subnet",label:"子网"}},[o(e,{attrs:{width:"15rem",placeholder:"例：124.42.0.0/16"},model:{value:l.cmdForm.subnet,callback:function(e){t.$set(l.cmdForm,"subnet",e)},expression:"cmdForm.subnet"}})],1),o(a,{staticClass:"!mb-[0rem]",attrs:{prop:"gateway",label:"网关","label-width":"3rem",id:"two"}},[o(e,{attrs:{width:"15rem",placeholder:"例：124.42.0.254"},model:{value:l.cmdForm.gateway,callback:function(e){t.$set(l.cmdForm,"gateway",e)},expression:"cmdForm.gateway"}})],1)],1),o(a,{staticClass:"!mb-[1.5rem]",attrs:{prop:"iprange",label:"IP范围"}},[o(e,{attrs:{width:"35rem",placeholder:"例：124.42.0.0/24"},model:{value:l.cmdForm.iprange,callback:function(e){t.$set(l.cmdForm,"iprange",e)},expression:"cmdForm.iprange"}})],1),o("div",{directives:[{name:"show",rawName:"v-show",value:l.more,expression:"more"}]},[o(a,{attrs:{prop:"path",label:"参数"}},[o(e,{attrs:{type:"textarea",width:"35rem",placeholder:"参数，一行一个，例：key=value"},model:{value:l.cmdForm.options,callback:function(e){t.$set(l.cmdForm,"options",e)},expression:"cmdForm.options"}})],1),o(a,{attrs:{prop:"path",label:"标签"}},[o(e,{attrs:{type:"textarea",width:"35rem",placeholder:"网络标签，一行一个，例：key=value"},model:{value:l.cmdForm.labels,callback:function(e){t.$set(l.cmdForm,"labels",e)},expression:"cmdForm.labels"}})],1)],1),o(a,{attrs:{prop:"path",label:"备注"}},[o(e,{attrs:{type:"textarea",width:"35rem",placeholder:"备注"},model:{value:l.cmdForm.remark,callback:function(e){t.$set(l.cmdForm,"remark",e)},expression:"cmdForm.remark"}})],1)],1)],1)}),[],!1,null,"c494fa42",null,null).exports;export{u as default};
