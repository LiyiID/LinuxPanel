import{g as e,f as t,p as a,n as s,_ as i,a as o,b as n,c as r,i as l,j as c,d as u,e as m,s as d,h as p,k as f,l as v,m as g,o as h,q as _,r as y,u as x,t as w,v as b,w as C,x as S,y as k,z as P,A as I,B as T}from"./main.js?v=1714377894636";import{e as H,b as N,h as $,E as D,v as L,f as j,j as M,l as R,c as E,H as A,I as O,r as B,J as F}from"./vue-lib.js?v=1714377894636";import{p as U,q as V,s as q,t as z,u as G,_ as K,v as W,w as X,x as Z,o as J,y as Q,z as Y,A as ee,B as te,C as ae,D as se,E as ie,j as oe,F as ne,g as re,G as le,f as ce,H as ue,I as me,J as de,r as pe,b as fe,K as ve}from"./element-lib.js?v=1714377894636";import{_ as ge}from"./preload-helper.js?v=1714377894636";import{g as he}from"./home.store.js?v=1714377894636";import{d as _e}from"./public-lib.js?v=1714377894636";import{c as ye,h as xe,s as we,a as be,t as Ce,b as Se,r as ke,u as Pe,d as Ie}from"./home.popup.js?v=1714377894636";import{o as Te}from"./index38.js?v=1714377894636";import{s as He,k as Ne,c as $e,g as De,a as Le,b as je,d as Me,e as Re,f as Ee,h as Ae,u as Oe,i as Be,j as Fe,r as Ue,l as Ve,m as qe}from"./home.api.js?v=1714377894636";import{_ as ze}from"./index39.js?v=1714377894636";import{_ as Ge}from"./index40.js?v=1714377894636";import{_ as Ke}from"./index41.js?v=1714377894636";import{o as We,u as Xe,d as Ze}from"./confirm.js?v=1714377894636";import{i as Je}from"./locales-lib.js?v=1714377894636";import{s as Qe}from"./config.js?v=1714377894636";import{o as Ye}from"./software2.js?v=1714377894636";import{g as et}from"./__commonjsHelpers__.js?v=1714377894636";import{_ as tt}from"./index42.js?v=1714377894636";import{_ as at}from"./index43.js?v=1714377894636";import{_ as st}from"./index44.js?v=1714377894636";import{_ as it}from"./index45.js?v=1714377894636";import{r as ot}from"./vdom.js?v=1714377894636";import{_ as nt}from"./index46.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./index.vue_vue_type_style_index_0_lang.js?v=1714377894636";const rt=s(H({__name:"HomeRecommend",setup(s){const{refs:{authType:i,authExpirationTime:o}}=e(),n=N(!1),r=N([["time","5分钟极速响应"],["refund","15天无理由退款"],["plunge","30+款付费插件"],["function","20+企业版专享功能"],["certificate","2张SSL商用证书（年付）"],["message","1000条免费短信（年付）"],["group","专享企业服务群（年付）"]]),l=N(["多对一技术支持","全年5次安全排查","5分钟极速响应","30+款付费插件","20+企业版专享功能","1000条免费短信（年付）","2张SSL商用证书（年付）","专享企业服务群（年付）","WAF防火墙","更换授权IP","客服优先响应","15+款付费插件","15天无理由退款"]),c=N([0,0,0,0,0,0,0,0,1,1,1,1,1]),u=N([0,0,1,1,1,1,1,1,1,1,1,1,1]),m=N([1,1,1,1,1,1,1,1,1,1,1,1,1]),d=N(!1),p=N(!0),f=()=>{const e=parseInt(localStorage.getItem("HOME-RECOMMEND-HIDE-TIME")||"0");e&&(p.value=e<(new Date).getTime())};return $((()=>{f()})),{__sfc:!0,authType:i,authExpirationTime:o,showPrivilege:n,advantageList:r,privilegeList:l,proPrivilegeList:c,ltdPrivilegeList:u,plusPrivilegeList:m,limitTimeShow:d,recommendShow:p,setRecommendHide:e=>{const t=((new Date).getTime()+864e5*e).toString();localStorage.setItem("HOME-RECOMMEND-HIDE-TIME",t),p.value=!1},checkRecommendHide:f,openProductPayment:()=>{a({sourceId:141})},formatTime:t}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return a.recommendShow?t("div",{staticClass:"h-auto"},["ltd"===a.authType?t("div",{staticClass:"advantage-view relative flex items-center",on:{mouseover:function(e){a.limitTimeShow=!0},mouseleave:function(e){a.limitTimeShow=!1}}},[t("div",{staticClass:"absolute left-0 right-0 flex items-center px-16x"},[t("div",{staticClass:"flex items-center text-[1.3rem] mr-[4rem] w-[26.6rem] flex-shrink-0 cursor-pointer",on:{click:a.openProductPayment}},[t(i,{staticClass:"mt-4x w-[7.0rem] h-2rem",attrs:{src:"/vip/vip-ltd-new.svg"}}),t("span",{staticClass:"ml-8x"},[e._v("到期时间：")]),t("span",{staticClass:"text-[#FC6D26]"},[e._v(e._s(a.formatTime(a.authExpirationTime,"yyyy-MM-dd")))]),t(o,{staticClass:"ml-8x",attrs:{size:1.2}},[e._v("续费")])],1),t("div",{staticClass:"advantage-list"},e._l(a.advantageList,(function(a,s){return t("div",{key:s,staticClass:"advantage-item"},[t("i",{class:"svgtofont-free-".concat(a[0],"-icon text-[1.8rem]  mr-[4px] text-[#9e6700]")}),t("span",{staticClass:"text-[#888] text-[1.3rem]"},[e._v(e._s(a[1]))])])})),0)]),t("div",{directives:[{name:"show",rawName:"v-show",value:a.limitTimeShow,expression:"limitTimeShow"}],staticClass:"day-not-display",on:{click:function(e){return a.setRecommendHide(3)}}},[t("i",{staticClass:"el-icon-close"}),t("span",[e._v("近3天不再显示")])])]):"free"===a.authType?t("div",{staticClass:"advantage-view re-ad-bg relative flex items-center",on:{mouseover:function(e){a.limitTimeShow=!0},mouseleave:function(e){a.limitTimeShow=!1}}},[t("div",{staticClass:"absolute left-0 right-0 flex items-center px-16x"},[t("div",{staticClass:"flex items-center"},[t("div",{staticClass:"relative"},[t("i",{staticClass:"svgtofont-free-recommend absolute text-[3.2rem] text-[#ed0000] -top-[3px] -left-[3px]"}),t("button",{staticClass:"product-payment-btn"},[t("span",{staticClass:"ml-[1.2rem text-[1.4rem] cursor-pointer",on:{click:a.openProductPayment}},[e._v(" 立即升级 ")])])]),t(i,{staticClass:"flex flex-shrink-0 w-[10rem] mx-16x",attrs:{src:"/advantage/ltd-privilege.svg"}})],1),t("div",{staticClass:"advantage-list"},e._l(a.advantageList,(function(a,s){return t("div",{key:s,staticClass:"advantage-item"},[t("i",{class:"svgtofont-free-".concat(a[0],"-icon text-[1.8rem] mr-[4px] text-[#9e6700]")}),t("span",{staticClass:"text-[#888] text-[1.3rem]"},[e._v(e._s(a[1]))])])})),0)]),t("div",{directives:[{name:"show",rawName:"v-show",value:a.limitTimeShow,expression:"limitTimeShow"}],staticClass:"day-not-display",on:{click:function(e){return a.setRecommendHide(1)}}},[t("i",{staticClass:"el-icon-close"}),e._v("近24小时不再显示 ")])]):e._e(),t(n,{attrs:{visible:a.showPrivilege,area:96},on:{"update:visible":function(e){a.showPrivilege=e}}},[t("div",{staticClass:"p-24x flex justify-center flex-col items-center"},[t(i,{attrs:{src:"/advantage/privilege-contrast.png"}}),t("div",{staticClass:"flex items-center mt-20x"},[t("div",{staticClass:"flex-col items-center border border-[rgb(221,221,221)] justify-center w-[22rem]"},[t("p",{staticClass:"text-[2rem] text-[#333] font-bold h-[9.4rem] leading-[9.4rem] text-center"},[e._v(" 功能特权 ")]),t("ul",{staticClass:"flex flex-col text-[1.4rem] text-[#666] function-text"},e._l(a.privilegeList,(function(a,s){return t("li",{key:s,staticClass:"px-24x h-[4rem] leading-[4rem]"},[e._v(" "+e._s(a)+" ")])})),0)]),t("div",{staticClass:"flex-col border border-[#FFEFD0] items-center bg-[#fff8eb] justify-center w-[22rem]"},[t("div",{staticClass:"text-[2rem] text-[#333] font-medium h-[9.4rem] leading-[9.4rem] text-center"},[t("p",[t(i,{staticClass:"mr-8x",attrs:{src:"/advantage/privilege-pro.svg"}}),e._v("专业版")],1)]),t("ul",{staticClass:"flex flex-col text-[1.4rem] text-[#666] pro-text"},e._l(a.proPrivilegeList,(function(a,s){return t("li",{key:s,staticClass:"px-24x h-[4rem] leading-[4rem] text-center"},[a?e._e():t("i",{staticClass:"el-icon-close text-[red] text-3xl font-bold"}),a?t("i",{staticClass:"el-icon-check text-[#feaa04] text-3xl font-bold"}):e._e()])})),0)]),e._l(2,(function(s,o){return t("div",{key:o,staticClass:"w-[22rem] bg-[#272a2c] flex-col relative",class:o?"":"border-2 border-[#787878] h-[64.6rem] shadow"},[0===o?t("span",{staticClass:"recommend-left"}):e._e(),t("div",{staticClass:"text-[2rem] flex flex-col justify-center items-center",class:o?" h-[9.4rem]":" h-[11rem]"},[t("div",{staticClass:"text-[#E5A734] flex justify-center font-bold"},[t(i,{staticClass:"mr-8x",attrs:{src:"/advantage/privilege-diamond.svg"}}),t("span",{class:o?"":"linear"},[e._v(e._s(o?"企业运维托管":"企业版"))])],1),t("button",{staticClass:"px-20x py-4x",class:o?"linear text-border privilege-button font-bold":"button-linear privilege-button",on:{click:a.openProductPayment}},[e._v(" 立即购买 ")])]),t("ul",{staticClass:"flex flex-col text-[1.4rem] text-[#666] ltd-text"},[e._l(a.ltdPrivilegeList,(function(a,s){return 0===o?t("li",{key:s},[a?e._e():t("i",{staticClass:"el-icon-close text-[red] text-3xl font-bold"}),a?t("i",{staticClass:"el-icon-check text-[#feaa04] text-3xl font-bold"}):e._e()]):e._e()})),e._l(a.plusPrivilegeList,(function(a,s){return 0!=o?t("li",{key:s},[a?e._e():t("i",{staticClass:"el-icon-close text-[red] text-3xl font-bold"}),a?t("i",{staticClass:"el-icon-check text-[#feaa04] text-3xl font-bold"}):e._e()]):e._e()}))],2)])}))],2)],1)])],1):e._e()}),[],!1,null,"e7b52d88",null,null).exports;const lt=s(H({__name:"HomeMonitorDataLoad",setup:e=>({__sfc:!0})}),(function(){var e=this._self._c;return this._self._setupProxy,e("div",{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:!0,expression:"true"},{name:"bt-loading",rawName:"v-bt-loading:title",value:"正在获取服务器流量信息，请稍后...",expression:"'正在获取服务器流量信息，请稍后...'",arg:"title"}],staticClass:"h-41.4rem"})}),[],!1,null,"c2ef9ead",null,null).exports;var ct=(e=>(e.Net="net",e.Iostat="iostat",e))(ct||{});const ut=s(H({__name:"HomeMonitor",setup(e){const a=D({loader:()=>ge((()=>import("./HomeMonitorData.js?v=1714377894636")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]),import.meta.url),loadingComponent:lt}),{refs:{refreshTime:s,network:i,iostat:o}}=he();let n=!0;const{proxy:c}=M(),u=N(!1),m=N(),d=N(),p=N("net"),f=N("ALL"),v=N(localStorage.getItem("netUnit")||"KB"),g=L({net:{selectList:[],data:{timeList:[],upList:[],downList:[]},info:{up:{label:c.$t("HomeMonitor.Up"),value:"0 B",bgColor:"#F7B851"},down:{label:c.$t("HomeMonitor.Down"),value:"0 B",bgColor:"#52A9FF"},upTotal:{label:c.$t("HomeMonitor.TotalSend"),value:"0 B"},downTotal:{label:c.$t("HomeMonitor.TotalReception"),value:"0 B"}}},iostat:{selectVal:"",selectList:[],data:{timeList:[],readList:[],writeList:[],tipsList:[]},info:{read:{label:c.$t("HomeMonitor.Read"),value:"0 B",bgColor:"#FF4683"},write:{label:c.$t("HomeMonitor.Write"),value:"0 B",bgColor:"#6CC0CF"},second:{label:c.$t("HomeMonitor.SecondReadWrite"),value:"0 ".concat(c.$t("HomeMonitor.Frequency"))},io:{label:c.$t("HomeMonitor.IoDelay"),value:"0 ms",color:"#20a53a"}}}}),h=N([{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!1},{label:"TB/s",value:"TB",disable:!1}]);j(s,(()=>{var e,t,a,s;u.value=!1,_(),"iostat"!==p.value?x(i.value,v.value):b(o.value);const n=P("net","data");m.value&&(null==(t=null==(e=m.value)?void 0:e.setConfig)||t.call(e,w(n)));const r=P("iostat","data");d.value&&(null==(s=null==(a=d.value)?void 0:a.setConfig)||s.call(a,C(r)))}));const _=()=>{for(const e in g){const t=I(e),a=g[e],{selectList:s}=a;s.length=0,Object.keys(t).forEach((e=>{if("ALL"==e)return a.selectVal=e,void s.unshift({label:c.$t("HomeMonitor.All"),value:"ALL"});s.push({label:e,value:e})}))}},y=(e,t)=>{const{up:a,down:s,upTotal:i,downTotal:o}=e;return{up:r(1024*a,!1,2,t),down:r(1024*s,!1,2,t),upTotal:r(1024*i,!1,2,t),downTotal:r(1024*o,!1,2,t)}},x=(e,t)=>{const{info:a}=P("net"),s=e[f.value||"ALL"],{up:i,down:o,upTotal:n,downTotal:l}=a,c=y(s,t);i.value=r(1024*s.up,!0,2,t),o.value=r(1024*s.down,!0,2,t),n.value=r(s.upTotal),l.value=r(s.downTotal);const u=y(s,"MB");if(100*parseFloat(u.down)==0||100*parseFloat(u.down)==0)h.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!0},{label:"GB/s",value:"GB",disable:!0},{label:"TB/s",value:"TB",disable:!0}];else{const e=y(s,"GB");if(100*parseFloat(e.down)==0||100*parseFloat(e.down)==0)h.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!0},{label:"TB/s",value:"TB",disable:!0}];else{const e=y(s,"TB");100*parseFloat(e.down)!=0&&100*parseFloat(e.down)!=0||(h.value=[{label:"KB/s",value:"KB",disable:!1},{label:"MB/s",value:"MB",disable:!1},{label:"GB/s",value:"GB",disable:!1},{label:"TB/s",value:"TB",disable:!0}])}}S("net",[{key:"timeList"},{key:"upList",value:c.up},{key:"downList",value:c.down}])},w=e=>({dataZoom:[],tData:e.timeList,list:[{name:c.$t("HomeMonitor.Up"),data:e.upList,circle:"circle",itemStyle:{color:"#f7b851"},lineStyle:{width:1,color:"#f7b851"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(255, 140, 0, 1)"},{offset:.8,color:"rgba(255, 140, 0, .4)"}]}}},{name:c.$t("HomeMonitor.Down"),data:e.downList,circle:"circle",itemStyle:{color:"#52a9ff"},lineStyle:{width:1,color:"#52a9ff"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(30, 144, 255, 1)"},{offset:.8,color:"rgba(30, 144, 255, .4)"}]}}}],formatter(e){let t="";for(let a=0;a<e.length;a++){const s=e[a];if(l(s.data))return!1;t+='<span class="inline-block w-[1rem] h-[1rem] mr-[1rem]" style="border-radius: 50%; background: '.concat(s.color,';"></span>').concat(s.seriesName,"：").concat(parseFloat(s.data).toFixed(2)," ").concat(v.value,"/s ").concat(e.length-1!==a?"<br />":"")}return c.$t("HomeMonitor.Time",{content:"".concat(e[0].axisValue,"<br />").concat(t)})}}),b=e=>{const t=1048576,{info:a}=P("iostat"),s=e[f.value||"ALL"],{read:i,write:o,second:n,io:l}=a,{read_bytes:u,write_bytes:m}=s,{read_count:d,write_count:p}=s,{read_time:v,write_time:g}=s;i.value=r(u),o.value=r(m),n.value="".concat(d+p," ").concat(c.$t("HomeMonitor.Frequency")),l.value="".concat(g>v?g:v," ms"),l.color=parseInt(l.value)>=1e3?"#ff0000":"#20a53a",S("iostat",[{key:"timeList"},{key:"readList",value:(u/t).toFixed(2)},{key:"writeList",value:(m/t).toFixed(2)},{key:"tipsList",value:s}])},C=e=>({dataZoom:[],unit:c.$t("HomeMonitor.Company",{company:"MB/s"}),tData:e.timeList,list:[{name:c.$t("HomeMonitor.ReadBytes"),data:e.readList,circle:"circle",itemStyle:{color:"#FF4683"},lineStyle:{width:1,color:"#FF4683"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(255, 70, 131, 1)"},{offset:.8,color:"rgba(255, 70, 131, .4)"}]}}},{name:c.$t("HomeMonitor.WriteBytes"),data:e.writeList,circle:"circle",itemStyle:{color:"#6CC0CF"},lineStyle:{width:1,color:"#6CC0CF"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(108, 192, 207, 1)"},{offset:.8,color:"rgba(108, 192, 207, .4)"}]}}}],formatter(t){let a=c.$t("HomeMonitor.Time",{content:"".concat(t[0].axisValue,"<br />")});const s={read_bytes:c.$t("HomeMonitor.ReadBytes"),read_count:c.$t("HomeMonitor.ReadCount"),read_merged_count:c.$t("HomeMonitor.ReadMergedCount"),read_time:c.$t("HomeMonitor.ReadDelay"),write_bytes:c.$t("HomeMonitor.WriteBytes"),write_count:c.$t("HomeMonitor.WriteCount"),write_merged_count:c.$t("HomeMonitor.WriteMergedCount"),write_time:c.$t("HomeMonitor.WriteDelay")},i=e.tipsList[t[0].dataIndex];for(let e=0;e<t.length;e++){const s=t[e];if(l(s.data))return!1;a+='<span class="inline-block w-[1rem] h-[1rem] mr-[.1rem]" style="border-radius: 50%; background: '.concat(s.color,';"></span>&nbsp;&nbsp;<span>').concat(s.seriesName,"：").concat(parseFloat(s.data).toFixed(2)," MB/s</span><br />")}return["read_count","write_count","read_merged_count","write_merged_count","read_time","write_time"].forEach((e=>{const t=i[e],o=t>100&&t<1e3?"#ff9900":t>=1e3?"red":"#20a53a",n=e.indexOf("time")>-1?"color: ".concat(o):"",r=e.indexOf("time")>-1?" ms":" ".concat(c.$t("HomeMonitor.TimesSecond"));a+='<span class="inline-block w-[1rem] h-[1rem]"></span>&nbsp;&nbsp;<span style="'.concat(n,'">').concat(s[e],"：").concat(t+r,"</span><br />")})),a}}),S=(e,a,s=8)=>{const i=P(e,"data");a.forEach((e=>{const{key:a,value:o}=e,n=i[a];n.length>=s&&n.splice(0,1),"timeList"==a?n.push(t((new Date).getTime(),"hh:mm:ss",!0)):n.push(o)}))},k=e=>"net"==e?m.value:"iostat"==e?d.value:void 0,P=(e="net",t="")=>t?g[e][t]:g[e],I=(e="net")=>"net"==e?i.value:"iostat"==e?o.value:{};return $((()=>{u.value=!0;const e=localStorage.getItem("home-model-active");e&&(p.value=e,f.value=localStorage.getItem("home-".concat(e,"-active"))||"ALL")})),{__sfc:!0,HomeMonitorDataAsync:a,refreshTime:s,network:i,iostat:o,isFirst:n,vm:c,loading:u,resourceType:ct,netRefs:m,iostatRefs:d,activeName:p,selectVal:f,netUnit:v,resource:g,unitList:h,onSelectChange:e=>{g.net.selectVal=f.value,localStorage.setItem("home-model-active",p.value),localStorage.setItem("home-".concat(p.value,"-active"),f.value)},onNetUnitChange:()=>{g.net.data.timeList=[],g.net.data.upList=[],g.net.data.downList=[],localStorage.setItem("netUnit",v.value),x(i.value,v.value)},onTabsChange:()=>{R((()=>{f.value="ALL";const e=p.value,t=k(e);if(localStorage.setItem("home-model-active",e),t&&t.$refs.echartRef.resize(),n&&"iostat"==e){n=!1;const e=P("iostat","data");t.setConfig(C(e))}}))},initSelectList:_,getNetData:y,setNet:x,getNetConfig:w,setIostat:b,getIostatConfig:C,setData:S,getRefs:k,getResourceData:P,getRes:I}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(U,{staticClass:"relative module-box",attrs:{shadow:"always","body-style":{padding:0,display:"flex"}}},[t("div",{staticClass:"flex items-center h-[5.3rem] absolute right-[1.6rem] z-100"},[t("span",{staticClass:"mr-4 text-[#999]"},[e._v(" "+e._s("net"===a.activeName?"网卡":"磁盘")+" ")]),e._l(a.resource,(function(s,i){return[t(V,{directives:[{name:"show",rawName:"v-show",value:"".concat(i)==a.activeName,expression:"`${key}` == activeName"}],key:i,staticClass:"w-[8rem]",attrs:{placeholder:e.$t("HomeMonitor.Placeholder")},on:{change:function(e){return a.onSelectChange(i)}},model:{value:a.selectVal,callback:function(e){a.selectVal=e},expression:"selectVal"}},e._l(s.selectList,(function(e){return t(q,{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}))],2),t(z,{staticClass:"relative home-reset-tab w-full",on:{"tab-click":a.onTabsChange},model:{value:a.activeName,callback:function(e){a.activeName=e},expression:"activeName"}},[t(G,{attrs:{label:e.$t("HomeMonitor.Flow"),name:"net"}},[t("div",{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:a.loading,expression:"loading"},{name:"bt-loading",rawName:"v-bt-loading:title",value:"正在获取服务器流量信息，请稍后...",expression:"'正在获取服务器流量信息，请稍后...'",arg:"title"}],staticClass:"h-41.4rem"},[t(a.HomeMonitorDataAsync,{ref:"netRefs",attrs:{info:a.resource.net.info}},[[t("div",{directives:[{name:"show",rawName:"v-show",value:"net"==a.activeName,expression:"`net` == activeName"}],staticClass:"mr-5 unit-select"},[t("span",{staticClass:"mr-4x text-[#999]"},[e._v(" "+e._s("单位")+" ")]),[t(V,{staticClass:"w-[7rem]",attrs:{placeholder:e.$t("HomeMonitor.Placeholder")},on:{change:function(e){return a.onNetUnitChange()}},model:{value:a.netUnit,callback:function(e){a.netUnit=e},expression:"netUnit"}},e._l(a.unitList,(function(e){return t(q,{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disable}})})),1)]],2)]],2)],1)]),t(G,{attrs:{label:e.$t("HomeMonitor.DiskIo"),name:"iostat",lazy:!0}},[t(a.HomeMonitorDataAsync,{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:a.loading,expression:"loading"},{name:"bt-loading",rawName:"v-bt-loading:title",value:"正在获取服务器磁盘IO信息，请稍后...",expression:"'正在获取服务器磁盘IO信息，请稍后...'",arg:"title"}],ref:"iostatRefs",attrs:{info:a.resource.iostat.info}})],1)],1)],1)}),[],!1,null,null,null,null).exports;const mt=s(H({__name:"HomeOverviewNew",setup(t){const{proxy:s}=M(),{refs:{mainWidth:i,authType:o}}=e(),{refs:{overviewShowList:n},getOverviewData:r}=he(),l=N(!1),p=E((()=>i.value<1100?i.value<800?"grid-cols-2":"grid-cols-4":i.value>1800?"grid-cols-8":"grid-cols-6")),f=e=>{const{type:t}=e.plugin_info;return"free"===o.value&&(8===t||12===t)||"ltd"!==o.value&&12===t},v=e=>{const{type:t,endtime:s,setup:i}=e.plugin_info,o="total"===e.name?41:"btwaf"===e.name?40:42;if(f(e)&&s<0)return a({disablePro:8!==t,sourceId:o});if(i)u({pluginInfo:e.plugin_info});else{const{type:t,name:a}=e.plugin_info;m({name:a,type:t,pluginInfo:e.plugin_info})}},g=()=>{d("searchFile","true"),c("/files")};return $((async()=>{l.value=!0,await r(),l.value=!1})),{__sfc:!0,vm:s,mainWidth:i,authType:o,overviewShowList:n,getOverviewData:r,draggableGroup:{name:"overview",pull:!1,put:!1},loading:l,draggableClass:p,openOverviewTemplate:()=>{ye(n)},getModelTips:e=>{switch(e.template){case"base":return"memo"===e.name||"safety_risk"===e.name?"打开".concat(e.title,"模块"):"跳转至".concat(e.title,"页面");case"browse":return"plugin"===e.type?"打开".concat(e.title,"插件"):"打开".concat(e.title,"模块");case"open_dir":return"打开".concat(e.title)}},getModelTitle:e=>{let t=e.title,a=0,s=e.params.length||0,i=["ssh_log"];if(!e.status)return t;if("open_dir"===e.name)return t;s>=2&&(t="");for(let o=s-1;o>=0;o--){let n=e.params[o];(t===n.name||i.indexOf(e.name)>-1)&&(t=""),2!==a&&(1===s&&""!=t&&(t+=" - "),t+="".concat(n.name)+(o===s-1&&s>1?" - ":""),a++),a=0}return t},openModelDialog:async e=>{switch(e.type){case"base":const t=e.params[0].source;return"/site"===e.source.href&&"all"!==t&&localStorage.setItem("siteTabActive","proxy"===t?"nginx":t),c(e.source.href||"/");case"model":const{getFirewallStore:a}=await ge((()=>import("./firewall.store.js?v=1714377894636")),__vite__mapDeps([14,2,3,4,5,6,7,8,9,10,15]),import.meta.url),{refs:{firewallTabActive:s,sshTabAvtive:i}}=a();if("memo"===e.name)return xe();if("safety_risk"===e.name)return we();if("ssh_log"===e.name)return s.value="ssh",i.value="loginLog",c("/firewall");case"plugin":return v(e);default:if("search_file"===e.name)return g();if("open_dir"===e.name)return Te({path:e.params[0].name})}},dragSortEvent:async e=>{try{const e=await He({overview:JSON.stringify(n.value)});s.$message.request(e),e.status||r()}catch(t){}},getPayStatus:f,handleOpenPlugin:v,searchFile:g,draggable:_e}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(U,{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:a.loading,expression:"loading"},{name:"bt-loading",rawName:"v-bt-loading:title",value:"正在获取概览数据，请稍候...",expression:"'正在获取概览数据，请稍候...'",arg:"title"}],staticClass:"relative mb-6 module-box",attrs:{shadow:"always","body-style":{padding:"0",display:"flex"}}},[t("div",{staticClass:"text-[1.6rem] text-#666 flex justify-between flex-1 items-center",attrs:{slot:"header"},slot:"header"},[t("span",{directives:[{name:"t",rawName:"v-t",value:"HomeOverview.Title",expression:"`HomeOverview.Title`"}]}),t(K,{staticClass:"!ml-[1rem]",attrs:{type:"default",title:e.$t("HomeOverview.CustomTitle")},on:{click:function(e){return a.openOverviewTemplate()}}},[t("i",{staticClass:"el-icon-arrow-down el-icon-setting text-[1.4rem]"})])],1),t(W,{staticClass:"w-full p-24x min-h-[15.2rem]",attrs:{gutter:15}},[t(a.draggable,{staticClass:"overview-wrapper",attrs:{group:a.draggableGroup,handle:".move-icon",animation:"500",ghostClass:"ghost"},on:{sort:a.dragSortEvent},model:{value:a.overviewShowList,callback:function(e){a.overviewShowList=e},expression:"overviewShowList"}},[t("transition-group",{staticClass:"draggable-group",class:a.draggableClass},[e._l(a.overviewShowList,(function(s,i){return[t("div",{key:i,staticClass:"overview-box",on:{click:function(e){return a.openModelDialog(s)}}},[t("i",{staticClass:"move-icon iconfont icon-drag",attrs:{title:"可拖拽"}}),t("div",{staticClass:"content"},[t("span",{staticClass:"title"},[e._v(e._s(a.getModelTitle(s)))]),"base"===s.template?t(o,{class:{href:"base"===s.template,memo:"memo"===s.name,risk:"safety_risk"===s.name&&s.value[0]>0,"!text-[#CBCBCB]":"memo"===s.name&&!s.value[0]}},[e._v(" "+e._s(s.value[0]||("memo"===s.name?"当前内容为空，点击编辑":s.value[0]))+" ")]):"browse"===s.template?["plugin"!==s.type||s.plugin_info.setup?"plugin"===s.type||"model"===s.type?[t("div",{staticClass:"model"},[t("div",{staticClass:"to-day"},[t("span",{},[e._v("今日")]),t("span",[e._v(e._s(s.value[0]))])]),t("div",{staticClass:"yester-day"},[t("span",[e._v("昨日")]),t("span",[e._v(e._s(s.value[1]))])])])]:e._e():[t(o,{staticClass:"risk not-install"},[e._v(" "+e._s(a.getPayStatus(s)?"未购买":"未安装")+" ")])]]:"open_dir"===s.template?t(o,{staticClass:"path-info"},[e._v(" "+e._s(s.params[0].name)+" ")]):"search_file"===s.template?t(o,{staticClass:"path-info"},[e._v(" 点击搜索内容 ")]):e._e()],2),t("div",{staticClass:"bottom-menu"},[e._v(e._s(a.getModelTips(s)))])])]}))],2)],1)],1)],1)}),[],!1,null,"88325ea8",null,null).exports;const dt=s(H({__name:"AlarmPopup",props:{compData:{default:()=>({flag:!1,type:"",data:{},id:0})}},emits:["close","confirm"],setup(t,{expose:a,emit:s}){const i=t,o=N(!1),n=N(),{getPushConfigInfo:r,getAlarmData:l}=e(),{refs:{diskQuota:c}}=he(),{type:u,data:m,id:d}=i.compData,v=N(100),g=N([]),h=N([]),_=L({num:0,usageRate:0,give:[],option:{},type:"",selectOptions:[],typeDetection:"2"}),y=E((()=>{switch(u){case"load":return"【负载状态】告警";case"cpu":return"【CPU使用率】告警";case"mem":return"【内存使用率】告警"}if(-1!==u.indexOf("disk"))return"磁盘【".concat(u.split("-")[1],"】告警")})),x=E((()=>{switch(u){case"load":return"负载状态";case"cpu":case"mem":return"使用率"}if(-1!==u.indexOf("disk"))return 2===m.cycle||"2"===_.typeDetection?"占用率":"剩余容量"})),w=E((()=>"2"===_.typeDetection?"%":"GB")),b=()=>{var e;m?(_.usageRate=m.count,_.num=m.push_count,g.value=m.next_data||[null==(e=h.value[0])?void 0:e.key],-1!==u.indexOf("disk")&&(_.typeDetection=m.cycle.toString()),_.give=m.module.split(",")):(_.usageRate=80,_.num=3,-1!==u.indexOf("disk")&&(_.typeDetection="2"))},C=async()=>{We({$refs:n.value,loading:{disable:o,text:"正在保存告警配置，请稍后..."},async request(){let e={type:u.includes("disk")?u.split("-")[0]:u,count:parseInt("".concat(_.usageRate)),cycle:u.includes("disk")?parseInt(_.typeDetection):5,push_count:parseInt("".concat(_.num)),module:_.give.join(","),project:u.split("-")[1]?u.split("-")[1]:""};return-1==u.indexOf("disk")&&(e.next_data=g.value),await f({id:d||parseInt("".concat((new Date).getTime()/1e3)),name:"system_push",data:JSON.stringify(e)})},async complete(){await l(),i.compData.flag=!0,b()}})};return $((async()=>{if(-1==u.indexOf("disk")){let{data:e}=await p();h.value=e.map((e=>({title:e.title,key:e.value})))}b()})),a({onConfirm:C}),{__sfc:!0,props:i,emit:s,giveFormDisabled:o,giveForm:n,getPushConfigInfo:r,getAlarmData:l,diskQuota:c,type:u,data:m,id:d,rules:{num:[{required:!0,message:"请输入发送次数",trigger:"blur"},{pattern:/^[0-9]\d*$/,message:"请输入正整数",trigger:"blur"}],usageRate:[{required:!0,message:"请输入告警阈值",trigger:"blur"},{pattern:/^[0-9]\d*$/,message:"请输入正整数",trigger:"blur"}],give:[{type:"array",required:!0,message:"请至少选择一个告警方式",trigger:"change"}]},maxCapacityAndUsageRate:v,nextData:g,options:h,msgForm:_,inputContent:y,typeName:x,unitComputed:w,switchTypeDetection:()=>{_.typeDetection!==m.cycle&&("2"===_.typeDetection?_.usageRate=80:c.value.forEach((e=>{var t;e.diskName===(null==(t=i.compData)?void 0:t.type.split("-")[1])&&(v.value=e.diskQuota,_.usageRate=parseInt((.2*e.diskQuota).toString()))})))},alarmInfo:b,changeServerTo:e=>{g.value=e},onConfirm:C}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"px-[2rem] py-[4rem] give-dialog"},[t(X,{ref:"giveForm",attrs:{model:a.msgForm,rules:a.rules,disabled:a.giveFormDisabled}},[t(Z,{attrs:{label:"任务类型"}},[t(J,{staticClass:"!w-[30rem]",attrs:{readonly:!0},model:{value:a.inputContent,callback:function(e){a.inputContent=e},expression:"inputContent"}})],1),-1!==a.type.indexOf("disk")?t(Z,{attrs:{label:"检测类型"}},[t(Q,{on:{change:a.switchTypeDetection},model:{value:a.msgForm.typeDetection,callback:function(t){e.$set(a.msgForm,"typeDetection",t)},expression:"msgForm.typeDetection"}},[t(Y,{attrs:{label:"2"}},[e._v("占用百分比")]),t(Y,{attrs:{label:"1"}},[e._v("剩余容量")])],1)],1):e._e(),t(Z,{attrs:{label:a.typeName,prop:"usageRate"}},[t(J,{staticClass:"!w-[9.5rem]",attrs:{min:0,max:a.maxCapacityAndUsageRate,type:"number"},scopedSlots:e._u([{key:"append",fn:function(){return[t(W,{attrs:{type:"flex"}},[t(ee,[-1!==a.type.indexOf("disk")?t("span",[e._v(e._s(a.unitComputed))]):t("span",[e._v("%")])])],1)]},proxy:!0}]),model:{value:a.msgForm.usageRate,callback:function(t){e.$set(a.msgForm,"usageRate",t)},expression:"msgForm.usageRate"}}),-1===a.type.indexOf("disk")?t("span",{staticClass:"text-[#999] ml-1.6rem text-[1.2rem]"},[e._v(" 每5分钟平均负载超过该数值就告警 ")]):t("span",{staticClass:"text-[#999] ml-1.6rem text-[1.2rem]"},[e._v(" 每隔10分钟磁盘占用超过该数值就告警 ")])],1),t(Z,{attrs:{label:"发送次数",prop:"num"}},[t(J,{staticClass:"!w-[9.5rem]",attrs:{min:0,type:"number"},scopedSlots:e._u([{key:"append",fn:function(){return[t(W,{attrs:{type:"flex"}},[t(ee,[t("span",[e._v("次")])])],1)]},proxy:!0}]),model:{value:a.msgForm.num,callback:function(t){e.$set(a.msgForm,"num",t)},expression:"msgForm.num"}}),t("span",{staticClass:"text-[#999] ml-1.6rem text-[1.2rem]"},[e._v(" 后将不再发送告警信息，如需发送多次请填写2次以上 ")])],1),-1==a.type.indexOf("disk")?t(Z,{attrs:{label:"告警后执行",prop:"nextData"}},[t(Ke,{staticClass:"w-[30rem]",attrs:{"collapse-tags":"",multiple:"",options:a.options,change:a.changeServerTo,placeholder:"请选择告警后的下一步操作"},model:{value:a.nextData,callback:function(e){a.nextData=e},expression:"nextData"}})],1):e._e(),t(Z,{attrs:{label:"告警方式",prop:"give"}},[t(Ge,{attrs:{"limit-type":[]},model:{value:a.msgForm.give,callback:function(t){e.$set(a.msgForm,"give",t)},expression:"msgForm.give"}})],1)],1),t("div",{staticClass:"tip"},[t("ul",[t("li",[e._v(" 点击配置后状态未更新，尝试点击【 "),t(o,{on:{click:a.getPushConfigInfo}},[e._v("手动刷新")]),e._v(" 】 ")],1),t("li",[e._v("【发送次数】设置0时，每天触发告警次数没有上限")])])])],1)}),[],!1,null,"634a3c08",null,null).exports;const pt=s(H({__name:"index",props:{type:null,diskName:null},setup(t){const a=t,{proxy:s}=M(),{refs:{alarmPopupData:i},getAlarmData:o}=e(),n=L({flag:!1,content:"",show:!1,id:0}),r=L({type:a.type,data:!1,id:n.id,async confirm(){await o()}}),l=async()=>{v({title:"告警设置",component:dt,area:55,btn:"保存",compData:r})},c=()=>{var e;let t,s,i;switch(a.type){case"load":s="平均负载超过";break;case"mem":s="内存超过";break;case"cpu":s="平均CPU超过"}const o=u();return t=o.cycle,i=o.count,s||(s=o.text),g(t,"undefined")||g(s,"undefined")?"未设置":"".concat((null==(e=a.type)?void 0:e.includes("disk"))?"":"".concat(t,"分钟内")).concat(s).concat(i,"触发")},u=()=>{var e;let t,s,o;try{const{system_push:l}=i.value;if(void 0!==l)for(const i in l)if(Object.prototype.hasOwnProperty.call(l,i)){const c=l[i];if(a.type.includes(c.type)){if(t=c.cycle,o=c.count+"%",!(null==(e=a.type)?void 0:e.includes("disk"))){n.flag=c.status,n.id=parseInt(i),g(r.data,"boolean")&&(r.data={}),r.data=c;break}if(c.project===a.type.split("-")[1]){s=2===c.cycle?"该磁盘用量超过":"该磁盘余量不足",o=2===c.cycle?"".concat(c.count,"%"):"".concat(c.count,"GB"),n.flag=c.status,n.id=parseInt(i),g(r.data,"boolean")&&(r.data={}),r.data=c;break}}}}catch(l){}return{cycle:t,text:s,count:o}};return $((async()=>{c()})),{__sfc:!0,vm:s,props:a,alarmPopupData:i,getAlarmData:o,alarm:n,compData:r,setAlarmDialog:l,openAlarmPopup:async e=>{let t;if("edit"===e||0===n.id)l();else try{const a=e?"开启":"关闭";await s.$confirm({title:"".concat(a,"告警"),message:"".concat(a,"告警后，将").concat(e?"":"不再","接收到该项的告警信息，是否继续操作？"),icon:"warning"}),t=s.$load(s.$t("正在".concat(a,"告警，请稍后...")));const i=await Qe({name:"system_push",id:n.id,status:e?1:0});t.close(),await o(),s.$message.request(i)}catch(a){n.flag=!e}},createPushStatus:c,setStatePushInfo:u}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"alarm"},[e._m(0),t(te,{staticClass:"ml-[0.8rem]",attrs:{value:a.alarm.flag,width:28},on:{change:a.openAlarmPopup}}),t("div",{staticClass:"switch"}),t(o,{on:{click:function(e){return a.openAlarmPopup("edit")}}},[e._v("设置")]),t("span",{staticClass:"w-[21rem] ml-[0.8rem]"},[e._v(e._s(a.createPushStatus()))])],1)}),[function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",[t("span",[e._v("告警")])])}],!1,null,"346b134a",null,null).exports;const ft=s(H({__name:"HomeStateNewPopover",props:{loadType:{default:""},type:{default:""},processAlarmShow:{type:Boolean,default:!1}},setup(t){const s=t,{refs:{specificResource:i}}=he(),{refs:{authType:n}}=e(),{proxy:r}=M(),l=N(!0),c=N(!1),u=N("show"),m=N("two"),d=L({one:"",two:"",three:""}),p=L({loading:!0,list:[]});j(i.value,(e=>{"ltd"===n.value?(p.loading=!1,f.value?p.list=i.value.cpuProcess:p.list=i.value.memProcess):(p.loading=!1,p.list=[])}));const f=E((()=>{const{loadType:e}=s;return"loadInfo"===e||"cpuInfo"===e})),g=()=>{const{loadType:e}=s;d.one="memoryInfo"===e?"内存信息":"基础信息","diskInfo"!==e?(c.value=!0,f.value?("loadInfo"===e?d.two="更多负载信息":"cpuInfo"===e&&(d.two="核心使用率"),d.three="CPU占用率top5的进程信息"):"memoryInfo"===e&&(l.value=!1,d.two="内存信息",d.three="内存使用率top5的进程信息")):d.two="Inode信息"},h=async e=>{if(1!==e.important)try{const t=f.value?"结束进程":r.$t("HomeState.FreeMemoryTitle");await r.$confirm({type:"calc",title:t,message:"结束".concat(e.proc_name,"进程会导致").concat(e.explain.split("的进程")[0],"无法正常运行，是否结束?")});const a=await Ne({pid:e.pid});r.$message.request(a.data)}catch(t){}};let _=(({killEvent:e},t,a)=>N([{label:"进程名称",minWidth:80,render:e=>{const t="备注：".concat(e.explain,"\n启动路径： ").concat(e.exe_path,"\n运行目录：").concat(e.cwd_path,"\n线程数量：").concat(e.num_threads);return A("span",{attrs:{title:t}},[e.proc_name])}},{label:t,prop:a,minWidth:70},{label:Je.t("Operation"),align:"right",fixed:"right",width:50,render:t=>A(o,{on:{click:()=>{e(t)}}},[1===t.important?"":"cpu_percent"===a?"结束":"释放"])}]))({killEvent:h},f.value?"CPU占用率":"内存使用率",f.value?"cpu_percent":"memory_usage");return $((async()=>{g()})),{__sfc:!0,specificResource:i,authType:n,props:s,vm:r,showTwo:l,showThree:c,foldExpand:u,foldActive:m,foldTitle:d,tableData:p,isLoadOrCpu:f,init:g,killEvent:h,openProductPayment:()=>{a({sourceId:141})},tableColum:_,openProcessAlarm:()=>{v({isAsync:!0,title:"进程告警",area:["100","50"],component:()=>ge((()=>import("./HomeProcessAlarmManage.js?v=1714377894636")),__vite__mapDeps([16,17,10,3,2,9,4,5,6,7,8,18,19,20,21,22,23]),import.meta.url)})}}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(U,{staticClass:"card-popover",staticStyle:{"box-shadow":"0px 1px 20px rgba(0, 0, 0, 0.2)"},attrs:{shadow:"always"}},[t("div",[e._t("button")],2),t(ae,{staticClass:"text-[1.2rem]",attrs:{accordion:!0},model:{value:a.foldExpand,callback:function(e){a.foldExpand=e},expression:"foldExpand"}},[t(se,{ref:"base-info",attrs:{name:"show"}},[t("template",{slot:"title"},[t("div",{staticClass:"flex justify-between w-full"},[t("span",{staticClass:"px-8x text-[#666] text-[1.4rem]"},[e._v(e._s(a.foldTitle.one))])])]),t("div",{staticClass:"mt-12x mx-8x space-y-[1.2rem] text-[#888] text-[1.3rem]"},[e._t("base-info")],2),t("hr",{staticStyle:{width:"calc(100% - 16px)",margin:"12px auto","border-top":"1px solid #f0f0f0"}}),t(pt,{staticClass:"mx-8x",attrs:{type:a.props.type}})],2)],1),t(ae,{staticClass:"text-[1.2rem]",attrs:{accordion:!0},model:{value:a.foldActive,callback:function(e){a.foldActive=e},expression:"foldActive"}},[a.showTwo?t(se,{attrs:{name:"two"}},[t("template",{slot:"title"},[t("div",{staticClass:"flex justify-between items-center w-full"},[t("span",{staticClass:"px-8x text-[#666] text-[1.4rem] leading-[3rem] text-center"},[e._v(" "+e._s(a.foldTitle.two)+" ")]),t("span",[e._v(e._s("two"===a.foldActive?"收起":"展开"))])])]),t("div",{staticClass:"m-[.4rem] space-y-[1.2rem] text-[#888] text-[1.3rem] leading-[1.4rem]"},[e._t("content-info")],2)],2):e._e(),a.showThree?t(se,{class:{"!mb-0":!a.showTwo},attrs:{name:"three"}},[t("template",{slot:"title"},[t("div",{staticClass:"flex justify-between w-full"},[t("span",{staticClass:"px-8x text-[#666] text-[1.4rem] leading-[3rem] text-center"},[e._v(" "+e._s(a.foldTitle.three)+" ")]),t("span",[e._v(e._s("three"===a.foldActive?"收起":"展开"))])])]),t("div",{staticClass:"mt-8x space-y-[1.2rem]"},[t("div",[a.props.processAlarmShow?t("div",{staticClass:"mb-1rem"},[t(K,{attrs:{size:"mini"},on:{click:a.openProcessAlarm}},[e._v("进程告警")])],1):e._e(),t(ze,{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:a.tableData.loading,expression:"tableData.loading"}],attrs:{column:a.tableColum,data:a.tableData.list,"max-height":"450"},scopedSlots:e._u(["ltd"!==a.authType?{key:"empty",fn:function(){return[t("div",{staticClass:"flex items-center justify-center flex-nowrap w-full"},[t("span",{staticClass:"whitespace-nowrap"},[e._v("当前为企业版专享功能, "),t(o,{on:{click:a.openProductPayment}},[e._v("立即购买")])],1)])]},proxy:!0}:null],null,!0)})],1)])],2):e._e()],1)],1)}),[],!1,null,"56bd2bd4",null,null).exports;const vt=s(H({__name:"HomeStateScan",props:{custom:{type:Boolean,default:!1},item:{default:[]}},emits:["showScaning","closePopover"],setup(e,{emit:t}){const a=e,s=N();j((()=>a.item),(()=>{const e=parseFloat(a.item.data.size[3].substring(0,a.item.data.size[3].lastIndexOf("%")));s.value=e>=80?"warning":e>=90?"danger":"success"}),{immediate:!0});return{__sfc:!0,props:a,emit:t,tipType:s,scanRubbishFile:async()=>{Ye({name:"disk_analysis",source:120,limitLtd:!0}),d("diskPath",a.item.info.title),d("taskStatus","true")},isRelease:h,setPsDialog:be}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(ft,{attrs:{"load-type":"diskInfo",type:"disk-".concat(a.props.item.info.title)},scopedSlots:e._u([{key:"button",fn:function(){return[t("div",{staticClass:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},[t("div",{staticClass:"flex items-center"},[t("span",{staticClass:"text-[#666] text-[1.4rem] mr-4x ml-8x"},[e._v("检测到当前磁盘")]),t(ie,{attrs:{type:a.tipType}},[e._v(e._s("容量占用".concat(a.props.item.data.size[3].substring(0,a.props.item.data.size[3].lastIndexOf("%")),"%")))])],1),t(_,{attrs:{type:"primary"},on:{click:a.scanRubbishFile}},[e._v("立即清理")])],1)]},proxy:!0},{key:"base-info",fn:function(){return[t("div",{staticClass:"flex align-left flex-col"},[t("div",{staticClass:"m-4x flex items-center",attrs:{title:"挂载点：".concat(e.item.info.title,"\n备注：").concat(e.item.data.rname)}},[t("div",{staticClass:"block truncate max-w-[30rem]"},[e._v(" "+e._s(e.$t("HomeState.DiskHover[3]")+e.item.info.title+(a.isRelease?"":" ("+e.item.data.rname+")"))+" ")]),a.isRelease?e._e():t(y,{attrs:{trigger:"hover",placement:"right",content:"点击设置备注"},scopedSlots:e._u([{key:"reference",fn:function(){return[t("i",{staticClass:"el-icon-edit-outline text-primary ml-8x cursor-pointer",on:{click:function(t){return a.setPsDialog({ps:e.item.data.rname||e.item.info.title,path:e.item.info.title})}}})]},proxy:!0}],null,!1,4223188973)})],1),t("span",{staticClass:"m-4x"},[e._v(e._s("".concat(e.$t("HomeState.DiskHover[13]")).concat(e.item.data.size[0],"，").concat(e.$t("HomeState.DiskHover[7]")).concat(e.item.data.size[2],"，").concat(e.$t("HomeState.DiskHover[6]")).concat(e.item.data.size[1])))]),t("span",{staticClass:"m-4x"},[e._v(" "+e._s("".concat(e.$t("HomeState.DiskHover[16]")).concat((Number(e.item.data.size[0].replace("G",""))-Number(e.item.data.size[1].replace("G",""))).toFixed(2)+"G"))+" ")])]),t("div",{staticClass:"flex align-left flex-col !mt-4x"},[t("span",{staticClass:"m-4x"},[e._v(e._s(e.$t("HomeState.DiskHover[1]")+e.item.data.filesystem))]),t("span",{staticClass:"m-4x"},[e._v(e._s(e.$t("HomeState.DiskHover[2]")+e.item.data.type+"，".concat(e.$t("HomeState.DiskHover[12]")).concat(e.item.data.size[4])))])])]},proxy:!0},{key:"content-info",fn:function(){return[t("p",{staticClass:"!ml-4x !my-8x"},[e._v(e._s(e.$t("HomeState.DiskHover[5]")+e.item.data.inodes[0]))]),t("p",{staticClass:"!ml-4x !my-8x"},[e._v(e._s(e.$t("HomeState.DiskHover[14]")+e.item.data.inodes[1]))]),t("p",{staticClass:"!ml-4x !my-8x"},[e._v(e._s(e.$t("HomeState.DiskHover[15]")+e.item.data.inodes[2]))]),t("p",{staticClass:"!ml-4x !my-8x"},[e._v(e._s(e.$t("HomeState.DiskHover[8]")+e.item.data.inodes[3]))])]},proxy:!0}])})}),[],!1,null,"22854170",null,null).exports;const gt=s(H({__name:"HomeStateData",props:{visible:{type:Boolean,default:!1},custom:{type:Boolean,default:!1},showDesc:{type:Boolean,default:!0},href:{default:""},info:{default:()=>({title:"",range:0})},disk:{type:Boolean,default:!1},data:{default:()=>({})},type:{default:""}},emits:["update:visible","openPopover","show","hide"],setup(e,{emit:t}){const a=e,{proxy:s}=M(),i=N(),o=N();let n=null;const r=E((()=>{const{info:e}=a,{desc:t,title:s,range:i,rangeText:o,disabled:n}=e,r=c(i),{color:l}=r;return{title:s,color:l,range:i,disabled:!!n,desc:t||r.desc,rangeText:o||"",position:"bottom-start"}})),l=[{desc:"".concat(s.$t("HomeStateData.LoadStateList[0]")),val:90,color:"#dd2f00"},{desc:"".concat(s.$t("HomeStateData.LoadStateList[1]")),val:80,color:"#ff9900"},{desc:"".concat(s.$t("HomeStateData.LoadStateList[2]")),val:70,color:"#20a53a"},{desc:"".concat(s.$t("HomeStateData.LoadStateList[3]")),val:30,color:"#20a53a"}],c=e=>{let t={};for(let a=0;a<l.length;a++){const s=l[a];if(e>=s.val){t={...s};break}if(e<30){t={...l[l.length-1]};break}}return t.val=e,t};return $((()=>{n=new ResizeObserver((()=>{i.value&&i.value.updatePopper()})),o.value&&n.observe(o.value)})),O((()=>{n&&o.value&&n.unobserve(o.value)})),{__sfc:!0,props:a,emits:t,vm:s,popover:i,popoverContent:o,resizeObserver:n,param:r,config:l,progressFormat:e=>{const{rangeText:t}=r.value;return t||"".concat(e,"%")},chartColorActive:c,dirEvent:e=>{d("Path",e),window.location.href=window.location.origin+"/files"}}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"state-data py-24x"},[t(y,{ref:"popover",attrs:{trigger:"hover",width:e.custom?"auto":e.disk?300:400,offset:e.custom?1:0,placement:a.param.position,"close-delay":0,"popper-class":"white-popover"},on:{show:function(t){return e.$emit("show")},hide:function(t){return e.$emit("hide")}}},[e._t("default")],2),t("div",{ref:"popoverContent",staticClass:"w-full flex flex-col items-center",attrs:{slot:"reference"},slot:"reference"},[t("div",{staticClass:"state-header",attrs:{title:a.param.title}},["disk"===e.type?[t(oe,{attrs:{content:"点击跳转目录",placement:"top"}},[t(o,{on:{click:function(e){return a.dirEvent(a.param.title)}}},[e._v(e._s(a.param.title))])],1)]:t("span",[e._v(e._s(a.param.title))]),t(oe,{staticClass:"item",attrs:{effect:"dark",content:"点击跳转".concat(a.param.title,"教程"),placement:"top-start"}},[e.href?t("a",{staticClass:"bt-ico-ask ml-3",attrs:{href:e.href,target:"_blank"}},[e._v("?")]):e._e()])],2),t(ne,{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"cursor-pointer",style:"color:"+a.param.color,attrs:{type:"circle",width:105,"stroke-width":7,color:a.param.color,percentage:a.param.range||0,format:a.progressFormat}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showDesc,expression:"showDesc"}],staticClass:"state-bottom",attrs:{title:a.param.desc}},[e._v(" "+e._s(a.param.desc)+" ")])],1)],1)}),[],!1,null,"4e7f2788",null,null).exports;const ht=s(H({__name:"HomeState",setup(t){const{getTemplate:a}=e(),{refs:{load:s,cpuTimes:i,cpu:o,memory:n,diskInfoList:l,specificResource:c,statePopoverTimr:u},getHomeProcessInfo:m}=he(),{proxy:d}=M();let p=N([]);const f=N(!1),v=N(!0),h=N(0),_=N([]),y=L({memory:"success",cpu:"success",load:"success"});he().$subscribe(((e,t)=>{var a;_.value=[[{title:"用户级别的 CPU 时间百分比",name:"user",value:i.value.user},{title:"运行带有 “nice” 优先级的进程时使用的 CPU 时间百分比",name:"nice",value:i.value.nice}],[{title:"系统级别的 CPU 时间百分比",name:"system",value:null==(a=i.value)?void 0:a.system},{title:"空闲状态的 CPU 时间百分比",name:"idle",value:i.value.idle}],[{title:"等待 I/O 操作完成的 CPU 时间百分比",name:"iowait",value:i.value.iowait},{title:"处理硬件中断的 CPU 时间百分比",name:"irq",value:i.value.irq}],[{title:"处理软件中断的 CPU 时间百分比",name:"softirq",value:i.value.softirq},{title:"当前 CPU 被其他虚拟机偷取的CPU时间百分比",name:"steal",value:i.value.steal}],[{title:"运行虚拟机时使用的 CPU 时间百分比",name:"guest",value:i.value.guest},{title:"运行带有 “nice” 优先级的虚拟机时使用的CPU时间百分比",name:"guest_nice",value:i.value.guest_nice}]],P(),I(),k(),T(),H()}));const x=L({title:d.$t("HomeState.LoadState"),range:0}),w=L({title:d.$t("HomeState.CpuState"),range:0,desc:d.$t("Getting")}),b=L({title:d.$t("HomeState.MemState"),range:0,desc:"0 / 0(MB)",disabled:!1}),C=E((()=>"".concat(s.value.one.toFixed(2)," / ").concat(s.value.five.toFixed(2)," / ").concat(s.value.fifteen.toFixed(2)))),S=E((()=>{const{process:e}=o.value;return g(e,"array")?"".concat(e[0]," / ").concat(e[1]):"".concat(d.$t("Getting"))})),k=()=>{const{cpuNumber:e,logicCores:t,cores:a}=o.value;w.desc=e&&t&&a?d.$t("HomeState.CpuCore",{core:a}):d.$t("Getting")},P=()=>{const{one:e,max:t}=s.value,a=Math.round(e/t*100),i=a>100?100:a;x.range=i<0?0:i,y.load=i>80?"warning":i>90?"danger":"success"},I=()=>{const{occupy:e}=o.value;w.range=parseFloat(e)||0,w.range>80?y.cpu="warning":w.range>90?y.cpu="danger":y.cpu="success"},T=()=>{let e=[],t=0,a="核心 ",s="";for(let i=0;i<o.value.coresOccupy.length;i++)if(t<2){if(t++,i===o.value.coresOccupy.length-1){a+="".concat(i+1," "),s+="".concat(parseFloat(o.value.coresOccupy[i]).toFixed(1),"% "),e.push({name:a,value:s});break}a+="".concat(i+1," / "),s+="".concat(parseFloat(o.value.coresOccupy[i]).toFixed(1),"% / "),o.value.coresOccupy.length%2==1&&i===o.value.coresOccupy.length-1&&e.push({name:a,value:s})}else t=0,a+="".concat(i+1),s+="".concat(parseFloat(o.value.coresOccupy[i]).toFixed(1),"%"),e.push({name:a,value:s}),a="核心 ",s="";p.value=e},H=()=>{const{memRealUsed:e,memTotal:t}=n.value;if(f.value)return;const a=Math.round(e/t*1e3)/10;y.memory=a>=80?"warning":a>=90?"danger":"success",b.range=a,b.desc="".concat(e," / ").concat(t,"(MB)")},D=e=>{h.value&&clearInterval(h.value);const t=e.memRealUsed-e.memRealUsed,a=r(t);b.range=1,b.rangeText=d.$t("HomeState.Released",["\n ".concat(a)]),setTimeout((()=>{f.value=!1,b.rangeText="",b.disabled=!1,v.value=!0}),1500)},R=()=>{let e="";f.value=!0,v.value=!1,b.disabled=!0,h.value=setInterval((()=>{let{range:t}=b;e="..."===e?".":"".concat(e,"."),b.rangeText=d.$t("HomeState.Releasing",[e]),t>0&&(t-=.2*t),t=Number(t.toFixed(2)),t<0&&(t=0),b.range=t}),400)},A=async()=>{try{R();const{data:e}=await $e();D(e)}catch(e){}},B=N(!1),F=async()=>{(await De({sName:"task_manager"})).setup?(a(),B.value=!0):B.value=!1};return j((()=>u),((e,t)=>{clearInterval(e)})),$((async()=>{await F()})),O((()=>{clearInterval(u.value)})),{__sfc:!0,getTemplate:a,load:s,cpuTimes:i,cpu:o,memory:n,diskInfoList:l,specificResource:c,statePopoverTimr:u,getHomeProcessInfo:m,vm:d,cpuCoreDesc:p,isClearMemory:f,showMemoryDesc:v,memoryTimer:h,loadInfoList:_,tagsType:y,loadInfo:x,cpuInfo:w,memoryInfo:b,createCpuLoadInfo:C,createCpuProcessInfo:S,createCpuCoreNum:k,createLoadInfo:P,createCpuInfo:I,createCpuCoreParam:T,createMemoryInfo:H,clearMemoryTimer:D,setMemoryTime:R,clearMemory:A,onClearMemory:async()=>{try{await d.$confirm({type:"calc",title:d.$t("HomeState.FreeMemoryTitle"),message:d.$t("HomeState.FreeMemoryMessage")}),A()}catch(e){}},moveStatePopover:async()=>{u.value=setInterval((async()=>{await m()}),5e3),await m()},removeStatePopover:()=>{clearInterval(u.value)},processAlarmShow:B,getProcessAlarm:F}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(U,{staticClass:"module-box w-full",attrs:{shadow:"always","body-style":{padding:0,display:"flex"}}},[t("div",{directives:[{name:"t",rawName:"v-t",value:"HomeState.Title",expression:"`HomeState.Title`"}],staticClass:"text-1.6rem text-desc text-auto-ellipsis",attrs:{slot:"header"},slot:"header"}),t(W,{staticClass:"w-full",attrs:{span:24}},[t(ee,{attrs:{span:4,xs:12,sm:6,md:6,lg:4}},[t(gt,{attrs:{info:a.loadInfo,href:"https://www.bt.cn/bbs/thread-11402-1-1.html"},on:{show:a.moveStatePopover,hide:a.removeStatePopover}},[t(ft,{attrs:{"load-type":"loadInfo",data:a.specificResource,type:"load","process-alarm-show":a.processAlarmShow},scopedSlots:e._u([{key:"button",fn:function(){return[t("div",{staticClass:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},[t("div",{staticClass:"flex items-center"},[t("span",{staticClass:"text-[#666] text-[1.4rem] mr-4x ml-8x"},[e._v("检测到当前负载")]),t(ie,{attrs:{type:a.tagsType.load}},[e._v(e._s("运行达到".concat(a.loadInfo.range,"%")))])],1)])]},proxy:!0},{key:"base-info",fn:function(){return[t("div",{staticClass:"disk-body-list flex justify-between !mx-4x !my-8x"},[t("div",[e._v("最近1/5/15分钟平均负载：")]),t("div",{attrs:{id:"load_one"}},[e._v(" "+e._s(a.createCpuLoadInfo)+" ")])]),t("div",{staticClass:"disk-body-list flex justify-between !mx-4x !my-8x"},[t("div",[e._v("活动进程数 / 总进程数:")]),t("div",{attrs:{id:"load_cpu_times_num"}},[e._v(" "+e._s(a.createCpuProcessInfo)+" ")])])]},proxy:!0},{key:"content-info",fn:function(){return[t("div",{staticClass:"disk-item-body",attrs:{id:"other_info_html"}},[t("table",{staticClass:"table table-fixed whitespace-nowrap"},[t("tbody",e._l(a.loadInfoList,(function(a,s){return t("tr",{key:s},[e._l(a,(function(a,s){return[t("td",{staticClass:"break-all text-ellipsis p-[.4rem]",attrs:{title:a.title}},[t("span",[e._v(e._s(a.name))])]),t("td",{staticClass:"break-all text-ellipsis",attrs:{title:a.title}},[t("span",[e._v(e._s(a.value))])])]}))],2)})),0)])])]},proxy:!0}])})],1)],1),t(ee,{attrs:{span:4,xs:12,sm:6,md:6,lg:4}},[t(gt,{attrs:{info:a.cpuInfo,type:"cpu"},on:{show:a.moveStatePopover,hide:a.removeStatePopover}},[t(ft,{attrs:{"load-type":"cpuInfo",data:a.specificResource,type:"cpu","process-alarm-show":a.processAlarmShow},scopedSlots:e._u([{key:"button",fn:function(){return[t("div",{staticClass:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},[t("div",{staticClass:"flex items-center"},[t("span",{staticClass:"text-[#666] text-[1.4rem] mr-4x ml-8x"},[e._v("检测到当前CPU使用率")]),t(ie,{attrs:{type:a.tagsType.cpu}},[e._v(e._s("占用".concat(a.cpuInfo.range,"%")))])],1)])]},proxy:!0},{key:"content-info",fn:function(){return[t("div",{staticClass:"max-h-[5.8rem] overflow-y-auto"},e._l(a.cpuCoreDesc,(function(a,s){return t("div",{key:s,staticClass:"flex direction-row items-center justify-between m-4x"},[t("span",[e._v(e._s(a.name))]),t("span",[e._v(e._s(a.value))])])})),0)]},proxy:!0},{key:"base-info",fn:function(){return[t("p",{staticClass:"!mx-4x !my-8x"},[e._v(e._s(a.cpu.framework))]),t("p",{staticClass:"!mx-4x !my-8x"},[e._v(" "+e._s(e.$t("HomeState.CpuHover",[a.cpu.cpuNumber,a.cpu.logicCores,a.cpu.cores]))+" ")])]},proxy:!0}])})],1)],1),t(ee,{attrs:{span:4,xs:12,sm:6,md:6,lg:4}},[t(gt,{attrs:{type:"mem",info:a.memoryInfo},on:{show:function(e){return a.moveStatePopover()},hide:a.removeStatePopover}},[t(ft,{attrs:{"load-type":"memoryInfo",data:a.specificResource,type:"mem","process-alarm-show":a.processAlarmShow},scopedSlots:e._u([{key:"button",fn:function(){return[t("div",{staticClass:"flex items-center justify-between mb-[1.2rem] leading-[2.8rem]"},[t("div",{staticClass:"flex items-center"},[t("span",{staticClass:"text-[#666] text-[1.4rem] mr-4x ml-8x"},[e._v("检测到当前内存")]),t(ie,{attrs:{type:a.tagsType.memory}},[e._v(e._s("占用".concat(a.memoryInfo.range,"%")))])],1),t(_,{attrs:{type:"primary"},on:{click:a.onClearMemory}},[e._v("立即清理")])],1)]},proxy:!0},{key:"base-info",fn:function(){return[t("div",{staticClass:"flex align-left flex-col"},[t("div",{staticClass:"flex justify-between m-4x"},[t("div",{staticClass:"w-[50%]"},[t("span",{staticClass:"w-[81px] inline-flex justify-end"},[e._v("可用：")]),t("span",{staticClass:"inline-flex justify-start"},[e._v(e._s(a.memory.memFree+" MB"))])]),t("div",{staticClass:"w-[50%]"},[t("span",{staticClass:"w-[81px] inline-flex justify-end"},[e._v("已用：")]),t("span",{staticClass:"inline-flex justify-start"},[e._v(e._s(a.memory.memRealUsed+" MB"))])])]),t("div",{staticClass:"flex justify-between m-4x"},[t("div",{staticClass:"w-[50%]"},[t("span",{staticClass:"w-[81px] inline-flex justify-end"},[e._v("总内存：")]),t("span",{staticClass:"inline-flex justify-start"},[e._v(e._s(a.memory.memTotal+" MB"))])]),t("div",{staticClass:"w-[50%]"},[t("span",{staticClass:"w-[81px] inline-flex justify-end"},[e._v("共享：")]),t("span",{staticClass:"inline-flex justify-start"},[e._v(e._s(a.memory.memShared+" MB"))])])]),t("div",{staticClass:"flex justify-between m-4x"},[t("div",{staticClass:"w-[50%]"},[t("span",{staticClass:"w-[81px] inline-flex justify-end"},[e._v(e._s("available："))]),t("span",[e._v(e._s(a.memory.memAvailable+"MB"))])]),t("div",{staticClass:"w-[50%]"},[t("span",{staticClass:"w-[81px] inline-flex justify-end"},[e._v("buff/cache：")]),t("span",{staticClass:"inline-flex justify-start"},[e._v(e._s(a.memory.memCached+"/"+a.memory.memBuffers+" MB"))])])])])]},proxy:!0}])})],1)],1),e._l(a.diskInfoList,(function(e,s){return[t(ee,{key:"".concat(s),attrs:{span:4,xs:12,sm:6,md:6,lg:4}},[t(gt,{attrs:{info:e.info,type:"disk",data:e.data},on:{hide:a.removeStatePopover}},[t(vt,{attrs:{item:e}})],1)],1)]}))],2)],1)}),[],!1,null,"c2e965fb",null,null).exports;var _t={exports:{}};const yt=et(_t.exports=function(e){var t={};function a(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/dist/",a(a.s=112)}({0:function(e,t,a){function s(e,t,a,s,i,o,n,r){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),s&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},c._ssrRegister=l):i&&(l=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var m=c.beforeCreate;c.beforeCreate=m?[].concat(m,l):[l]}return{exports:e,options:c}}a.d(t,"a",(function(){return s}))},112:function(e,t,a){a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.ready,expression:"ready"}],staticClass:"el-carousel__item",class:{"is-active":e.active,"el-carousel__item--card":"card"===e.$parent.type,"is-in-stage":e.inStage,"is-hover":e.hover,"is-animating":e.animating},style:e.itemStyle,on:{click:e.handleItemClick}},["card"===e.$parent.type?a("div",{directives:[{name:"show",rawName:"v-show",value:!e.active,expression:"!active"}],staticClass:"el-carousel__mask"}):e._e(),e._t("default")],2)};s._withStripped=!0;var i=a(3),o=.83,n={name:"ElCarouselItem",props:{name:String,label:{type:[String,Number],default:""}},data:function(){return{hover:!1,translate:0,scale:1,active:!1,ready:!1,inStage:!1,animating:!1}},methods:{processIndex:function(e,t,a){return 0===t&&e===a-1?-1:t===a-1&&0===e?a:e<t-1&&t-e>=a/2?a+1:e>t+1&&e-t>=a/2?-2:e},calcCardTranslate:function(e,t){var a=this.$parent.$el.offsetWidth;return this.inStage?a*(1.17*(e-t)+1)/4:e<t?-1.83*a/4:3.83*a/4},calcTranslate:function(e,t,a){return this.$parent.$el[a?"offsetHeight":"offsetWidth"]*(e-t)},translateItem:function(e,t,a){var s=this.$parent.type,i=this.parentDirection,n=this.$parent.items.length;if("card"!==s&&void 0!==a&&(this.animating=e===t||e===a),e!==t&&n>2&&this.$parent.loop&&(e=this.processIndex(e,t,n)),"card"===s)this.inStage=Math.round(Math.abs(e-t))<=1,this.active=e===t,this.translate=this.calcCardTranslate(e,t),this.scale=this.active?1:o;else{this.active=e===t;var r="vertical"===i;this.translate=this.calcTranslate(e,t,r),this.scale=1}this.ready=!0},handleItemClick:function(){var e=this.$parent;if(e&&"card"===e.type){var t=e.items.indexOf(this);e.setActiveItem(t)}}},computed:{parentDirection:function(){return this.$parent.direction},itemStyle:function(){var e={transform:("vertical"===this.parentDirection?"translateY":"translateX")+"("+this.translate+"px) scale("+this.scale+")"};return Object(i.autoprefixer)(e)}},created:function(){this.$parent&&this.$parent.updateItems()},destroyed:function(){this.$parent&&this.$parent.updateItems()}},r=a(0),l=Object(r.a)(n,s,[],!1,null,null,null);l.options.__file="packages/carousel/src/item.vue";var c=l.exports;c.install=function(e){e.component(c.name,c)},t.default=c},3:function(e,t){e.exports=re()}}));var xt={exports:{}};const wt=et(xt.exports=function(e){var t={};function a(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/dist/",a(a.s=111)}({0:function(e,t,a){function s(e,t,a,s,i,o,n,r){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),s&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},c._ssrRegister=l):i&&(l=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var m=c.beforeCreate;c.beforeCreate=m?[].concat(m,l):[l]}return{exports:e,options:c}}a.d(t,"a",(function(){return s}))},111:function(e,t,a){a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.carouselClasses,on:{mouseenter:function(t){return t.stopPropagation(),e.handleMouseEnter(t)},mouseleave:function(t){return t.stopPropagation(),e.handleMouseLeave(t)}}},[a("div",{staticClass:"el-carousel__container",style:{height:e.height}},[e.arrowDisplay?a("transition",{attrs:{name:"carousel-arrow-left"}},[a("button",{directives:[{name:"show",rawName:"v-show",value:("always"===e.arrow||e.hover)&&(e.loop||e.activeIndex>0),expression:"(arrow === 'always' || hover) && (loop || activeIndex > 0)"}],staticClass:"el-carousel__arrow el-carousel__arrow--left",attrs:{type:"button"},on:{mouseenter:function(t){e.handleButtonEnter("left")},mouseleave:e.handleButtonLeave,click:function(t){t.stopPropagation(),e.throttledArrowClick(e.activeIndex-1)}}},[a("i",{staticClass:"el-icon-arrow-left"})])]):e._e(),e.arrowDisplay?a("transition",{attrs:{name:"carousel-arrow-right"}},[a("button",{directives:[{name:"show",rawName:"v-show",value:("always"===e.arrow||e.hover)&&(e.loop||e.activeIndex<e.items.length-1),expression:"(arrow === 'always' || hover) && (loop || activeIndex < items.length - 1)"}],staticClass:"el-carousel__arrow el-carousel__arrow--right",attrs:{type:"button"},on:{mouseenter:function(t){e.handleButtonEnter("right")},mouseleave:e.handleButtonLeave,click:function(t){t.stopPropagation(),e.throttledArrowClick(e.activeIndex+1)}}},[a("i",{staticClass:"el-icon-arrow-right"})])]):e._e(),e._t("default")],2),"none"!==e.indicatorPosition?a("ul",{class:e.indicatorsClasses},e._l(e.items,(function(t,s){return a("li",{key:s,class:["el-carousel__indicator","el-carousel__indicator--"+e.direction,{"is-active":s===e.activeIndex}],on:{mouseenter:function(t){e.throttledIndicatorHover(s)},click:function(t){t.stopPropagation(),e.handleIndicatorClick(s)}}},[a("button",{staticClass:"el-carousel__button"},[e.hasLabel?a("span",[e._v(e._s(t.label))]):e._e()])])})),0):e._e()])};s._withStripped=!0;var i=a(25),o=a.n(i),n=a(16),r={name:"ElCarousel",props:{initialIndex:{type:Number,default:0},height:String,trigger:{type:String,default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:String,indicator:{type:Boolean,default:!0},arrow:{type:String,default:"hover"},type:String,loop:{type:Boolean,default:!0},direction:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}}},data:function(){return{items:[],activeIndex:-1,containerWidth:0,timer:null,hover:!1}},computed:{arrowDisplay:function(){return"never"!==this.arrow&&"vertical"!==this.direction},hasLabel:function(){return this.items.some((function(e){return e.label.toString().length>0}))},carouselClasses:function(){var e=["el-carousel","el-carousel--"+this.direction];return"card"===this.type&&e.push("el-carousel--card"),e},indicatorsClasses:function(){var e=["el-carousel__indicators","el-carousel__indicators--"+this.direction];return this.hasLabel&&e.push("el-carousel__indicators--labels"),"outside"!==this.indicatorPosition&&"card"!==this.type||e.push("el-carousel__indicators--outside"),e}},watch:{items:function(e){e.length>0&&this.setActiveItem(this.initialIndex)},activeIndex:function(e,t){this.resetItemPosition(t),t>-1&&this.$emit("change",e,t)},autoplay:function(e){e?this.startTimer():this.pauseTimer()},loop:function(){this.setActiveItem(this.activeIndex)},interval:function(){this.pauseTimer(),this.startTimer()}},methods:{handleMouseEnter:function(){this.hover=!0,this.pauseTimer()},handleMouseLeave:function(){this.hover=!1,this.startTimer()},itemInStage:function(e,t){var a=this.items.length;return t===a-1&&e.inStage&&this.items[0].active||e.inStage&&this.items[t+1]&&this.items[t+1].active?"left":!!(0===t&&e.inStage&&this.items[a-1].active||e.inStage&&this.items[t-1]&&this.items[t-1].active)&&"right"},handleButtonEnter:function(e){var t=this;"vertical"!==this.direction&&this.items.forEach((function(a,s){e===t.itemInStage(a,s)&&(a.hover=!0)}))},handleButtonLeave:function(){"vertical"!==this.direction&&this.items.forEach((function(e){e.hover=!1}))},updateItems:function(){this.items=this.$children.filter((function(e){return"ElCarouselItem"===e.$options.name}))},resetItemPosition:function(e){var t=this;this.items.forEach((function(a,s){a.translateItem(s,t.activeIndex,e)}))},playSlides:function(){this.activeIndex<this.items.length-1?this.activeIndex++:this.loop&&(this.activeIndex=0)},pauseTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},startTimer:function(){this.interval<=0||!this.autoplay||this.timer||(this.timer=setInterval(this.playSlides,this.interval))},resetTimer:function(){this.pauseTimer(),this.startTimer()},setActiveItem:function(e){if("string"==typeof e){var t=this.items.filter((function(t){return t.name===e}));t.length>0&&(e=this.items.indexOf(t[0]))}if(e=Number(e),!isNaN(e)&&e===Math.floor(e)){var a=this.items.length,s=this.activeIndex;this.activeIndex=e<0?this.loop?a-1:0:e>=a?this.loop?0:a-1:e,s===this.activeIndex&&this.resetItemPosition(s),this.resetTimer()}},prev:function(){this.setActiveItem(this.activeIndex-1)},next:function(){this.setActiveItem(this.activeIndex+1)},handleIndicatorClick:function(e){this.activeIndex=e},handleIndicatorHover:function(e){"hover"===this.trigger&&e!==this.activeIndex&&(this.activeIndex=e)}},created:function(){var e=this;this.throttledArrowClick=o()(300,!0,(function(t){e.setActiveItem(t)})),this.throttledIndicatorHover=o()(300,(function(t){e.handleIndicatorHover(t)}))},mounted:function(){var e=this;this.updateItems(),this.$nextTick((function(){Object(n.addResizeListener)(e.$el,e.resetItemPosition),e.initialIndex<e.items.length&&e.initialIndex>=0&&(e.activeIndex=e.initialIndex),e.startTimer()}))},beforeDestroy:function(){this.$el&&Object(n.removeResizeListener)(this.$el,this.resetItemPosition),this.pauseTimer()}},l=a(0),c=Object(l.a)(r,s,[],!1,null,null,null);c.options.__file="packages/carousel/src/main.vue";var u=c.exports;u.install=function(e){e.component(u.name,u)},t.default=u},16:function(e,t){e.exports=le()},25:function(e,t){e.exports=ce()}}));const bt=s(H({__name:"HomeNotice",setup(t){const{refs:{port:a,panelType:s,tencentCVM:i,tencentDataG:o}}=e(),{refs:{refreshTime:n,memory:l}}=he(),{proxy:u}=M(),m=N(!1),d=N(!1),p=N(!1),f=N(!1),v=N(!1),g=L({instanceId:"",appId:"",secretId:"",secretKey:"",show:!0,PrivateAddresses:[],PublicAddresses:[],Region:"",RegionTitle:"",ExpiredTime:"",requestPack:{InstanceTrafficPackageSet:[],RequestId:"",TotalCount:0},requestInfoShow:!1,firstPhotoShow:!1,snapshotsList:[],SnapshotName:"",createSnapshotDisable:!1}),h=E((()=>8888===a.value)),_=E((()=>m.value||d.value||h.value||p.value)),y=()=>{p.value=!(window.location.protocol.indexOf("https")>=0)},w=E((()=>{if(g.PrivateAddresses.length>0&&g.PublicAddresses.length>0){let t="<span>";for(var e=0;e<g.PrivateAddresses.length;e++){t+=g.PrivateAddresses[e]+(e!=g.PrivateAddresses.length-1?"、":"")}t+="(内)</span>";let a="<span>";for(e=0;e<g.PublicAddresses.length;e++){a+=g.PublicAddresses[e]+(e!=g.PublicAddresses.length-1?"、":"")}return a+="(外)</span>",t+" / "+a}return"----"})),b=E((()=>""!==g.Region&&""!==g.RegionTitle?g.RegionTitle+"-"+g.Region:"----")),C=e=>{const t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0"),r=String(t.getSeconds()).padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(i," ").concat(o,":").concat(n,":").concat(r)},S=E((()=>""!==g.ExpiredTime?C(g.ExpiredTime):"----")),k=E((()=>{if(g.requestPack.InstanceTrafficPackageSet.length>0){let a=g.requestPack.InstanceTrafficPackageSet[0],s=0,i=0;for(var e=0;e<a.TrafficPackageSet.length;e++){var t=a.TrafficPackageSet[e];s+=t.TrafficPackageTotal,i+=t.TrafficUsed}return r(i)+"/"+r(s)}return"----"})),P=N(!1),I=async()=>{if(void 0===s.value||"[]"===s.value)return v.value=!1;if(s.value.indexOf("tencent")>0)try{v.value=!0,P.value=!0;const{data:e}=await Le();if(e){g.show=!1,g.secretKey=e.secretKey,g.appId=e.appid,g.secretId=e.secretId;const{data:t}=await je();if(o.value=t,g.instanceId=t.InstanceId,g.PrivateAddresses=t.PrivateAddresses,g.PublicAddresses=t.PublicAddresses,g.Region=t.Region,g.RegionTitle=t.Region_title,g.ExpiredTime=t.ExpiredTime||"","cvm"!==t.server_type){i.value=!1;const{data:e}=await Me();e&&e.msg&&(e.msg.indexOf("密钥连接错误")>-1||e.msg.indexOf("获取失败")>-1)?Ce({tips:"当前密钥错误，请重新绑定或取消当前密钥关联"}):g.requestPack=e}else i.value=!0;P.value=!1}else P.value=!1}catch(e){}else v.value=!1},T=E((()=>{let e=[];for(let t=0;t<g.requestPack.InstanceTrafficPackageSet.length;t++){let a=g.requestPack.InstanceTrafficPackageSet[t];for(let t=0;t<a.TrafficPackageSet.length;t++){let s=a.TrafficPackageSet[t];e.push({TrafficPackageId:s.TrafficPackageId,TrafficPackageTotal:r(s.TrafficPackageTotal),TrafficUsed:r(s.TrafficUsed),TrafficPackageRemaining:r(s.TrafficPackageRemaining),TrafficPackageStart:C(s.StartTime),TrafficPackageEnd:C(s.EndTime)})}}return e})),H=async()=>{g.firstPhotoShow=!0;const{data:e}=await Re();g.snapshotsList=e.SnapshotSet};return j(n,(e=>{const{memTotal:t,memRealUsed:a}=l.value,s=t-a;m.value=s<64})),$((()=>{y(),I()})),{__sfc:!0,port:a,panelType:s,tencentCVM:i,tencentDataG:o,refreshTime:n,memory:l,vm:u,memoryStatus:m,usernameStatus:d,httpsStatus:p,visible:f,tencentShow:v,tencentData:g,tencentCloudPopup:e=>{e?Ce({appId:g.appId,secretId:g.secretId,secretKey:g.secretKey,isEdit:e||!1}):Ce()},portStatus:h,noticeStatus:_,detectingHttps:y,jumpConfig:()=>{window.localStorage.setItem("config-dialog","ssl"),c("/config")},editPortInfo:()=>{window.localStorage.setItem("config-dialog","port"),c("/config")},onClear:async()=>{try{await u.$confirm({type:"calc",title:u.$t("HomeState.FreeMemoryTitle"),message:u.$t("HomeState.FreeMemoryMessage")});const e=await $e();u.$message.request(e)}catch(e){}},hostIp:w,hostPath:b,timeFormate:C,hostExpiredTime:S,hostRequestPackage:k,refresh:P,tencentCheck:I,gotoTencentCloud:()=>{window.open("https://console.cloud.tencent.com/lighthouse/instance/detail?id="+g.instanceId)},requestPackTableData:T,getFirstPhoto:H,createSnapshot:async()=>{g.createSnapshotDisable=!0;const{data:e}=await Ee({SnapshotName:g.SnapshotName});g.createSnapshotDisable=!1,f.value=!1,u.$message.request(e),await H()},gotHtml:e=>{window.open(e)},deleteSnapshot:async e=>{await u.$confirm({icon:"warning",title:"删除["+e.SnapshotName+"]快照",message:"是否删除当前【".concat(e.SnapshotName,"】快照，删除后将无法恢复，是否继续？")});const t=await Ae({SnapshotId:e.SnapshotId});u.$message.request(t),await H()},updateTencentPanel:async()=>{await u.$confirm({icon:"warning",title:"更新腾讯云专版数据",message:"更新当前腾讯专版功能 (面板功能除外，面板更新请使用自带更新功能) ，是否继续操作?"});const e=await Oe();u.$message.request(e)},updateUsernameDialog:x}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",[a.noticeStatus?t(U,{staticClass:"module-box min-h-[5.2rem]",attrs:{shadow:"always","body-style":{padding:"0",display:"flex",minHeight:"5.2rem"}}},[t(wt,{staticClass:"playTips",attrs:{height:"5.6rem",direction:"vertical"}},[a.memoryStatus?t(yt,{key:1},[t("i",{staticClass:"el-icon-warning mr-8x text-[1.8rem]"}),t("span",{staticClass:"mr-16x"},[e._v(e._s(e.$t("HomeNotice.MemoryRiskMessage")))]),t(o,{directives:[{name:"t",rawName:"v-t",value:"HomeNotice.NotNegligible",expression:"'HomeNotice.NotNegligible'"}],staticClass:"align-middle mr-16x",attrs:{type:"info",title:"".concat(e.$t("HomeNotice.NotNegligibleTitle")),disabled:!0}}),t(o,{directives:[{name:"t",rawName:"v-t",value:"HomeNotice.ClearNow",expression:"`HomeNotice.ClearNow`"}],staticClass:"align-middle",on:{click:a.onClear}})],1):e._e(),a.usernameStatus?t(yt,{key:2},[t("i",{staticClass:"el-icon-warning mr-8x text-[1.8rem]"}),t("div",{staticClass:"mr-16x"},[e._v(e._s(e.$t("HomeNotice.UsernameRiskMessage")))]),t(o,{directives:[{name:"t",rawName:"v-t",value:"HomeNotice.NotNegligible",expression:"'HomeNotice.NotNegligible'"}],staticClass:"align-middle mr-16x",attrs:{type:"info",title:"".concat(e.$t("HomeNotice.NotNegligibleTitle")),disabled:!0}}),t(o,{directives:[{name:"t",rawName:"v-t",value:"HomeNotice.RepairNow",expression:"'HomeNotice.RepairNow'"}],staticClass:"align-middle",on:{click:a.updateUsernameDialog}})],1):e._e(),a.portStatus?t(yt,{key:3},[t("i",{staticClass:"el-icon-warning mr-8x text-[1.8rem]"}),t("div",{staticClass:"mr-16x"},[e._v(e._s(e.$t("HomeNotice.PortRiskMessage")))]),t(o,{directives:[{name:"t",rawName:"v-t",value:"HomeNotice.NotNegligible",expression:"'HomeNotice.NotNegligible'"}],staticClass:"align-middle mr-16x",attrs:{type:"info",title:"".concat(e.$t("HomeNotice.NotNegligibleTitle")),disabled:!0}}),t(o,{directives:[{name:"t",rawName:"v-t",value:"HomeNotice.RepairNow",expression:"'HomeNotice.RepairNow'"}],staticClass:"align-middle",attrs:{target:"_self"},on:{click:a.editPortInfo}})],1):e._e(),a.httpsStatus?t(yt,{key:4},[t("i",{staticClass:"el-icon-warning mr-8x text-[1.8rem]"}),t("div",{staticClass:"mr-16x"},[e._v(" 警告！当前面板使用HTTP访问，可能存在被窃取敏感信息风险，请立即开启【面板SSL】。 ")]),t(o,{directives:[{name:"t",rawName:"v-t",value:"HomeNotice.NotNegligible",expression:"'HomeNotice.NotNegligible'"}],staticClass:"align-middle mr-16x",attrs:{type:"info",title:"".concat(e.$t("HomeNotice.NotNegligibleTitle")),disabled:!0}}),t(o,{staticClass:"align-middle",on:{click:a.jumpConfig}},[e._v("[立即处理]")])],1):e._e()],1)],1):e._e(),a.tencentShow?t(U,{directives:[{name:"loading",rawName:"v-loading",value:a.refresh,expression:"refresh"}],staticClass:"tencent min-h-[5.2rem] mb-[1.6rem]"},[t("div",{staticClass:"flex items-center px-[1rem] py-[1.4rem]"},[t("div",{staticClass:"tencent_division flex items-center"},[t("i",{staticClass:"tencent_ico"}),t("span",{staticClass:"text-[14px] text-[#666] font-semibold ml-[5px]"},[e._v("腾讯云专享版")])]),t("div",{staticClass:"mx-[1rem]"},[t("span",[e._v("主机IPv4：")]),t("span",{domProps:{innerHTML:e._s(a.hostIp)}})]),t("div",{staticClass:"mx-[1rem]"},[t("span",[e._v("区域：")]),t("span",[e._v(e._s(a.hostPath))])]),t("div",{staticClass:"mx-[1rem]"},[t("span",[e._v("到期时间：")]),t("span",[e._v(e._s(a.hostExpiredTime))])]),a.tencentData.requestPack.InstanceTrafficPackageSet.length>0?t("div",{staticClass:"mx-[1rem]"},[t("span",[e._v("流量包：")]),t("span",[e._v(e._s(a.hostRequestPackage))]),t(o,{staticClass:"ml-[0.5rem]",on:{click:function(e){a.tencentData.requestInfoShow=!0}}},[e._v("详情")])],1):e._e(),a.tencentData.show?t(_,{staticClass:"ml-[1rem]",on:{click:function(e){return a.tencentCloudPopup(!1)}}},[e._v("关联腾讯云API密钥")]):t("div",[t(_,{staticClass:"ml-[1rem]",on:{click:a.gotoTencentCloud}},[e._v("续费")]),t(_,{staticClass:"ml-[1rem]",on:{click:a.gotoTencentCloud}},[e._v("升级套餐")]),t(_,{staticClass:"ml-[1rem]",attrs:{type:"default"},on:{click:function(e){return a.tencentCloudPopup(!0)}}},[e._v("密钥管理")]),t(_,{staticClass:"ml-[1rem]",attrs:{type:"default"},on:{click:a.getFirstPhoto}},[e._v("快照")]),t(_,{staticClass:"ml-[1rem]",attrs:{type:"default"},on:{click:a.updateTencentPanel}},[e._v("更新")]),t(_,{staticClass:"ml-[1rem]",attrs:{type:"default"},on:{click:a.tencentCheck}},[e._v("刷新"),t("i",{staticClass:"el-icon-refresh-right el-icon--right size-[1.3rem]"})]),t(o,{staticClass:"ml-[1rem]",on:{click:function(e){return a.gotHtml("https://www.bt.cn/bbs/thread-66887-1-1.html")}}},[e._v("查看教程")])],1)],1),t(n,{attrs:{title:"流量包管理",visible:a.tencentData.requestInfoShow,area:[80,30]},on:{"update:visible":function(t){return e.$set(a.tencentData,"requestInfoShow",t)}}},[t("div",{staticClass:"p-[2rem]"},[t(ue,{attrs:{data:a.requestPackTableData,border:"","max-height":"250"}},[t(me,{attrs:{prop:"TrafficPackageId",label:"流量包ID",width:"120"}}),t(me,{attrs:{prop:"TrafficPackageTotal",label:"总量"}}),t(me,{attrs:{prop:"TrafficUsed",label:"已用"}}),t(me,{attrs:{prop:"TrafficPackageRemaining",label:"剩余"}}),t(me,{attrs:{prop:"TrafficPackageStart",label:"开始时间",width:"150"}}),t(me,{attrs:{prop:"TrafficPackageEnd",label:"结束时间",width:"150"}})],1)],1)]),t(n,{attrs:{title:"腾讯云硬盘快照",visible:a.tencentData.firstPhotoShow,area:[60]},on:{"update:visible":function(t){return e.$set(a.tencentData,"firstPhotoShow",t)}}},[t("div",{staticClass:"p-[2rem]"},[t("div",{staticClass:"alert alert-danger",staticStyle:{"line-height":"20px"}},[e._v(" 温馨提示："),t("br"),e._v("1、每个地域的免费快照配额为已创建实例数"),t("span",{staticStyle:{"font-weight":"600"}},[e._v("(待回收实例和存储型套餐实例除外)乘以2")]),e._v("，且最多不超过4个。"),t("br"),e._v("2、使用存储型套餐的实例不支持创建快照。"),t("br"),e._v("3、创建快照通常可以在5分钟内完成，请耐心等待，创建过程中无需关机。"),t("br")]),t(y,{attrs:{placement:"right","popper-class":"test-popover",width:"200"},model:{value:a.visible,callback:function(e){a.visible=e},expression:"visible"}},[t("div",{staticClass:"p-[1rem]"},[t(J,{staticClass:"mb-[1rem]",attrs:{disabled:a.tencentData.createSnapshotDisable,size:"mini",placeholder:"请输入快照名称"},model:{value:a.tencentData.SnapshotName,callback:function(t){e.$set(a.tencentData,"SnapshotName",t)},expression:"tencentData.SnapshotName"}}),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t(K,{attrs:{size:"mini",type:"text"},on:{click:function(e){a.visible=!1}}},[e._v("取消")]),t(K,{attrs:{type:"primary",size:"mini",loading:a.tencentData.createSnapshotDisable},on:{click:a.createSnapshot}},[e._v("确定")])],1)],1),t(_,{attrs:{slot:"reference",type:"primary"},slot:"reference"},[e._v("创建快照")])],1),t(ue,{staticClass:"mt-[1rem]",attrs:{data:a.tencentData.snapshotsList,border:"","max-height":"250"}},[t(me,{attrs:{prop:"SnapshotName",label:"快照名称",width:"120"}}),t(me,{attrs:{prop:"CreatedTime",label:"创建时间",formatter:e=>a.timeFormate(e.CreatedTime)}}),t(me,{attrs:{prop:"TrafficUsed",label:"操作",align:"right"},scopedSlots:e._u([{key:"default",fn:function(s){return[t(o,{on:{click:function(e){return a.gotHtml("https://console.cloud.tencent.com/cvm/snapshot/list")}}},[e._v("回滚")]),t("div",{staticClass:"el-divider el-divider--vertical"}),t(o,{on:{click:function(e){return a.deleteSnapshot(s.row)}}},[e._v("删除")])]}}],null,!1,907043634)})],1)],1)])],1):e._e()],1)}),[],!1,null,"bd99b095",null,null).exports;const Ct=s(H({__name:"index",setup(t){const a=N([]),{refs:{isGetCoupon:s}}=e(),i=async()=>{try{const e=await w();a.value=e}catch(e){}},o=async()=>{let e=new Date((new Date).toLocaleDateString()).getTime()+6048e5-1;e=Math.floor(e>0?e/1e3:e);try{await b({limit_time:e})}catch(t){}s.value=!0};return $((()=>{let e=Number(sessionStorage.getItem("HOME-ENDTIME"));if(e){e-Math.floor(Date.now()/1e3)<=0&&(s.value=!0,sessionStorage.removeItem("HOME-ENDTIME"),o())}setTimeout((()=>i()),3e3)})),{__sfc:!0,voucherList:a,isGetCoupon:s,getVoucherList:i,changeVoucher:()=>{v({area:40,component:()=>ge((()=>import("./voucherFetchView.js?v=1714377894636")),__vite__mapDeps([24,25,10,3,2,9,4,5,6,7,8,26]),import.meta.url),customClass:"voucherFetchView",compData:{is_coupon:a.value,isHome:!0}})},changeCloseTime:o}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return a.voucherList.length>0&&!a.isGetCoupon?t("div",{staticClass:"flex items-center px-[1rem] py-[.4rem] mr-8x rounded-2x recom-bg",on:{click:a.changeVoucher}},[t("span",{staticClass:"icon-end-time voucher-logo"},[t("span",{staticClass:"ml-4x font-bold text-[#ef9f00]"},[e._v("您有"+e._s(a.voucherList.length)+"个优惠券待领取")])])]):e._e()}),[],!1,null,"65fcf609",null,null).exports;const St=s(H({__name:"HomeHeaderUserInfo",setup(s){const{refs:{bindUser:i,userPhone:o,authType:n,authExpirationTime:r},openProNPS:l}=e(),c=N([["plunge","30+款付费插件"],["function","20+企业版专享功能"],["certificate","2张SSL商用证书"],["message","1000条免费短信"],["time","5分钟极速响应"],["other","更多特权>>"]]),u=N(!1),m=E((()=>{switch(n.value){case"ltd":return"icon-paid-ltd";case"pro":return"icon-paid-pro";default:return"icon-unpaid-ltd"}})),d=E((()=>"https://www.bt.cn/new/wechat_customer?".concat("ltd"===n.value?"vip=".concat(o.value):""))),p=E((()=>{const e=t(r.value,"yyyy-MM-dd");switch(n.value){case"ltd":return"".concat(e,"到期");case"pro":return 0===r.value?"永久授权":"".concat(e,"到期");default:return"免费版"}})),f=E((()=>"ltd"===n.value?"续费":"立即升级")),v=E((()=>"ltd"===n.value?"您的专属客服 ":"帮助与客服"));return{__sfc:!0,bindUser:i,userPhone:o,authType:n,authExpirationTime:r,openProNPS:l,advantageList:c,showItemPop:u,ltdIcon:m,ltdCustomerUrl:d,ltdInfo:p,ltdBtn:f,serviceName:v,goPricing:e=>{"other"===e&&window.open("https://www.bt.cn/new/pricing.html")},openExclusiveProNPS:()=>{S()},productPayment:()=>{a({disablePro:!0,sourceId:300})},bindUserDialog:C,unbindUser:Xe,doLogin:Ze}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"flex flex-col"},[t("div",{staticClass:"user-info flex justify-between"},[t("div",{staticClass:"user-info-phone"},[e._v(e._s(a.bindUser))]),t("div",{staticClass:"user-info-fun"},[t("div",{staticClass:"user-info-fun-item"},[t("span",{staticClass:"user-switch text-{rgb(102, 102, 102)}",on:{click:a.bindUserDialog}},[e._v("切换")]),t(it),t("span",{staticClass:"user-unbind text-{rgb(102, 102, 102)}",on:{click:a.unbindUser}},[e._v("解绑")])],1)])]),t("div",{staticClass:"user-ltd mt-[1.5rem]"},[t(U,{attrs:{"body-style":{padding:"0"}}},["pro"!==a.authType?t("div",{staticClass:"user-ltd-info p-[1.4rem] h-[4.6rem] flex items-center justify-between"},[t("div",{staticClass:"flex items-center"},[t("span",{staticClass:"h-[2.4rem] w-[6rem] mt-[0.2rem] bg-left bg-no-repeat cursor-pointer",class:a.ltdIcon,on:{click:a.productPayment}}),t("div",{staticClass:"ml-[0.4rem] text-[1.2rem]",class:0===a.authExpirationTime.value?"text-danger":"text-{#666}"},[e._v(" "+e._s(a.ltdInfo)+" ")])]),t(_,{on:{click:a.productPayment}},[e._v(e._s(a.ltdBtn))])],1):t("div",{staticClass:"user-ltd-info p-[1rem] pl-[1.4rem] pr-[1.4rem] h-[7.2rem] mt-[-0.5rem]"},[t("div",{staticClass:"flex items-center"},[t("span",{staticClass:"h-[2.4rem] w-[6rem] mt-[0.2rem] bg-left bg-no-repeat cursor-pointer",class:a.ltdIcon,on:{click:a.productPayment}}),t("div",{staticClass:"ml-[0.4rem] text-[1.2rem] text-{#666}"},[e._v(e._s(a.ltdInfo))])]),t("div",{staticClass:"flex justify-between items-end"},[t("span",{staticClass:"ml-[0.4rem] leading-none"},[e._v("企业版享有以下特权")]),t(_,{on:{click:a.productPayment}},[e._v(e._s(a.ltdBtn))])],1)]),t("div",{staticClass:"user-ltd-intro pb-[2rem] m-[0]"},[t("div",{staticClass:"user-ltd-intro-list flex flex-row flex-wrap justify-evenly items-center"},e._l(a.advantageList,(function(s,i){return t("div",{key:i,staticClass:"user-ltd-intro-item w-[14rem] mt-[1.4rem] flex justify-start"},[t("i",{class:"svgtofont-free-".concat(s[0],"-icon text-[1.8rem]  mr-[4px] text-[#9e6700]")}),t("span",{staticClass:"text-[#999999] text-[1.2rem] leading-[1.8rem]",class:"other"===s[0]?"other":"",on:{click:function(e){return a.goPricing(s[0])}}},[e._v(e._s(s[1]))])])})),0)])])],1),t("div",{staticClass:"user-choose mt-[1.2rem]"},[t(y,{ref:"userChooseItemPop",attrs:{"visible-arrow":!1,placement:"right",trigger:"hover","popper-class":"user-choose-pop"},model:{value:a.showItemPop,callback:function(e){a.showItemPop=e},expression:"showItemPop"}},[t("div",{staticClass:"flex items-center flex-col w-[17.2rem] shadow-[0_6px_8px_0px_rgba(0,0,0,0.25)]"},[t("div",{staticClass:"bg-[rgba(32, 165, 58, 0.1)] w-full h-[4.6rem] flex items-center justify-center"},[e._v(" > "),t(o,{staticClass:"text-[1.6rem] flex flex-row flex-nowrap items-center",attrs:{href:a.ltdCustomerUrl}},[t("div",{staticClass:"border-b border-solid flex"},[e._v(" 点击咨询客服 "),t("div",{staticClass:"icon-r1 w-[1.5rem] h-[1.8rem] mr-[.1rem] ml-[.5rem]"})])])],1),t("div",{staticClass:"qrcode-wechat w-[12.8rem] h-[12.8rem] mb-[.4rem]"},[t("div",{staticClass:"relative",attrs:{id:"wechatCustomerQrcode"}},[t(st,{attrs:{value:a.ltdCustomerUrl,size:128}}),t(i,{staticClass:"absolute bg-white border-[0.2rem] border-lightest rounded-2x mr-4x w-2.4rem h-2.4rem top-[50%] left-[50%] -ml-1.2rem -mt-1.2rem",attrs:{src:"../icons/we-com.svg"}})],1)]),t("div",{staticClass:"wechat-title flex items-center mt-[1rem] mb-16x"},[t("img",{staticClass:"w-[1.7rem] h-[1.7rem]",attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAATlJREFUSEvtVrFOw0AMfed8AxJsZWGAgQHBXP4DCQa+Ioou7g18BRIg9T/KDGJggIGFbiDxDXGQowSBuGvrFISEmtF+7/nis312RVEMiWgIoMT375aIjpj5KeJrTMy8JSJjAPsRzEhErl1Zlhd1XZ8kRKZEdMjM0xlBBiIyATCIYZxzl857X6uTiHaY+TElZrUz87aIPCjvI0gIwVmF5uG7H1gFmZepxv85XTdqCCEcLMQ0gLz3jbbTOm/rPdkLBt0v0E77xysq2it9T2nhuTzPN4ho10KyYEXkXvvkBcC6hWjEvmqQMwCnANZa8p1RJAbfa41vAM7/0cUzczOiZ43zvunrtPVOntuO3+wrluJ12qspvFBm/+bR+u03nhPrkKZk2ZVINUZO964sy44Ta9FSK5GuQ1VVXb0DLf+sHQ9tLL0AAAAASUVORK5CYII="}}),t("div",{staticClass:"scan-title text-[1.6rem] ml-[1rem] text-[#666666] font-bold"},[e._v("扫一扫")])]),"ltd"===a.authType?t(o,{staticClass:"text-[1.6rem] flex flex-row flex-nowrap items-center mb-[1.2rem]",on:{click:a.openExclusiveProNPS}},[e._v(" 企业版用户专属调研 ")]):e._e()],1)]),t("div",{directives:[{name:"popover",rawName:"v-popover:userChooseItemPop",arg:"userChooseItemPop"}],staticClass:"flex items-center"},[t("span",{staticClass:"user-choose-item"},[e._v(e._s(a.serviceName))]),t("i",{directives:[{name:"show",rawName:"v-show",value:"ltd"===a.authType,expression:"authType === 'ltd'"}],staticClass:"text-[7rem] h-[2rem] text-[#f0ad4e] flex justify-center items-center svgtofont-free-customer"})]),t("div",{on:{click:a.doLogin}},[t("span",{staticClass:"user-choose-item"},[e._v("退出登录")])])],1)])}),[],!1,null,"c482bb51",null,null).exports;const kt=s(H({__name:"HomeHeader",setup(t){const{refs:{bindUser:a,configTabActive:s}}=e(),{refs:{system:i,systemIcon:o,runningDays:n,isBeta:r,isUpgrade:l,panelVersion:c,simpleSystem:u}}=he(),{proxy:m}=M();return{__sfc:!0,bindUser:a,configTabActive:s,system:i,systemIcon:o,runningDays:n,isBeta:r,isUpgrade:l,panelVersion:c,simpleSystem:u,vm:m,goConfig:()=>{s.value="alarm",location.href="/config"},onRepair:async()=>{let e;await m.$confirm({icon:"warning",title:m.$t("HomeHeader.RepairTitle"),message:"修复面板能修复使用中遇到的各种异常问题，并将面板更新到最新的正式版，是否继续操作？"});try{e=m.$load(m.$t("HomeHeader.RepairLoading"));const t=await P();if(!t.status)return e.close(),m.$message.error(t.data.msg);t&&e.close(),v({title:"正在修复面板，请耐心等候...",area:52,component:()=>ge((()=>import("./main.js?v=1714377894636").then((e=>e.ej))),__vite__mapDeps([4,5,2,3,6,7,8,9,10]),import.meta.url),compData:{type:"repair",logPath:"/www/server/panel/data/repair.log",endMsg:"REPIAR DONE"}})}catch(t){}finally{e&&e.close()}},desiredNpsDialog:k,histVersionInfoDialog:Se,restartSeverDialog:ke,updateVersionDialog:Pe}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(U,{staticClass:"reset-card-header h-[5.2rem] text-1.2rem px-16x module-box !mt-0",attrs:{"body-style":{padding:"0",display:"flex",height:"5.2rem",alignItems:"center"},shadow:"always"}},[t("div",{staticClass:"home-header-box flex-1 flex items-center"},[t(y,{ref:"popover",attrs:{placement:"bottom",width:"328",offset:120,trigger:"hover","popper-class":"el-tooltip-white !p-16x"}},[t(St)],1),t("div",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"mr-16x"},[t("i",{staticClass:"iconfont mr-4x icon-user text-1.6rem"}),t("span",{staticClass:"user-phone"},[e._v(e._s(a.bindUser||e.$t("Getting")))])]),t(at,{staticClass:"mr-16x",attrs:{text:!1,iconClass:"text-1.6rem",icon:"alarm",content:"告警"},on:{click:a.goConfig}}),t(at,{staticClass:"mr-16x",attrs:{icon:"demand",iconClass:"text-1.6rem",content:"需求反馈"},on:{click:function(e){return a.desiredNpsDialog({type:7,isNoRate:!0})}}}),t(y,{ref:"systemPopover",attrs:{placement:"bottom",trigger:"hover","popper-class":"el-tooltip-white"}},[e._v(" "+e._s(e.$t("HomeHeader.System",{system:a.system||e.$t("Getting")}))+" "),t("span",{staticClass:"block"},[e._v(e._s(e.$t("HomeHeader.RunTime",{runningDays:a.runningDays||e.$t("Getting")})))])]),t("span",{directives:[{name:"popover",rawName:"v-popover:systemPopover",arg:"systemPopover"}],staticClass:"cursor-pointer"},[t("i",{class:"iconfont mr-4x text-1.4rem icon-"+a.systemIcon}),t("span",{staticClass:"dashed"},[e._v("系统："+e._s(a.simpleSystem||e.$t("Getting")))])])],1),t("div",{staticClass:"home-header-box"},[t(Ct),t(tt,{attrs:{"is-home":!0,"disable-pro":!0}}),t(o,{class:"versionInfo "+(a.isBeta?"mr-4":"mr-16x"),attrs:{type:"default",underline:!1},on:{click:a.histVersionInfoDialog}},[e._v(" "+e._s((a.isBeta?"Beta ":"")+a.panelVersion||e.$t("Getting"))+" ")]),a.isBeta?t(o,{directives:[{name:"t",rawName:"v-t",value:"HomeHeader.Reward",expression:"`HomeHeader.Reward`"}],staticClass:"mr-1.5rem reset-link bugFeedback",attrs:{href:"https://www.bt.cn/bbs/forum-39-1.html"}}):e._e(),t(de,{staticClass:"mr-16x",attrs:{"is-dot":"",hidden:!a.isUpgrade}},[t(o,{directives:[{name:"t",rawName:"v-t",value:"HomeHeader.Update",expression:"`HomeHeader.Update`"}],attrs:{title:"点击获取最新版面板程序"},on:{click:a.updateVersionDialog}})],1),t(o,{directives:[{name:"t",rawName:"v-t",value:"HomeHeader.Repair",expression:"`HomeHeader.Repair`"}],staticClass:"mr-16x",attrs:{title:"修复面板会获取最新的面板代码程序，包含bug修复"},on:{click:a.onRepair}}),t(o,{directives:[{name:"t",rawName:"v-t",value:"HomeHeader.Restart",expression:"`HomeHeader.Restart`"}],staticClass:"mr-0",attrs:{title:"点击可选择重启面板或重启服务器"},on:{click:a.restartSeverDialog}})],1)])}),[],!1,null,"9cc0f3f4",null,null).exports;const Pt=s(H({__name:"HomeLoginHelp",setup(e){const t=N({ip_info:{ip:"",info:""},last_login:{ip_info:{ip:"",info:""},login_time_str:""}});return $((()=>{var e;t.value=JSON.parse(null!=(e=sessionStorage.getItem("loginInfo"))?e:"{}")})),{__sfc:!0,loginInfo:t}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",[t("div",[e._v(" 当前登录信息： "),t("div",{staticClass:"login_message"},[t("div",{staticClass:"login_message_row"},[t("span",{staticClass:"login_message_title"},[e._v("IP")]),t("span",{staticClass:"login_message_content"},[e._v(e._s(a.loginInfo.ip_info.ip))])])])]),t("div",[e._v(" 上次登录信息： "),t("div",{staticClass:"login_message"},[t("div",{staticClass:"login_message_row"},[t("span",{staticClass:"login_message_title"},[e._v("IP")]),t("span",{staticClass:"login_message_content"},[e._v(" "+e._s(a.loginInfo.last_login.ip_info.ip)+" ")])]),t("div",{staticClass:"login_message_row"},[t("span",{staticClass:"login_message_title"},[e._v("时间")]),t("span",{staticClass:"login_message_content"},[e._v(e._s(a.loginInfo.last_login.login_time_str))])])])])])}),[],!1,null,"5aa7e850",null,null).exports;var It={exports:{}};const Tt=et(It.exports=function(e){var t={};function a(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/dist/",a(a.s=80)}({0:function(e,t,a){function s(e,t,a,s,i,o,n,r){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),s&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),n?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},c._ssrRegister=l):i&&(l=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var m=c.beforeCreate;c.beforeCreate=m?[].concat(m,l):[l]}return{exports:e,options:c}}a.d(t,"a",(function(){return s}))},13:function(e,t){e.exports=pe()},23:function(e,t){e.exports=ot()},7:function(e,t){e.exports=B},80:function(e,t,a){a.r(t);var s=a(7),i=a.n(s),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"el-notification-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["el-notification",e.customClass,e.horizontalClass],style:e.positionStyle,attrs:{role:"alert"},on:{mouseenter:function(t){e.clearTimer()},mouseleave:function(t){e.startTimer()},click:e.click}},[e.type||e.iconClass?a("i",{staticClass:"el-notification__icon",class:[e.typeClass,e.iconClass]}):e._e(),a("div",{staticClass:"el-notification__group",class:{"is-with-icon":e.typeClass||e.iconClass}},[a("h2",{staticClass:"el-notification__title",domProps:{textContent:e._s(e.title)}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.message,expression:"message"}],staticClass:"el-notification__content"},[e._t("default",[e.dangerouslyUseHTMLString?a("p",{domProps:{innerHTML:e._s(e.message)}}):a("p",[e._v(e._s(e.message))])])],2),e.showClose?a("div",{staticClass:"el-notification__closeBtn el-icon-close",on:{click:function(t){return t.stopPropagation(),e.close(t)}}}):e._e()])])])};o._withStripped=!0;var n={success:"success",info:"info",warning:"warning",error:"error"},r={data:function(){return{visible:!1,title:"",message:"",duration:4500,type:"",showClose:!0,customClass:"",iconClass:"",onClose:null,onClick:null,closed:!1,verticalOffset:0,timer:null,dangerouslyUseHTMLString:!1,position:"top-right"}},computed:{typeClass:function(){return this.type&&n[this.type]?"el-icon-"+n[this.type]:""},horizontalClass:function(){return this.position.indexOf("right")>-1?"right":"left"},verticalProperty:function(){return/^top-/.test(this.position)?"top":"bottom"},positionStyle:function(){var e;return(e={})[this.verticalProperty]=this.verticalOffset+"px",e}},watch:{closed:function(e){e&&(this.visible=!1,this.$el.addEventListener("transitionend",this.destroyElement))}},methods:{destroyElement:function(){this.$el.removeEventListener("transitionend",this.destroyElement),this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},click:function(){"function"==typeof this.onClick&&this.onClick()},close:function(){this.closed=!0,"function"==typeof this.onClose&&this.onClose()},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration))},keydown:function(e){46===e.keyCode||8===e.keyCode?this.clearTimer():27===e.keyCode?this.closed||this.close():this.startTimer()}},mounted:function(){var e=this;this.duration>0&&(this.timer=setTimeout((function(){e.closed||e.close()}),this.duration)),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},l=a(0),c=Object(l.a)(r,o,[],!1,null,null,null);c.options.__file="packages/notification/src/main.vue";var u=c.exports,m=a(9),d=a.n(m),p=a(13),f=a(23),v=i.a.extend(u),g=void 0,h=[],_=1,y=function e(t){if(!i.a.prototype.$isServer){var a=(t=d()({},t)).onClose,s="notification_"+_++,o=t.position||"top-right";t.onClose=function(){e.close(s,a)},g=new v({data:t}),Object(f.isVNode)(t.message)&&(g.$slots.default=[t.message],t.message="REPLACED_BY_VNODE"),g.id=s,g.$mount(),document.body.appendChild(g.$el),g.visible=!0,g.dom=g.$el,g.dom.style.zIndex=p.PopupManager.nextZIndex();var n=t.offset||0;return h.filter((function(e){return e.position===o})).forEach((function(e){n+=e.$el.offsetHeight+16})),n+=16,g.verticalOffset=n,h.push(g),g}};["success","warning","info","error"].forEach((function(e){y[e]=function(t){return("string"==typeof t||Object(f.isVNode)(t))&&(t={message:t}),t.type=e,y(t)}})),y.close=function(e,t){var a=-1,s=h.length,i=h.filter((function(t,s){return t.id===e&&(a=s,!0)}))[0];if(i&&("function"==typeof t&&t(i),h.splice(a,1),!(s<=1)))for(var o=i.position,n=i.dom.offsetHeight,r=a;r<s-1;r++)h[r].position===o&&(h[r].dom.style[i.verticalProperty]=parseInt(h[r].dom.style[i.verticalProperty],10)-n-16+"px")},y.closeAll=function(){for(var e=h.length-1;e>=0;e--)h[e].close()};var x=y;t.default=x},9:function(e,t){e.exports=fe()}}));const Ht=s(H({__name:"HomeSoft",setup(t){const{proxy:s}=M(),{refs:{recommendInfo:i},getRecommendInfo:o}=e(),n=N([]),r=N(!1),l=N(!1),d=N(0),p=N(!1);let f=N([]),v=[];const h=e=>"".concat("/static/img/soft_ico","/ico-").concat(e.replace(/-+[{0-9},\.,]+$/,""),".png"),_=(e,t)=>{document.querySelectorAll(t)[0].style.display=e},y=async(e="")=>{if(""!=e){const t=E((()=>{if(!e)return f.value;const t=null==e?void 0:e.toLowerCase();return f.value.filter((e=>{var a,s,i;return(null==(a=e.name)?void 0:a.toLowerCase().includes(t))||(null==(s=e.ps)?void 0:s.toLowerCase().includes(t))||(null==(i=e.title)?void 0:i.toLowerCase().includes(t))}))}));return 0==v.length&&(v=t.value),void(f.value=t.value)}const t=await Be({p:1,type:-1,tojs:"soft.get_list",query:e,force:0,row:100});0==v.length&&(v=t.data.list.data),f.value=t.data.list.data,f.value=f.value.sort(((e,t)=>e.index_display?-1:1));let a=t.data.list.page.indexOf("共"),s=t.data.list.page.indexOf("条</span></div>");d.value=Number.parseInt(t.data.list.page.substring(a+1,s))},x=E((()=>{let e=null,t=null;return C.value?(e=f.value.filter((e=>e.index_display)),t=f.value.filter((e=>!e.index_display))):(e=n.value.filter((e=>e.index_display)),t=f.value.filter((e=>!e.index_display))),e.concat(t)})),w=e=>{const t=e?v.filter((t=>{var a,s;if(null==(s=t.title)?void 0:s.toLowerCase().includes(null==(a=e.trim())?void 0:a.toLowerCase()))return{value:t.title}})):v;let a=[];return t.forEach(((e,t,s)=>{a.push({value:e.title})})),a};let b=N(""),C=N(!1);const S=async()=>{try{r.value=!0,await o();const{data:e}=await Ve(),t=e.filter((e=>e.setup));n.value=t,k(),r.value=!1}catch(e){}finally{r.value=!1}},k=()=>{const e=i.value[1].list;if(n.value.length<12)for(let a=0;a<e.length&&!(n.value.length>=12);a++)n.value.filter((t=>t.name===e[a].name)).length>0||n.value.push(e[a]);let t=12-n.value.length;if(n.value.length<12)for(let a=0;a<t;a++)n.value.push({})};return $((()=>{S()})),{__sfc:!0,vm:s,recommendInfo:i,getRecommendInfo:o,maxSoftList:12,softList:n,isGetSoft:r,popShow:l,total:d,pageSize:12,tableLoading:p,mySoftList:f,softListBackup:v,renderSoftImages:h,changeStyle:_,showPopoverHandle:y,pageShowPluginList:x,changeSwitchHandle:async e=>{const t=v.filter((e=>e.index_display)).length,a=v.length==f.value.length;if((t>=12&&a||!a&&t>12)&&e.index_display)s.$message.error("首页最多只能显示12个软件!"),R((()=>{e.index_display=!e.index_display}));else{let t;const a=s.$load("正在处理，请稍后...");t=e.index_display?await Fe(e.name):await Ue(e.name),s.$message.request(t),a.close(),t.status&&(f.value=f.value.map((t=>(t.name===e.name&&(t.index_display=e.index_display),t))),v=v.map((t=>(t.name===e.name&&(t.index_display=e.index_display),t))),n.value=v.filter((e=>e.index_display)),f.value=f.value.reverse(),f.value=f.value.sort(((e,t)=>e.index_display?-1:1)),k())}},goSoft:()=>{c("/soft")},querySearch:(e,t)=>{t(w(e))},createFilter:w,pluginKeyword:b,isFilter:C,leave:e=>{const t=e.offsetX,a=e.offsetY,i=s.$refs.container.offsetWidth,o=s.$refs.container.offsetHeight;(t<0||a<0||t>=i||a>=o)&&("none"!=document.querySelectorAll(".soft-search-popover")[0].style.display?l.value=!0:(l.value=!1,b.value=""))},searchPluginHandle:(e="")=>{"select"==e&&_("none",".soft-search-popover"),""==b.value?(C.value=!1,y()):(C.value=!0,y(b.value))},getHomeInstallSoftData:S,createEnd:k,load:async()=>{let e=Math.ceil(d.value/12),t=Math.ceil(f.value.length/12);if(t>=e)return;const{data:a}=await Be({p:t+1,type:-1,tojs:"soft.get_list",force:0,row:12});f.value=f.value.concat(a.list.data)},removePluginItem:e=>{const t=f.value.indexOf(e);f.value.splice(t,1,{...e,setup:!1}),Ue(e.name)},openLtdPayView:e=>{a({disablePro:!(8===e.type),sourceId:"total"===e.name?41:"btwaf"==e.name?40:42})},dragSortEvent:()=>{let e=n.value.filter((e=>void 0!==e.id&&e.name)).map((e=>e.name)).join("|");qe({ssort:e})},openSoftView:e=>(u({pluginInfo:e}),!1),openRecommendSoftView:e=>{if(e.name&&!e.install&&!g(e.isBuy,"boolean"))return u({pluginInfo:e}),!1},checkImage:e=>new Promise((t=>{const a=new Image,s=h(e);a.src=s+".svg",a.onload=()=>{t(s+".svg")},a.onerror=()=>{t(s+".png")}})),openInstall:async e=>{const{data:t}=await De({sName:e.name});if("-1"===t.task)return s.$message.error("当前插件正在安装，不可重复安装");m({name:t.name,type:t.type,pluginInfo:t})},openSoftPreLink:e=>{window.open(e.preview)},close:()=>{},draggable:_e,isDev:I,isEmpty:T}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(U,{staticClass:"module-box",attrs:{shadow:"always","body-style":{padding:0,display:"flex",height:"calc( 100% - 50px )"}},scopedSlots:e._u([{key:"header",fn:function(){return[t("div",{staticClass:"w-full flex justify-between items-center"},[t("div",{directives:[{name:"t",rawName:"v-t",value:"HomeSoft.Title",expression:"`HomeSoft.Title`"}],staticClass:"text-[1.6rem] text-#666 cursor-pointer",on:{click:a.goSoft}}),[t(y,{attrs:{"popper-class":" myPopover",placement:"right",width:"400",trigger:"manual",offset:290},on:{show:a.showPopoverHandle},model:{value:a.popShow,callback:function(e){a.popShow=e},expression:"popShow"}},[t("div",{ref:"container",staticClass:"plugin-box p-[2rem]",on:{mouseleave:a.leave}},[t("div",{staticClass:"plugin-search"},[t(ve,{staticClass:"search-input",attrs:{placeholder:"请输入要搜索的应用","fetch-suggestions":a.querySearch,"trigger-on-focus":!1,"popper-class":"soft-search-popover"},on:{select:function(e){return a.searchPluginHandle()}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.searchPluginHandle("select")}},model:{value:a.pluginKeyword,callback:function(e){a.pluginKeyword=e},expression:"pluginKeyword"}},[t(K,{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return a.searchPluginHandle("select")}},slot:"append"})],1)],1),t(ue,{directives:[{name:"table-scroll-load",rawName:"v-table-scroll-load",value:a.load,expression:"load"},{name:"loading",rawName:"v-loading",value:a.tableLoading,expression:"tableLoading"}],attrs:{data:a.mySoftList,height:"400"}},[t(me,{attrs:{width:"260",property:"date",label:"软件名称"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"pluginInfo"},[t("img",{staticClass:"plugin-img",attrs:{src:a.renderSoftImages(s.row.name)}}),t("span",{staticClass:"plugin-desc"},[e._v(e._s(s.row.title)+" "+e._s(s.row.version))])])]}}])}),t(me,{attrs:{property:"setup",label:"首页显示"},scopedSlots:e._u([{key:"default",fn:function(s){return[t(nt,{attrs:{"active-color":"#20A53A","inactive-color":"#CDCDCD",width:32,size:"mini"},on:{change:function(e){return a.changeSwitchHandle(s.row)}},model:{value:s.row.index_display,callback:function(t){e.$set(s.row,"index_display",t)},expression:"scope.row.index_display"}})]}}])})],1)],1),t(K,{ref:"softButton",attrs:{slot:"reference",type:"default",title:"软件自定义编辑"},on:{click:function(e){a.popShow=!a.popShow}},slot:"reference"},[t("i",{staticClass:"el-icon-arrow-down el-icon-setting text-[1.4rem]"})])],1)]],2)]},proxy:!0}])},[t(W,{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:a.isGetSoft,expression:"isGetSoft"},{name:"bt-loading",rawName:"v-bt-loading:title",value:"正在获取软件列表，请稍后...",expression:"'正在获取软件列表，请稍后...'",arg:"title"}],staticClass:"w-full h-full !z-99",attrs:{span:24}},[t(a.draggable,{staticClass:"wrapper",attrs:{handle:".mover",animation:"500",ghostClass:"ghost"},on:{sort:a.dragSortEvent},model:{value:a.softList,callback:function(e){a.softList=e},expression:"softList"}},[t("transition-group",e._l(a.softList,(function(s,o){return t(ee,{key:o+"_id",staticClass:"wrapper-item",attrs:{span:6}},[o<12?t("div",{staticClass:"text-center h-full",class:s.title?"box-wrapper cursor-pointer relative":""},[s.id&&s.setup?[t("div",{on:{click:function(e){return a.openSoftView(s)}}},[t("i",{staticClass:"soft-status-icon iconfont icon-drag mover cursor-move text-[1.6em] text-[#999] !hidden absolute right-6 top-6"}),t("div",{staticClass:"h-38 pt-5 w-full text-center flex justify-center items-center"},[t(i,{staticClass:"w-[4rem]",attrs:{src:a.renderSoftImages(s.name),custom:!a.isDev}})],1),t("div",{staticClass:"text-[#999] h-9 leading-9 flex items-center justify-center"},[t("span",[e._v(" "+e._s(s.title.replace(/PHP-[{0-9},\.]+/,"PHP-")+" "+s.version)+" ")]),t("i",{class:"iconfont ml-[4px] mt-[1px]  icon-".concat(s.status||"phpmyadmin"===s.name?"start":"stop text-[13px]")})])])]:a.isEmpty(s)?e._e():[t("div",{directives:[{name:"t",rawName:"v-t",value:"HomeSoft.Recommend",expression:"`HomeSoft.Recommend`"}],staticClass:"absolute -left-1.5 -top-1 py-.5 px-2 transform scale-75 bg-[#efefef] text-[#999] opacity-80",on:{click:function(e){return a.openRecommendSoftView(s)}}}),t("div",{staticClass:"h-28 pt-5 w-full text-center flex justify-center items-center"},[t(i,{staticClass:"w-[4rem]",attrs:{src:"".concat(a.isDev?"":"/static/img","/soft_ico/ico-").concat(s.name,".png"),custom:!a.isDev}})],1),t("div",{staticClass:"flex justify-center items-center"},[t("div",{staticClass:"text-[#999] h-9 leading-9 mr-2"},[e._v(" "+e._s(s.title)+" "+e._s(s.version)),t("span",{staticClass:"text-btColor"})])]),t("div",{staticClass:"flex justify-center align-middle mt-2 opacity-70"},[s.preview?t(_,{directives:[{name:"t",rawName:"v-t",value:"HomeSoft.Preview",expression:"`HomeSoft.Preview`"}],attrs:{type:"default",size:"mini",plain:""},on:{click:function(e){return a.openSoftPreLink(s)}}}):e._e(),s.isBuy?e._e():t(_,{directives:[{name:"t",rawName:"v-t",value:"HomeSoft.Purchase",expression:"`HomeSoft.Purchase`"}],attrs:{type:"success",size:"mini",plain:""},on:{click:function(e){return a.openLtdPayView(s)}}}),s.isBuy&&!s.install?t(_,{attrs:{type:"success",size:"mini",plain:""},on:{click:function(e){return a.openInstall(s)}}},[e._v(" 立即安装 ")]):e._e()],1)]],2):e._e()])})),1)],1)],1)],1)}),[],!1,null,"24a918c6",null,null).exports;const Nt=s(H({__name:"index",setup(t){const{refs:{isSetup:a,isRestart:s}}=e(),{getSystemInfo:i}=he(),o=N(!1),n=N(0),{proxy:r}=M(),l=async()=>{const e=sessionStorage.getItem("loginInfo");if(null!=e){let t=JSON.parse(e);null!=t&&""!=t&&Tt({title:"登录成功",message:A(Pt),type:"success",position:"bottom-right",dangerouslyUseHTMLString:!0,customClass:"login-success"}),sessionStorage.removeItem("loginInfo")}},c=async()=>{await i(),o.value&&(n.value&&clearTimeout(n.value),n.value=setTimeout((()=>{c()}),4e3))};return j((()=>a.value),(()=>!a.value&&Ie())),j((()=>s.value),(()=>{o.value=!1,n.value&&clearTimeout(n.value)})),$((async()=>{o.value=!0,c(),l()})),F((()=>{const e=document.getElementById("prerender");if(e&&(null==e?void 0:e.parentNode)){const t=null==e?void 0:e.parentNode;e.style.opacity="0",setTimeout((()=>{e&&(null==e?void 0:e.parentNode)&&(e.style.display="none",null==t||t.removeChild(e))}),500)}})),O((()=>{o.value=!1})),{__sfc:!0,isSetup:a,isRestart:s,getSystemInfo:i,polling:o,pollingTimer:n,vm:r,monitorLoginInfo:l,pollingFn:c,HomeSoft:Ht}}}),(function(){var e=this._self._c,t=this._self._setupProxy;return e("section",[e(W,{attrs:{span:24}},[e(ee,{attrs:{span:24}},[e(kt),e(bt),e(ht),e(mt)],1)],1),e(W,{attrs:{gutter:15,span:24}},[e(ee,{attrs:{md:12,sm:24,span:12,xs:24}},[e(t.HomeSoft,{staticClass:"h-[47.5rem] mb-0"})],1),e(ee,{attrs:{md:12,sm:24,span:12,xs:24}},[e(ut,{staticClass:"h-[47.5rem] mb-0"})],1)],1),e(rt,{staticClass:"mt-[1.6rem]"})],1)}),[],!1,null,null,null,null).exports;export{Nt as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./HomeMonitorData.js?v=1714377894636","./index91.js?v=1714377894636","./vue-lib.js?v=1714377894636","./__commonjsHelpers__.js?v=1714377894636","./main.js?v=1714377894636","./modulepreload-polyfill.js?v=1714377894636","./preload-helper.js?v=1714377894636","./request-lib.js?v=1714377894636","./locales-lib.js?v=1714377894636","./public-lib.js?v=1714377894636","./element-lib.js?v=1714377894636","./echarts.js?v=1714377894636","./element-lib.js?v=1714377894636","./element-lib.js?v=1714377894636","./firewall.store.js?v=1714377894636","./check.js?v=1714377894636","./HomeProcessAlarmManage.js?v=1714377894636","./index39.js?v=1714377894636","./element-lib.js?v=1714377894636","./index59.js?v=1714377894636","./index38.js?v=1714377894636","./index45.js?v=1714377894636","./confirm.js?v=1714377894636","./config.js?v=1714377894636","./voucherFetchView.js?v=1714377894636","./index41.js?v=1714377894636","./element-lib.js?v=1714377894636"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
