import{g as e,b1 as t,bF as a,n as r,r as s,q as l}from"./main.js?v=1714377894636";import{c as o,e as i,a as n,o as c,E as u}from"./element-lib.js?v=1714377894636";import{g as h}from"./__commonjsHelpers__.js?v=1714377894636";import{e as d,b as f,v as p,h as m,j as v}from"./vue-lib.js?v=1714377894636";import{e as b}from"./check.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";var x={exports:{}};const y=h(x.exports=function(e){var t={};function a(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(r,s,function(t){return e[t]}.bind(null,s));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/dist/",a(a.s=108)}({0:function(e,t,a){function r(e,t,a,r,s,l,o,i){var n,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=a,c._compiled=!0),r&&(c.functional=!0),l&&(c._scopeId="data-v-"+l),o?(n=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=n):s&&(n=i?function(){s.call(this,this.$root.$options.shadowRoot)}:s),n)if(c.functional){c._injectStyles=n;var u=c.render;c.render=function(e,t){return n.call(t),u(e,t)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,n):[n]}return{exports:e,options:c}}a.d(t,"a",(function(){return r}))},108:function(e,t,a){a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el-rate",attrs:{role:"slider","aria-valuenow":e.currentValue,"aria-valuetext":e.text,"aria-valuemin":"0","aria-valuemax":e.max,tabindex:"0"},on:{keydown:e.handleKey}},[e._l(e.max,(function(t,r){return a("span",{key:r,staticClass:"el-rate__item",style:{cursor:e.rateDisabled?"auto":"pointer"},on:{mousemove:function(a){e.setCurrentValue(t,a)},mouseleave:e.resetCurrentValue,click:function(a){e.selectValue(t)}}},[a("i",{staticClass:"el-rate__icon",class:[e.classes[t-1],{hover:e.hoverIndex===t}],style:e.getIconStyle(t)},[e.showDecimalIcon(t)?a("i",{staticClass:"el-rate__decimal",class:e.decimalIconClass,style:e.decimalStyle}):e._e()])])})),e.showText||e.showScore?a("span",{staticClass:"el-rate__text",style:{color:e.textColor}},[e._v(e._s(e.text))]):e._e()],2)};r._withStripped=!0;var s=a(2),l=a(17),o=a(11),i={name:"ElRate",mixins:[a.n(o).a],inject:{elForm:{default:""}},data:function(){return{pointerAtLeftHalf:!0,currentValue:this.value,hoverIndex:-1}},props:{value:{type:Number,default:0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:[Array,Object],default:function(){return["#F7BA2A","#F7BA2A","#F7BA2A"]}},voidColor:{type:String,default:"#C6D1DE"},disabledVoidColor:{type:String,default:"#EFF2F7"},iconClasses:{type:[Array,Object],default:function(){return["el-icon-star-on","el-icon-star-on","el-icon-star-on"]}},voidIconClass:{type:String,default:"el-icon-star-off"},disabledVoidIconClass:{type:String,default:"el-icon-star-on"},disabled:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},showScore:{type:Boolean,default:!1},textColor:{type:String,default:"#1f2d3d"},texts:{type:Array,default:function(){return["极差","失望","一般","满意","惊喜"]}},scoreTemplate:{type:String,default:"{value}"}},computed:{text:function(){var e="";return this.showScore?e=this.scoreTemplate.replace(/\{\s*value\s*\}/,this.rateDisabled?this.value:this.currentValue):this.showText&&(e=this.texts[Math.ceil(this.currentValue)-1]),e},decimalStyle:function(){var e="";return this.rateDisabled?e=this.valueDecimal+"%":this.allowHalf&&(e="50%"),{color:this.activeColor,width:e}},valueDecimal:function(){return 100*this.value-100*Math.floor(this.value)},classMap:function(){var e;return Array.isArray(this.iconClasses)?((e={})[this.lowThreshold]=this.iconClasses[0],e[this.highThreshold]={value:this.iconClasses[1],excluded:!0},e[this.max]=this.iconClasses[2],e):this.iconClasses},decimalIconClass:function(){return this.getValueFromMap(this.value,this.classMap)},voidClass:function(){return this.rateDisabled?this.disabledVoidIconClass:this.voidIconClass},activeClass:function(){return this.getValueFromMap(this.currentValue,this.classMap)},colorMap:function(){var e;return Array.isArray(this.colors)?((e={})[this.lowThreshold]=this.colors[0],e[this.highThreshold]={value:this.colors[1],excluded:!0},e[this.max]=this.colors[2],e):this.colors},activeColor:function(){return this.getValueFromMap(this.currentValue,this.colorMap)},classes:function(){var e=[],t=0,a=this.currentValue;for(this.allowHalf&&this.currentValue!==Math.floor(this.currentValue)&&a--;t<a;t++)e.push(this.activeClass);for(;t<this.max;t++)e.push(this.voidClass);return e},rateDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(e){this.currentValue=e,this.pointerAtLeftHalf=this.value!==Math.floor(this.value)}},methods:{getMigratingConfig:function(){return{props:{"text-template":"text-template is renamed to score-template."}}},getValueFromMap:function(e,t){var a=Object.keys(t).filter((function(a){var r=t[a];return Object(l.isObject)(r)&&r.excluded?e<a:e<=a})).sort((function(e,t){return e-t})),r=t[a[0]];return Object(l.isObject)(r)?r.value:r||""},showDecimalIcon:function(e){var t=this.rateDisabled&&this.valueDecimal>0&&e-1<this.value&&e>this.value,a=this.allowHalf&&this.pointerAtLeftHalf&&e-.5<=this.currentValue&&e>this.currentValue;return t||a},getIconStyle:function(e){var t=this.rateDisabled?this.disabledVoidColor:this.voidColor;return{color:e<=this.currentValue?this.activeColor:t}},selectValue:function(e){this.rateDisabled||(this.allowHalf&&this.pointerAtLeftHalf?(this.$emit("input",this.currentValue),this.$emit("change",this.currentValue)):(this.$emit("input",e),this.$emit("change",e)))},handleKey:function(e){if(!this.rateDisabled){var t=this.currentValue,a=e.keyCode;38===a||39===a?(this.allowHalf?t+=.5:t+=1,e.stopPropagation(),e.preventDefault()):37!==a&&40!==a||(this.allowHalf?t-=.5:t-=1,e.stopPropagation(),e.preventDefault()),t=(t=t<0?0:t)>this.max?this.max:t,this.$emit("input",t),this.$emit("change",t)}},setCurrentValue:function(e,t){if(!this.rateDisabled){if(this.allowHalf){var a=t.target;Object(s.hasClass)(a,"el-rate__item")&&(a=a.querySelector(".el-rate__icon")),Object(s.hasClass)(a,"el-rate__decimal")&&(a=a.parentNode),this.pointerAtLeftHalf=2*t.offsetX<=a.clientWidth,this.currentValue=this.pointerAtLeftHalf?e-.5:e}else this.currentValue=e;this.hoverIndex=e}},resetCurrentValue:function(){this.rateDisabled||(this.allowHalf&&(this.pointerAtLeftHalf=this.value!==Math.floor(this.value)),this.currentValue=this.value,this.hoverIndex=-1)}},created:function(){this.value||this.$emit("input",0)}},n=a(0),c=Object(n.a)(i,r,[],!1,null,null,null);c.options.__file="packages/rate/src/main.vue";var u=c.exports;u.install=function(e){e.component(u.name,u)},t.default=u},11:function(e,t){e.exports=o()},17:function(e,t){e.exports=i()},2:function(e,t){e.exports=n()}}));const C=r(d({__name:"index",props:{compData:{default:()=>({})}},setup(r){const s=r,{refs:{authType:l}}=e(),{proxy:o}=v(),{id:i,type:n,name:c,softName:u,description:h,isNoRate:d,title:x,isCard:y}=s.compData,C=f("top-0"),_=f(""),g=f(0),k=f(),w=[{text:"很不满意",color:"#ef0808",borderColor:"#ef080842",bgColor:"#ef08080d"},{text:"不满意",color:"#ef0808",borderColor:"#ef080842",bgColor:"#ef08080d"},{text:"一般",color:"#f0ad4e",borderColor:"#f7be5642",bgColor:"#f7be562b"},{text:"满意",color:"#20a53a",borderColor:"#69be3d42",bgColor:"#69be3d2b"},{text:"非常满意",color:"#20a53a",borderColor:"#69be3d42",bgColor:"#69be3d2b"}],V=f(0),j=f(""),S=f([{text:"软件和互联网",checked:!0},{text:"事业单位",checked:!1},{text:"传统企业",checked:!1},{text:"创业公司",checked:!1},{text:"个人",checked:!1},{text:"其他",checked:!1}]),T=f(""),D=f([[{role:"软件开发",check:!1},{role:"建站",check:!1},{role:"互联网服务",check:!1},{role:"软件服务",check:!1}],[{role:"政府单位",check:!1},{role:"政企单位",check:!1},{role:"医院",check:!1},{role:"学校",check:!1}],[{role:"工业",check:!1},{role:"服务",check:!1},{role:"餐饮",check:!1},{role:"制造业等",check:!1}],[{role:"创业公司",check:!1}],[{role:"个人站长",check:!1},{role:"学生",check:!1}]]),A=x||(c?"您对".concat(c,"有什么改进的方向和建议?"):"宝塔面板需求反馈收集"),O=h||"如果您在使用过程中遇到任何问题或功能不完善，请将您的问题或需求详细描述给我们，我们将尽力为您解决或完善。",M=p({phone:"",status:!1}),$=f();return m((()=>{if(!d){C.value="top-34";const e=k.value.$el.querySelectorAll(".el-rate__item");e.forEach(((t,a)=>{const r=document.createElement("div"),s=w[a];r.innerText=s.text,r.classList.add("rate-tips"),r.style.color=s.color,r.style.borderColor=s.borderColor,r.style.backgroundColor=s.bgColor,t.appendChild(r),[1,3,5].includes(a)||(r.style.display="block"),t.addEventListener("mouseover",(()=>{e.forEach((e=>{e.querySelector(".rate-tips").style.display="none"})),g.value=a+1,r.style.display="block"}))}))}setTimeout((()=>{var e;null==(e=$.value)||e.focus()}),400)})),{__sfc:!0,authType:l,props:s,vm:o,id:i,type:n,name:c,softName:u,description:h,isNoRate:d,title:x,isCard:y,symbolTips:C,questions:_,rateValue:g,rate:k,text:["很不满意","不满意","一般","满意","非常满意"],textList:w,identityIndex:V,socialRole:j,socialTypeList:S,otherCard:T,socialStatus:D,moduleTile:A,placeholder:O,form:M,changeCardType:(e,t)=>{V.value=t,S.value.forEach((e=>{e.checked=!1})),e.checked=!0},changeCharacter:(e,t)=>{j.value=e.role,D.value.forEach((e=>{e.forEach((e=>{e.check=!1}))})),e.check=!0},submit:async()=>{let e={product_type:n,software_name:u,rate:g.value},r={};if(d||null!==g.value&&0!==g.value)if(""!==_.value)try{if(r[i]=_.value,5!=V.value?r[1e3]=j.value:r[1e3]=T.value,e.questions=JSON.stringify(r),M.status){if(!M.phone)return void o.$message.warn("请留下您的手机号码方便后续回访~");let t=b(M.phone);e.feedback=JSON.stringify(t?{phone:M.phone}:{email:M.phone})}await t(e),a(),o.$emit("close")}catch(s){}else o.$message.warn("请输入您的需求");else o.$message.warn("打个分数再提交吧，麻烦您了~")},inputRef:$}}}),(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"nps_survey_box"},[t("div",{staticClass:"nps_survey_banner"},[t("span",[t("i"),e._v(" "),t("span",{staticStyle:{"vertical-align":"4px"}},[e._v(e._s(a.moduleTile))])])]),t("div",{staticClass:"px-[4rem] text-center relative"},[a.isNoRate?e._e():t(y,{ref:"rate",staticClass:"mt-8x mb-[3rem]",attrs:{colors:["#ef0808","#f0ad4e","#20a53a"],texts:a.text},model:{value:a.rateValue,callback:function(e){a.rateValue=e},expression:"rateValue"}}),t("span",{staticClass:"text-[red] absolute left-12",class:a.symbolTips},[e._v("*")]),t(s,{attrs:{placement:"top-start",width:"400","popper-class":"tips !bg-[#20a53a] text-white text-[1.2rem] w-[40.6rem]",trigger:"click","visible-arrow":!0,content:a.placeholder}},[t(c,{ref:"inputRef",attrs:{slot:"reference",type:"textarea",rows:5,placeholder:a.placeholder},slot:"reference",model:{value:a.questions,callback:function(e){a.questions=e},expression:"questions"}})],1)],1),a.isCard?t("div",{staticClass:"px-[4rem] mt-[2rem] vertical-top"},[t("div",{staticClass:"my-[1rem]"},[t("span",{staticClass:"text-[1.3rem] text-[#666] align-top"},[e._v("您所属行业：")]),t("div",{staticClass:"inline-block cardView"},e._l(a.socialTypeList,(function(r,s){return t("span",{key:s,staticClass:"inline-block text-[1.3rem] h-[1.7rem] cardTitle align-super",class:{active:r.checked},on:{mouseover:function(e){return a.changeCardType(r,s)}}},[e._v(e._s(r.text))])})),0),t("div",{staticClass:"mt-4x ml-[7.6rem]"},[5==a.identityIndex?[t("span",[t(c,{staticClass:"!w-[36rem]",attrs:{placeholder:"您的行业是"},model:{value:a.otherCard,callback:function(e){a.otherCard=e},expression:"otherCard"}})],1)]:e._l(a.socialStatus[a.identityIndex],(function(r,s){return t(u,{key:s,class:r.check?"active":"",attrs:{size:"small",type:"info",effect:"plain"},on:{click:function(e){return a.changeCharacter(r,s)}}},[e._v(e._s(r.role))])}))],2)])]):e._e(),t("div",{staticClass:"mt-24x text-[1.3rem] text-primary leading-[4.6rem] flex justify-center"},[e._v(" 我们特别重视您的需求反馈，我们会每周进行需求评审，希望能更好的帮到您 ")]),t("div",{staticClass:"flex flex-col items-center p-[2rem] mt-12x"},[t(l,{staticClass:"w-[12.5rem]",attrs:{size:"large"},on:{click:a.submit}},[e._v("提交")])],1)])}),[],!1,null,"6a8baeb6",null,null).exports;export{C as default};
