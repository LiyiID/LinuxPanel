import{_ as t}from"./index118.js?v=1714377894636";import{$ as e,n as l,q as o}from"./main.js?v=1714377894636";import{_ as s}from"./index39.js?v=1714377894636";import{_ as a}from"./index59.js?v=1714377894636";import{e as r,b as i,H as n,h as p,j as m}from"./vue-lib.js?v=1714377894636";import{a5 as c}from"./site.popup.js?v=1714377894636";import{g as u,bD as d,bE as f}from"./site.store.js?v=1714377894636";import{c as x}from"./check.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./element-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./element-ui.common.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./vdom.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";const y=l(r({__name:"VerifyDnsTxt",setup(t){const{proxy:l}=m(),{refs:{letApplyInfo:o,siteInfo:s},letSslDeploy:a,showErrorSslDetail:r}=u(),y=i([]),j=i([{label:"解析域名",prop:"name"},{label:"记录值",prop:"txt",render:(t,l)=>n("div",{class:"whitespace-normal leading-1.8rem"},[t.txt,n("i",{class:"el-icon-document-copy cursor-pointer text-[#333] text-[1.5rem] copy ml-4x",attrs:{title:"复制记录值"},on:{click:()=>e({value:t.txt})}})])},{label:"类型",prop:"type",width:70},{label:"必需",prop:"force",width:70}]),_=i([{text:"解析域名需要一定时间来生效,完成所以上所有解析操作后,请等待1分钟后再点击验证按钮"},{text:""},{text:"若您使用的是宝塔云解析插件,阿里云DNS,DnsPod作为DNS,可使用DNS接口自动解析"}]);return p((()=>{var t;y.value=null==(t=x(o.value.dnsTable,"array",[]))?void 0:t.flatMap((t=>{const e=t.domain.replace("*.","");return[{name:"_acme-challenge.".concat(e),type:"TXT",txt:t.auth_value,force:"是"},{name:e,type:"CAA",txt:'0 issue "letsencrypt.org"',force:"否"}]})),_.value[1].text="可通过CMD命令来手动验证域名解析是否生效: nslookup -q=txt _acme-challenge.".concat(o.value.dnsTable[0].domain.replace("*.",""))})),{__sfc:!0,vm:l,letApplyInfo:o,siteInfo:s,letSslDeploy:a,showErrorSslDetail:r,tableData:y,tableColumns:j,tableHelpList:_,handleVerify:async()=>{const t=await c();try{const{data:t}="proxy"==s.value.project_type||"nginx"==s.value.project_type?await d({index:o.value.info.index}):await f({index:o.value.info.index});!0===t.status?(l.$emit("close"),a(t,!0)):r(t)}catch(e){}finally{null==t||t.close()}}}}}),(function(){var e=this,l=e._self._c,r=e._self._setupProxy;return l("div",{staticClass:"p-[1.5rem]"},[e._v(" 请按以下列表做TXT解析: "),l(a,{scopedSlots:e._u([{key:"content",fn:function(){return[l(s,{attrs:{column:r.tableColumns,data:r.tableData}})]},proxy:!0},{key:"footer-right",fn:function(){return[l(o,{attrs:{type:"default"},on:{click:r.handleVerify}},[e._v("验证")])]},proxy:!0}])}),l(t,{staticClass:"ml-20x",attrs:{list:r.tableHelpList,listStyle:"disc"}})],1)}),[],!1,null,null,null,null).exports;export{y as default};
