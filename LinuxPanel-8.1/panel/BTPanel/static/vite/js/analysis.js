import{_ as e}from"./index91.js?v=1714377894636";import{_ as t}from"./index84.js?v=1714377894636";import{_ as a}from"./index117.js?v=1714377894636";import{_ as i}from"./index41.js?v=1714377894636";import{p as r,v as l,A as s}from"./element-lib.js?v=1714377894636";import{n as o}from"./main.js?v=1714377894636";import{_ as n}from"./index39.js?v=1714377894636";import{e as d,b as c,f as p,l as u,i as m,j as y}from"./vue-lib.js?v=1714377894636";import{a as f}from"./index32.js?v=1714377894636";import{q as v,L as g}from"./echarts.js?v=1714377894636";import"./radio-button.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./index51.js?v=1714377894636";import"./index43.js?v=1714377894636";import"./index77.js?v=1714377894636";import"./index42.js?v=1714377894636";const b=o(d({__name:"analysis",setup(e){const{refs:{timestamp:t},trendChartData:a,urlRef:i,dirRef:r,codeRef:l,getUrlData:s,getDirData:o,getCodeData:n}=f(),{proxy:d}=y(),b=c(),h=c(),C=c(),x=c([{title:d.$t("today"),value:"today"},{title:d.$t("yesterday"),value:"yesterday"},{title:d.$t("l7"),value:"l7"},{title:d.$t("l30"),value:"l30"}]),R=c([{key:"baidu",title:"百度"},{key:"google",title:"谷歌"},{key:"bytes",title:"今日头条"},{key:"bing",title:"必应"},{key:"soso",title:"搜搜"},{key:"yahoo",title:"雅虎"},{key:"sogou",title:"搜狗"},{key:"qh360",title:"奇虎360"},{key:"youdao",title:"有道"},{key:"dnspod",title:"dnspod"},{key:"yisou",title:"神马"},{key:"yandex",title:"Yandex"},{key:"duckduckgo",title:"DuckDuckGo"},{key:"mpcrawler",title:"微信小程序"},{key:"other",title:"其他"}]),w=c([{label:"URI路径",key:"type",prop:"type"},{label:"次数",key:"frequency",prop:"frequency",width:100}]),k=e=>{var t;null==(t=("overview"===e?b:"dir"===e?C:h).value)||t.setOption(D(e))},D=e=>{let t={},i=[],s={type:[],frequency:[]};switch(e){case"overview":const o=T(a.trend_data_list);t={legend:{right:0},tooltip:{backgroundColor:"rgba(73, 84, 123, .9)",borderColor:"rgba(73, 84, 123, .9)",padding:10,confine:!0,appendToBody:!0,textStyle:{color:"#fff"}},dataset:{source:o.sourceList},xAxis:{type:"category"},yAxis:{gridIndex:0},grid:{top:"20%",right:20,width:"70%",height:165,tooltip:{trigger:"axis"}},series:o.seriesList};break;case"code":case"dir":i="code"===e?l.codeData:r.directoryData,s.type=i.map((e=>e.type)),s.frequency=i.map((e=>e.frequency)),t={xAxis:{type:"category",data:s.type},yAxis:{type:"value"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"25",bottom:"10%",containLabel:!0},series:[{data:s.frequency,type:"bar",barMaxWidth:i.length>10?"100%":"50%",label:{normal:{show:!0,position:"top",formatter:function(e){return e.data.name},textStyle:{color:"#bcbfff"}}},itemStyle:{normal:{color:new g(0,0,1,0,[{offset:0,color:"#6CD4EC"},{offset:1,color:"#3183ED"}],!1)}}}]}}return t},T=e=>{let t=[["pieDiv",...e.map((e=>String(e.time).slice(-2)+":00"))]],a=[];return[{label:"Google",value:"google"},{label:"百度",value:"baidu"},{label:"必应",value:"bing"},{label:"今日头条",value:"bytes"},{label:"dnspod",value:"dnspod"},{label:"DuckDuckGo",value:"duckduckgo"},{label:"微信小程序",value:"mpcrawler"},{label:"奇虎360",value:"qh360"},{label:"搜狗",value:"sogou"},{label:"搜搜",value:"soso"},{label:"雅虎",value:"yahoo"},{label:"Yandex",value:"yandex"},{label:"神马",value:"yisou"},{label:"有道",value:"youdao"},{label:"假蜘蛛",value:"fake_spider"},{label:"其他",value:"other"}].forEach((i=>{t.push([i.label,...e.map((e=>e[i.value]))]),a.push({type:"line",smooth:!0,seriesLayoutBy:"row",emphasis:{focus:"series"}})})),a.push({type:"pie",id:"pie",radius:["30%","60%"],center:["12%","50%"],emphasis:{focus:"self"},label:{formatter:"{b}:{d}%"},encode:{itemName:"pieDiv",value:"00:00",tooltip:"00:00"}}),{sourceList:t,seriesList:a}},j=()=>{k("overview"),k("code"),k("dir");const e=document.querySelector("#".concat(b.value.id)),t=v(e);null==t||t.on("updateAxisPointer",(function(e){var t;const a=e.axesInfo[0];if(a){const e=a.value+1;null==(t=b.value)||t.setOption({series:{id:"pie",label:{formatter:"{b}:({d}%)"},encode:{value:e,tooltip:e}}})}}))};return p((()=>t.value),(e=>{0!==e&&u((()=>{j()}))}),{immediate:!0}),m((()=>{const e=document.querySelector("#".concat(b.value.id)),t=v(e);null==t||t.clear()})),{__sfc:!0,timestamp:t,trendChartData:a,urlRef:i,dirRef:r,codeRef:l,getUrlData:s,getDirData:o,getCodeData:n,vm:d,echartOverviewRef:b,echartCodeRef:h,echartDirRef:C,typeOptions:x,uriOptions:R,tableUriColumn:w,changeChartUriType:async e=>{i.uriType=e,await s(),k("url")},currentChartUriCycle:async e=>{i.urlCycleType=e,await s(),k("overview")},changeChartDirType:async e=>{r.dirType=e,await o(),k("dir")},currentChartDirCycle:async e=>{r.dirCycleType=e,await o(),k("dir")},changeChartCodeType:async e=>{l.codeType=e,await n(),k("code")},currentChartCodeCycle:async e=>{l.codeCycleType=e,await n(),k("code")},renderChart:k,getDefaultOption:D,formatTrendData:T,getData:j}}}),(function(){var o=this,d=o._self._c,c=o._self._setupProxy;return d("section",[d(r,[d("div",{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:c.trendChartData.loading,expression:"trendChartData.loading"},{name:"bt-loading",rawName:"v-bt-loading:title",value:"正在加载蜘蛛趋势...",expression:"'正在加载蜘蛛趋势...'",arg:"title"}],staticClass:"h-[24rem]"},[d(e,{ref:"echartOverviewRef"})],1)]),d(l,[d(s,{staticClass:"pr-8x",attrs:{span:8}},[d(r,[d("div",{directives:[{name:"t",rawName:"v-t",value:"抓取URI分析",expression:"`抓取URI分析`"}],staticClass:"total-card-title"}),d("div",{staticClass:"flex items-centers"},[d(i,{staticClass:"w-[10rem] mr-1rem",attrs:{options:c.uriOptions,size:"mini",change:c.changeChartUriType},model:{value:c.urlRef.uriType,callback:function(e){o.$set(c.urlRef,"uriType",e)},expression:"urlRef.uriType"}}),d(a,{attrs:{type:"button",options:c.typeOptions,size:"mini"},on:{change:c.currentChartUriCycle},model:{value:c.urlRef.urlCycleType,callback:function(e){o.$set(c.urlRef,"urlCycleType",e)},expression:"urlRef.urlCycleType"}})],1),d("div",{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:c.urlRef.loading,expression:"urlRef.loading"},{name:"bt-loading",rawName:"v-bt-loading:title",value:"正在加载URI...",expression:"'正在加载URI...'",arg:"title"}],staticClass:"w-full h-[48rem]"},[d(n,{ref:"spiderDetailTable",staticClass:"mt-1rem",attrs:{"max-height":"480",column:c.tableUriColumn,data:c.urlRef.urlData}})],1)])],1),d(s,{staticClass:"pl-8x",attrs:{span:16}},[d(r,{staticStyle:{position:"relative"}},[d("div",{staticClass:"h-[24rem] relative"},[d("div",{directives:[{name:"t",rawName:"v-t",value:"状态码分析",expression:"`状态码分析`"}],staticClass:"total-card-title leading-[2.8rem]"}),d("div",{staticClass:"absolute left-10 flex items-center",staticStyle:{top:"0",left:"11.5rem"}},[d(i,{staticClass:"w-[10rem] mr-1rem",attrs:{options:c.uriOptions,size:"mini",change:c.changeChartCodeType},model:{value:c.codeRef.codeType,callback:function(e){o.$set(c.codeRef,"codeType",e)},expression:"codeRef.codeType"}}),d(a,{attrs:{type:"button",options:c.typeOptions,size:"mini"},on:{change:c.currentChartCodeCycle},model:{value:c.codeRef.codeCycleType,callback:function(e){o.$set(c.codeRef,"codeCycleType",e)},expression:"codeRef.codeCycleType"}})],1),d("div",{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:c.codeRef.loading,expression:"codeRef.loading"},{name:"bt-loading",rawName:"v-bt-loading:title",value:"正在加载状态码...",expression:"'正在加载状态码...'",arg:"title"}]},[c.codeRef.is_hide?d("div",{staticClass:"absolute w-full bg-white z-1"},[d(t,{attrs:{"image-size":100,description:"状态码数据为空"}})],1):o._e(),d(e,{ref:"echartCodeRef",staticClass:"h-[24rem]"})],1)])]),d(r,{staticStyle:{position:"relative"}},[d("div",{staticClass:"h-[24rem] relative"},[d("div",{directives:[{name:"t",rawName:"v-t",value:"目录分析",expression:"`目录分析`"}],staticClass:"total-card-title leading-[2.8rem]"}),d("div",{staticClass:"absolute left-10 flex items-center",staticStyle:{top:"0",left:"11.5rem"}},[d(i,{staticClass:"w-[10rem] mr-1rem",attrs:{options:c.uriOptions,size:"mini",change:c.changeChartDirType},model:{value:c.dirRef.dirType,callback:function(e){o.$set(c.dirRef,"dirType",e)},expression:"dirRef.dirType"}}),d(a,{attrs:{type:"button",options:c.typeOptions,size:"mini"},on:{change:c.currentChartDirCycle},model:{value:c.dirRef.dirCycleType,callback:function(e){o.$set(c.dirRef,"dirCycleType",e)},expression:"dirRef.dirCycleType"}})],1),d("div",{directives:[{name:"bt-loading",rawName:"v-bt-loading",value:c.dirRef.loading,expression:"dirRef.loading"},{name:"bt-loading",rawName:"v-bt-loading:title",value:"正在加载目录...",expression:"'正在加载目录...'",arg:"title"}]},[c.dirRef.is_hide?d("div",{staticClass:"absolute w-full bg-white z-1"},[d(t,{attrs:{"image-size":100,description:"目录数据为空"}})],1):o._e(),d(e,{ref:"echartDirRef",staticClass:"h-[24rem]"})],1)])])],1)],1)],1)}),[],!1,null,null,null,null).exports;export{b as default};
