import{_ as t}from"./index53.js?v=1714377894636";import{_ as e}from"./index39.js?v=1714377894636";import{n as a,q as s}from"./main.js?v=1714377894636";import{j as r}from"./element-lib.js?v=1714377894636";import{_ as o}from"./index85.js?v=1714377894636";import{_ as n}from"./index59.js?v=1714377894636";import{e as i,b as c,A as l,v as u,H as p,h as m,j as d}from"./vue-lib.js?v=1714377894636";import{h as f}from"./docker.table.js?v=1714377894636";import{B as h}from"./docker.popup.js?v=1714377894636";import{u as g}from"./docker.store.js?v=1714377894636";import{a4 as j,a5 as b,a6 as v}from"./docker.api.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./element-ui.common.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./vdom.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";import"./check.js?v=1714377894636";const y=a(i({__name:"index",setup(t){const{proxy:e}=d(),a=c(),s=c(""),r=g(),{projectGroupData:o}=l(r),{getProjectGroup:n}=r,i=c(""),y=c([{label:"停止容器组",value:"stop",event:()=>{}},{label:"删除容器组",value:"delete",event:()=>{}}]);let x=[],_=!1,k=0;const C=u({isRecurrence:!1,describe:{title:"",th:"",message:"",propsValue:"group_name"},tableDisplayConfig:{label:"状态",prop:"status",render:t=>p("span",{class:"block truncate "+(0!==x.length||_?x.find((e=>e.id===t.id)).status?"text-primary":"text-danger":"text-warning")},(()=>{if(0!==x.length||_){let e=x.find((e=>e.id===t.id)).msg;return k++,e}return"等待执行"})())}}),G=async t=>{try{const a=t.status?"停止":"开启";await e.$confirm({title:"".concat(a,"【").concat(t.group_name,"】容器组"),icon:"question",iconColor:"#E6A23C",message:"".concat(a,"容器组状态后，将依次").concat(a,"该容器组内的容器，是否继续操作？")}),o.value.loading=!0;const s=await b({id:t.id,status:t.status?0:1});if(o.value.loading=!1,t.status||s.status||-1===s.msg.indexOf("强制停止"))e.$message.request(s),s.status&&n();else{await e.$confirm({title:"提示",icon:"question",iconColor:"#E6A23C",message:s.msg});const a=await b({id:t.id,status:t.status?0:1,force_stop:"Ture"});e.$message.request(a),a.status&&n()}}catch(a){}},w=async({id:t})=>{try{const{data:e}=await v({id:t});return x.push({id:t,msg:e.msg,status:e.status}),e.status?e:Promise.reject(e)}catch(e){return Promise.reject(!1)}},D=async({id:t})=>{try{const{data:e}=await b({id:t,status:0});return x.push({id:t,msg:e.msg,status:e.status}),e.status?e:Promise.reject(e)}catch(e){return Promise.reject(!1)}},E=t=>{h(t)},q=async t=>{try{const a=await v({id:t.id});e.$message.request(a),a.status&&n()}catch(a){}},P=f({changeStatusEvent:G,editGroupEvent:E,deleteGroupEvent:q});return m((async()=>{n()})),{__sfc:!0,vm:e,Table:a,groupName:s,store:r,projectGroupData:o,getProjectGroup:n,batchType:i,tableBatchData:y,list:x,isComplete:_,index:k,batchConfig:C,addGroup:async()=>{if(""===s.value)return e.$message.error("请输入分组名");try{const t=e.$load("正在添加分组，请稍后..."),a=await j({group_name:s.value});t.close(),e.$message.request(a),a.status&&(n(),s.value="")}catch(t){}},batchEvent:(t,e,a)=>{switch(t){case"stop":return D(e);case"delete":return w(e)}},handleBathComplete:t=>{_=!0,n()},changeStatusEvent:G,batchDeleteData:w,batchStopData:D,handleBatch:t=>{_=!1,x=[],k=0;let e=[];switch(t){case"stop":e=["停止","停止容器组内的所有项目"];break;case"delete":e=["删除","彻底失去访问和操作权限"]}i.value=t,C.isRecurrence=!0,C.describe.th="分组名",C.describe.title="批量".concat(e[0],"容器组"),C.describe.message="批量".concat(e[0],"已选的容器组，是否继续操作！")},editGroupEvent:E,deleteGroupEvent:q,tableColumn:P}}}),(function(){var a=this,i=a._self._c,c=a._self._setupProxy;return i("div",{staticClass:"p-[2rem]"},[i(n,{scopedSlots:a._u([{key:"header-left",fn:function(){return[i("div",{staticClass:"flex items-center"},[i(o,{attrs:{placeholder:"请输入分组名"},model:{value:c.groupName,callback:function(t){c.groupName=t},expression:"groupName"}}),i(s,{staticClass:"!ml-[1rem]",on:{click:function(t){return c.addGroup()}}},[a._v("添加分组")])],1)]},proxy:!0},{key:"header-right",fn:function(){return[i(r,{staticClass:"item",attrs:{effect:"dark",content:"点击刷新数据",placement:"top-start"}},[i(s,{attrs:{type:"default",icon:"el-icon-refresh"},on:{click:c.getProjectGroup}})],1)]},proxy:!0},{key:"content",fn:function(){return[i(e,{directives:[{name:"loading",rawName:"v-loading",value:c.projectGroupData.loading,expression:"projectGroupData.loading"}],ref:"Table",attrs:{column:c.tableColumn,"max-height":340,data:c.projectGroupData.list,description:"容器组列表为空","element-loading-text":"正在加载分组列表，请稍后..."},on:{"selection-change":function(t){}}})]},proxy:!0},{key:"footer-left",fn:function(){return[i(t,{attrs:{data:c.tableBatchData,config:c.batchConfig,"batch-fn":c.batchEvent},on:{"handle-batch":c.handleBatch,"handle-complete":c.handleBathComplete}})]},proxy:!0},{key:"popup",fn:function(){},proxy:!0}])})],1)}),[],!1,null,"82341676",null,null).exports;export{y as default};
