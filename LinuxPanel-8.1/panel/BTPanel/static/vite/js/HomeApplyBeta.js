import{f as e,bT as t,n as s,D as a,q as i}from"./main.js?v=1714377894636";import{e as l,b as r,c as m,h as o,j as n}from"./vue-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./element-lib.js?v=1714377894636";const c=s(l({__name:"HomeApplyBeta",props:{compData:{default:()=>({})}},setup(s,{expose:a}){const i=s,{updateVersion:l}=i.compData,{proxy:c}=n(),p=r(!1),d=r(5),v=r(""),u=r('<span class="text-danger">1、注意，请不要在正式商用网站及自己生产环境的面板申请测试版。</span><br>\n2、所有新功能做完内部初审后都会第一时间向所有测试版用户推送。<br>\n3、测试版存在诸多小BUG，如遇到可以直接通过论坛或QQ联系我们。<br>\n4、更新测试版或在论坛提供BUG可获得宝塔币，宝塔币可用于兑换礼品。'),x=r(!1),_=r([]);let f=null;const b=m((()=>d.value>0)),h=()=>{d.value=5,f=setInterval((()=>{d.value--,0==d.value&&C()}),1e3)},C=()=>{f&&clearInterval(f)},g=async()=>{try{x.value=!0;const{data:e}=await t();v.value=e.beta_ps,e.list.forEach((e=>_.value.push(e))),x.value=!1}catch(e){}},y=()=>{C(),c.$emit("close")},w=async()=>{if(!p.value)return c.$message.warn("请查看并勾选“申请测试版须知”");await l(!0),c.$emit("close")};return a({onCancel:y,onConfirm:w}),o((async()=>{await g(),h()})),{__sfc:!0,props:i,updateVersion:l,vm:c,checked:p,time:d,tips:v,tips1:u,loading:x,logList:_,timer:f,showTips:b,initTimer:h,clearTimer:C,initLog:g,onCancel:y,onConfirm:w,formatTime:e}}}),(function(){var e=this,t=e._self._c,s=e._self._setupProxy;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:s.loading,expression:"loading"}],staticClass:"flex flex-col px-20x bg-[#E7F7EA] beta-bg relative rounded-4x"},[t("div",{staticClass:"leading-[4rem] text-white text-[1.4rem]"},[e._v("申请Linux测试版")]),t("div",{staticClass:"bg-white mb-[2.8rem] rounded-[6px] card-shadow px-[4.6rem] py-[4rem] beta-title-bg"},[e._m(0),t("div",{staticClass:"text-[1.4rem] leading-[3.6rem] text-[#555]",domProps:{innerHTML:e._s(s.tips1)}})]),t("div",{staticClass:"beta-con h-[6.8rem] w-[45.4rem] absolute ml-[50px] mt-[30.6rem]"}),t("div",{staticClass:"bg-white mb-20x rounded-[6px] card-shadow px-[4.6rem] py-[2.6rem] pb-[3.6rem]"},[e._m(1),s.logList.length?t("div",{staticClass:"flex flex-col bg-[#f6f6f6] p-8 rounded-4x mb-[1.2rem]"},[t("div",{staticClass:"flex text-[1.4rem] pl-8x text-[#555]"},[t("div",[t("span",[e._v("最新测试版：")]),t("span",{staticClass:"text-primary"},[e._v(e._s(s.logList[0].version))])]),t("div",{staticClass:"ml-16x"},[t("span",[e._v("更新时间：")]),t("span",[e._v(e._s(s.formatTime(s.logList[0].uptime,"yyyy/MM/dd")))])])]),t("div",{staticClass:"border-[#e6e6e6] border-b-1 my-20x flex-1"}),t("div",{staticClass:"flex-1 text-[1.3rem] max-h-[13.6rem] w-[100%] overflow-auto leading-[2.8rem] text-[#666]",domProps:{innerHTML:e._s(s.logList[0].upmsg)}})]):e._e(),t("div",{staticClass:"flex items-center mb-[3.6rem]"},[t(a,{attrs:{disabled:s.showTips},model:{value:s.checked,callback:function(e){s.checked=e},expression:"checked"}},[t("div",{staticClass:"text-[1.3rem] text-[#666]"},[t("span",[e._v(e._s(e.$t("HomeApplyBeta.Viewed"))+"“")]),t("b",{staticClass:"text-[#555]"},[e._v("《"+e._s(e.$t("HomeApplyBeta.Instructions"))+"》")]),t("span",[e._v("”")])])]),s.showTips?t("span",{staticClass:"ml-4 text-[1.3rem] leading-[1.4] text-danger"},[e._v(" "+e._s(e.$t("HomeApplyBeta.ViewRemainingTime",{time:s.time}))+" ")]):e._e()],1),t("div",{staticClass:"text-center"},[t(i,{staticClass:"mr-[6rem] w-[9rem] h-[3.4rem] text-[1.4rem] rounded-[5rem]",attrs:{type:"cancel"},on:{click:s.onCancel}},[e._v(" 取消 ")]),t(i,{staticClass:"rounded-[5rem] w-[10.4rem] h-[3.4rem] text-[1.4rem]",attrs:{type:"primary",disabled:s.showTips},on:{click:s.onConfirm}},[e._v(" 立即更新 ")])],1)])])}),[function(){var e=this._self._c;return this._self._setupProxy,e("div",{staticClass:"flex justify-center mb-[2.6rem]"},[e("div",{staticClass:"beta-title w-[35.4rem] h-[3.6rem]"})])},function(){var e=this._self._c;return this._self._setupProxy,e("div",{staticClass:"flex justify-center mb-[2.6rem]"},[e("div",{staticClass:"beta-log-title w-[37rem] h-[3.6rem]"})])}],!1,null,null,null,null).exports;export{c as default};
