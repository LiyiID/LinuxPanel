import{_ as e}from"./index118.js?v=1714377894636";import{x as a,q as t,s as l,w as s,H as r,I as o}from"./element-lib.js?v=1714377894636";import{n as i,o as n,dk as u,aS as p,g as c,p as m,dl as v,F as b,r as d,D as h,q as y,a as f}from"./main.js?v=1714377894636";import{_}from"./time-select.js?v=1714377894636";import{_ as D}from"./index134.js?v=1714377894636";import"./index39.js?v=1714377894636";import{_ as w}from"./index85.js?v=1714377894636";import{e as g,b as k,w as N,j as x,h as T,f as S,v as L,c as C}from"./vue-lib.js?v=1714377894636";import{_ as j}from"./cascader.js?v=1714377894636";import{g as F,j as B,k as P}from"./index35.js?v=1714377894636";import{O as A,P as O,Q as z,R as V,S as U,T as E,U as R,b as $}from"./crontab.api.js?v=1714377894636";import"./locales-lib.js?v=1714377894636";import{_ as I}from"./AlertForm.js?v=1714377894636";import{o as M}from"./confirm.js?v=1714377894636";import"./__commonjsHelpers__.js?v=1714377894636";import"./public-lib.js?v=1714377894636";import"./modulepreload-polyfill.js?v=1714377894636";import"./preload-helper.js?v=1714377894636";import"./request-lib.js?v=1714377894636";import"./date-util.js?v=1714377894636";import"./config.js?v=1714377894636";import"./cascader-panel.js?v=1714377894636";import"./index62.js?v=1714377894636";import"./index77.js?v=1714377894636";import"./index42.js?v=1714377894636";import"./index53.js?v=1714377894636";import"./index57.js?v=1714377894636";import"./index43.js?v=1714377894636";import"./upload.js?v=1714377894636";import"./index59.js?v=1714377894636";import"./index38.js?v=1714377894636";import"./index45.js?v=1714377894636";import"./index61.js?v=1714377894636";import"./index41.js?v=1714377894636";import"./mysql.store.js?v=1714377894636";import"./check.js?v=1714377894636";const q=i(g({__name:"InputItem",props:{label:{default:"脚本内容"},inputType:{default:"input"},resize:{default:"none"},iconType:{default:!1},placeholder:{default:"请输入内容信息"},inputValue:null},emits:["update:changeInput"],setup(e,{emit:a}){const t=e,{proxy:l}=x(),s=k("");return N((()=>{"URL地址"==t.label?s.value="http://":s.value="",t.inputValue&&(s.value=t.inputValue)})),{__sfc:!0,props:t,vm:l,value:s,emit:a,changeInput:e=>{a("update:changeInput",e)}}}}),(function(){var e=this,t=e._self._c,l=e._self._setupProxy;return t(a,{attrs:{label:e.label,prop:"inputData"}},[t("div",{staticClass:"flex items-center"},[e._t("before"),t(w,{ref:"inputData",class:"切割路径"===e.label?"radius-r0":"",attrs:{width:"textarea"===e.inputType?"60rem":"26rem",placeholder:e.placeholder,type:e.inputType,resize:e.resize,rows:10,isNull:!0,iconType:e.iconType},on:{change:l.changeInput,input:l.changeInput},model:{value:l.value,callback:function(e){l.value=e},expression:"value"}}),e._t("after")],2)])}),[],!1,null,null,null,null).exports;const H=i(g({__name:"SelectItem",props:{selectLabel:{default:"脚本内容"},type:{default:""},selectData:null},emits:["update:saveNumber","update:select","update:changeZone"],setup(e,{emit:a}){const t=e,{proxy:l}=x(),{refs:{crontabSiteData:s,zoneList:r,backupData:o}}=F(),i=k(180),n=k([]),u=k([Object.keys(r.value)[0],r.value[Object.keys(r.value)[0]][0]]),p=k(""),c=k([]);return N((()=>{var e,a,l,o,m,v,b;if("logs"==t.type||"webshell"==t.type)n.value=null!=(e=s.value)?e:[],n.value&&Array.isArray(n.value)&&n.value.length>0&&"all"!=(null==(a=n.value[0])?void 0:a.value)&&n.value.unshift({name:"全部",value:"all",ps:"所有数据"}),p.value=n.value&&Array.isArray(n.value)&&n.value.length>0&&null!=(m=null==(o=null==(l=n.value)?void 0:l[0])?void 0:o.name)?m:"";else if("syncTime"==t.type){let e=[];Object.keys(r.value).forEach((a=>{let t={};t.value=a,t.label=a,t.children=[],r.value[a].forEach((e=>{t.children.push({value:e,label:e})})),e.push(t)})),c.value=e}t.selectData&&(p.value="ALL"===t.selectData.sName||""===t.selectData.sName?"全部":t.selectData.sName,i.value=t.selectData.save||180,u.value=null==(b=null==(v=t.selectData)?void 0:v.sName)?void 0:b.split("/"))})),T((()=>{o.value.number=i.value})),{__sfc:!0,vm:l,props:t,crontabSiteData:s,zoneList:r,backupData:o,saveNumber:i,optionList:n,cascaderValue:u,value:p,emit:a,zoneOption:c,changeSaveNumber:e=>{e<1&&(l.$message({message:"保留最新的份数不能小于1",type:"warning"}),i.value=1),a("update:saveNumber",i.value)},changeSelect:e=>{p.value=e,a("update:select",e)},changeZoneEvent:e=>{u.value=e,a("update:changeZone",e)}}}}),(function(){var e=this,s=e._self._c,r=e._self._setupProxy;return s(a,{attrs:{label:e.selectLabel}},[s("div",{staticClass:"flex items-center"},[e._t("before"),"special_log"!=e.type&&"syncTime"!==e.type?s(t,{attrs:{disabled:!!e.selectData,filterable:""},on:{change:r.changeSelect},model:{value:r.value,callback:function(e){r.value=e},expression:"value"}},e._l(r.optionList,(function(e){return s(l,{key:e.value,attrs:{label:e.name,value:e.name}})})),1):e._e(),"webshell"!==e.type&&"syncTime"!=e.type?s(a,{staticClass:"!mt-0",attrs:{prop:"save"}},[s("div",{staticClass:"text-[1.2rem] flex items-center"},["special_log"!=e.type?s("span",{staticClass:"mx-8x"}):e._e(),s(w,{attrs:{type:"number",min:1,width:"12rem",textType:"份"},on:{change:r.changeSaveNumber},model:{value:r.saveNumber,callback:function(e){r.saveNumber=e},expression:"saveNumber"}})],1)]):e._e(),"syncTime"==e.type?s(j,{staticClass:"w-[32rem]",attrs:{options:Array.isArray(r.zoneOption)&&r.zoneOption.length?r.zoneOption:[],props:{expandTrigger:"hover"}},on:{change:r.changeZoneEvent},model:{value:r.cascaderValue,callback:function(e){r.cascaderValue=e},expression:"cascaderValue"}}):e._e(),e._t("after")],2)])}),[],!1,null,null,null,null).exports;const Q=i(g({__name:"FileSplitItem",props:{rowData:{default:()=>{}}},emits:["update:backServer"],setup(e,{emit:a}){var t;const l=e,s=k(!(!l.rowData||"localhost"!=l.rowData.backupTo)),{refs:{orderOpt:r,backupData:o,fileSplitForm:i}}=F(),{proxy:n}=x(),u=k((null==(t=l.rowData)?void 0:t.split_type)||"0");return N((()=>{l.rowData&&(i.value.fileNum=l.rowData.split_value,i.value.fileType=l.rowData.split_type)})),S((()=>o.value.backServer),(e=>{s.value="localhost"==e,"localhost"==e&&(u.value="0")}),{immediate:!0}),{__sfc:!0,props:l,disabledFlag:s,fileOptions:[{name:"不拆分",value:"0"},{name:"按文件大小拆分",value:"size"},{name:"按数量拆分",value:"num"}],orderOpt:r,backupData:o,fileSplitForm:i,vm:n,value:u,emits:a,changeFileSplit:e=>{"num"==e?i.value.fileNum=5:"size"==e&&(i.value.fileNum=1024),i.value.fileType=e},changeNumber:e=>{i.value.fileNum=Number(e.target.value)}}}}),(function(){var e=this,s=e._self._c,r=e._self._setupProxy;return s(a,{attrs:{label:"文件拆分"}},[s("div",{staticClass:"flex items-center"},[s(t,{staticClass:"mr-4x",attrs:{disabled:r.disabledFlag},on:{change:r.changeFileSplit},model:{value:r.value,callback:function(e){r.value=e},expression:"value"}},e._l(r.fileOptions,(function(e){return s(l,{key:e.value,attrs:{label:e.name,value:e.value}})})),1),"0"!==r.value?s("div",{staticClass:"text-[1.2rem] flex items-center",on:{input:r.changeNumber}},[s(w,{attrs:{type:"number",width:"14rem",textType:"num"==r.value?"个":"MB"},model:{value:r.fileSplitForm.fileNum,callback:function(a){e.$set(r.fileSplitForm,"fileNum",a)},expression:"fileSplitForm.fileNum"}})],1):e._e(),s("span",{staticClass:"text-[#666] text-[1.2rem] leading-8 ml-8x"},[e._v("*为解决上传时文件过大而上传失败，若文件小请忽略,开启拆分后备份文件大于5G时拆分成指定大小 ")])],1)])}),[],!1,null,null,null,null).exports;const G=i(g({__name:"BackServerItem",props:{rowData:{default:()=>{}},type:null},emits:["update:backServer"],setup(e,{emit:a}){const t=e,{refs:{orderOpt:l,backupData:s}}=F(),{proxy:r}=x(),o=(e,a,t)=>{Array.isArray(s.value.backServer)?0===s.value.backServer.length?t(new Error("请选择备份服务器")):t():""===s.value.backServer?t(new Error("请选择备份服务器")):t()},i=[{validator:o,message:"请选择至少一个备份服务器",trigger:["blur","change"]}];return T((()=>{t.rowData&&"enterpriseBackup"==t.rowData.sType&&(s.value.backServer=t.rowData.backupTo.split("|")),t.rowData||"enterpriseBackup"!==t.type||r.$set(s.value,"backServer",["localhost"])})),{__sfc:!0,props:t,orderOpt:l,backupData:s,vm:r,emits:a,changeServerTo:e=>{s.value.backServer=e,a("update:backServer",e)},backupValidator:o,rules:i}}}),(function(){var e=this,s=e._self._c,r=e._self._setupProxy;return s(a,{staticClass:"diy-el-form",attrs:{label:"备份到",rules:r.rules,prop:"backupData"}},[s("div",{staticClass:"flex items-center"},[s(t,{key:e.type,staticClass:"w-[16rem]",attrs:{filterable:"","collapse-tags":"",multiple:"enterpriseBackup"===e.type},on:{change:r.changeServerTo},model:{value:r.backupData.backServer,callback:function(a){e.$set(r.backupData,"backServer",a)},expression:"backupData.backServer"}},e._l(r.orderOpt,(function(e){return s(l,{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)])}),[],!1,null,"9bcaeca8",null,null).exports;const Z=i(g({__name:"DbAndSiteItem",props:{type:{default:""},multiple:{type:Boolean,default:!1},rowData:null,databaseList:{default:()=>[]}},emits:["updata:tableOptions","updata:backupDrop","updata:backupValue"],setup(e,{emit:a}){var t,l;const s=e,{refs:{crontabSiteData:r,databaseData:o,backupData:i}}=F(),{proxy:c}=x(),m=k([]),v=k("site"==s.type?i.value.siteName:"site_restart"==s.type?(null==(l=null==(t=r.value)?void 0:t[0])?void 0:l.name)||"":i.value.databaseName),b=k("/www/wwwroot");return N((async()=>{var e,t,l,u,p,c,b,d,h,y,f,_,D,w,g,k,N,x,T;if("site"==s.type||"site_restart"==s.type?m.value=r.value:(m.value=o.value,"enterpriseBackup"===s.type&&(m.value=null==(e=s.databaseList)?void 0:e.filter((e=>"全部"!=e.name)),i.value.databaseName=null==(l=null==(t=m.value)?void 0:t[0])?void 0:l.name,v.value=null==(p=null==(u=m.value)?void 0:u[0])?void 0:p.name),"database"!==s.type||n||(m.value=o.value,i.value.databaseName=null==(c=m.value[0])?void 0:c.name,v.value=null==(d=null==(b=m.value)?void 0:b[0])?void 0:d.name)),(s.multiple&&"ALL"!=(null==(y=null==(h=m.value)?void 0:h[0])?void 0:y.value)&&"enterpriseBackup"!=s.type&&"site_restart"!==s.type||"database"===s.type&&"ALL"!=(null==(_=null==(f=m.value)?void 0:f[0])?void 0:_.value))&&m.value.unshift({name:"全部",value:"ALL",ps:"所有数据"}),"site_restart"==s.type&&(m.value=null==(D=m.value)?void 0:D.filter((e=>"全部"!=e.name)),v.value=null==(g=null==(w=m.value)?void 0:w[0])?void 0:g.name),s.multiple&&!s.rowData&&(i.value.siteName=["全部"],i.value.databaseName=["全部"],v.value=["全部"]),"enterpriseBackup"===(null==(k=s.rowData)?void 0:k.sType)){v.value=s.rowData.sName;const e=null==(N=(await A()).data)?void 0:N.find((e=>e.name==s.rowData.sName));a("updata:tableOptions",e)}"database"!==(null==(x=s.rowData)?void 0:x.sType)||n||(v.value=s.rowData.sName,m.value=o.value),"ALL"===(null==(T=s.rowData)?void 0:T.sName)&&(v.value=["全部"])})),T((()=>{"path"==s.type&&(b.value=i.value.path||"/www/wwwroot",i.value.path=b.value)})),{__sfc:!0,props:s,sanitizeInput:e=>{let a=decodeURIComponent(e);return a=a.replace(/&lt;/g,"<").replace(/&gt;/g,">"),u(e)},crontabSiteData:r,databaseData:o,backupData:i,vm:c,optionData:m,value:v,pathData:b,emit:a,changeDbOrWeb:async e=>{if(s.multiple&&(e.length&&""!=e[e.length-1]||(v.value=["全部"]),e.length>1&&"全部"==e[0]?v.value=null==e?void 0:e.filter((e=>"全部"!=e)):e.length>1&&"全部"==e[e.length-1]&&(v.value=["全部"])),"site"==s.type||"site_restart"==s.type)i.value.siteName=v.value;else if("database"==s.type)i.value.databaseTable=v.value;else if("enterpriseBackup"==s.type)try{const t=(await A()).data.find((a=>a.name==e));a("updata:tableOptions",t)}catch(t){}else i.value.databaseName=e},openPathDialog:()=>{s.rowData||p({type:"all",path:"/www/wwwroot",change:e=>{b.value=e,a("updata:backupDrop",e)}})}}}}),(function(){var e=this,s=e._self._c,r=e._self._setupProxy;return s("div",{staticClass:"flex items-center"},["database"==e.type?s("span",{staticClass:"ml-12x mr-8x text-[1.2rem] text-[#666]"},[e._v(" "+e._s("database"==e.type?"数据库":"")+" ")]):e._e(),s(a,{attrs:{prop:"path"}},["path"==e.type?s(w,{attrs:{iconType:"folder",disabled:!!e.rowData},on:{folder:r.openPathDialog},model:{value:r.pathData,callback:function(e){r.pathData=e},expression:"pathData"}}):e._e()],1),"path"!=e.type?s(t,{key:Math.random().toString(),staticClass:"w-[20rem]",attrs:{disabled:!!e.rowData,filterable:"",multiple:e.multiple,"collapse-tags":""},on:{change:r.changeDbOrWeb},model:{value:r.value,callback:function(e){r.value=e},expression:"value"}},e._l(r.optionData,(function(e,a){return s(l,{key:a,attrs:{label:"".concat(e.name+((null==e?void 0:e.ps)?"["+r.sanitizeInput(e.ps)+"]":"")),value:e.name}})})),1):e._e()],1)}),[],!1,null,"f2e6feaf",null,null).exports;const W=i(g({__name:"ComplexTypeItem",props:{backLabel:{default:"备份数据"},type:{default:""},multiple:{type:Boolean,default:!1},tableData:{default:()=>[]},rowData:{default:()=>{}}},setup(e){const a=e,{refs:{backupData:t,databaseData:l}}=F(),s=k(a.type),r=k(!1),{proxy:o}=x(),i=k({saveNum:t.value.number||3,tableValue:[]}),u=k([]);return S((()=>a.type),(e=>{s.value=e}),{immediate:!0}),N((()=>{var e,l;a.tableData&&((null==(e=u.value)?void 0:e.length)||(u.value=null==(l=a.tableData[0])?void 0:l.table_list,t.value.databaseTable=[""],i.value.tableValue=[""])),a.rowData&&(i.value.saveNum=a.rowData.save,i.value.tableValue=[],i.value.tableValue.push(a.rowData.sBody))})),T((()=>{})),{__sfc:!0,backupData:t,databaseData:l,props:a,types:s,isShowTable:r,vm:o,form:i,tableOptions:u,showFileSplit:e=>{},changeSaveNum:e=>{t.value.number=e},changeEnterpriseTable:e=>{e&&("enterpriseBackup"===s.value&&(u.value=null==e?void 0:e.table_list),t.value.databaseName=e.name,o.$set(t.value,"databaseName",e.name)),i.value.tableValue=[""]},changeEnterpriseTableName:e=>{e.length&&""!=e[e.length-1]||(t.value.databaseTable=[""]),e.length>1&&""==e[0]?t.value.databaseTable=e.filter((e=>""!=e)):e.length>1&&""==e[e.length-1]?t.value.databaseTable=[""]:t.value.databaseTable=e,i.value.tableValue=t.value.databaseTable},backDrop:e=>{t.value.path=e},backValue:e=>{r.value=1===(null==e?void 0:e.length),t.value.databaseName=e,t.value.databaseTable=[""]},isRelease:n}}}),(function(){var e,s=this,r=s._self._c,o=s._self._setupProxy;return r(a,{attrs:{label:s.backLabel}},[r("div",{staticClass:"flex items-center flex-wrap gap-y-[1rem]"},[s._t("back-before"),r(Z,{attrs:{rowData:s.rowData,type:o.types,databaseList:s.tableData,multiple:s.multiple},on:{"updata:tableOptions":o.changeEnterpriseTable,"updata:backupDrop":o.backDrop,"updata:backupValue":o.backValue}}),"enterpriseBackup"==s.type||"database"==s.type&&!o.isRelease&&"mysql"==o.backupData.databaseType&&(null==(e=o.tableOptions)?void 0:e.length)>0&&o.isShowTable?r(a,{staticClass:"ml-12x"},[r(t,{attrs:{title:o.form.tableValue.join("\n"),multiple:"","collapse-tags":"",disabled:!!s.rowData},on:{change:o.changeEnterpriseTableName},model:{value:o.form.tableValue,callback:function(e){s.$set(o.form,"tableValue",e)},expression:"form.tableValue"}},s._l(o.tableOptions,(function(e){return r(l,{key:e.value,attrs:{label:e.tb_name,value:e.value}})})),1)],1):s._e(),"site_restart"!==s.type?r(G,{attrs:{rowData:s.rowData,type:s.type}}):s._e(),"site_restart"!==s.type?r(a,{staticClass:"!mt-0",attrs:{prop:"save"}},[r("div",{staticClass:"text-[1.2rem] flex items-center"},["special_log"!=s.type?r("span",{staticClass:"ml-16x mr-8x"},[s._v("保留最新")]):s._e(),r(w,{attrs:{type:"number",width:"12rem",min:1,textType:"份"},on:{change:o.changeSaveNum},model:{value:o.form.saveNum,callback:function(e){s.$set(o.form,"saveNum",e)},expression:"form.saveNum"}})],1)]):s._e()],2)])}),[],!1,null,"ec1965d7",null,null).exports,J=k({toShell:{label:"脚本内容",placeholder:"请输入脚本内容",inputType:"textarea",notice:!1,keyword:!0,helpList:[{text:"为了保证服务器的安全稳定，shell脚本中以下命令不可使用：shutdown, init 0, mkfs, passwd, chpasswd, --stdin, mkfs.ext, mke2fs"}]},site:{backLabel:"备份网站",inputType:"textarea",placeholder:"每行一条规则,目录不能以/结尾，\n示例：data/config.php\nstatic/upload\n*.log,",label:"排除规则",notice:!0},database:{notice:!0,backLabel:"数据库",helpList:[{text:"远程数据库不支持备份表"}]},logs:{label:"排除规则",inputType:"textarea",placeholder:"每行一条规则,目录不能以/结尾，\n示例：data/config.php\nstatic/upload\n*.log,",selectLabel:"切割日志",helpList:[{text:"只切分项目的访问日志，如需对项目日志进行切分，请前往【网站-**项目-项目日志】进行配置"}]},special_log:{label:"切割路径",selectLabel:"保留最新"},enterpriseBackup:{backLabel:"备份数据库",label:"压缩密码",notice:!0,placeholder:"请输入压缩密码",iconType:"refresh",helpList:[{text:"【使用提醒】当前数据库暂不支持SQLServer、MongoDB、Redis、PgSQL备份"}]},path:{backLabel:"备份目录",notice:!0,label:"排除规则",inputType:"textarea",placeholder:"每行一条规则,目录不能以/结尾，\n示例：data/config.php\nstatic/upload\n*.log,"},syncTime:{selectLabel:"时区选择",helpList:[{text:"默认从NTP服务器同步时间，失败时将同步bt.cn的服务器时间。"}]},rememory:{helpList:[{text:"释放PHP、MYSQL、PURE-FTPD、APACHE、NGINX的内存占用,建议在每天半夜执行!"}]},toUrl:{label:"URL地址",placeholder:"请输入URL地址"},to_post:{label:"URL地址",placeholder:"请输入URL地址"},webshell:{selectLabel:"查杀站点"},site_restart:{backLabel:"网站",notice:!1,helpList:[{text:"该计划任务会影响相关网站的配置修改功能，如果需要修改该网站的配置项，请确保该网站是启动状态。"}]},log_cleanup:{helpList:[{text:"该功能是需要先到软件商店安装日志清理工具才能使用"},{text:"用户配置日志-需要用户通过清理日志工具配置路径"}]},startup_services:{label:"脚本内容",placeholder:"请输入脚本内容",inputType:"textarea"}});k({"每天":"day","每周":"week","每月":"month","每小时":"hour","N天":"day-n","N小时":"hour-n","N分钟":"minute-n"});const Y=k([{id:"mysql",name:"MySQL"},{id:"mongodb",name:"MongoDB"},{id:"redis",name:"Redis"},{id:"pgsql",name:"PgSQL"}]),X=k([{value:"toShell",label:"Shell脚本"},{value:"site",label:"备份网站"},{value:"database",label:"备份数据库"},{label:"数据库增量备份",value:"enterpriseBackup"},{value:"logs",label:"网站日志切割"},{value:"special_log",label:"自定义日志切割"},{value:"path",label:"备份目录"},{value:"webshell",label:"木马查杀"},{value:"syncTime",label:"同步时间"},{value:"rememory",label:"释放内存"},{value:"toUrl",label:"访问URL-GET"},{value:"to_post",label:"访问URL-POST"},{value:"site_restart",label:"定时开关网站"},{value:"log_cleanup",label:"定时清理日志"},{value:"startup_services",label:"开机自启动"}]),K=k([{value:"all",label:"所有日志"},{value:"system_log",label:"系统日志"},{value:"panel_log",label:"面板日志"},{value:"www_log",label:"网站日志"},{value:"usranalyse_log",label:"堡塔防入侵日志"},{value:"mysql_log",label:"MySQL日志"},{value:"Recycle",label:"回收站日志"},{value:"mail_log",label:"邮件日志"},{value:"php_session",label:"PHP会话日志"},{value:"total_log",label:"网站统计报表日志"},{value:"user_config",label:"用户配置日志"}]),ee=(e,a)=>({taskName:[{required:!0,message:"任务名称不可为空",trigger:["blur","input"]}],save:[{required:!0,message:"保留最新份数不可为空",trigger:"blur"},{validator:(e,a,t)=>{const l=Number(a);l<0||0===l?t(new Error("请输入不为0的数字")):t()},trigger:"blur"}],path:[{validator:(e,t,l)=>{"path"===a.type&&""===t?l(new Error("输入内容不可为空")):l()},trigger:["blur","input"]}],inputData:[{validator:(e,t,l)=>{const s=t.lastIndexOf("."),r=t.substring(s+1);"path"===a.type||"startup_services"===a.type||"enterpriseBackup"===a.type?l():"site"!==a.type&&""===t&&"logs"!==a.type?l(new Error("输入内容不可为空")):"special_log"===a.type&&"log"!==r?l(new Error("日志文件后缀必须为.log")):l()},trigger:["blur","change","input"]}],stopTime:[{validator:(e,t,l)=>{"site_restart"===a.type&&null===t?l(new Error("内容不可为空")):l()},trigger:["blur","change","input"]}],startTime:[{validator:(e,t,l)=>{"site_restart"===a.type&&null===t?l(new Error("内容不可为空")):"site_restart"===a.type&&null!==t&&a.stopTime===t?l(new Error("开启时间不可与停止时间相同")):l()},trigger:["blur","change","input"]}]});const ae=i(g({__name:"crontabForm",props:{compData:{default:()=>{}}},setup(e,{expose:a}){var t,l,s,r,o,i,u;const b=e,{refs:{timeForm:d,noticeForm:h,msgData:y,timeFormRules:f,authType:_,pushConfigInfo:D},getMsgConfig:w,clearTimeForm:g}=c(),{refs:{backupData:j,zoneList:A,fileSplitForm:I,databaseData:q,selectScriptForm:H,crontabSiteData:Q},getCrontabSiteList:G,clearBackForm:Z}=F(),{proxy:W}=x(),ae=k(X),te=k(),le=k(["mail","dingding","feishu","weixin","sms","wx_account"]),se=L({type:b.compData.rowData?b.compData.rowData.sType:"toShell",taskName:b.compData.rowData?b.compData.rowData.rname||b.compData.rowData.name:"",inputData:b.compData.rowData?"toUrl"===b.compData.rowData.sType||"to_post"===b.compData.rowData.sType?b.compData.rowData.urladdress:b.compData.rowData.sBody:"",zone:["Asia","Shanghai"],save:b.compData.rowData?b.compData.rowData.save:Number(j),otherTypeSiteName:"",postParam:b.compData.rowData&&"to_post"===b.compData.rowData.sType?b.compData.rowData.post_param?JSON.parse(b.compData.rowData.post_param):[]:[{paramName:"",paramValue:""}],stopTime:b.compData.rowData?null==(t=b.compData.rowData.special_time)?void 0:t.split(",")[0]:null,startTime:b.compData.rowData?null==(l=b.compData.rowData.special_time)?void 0:l.split(",")[1]:null,clearType:b.compData.rowData?b.compData.rowData.sName:"all",userAgent:b.compData.rowData?b.compData.rowData.user_agent:"",version:b.compData.rowData?b.compData.rowData.version:""}),re=k(),oe=k("toShell"),ie=k(!!(null==(s=b.compData.rowData)?void 0:s.save_local)),ne=k(!!(null==(r=b.compData.rowData)?void 0:r.backup_mode)),ue=k(b.compData.rowData?"logs"===b.compData.rowData.sType?null==(o=b.compData.rowData)?void 0:o.log_cut_path:null==(i=b.compData.rowData)?void 0:i.db_backup_path:"/www/backup"),pe=k([]),ce=k(!1),me=k(!1),ve=k(b.compData.rowData?"toUrl"===b.compData.rowData.sType||"to_post"===b.compData.rowData.sType?b.compData.rowData.urladdress:"mysql_increment_backup"===b.compData.rowData.sType||"enterpriseBackup"===b.compData.rowData.sType?"":(null==(u=b.compData.rowData)?void 0:u.sBody)||"":"");S((()=>se.type),(e=>{ue.value="logs"===e?"/www/wwwlogs/history_backups":"/www/backup"}));const be=k(ee(re.value,se)),de=async()=>{try{const e=await O();pe.value=e.data}catch(e){}},he=async()=>{var e;let a={name:se.taskName,...d.value,sType:oe.value,sBody:"",sName:"",backupTo:"",save:j.value.number,urladdress:"toUrl"===oe.value||"to_post"===oe.value?se.inputData:"",save_local:ie.value?1:0,notice:h.value.notice?1:0,notice_channel:h.value.notice?h.value.noticeChannel:"",datab_name:"",tables_name:"",keyword:h.value.keyword?h.value.keyword:"",flock:h.value.flock?1:0};"all"===a.notice_channel&&(a.notice_channel=le.value.join(","));["site","database","enterpriseBackup","path"].includes(oe.value)&&(a.backupTo=j.value.backServer),"syncTime"===oe.value&&(a.region=se.zone[0],a.zone=se.zone[1],a.sType="sync_time",a.sName=se.zone[0]+"/"+se.zone[1]);if(["logs","toShell","path","site"].includes(oe.value)&&(a.sBody=se.inputData),"logs"===oe.value&&(a.sName=se.otherTypeSiteName||"ALL",a.log_cut_path=ue.value),"special_log"===oe.value&&(a.sName=se.inputData),"site"==oe.value&&(a.sName=j.value.siteName.includes("全部")?"ALL":j.value.siteName.join(",")),"database"===oe.value&&(a.db_type=j.value.databaseType,a.sName=j.value.databaseTable.includes("全部")||j.value.databaseTable.includes("")?"ALL":j.value.databaseTable.join(","),a.backup_mode=ne.value?1:0,"mysql"!==j.value.databaseType||n||(a.db_name=j.value.databaseName,a.datab_name=j.value.databaseName,a.table_list=j.value.databaseTable.join(","),a.sName=j.value.databaseName.includes("全部")?"ALL":j.value.databaseName.join(","))),"database"!==oe.value&&"site"!==oe.value||(a.split_type="0"===I.value.fileType?"":I.value.fileType,a.split_value=I.value.fileNum,a.save=j.value.number,a.more="ALL",a.db_backup_path=ue.value),"enterpriseBackup"===oe.value&&(a.save_local=1,a.zip_password=se.inputData,a.db_name=j.value.databaseName,a.datab_name=j.value.databaseName,a.tb_name=j.value.databaseTable.join(","),a.backupTo=a.backupTo.join("|")),"path"===oe.value&&(a.sName=j.value.path),b.compData.rowData&&(a.id=b.compData.rowData.id),"to_post"===oe.value){let e=[];se.postParam.forEach((a=>{(a.paramName||a.paramValue)&&e.push(a)})),a.post_param=JSON.stringify(e)}if("sweek"===a.type){a.time_set=a.timeSet.join(","),delete a.timeSet,a.time_type=a.timeType,delete a.timeType,a.where1="5",a.hour="1",a.minute="5",a.week="1";let e=[];a.specialHour.forEach((t=>{a.specialMinute.forEach((a=>{e.push((t<10?"0"+t:t)+":"+(a<10?"0"+a:a)),e=Array.from(new Set(e))}))})),a.special_time=e.join(",")}if("site_restart"==oe.value){a.special_time=se.stopTime+","+se.startTime;const t=Q.value.filter((e=>"ALL"!==e.value));a.sName="all"===j.value.siteName||"全部"===j.value.siteName?null==(e=t[0])?void 0:e.name:j.value.siteName,a.save="",a.where1="5",a.hour="1",a.minute="5",a.week="1",a.type="minute-n"}return"log_cleanup"==oe.value&&(a.sName=se.clearType,a.save=""),"toUrl"!==oe.value&&"to_post"!==oe.value||(a.user_agent=se.userAgent,a.save=""),"toShell"===oe.value&&(a.version=se.version,a.save=""),"startup_services"===oe.value&&(a.type="",a.where1="",a.hour="",a.minute="",a.save="",a.sBody=se.inputData),"webshell"===oe.value&&(a.save=""),delete a.specialHour,delete a.specialMinute,a},ye=async()=>{"ltd"===_.value||"enterpriseBackup"!==oe.value?(ee(re.value,se),"special_log"===oe.value||"site_restart"===oe.value||"startup_services"===oe.value?fe():te.value.form.validate((async e=>{e&&fe()}))):m({sourceId:53})},fe=async()=>{const e=await he();let a;return 1===e.notice&&""===e.notice_channel?W.$message.error("请选择消息通道"):!b.compData.rowData&&"sync_time"===e.sType&&b.compData.tableData.some((e=>"sync_time"===e.sType))?W.$message.error("已有同步时间任务，请勿重复添加"):("rememory"!==e.sType&&"sync_time"!==e.sType||(e.save=""),void M({$refs:re.value,loading:me,request:async()=>(a=b.compData.rowData&&"enterpriseBackup"!==oe.value?await V(e):b.compData.rowData&&"enterpriseBackup"===oe.value?await U(e):b.compData.rowData||"enterpriseBackup"!==oe.value?await R(e):await E(e),a.msg.includes("系统加固")?(v(),Promise.reject()):a),complete:()=>(b.compData.refreshEvent(),_e(),Promise.resolve())}))},_e=()=>{g(),Z()},De=C((()=>{var e;const a=oe.value,t=j.value.backServer,l=!!b.compData.rowData,s=!!(null==(e=J.value[a])?void 0:e.backLabel);return!!(s&&"localhost"!==t&&"enterpriseBackup"!==a||l&&s&&"localhost"!==t)}));return S((()=>j.value.path),(e=>{"path"===se.type&&(se.taskName="备份目录[ "+e+" ]")})),S((()=>j.value.number),(e=>{se.save=Number(j.value.number)})),S((()=>H.value.scriptText),(e=>{"toShell"===oe.value&&(ve.value=e)})),S((()=>H.value.args),(e=>{se.version=e})),N((()=>{var e;if(j.value.siteName||j.value.databaseName){const a=(e,a,t)=>{let l="string"==typeof j.value.databaseName&&"mysql"==j.value.databaseType&&"database"===oe.value&&j.value.databaseName!==a[0]&&"全部"!==j.value.databaseName?j.value.databaseName+"- ":"";if(0===(null==a?void 0:a.length))return se.taskName="".concat(e,"[").concat(t,"]");a.includes("全部")||a.includes("ALL")||a.includes("")?se.taskName="".concat(e,"[").concat(l,"所有]"):se.taskName="".concat(e,"[ ").concat(l).concat(a[0],"...等").concat(null==a?void 0:a.length,"个").concat(l?"表":t," ]")};if("site"!==oe.value||b.compData.rowData||a("备份网站",j.value.siteName,"网站"),"site_restart"===oe.value&&!b.compData.rowData){const a=Q.value.filter((e=>"ALL"!==e.value));se.taskName="定时开关网站["+("all"===j.value.siteName||"全部"===j.value.siteName?null==(e=a[0])?void 0:e.name:j.value.siteName)+"]"}"database"!==oe.value||b.compData.rowData||a("备份".concat(j.value.databaseType,"数据库"),j.value.databaseTable,"数据库"),"enterpriseBackup"!==oe.value||b.compData.rowData||(se.taskName="[勿删]数据库增量备份[ "+j.value.databaseName+" ]")}})),N((()=>{var e,a,t,l;if(b.compData.rowData){let s=b.compData.rowData;j.value.backServer=s.backupTo,j.value.databaseType=s.db_type,j.value.number=s.save,"sync_time"===s.sType&&(s.sType="syncTime"),se.type=s.sType,"mysql_increment_backup"===s.sType&&(s.sType="enterpriseBackup",se.type="enterpriseBackup",j.value.databaseTable=null==(e=s.sBody)?void 0:e.split(",")),"path"===s.sType&&(j.value.path=s.sName),oe.value=s.sType,j.value.databaseName=null==(a=s.sName)?void 0:a.split(","),j.value.siteName="site_restart"===s.sType?s.sName:null==(t=s.sName)?void 0:t.split(",");const r=null==(l=s.special_time)?void 0:l.split(",");let o=[],i=[];r.forEach((e=>{o.push(parseInt(e.split(":")[0])),i.push(parseInt(e.split(":")[1])),o=Array.from(new Set(o)),i=Array.from(new Set(i))})),d.value={type:s.type,hour:s.where_hour,minute:s.where_minute,where1:s.where1,week:s.where1,timeType:s.time_type,timeSet:s.time_set?s.time_set.split(","):["1"],specialHour:o,specialMinute:i},"minute-n"===s.type?d.value.minute=s.where1:"hour-n"===s.type?d.value.hour=s.where1:"sweek"===s.type&&(d.value.week=s.where1),"special_log"===s.sType&&(ve.value=s.sName),"toUrl"===s.sType&&(ve.value=s.urladdress),h.value.notice=s.notice?1:0,h.value.noticeChannel=s.notice_channel===le.value.join(",")?"all":s.notice_channel,h.value.keyword=s.keyword||"",h.value.flock=!!s.flock}})),a({onConfirm:ye}),T((async()=>{ae.value=X.value.filter((e=>"to_post"!==e.value&&"site_restart"!==e.value&&"log_cleanup"!==e.value&&"startup_services"!==e.value)),G(),w()})),{__sfc:!0,props:b,timeForm:d,noticeForm:h,msgData:y,timeFormRules:f,authType:_,pushConfigInfo:D,getMsgConfig:w,clearTimeForm:g,backupData:j,zoneList:A,fileSplitForm:I,databaseData:q,selectScriptForm:H,crontabSiteData:Q,getCrontabSiteList:G,clearBackForm:Z,vm:W,cronTaskType:ae,alertForm:te,getTimeDate:e=>{const a=null==e?void 0:e.split(":"),t=(new Date).getFullYear(),l=(new Date).getMonth(),s=(new Date).getDate();return new Date(t,l,s,a[0],a[1])},allChannel:le,crontabFormData:se,crontabForm:re,activeName:oe,fileSetting:ie,backupMode:ne,dbBackupPath:ue,tableOptionData:pe,nameDisabled:ce,formDisabled:me,inputValue:ve,rules:be,rowClassName:(e,a)=>{e.xh=a+1},onGiveSelect:e=>{W.$set(h.value,"notice_channel",e)},onPathChange:()=>{p({type:"dir",path:ue.value,change:e=>{ue.value=e}})},handleDetailSelectionChange:e=>{e.length>1?(W.$refs.tb.clearSelection(),W.$refs.tb.toggleRowSelection(e.pop())):W.checkedDetail=e},addParam:()=>{se.postParam.push({paramName:"",paramValue:""})},deleteParam:(e,a)=>{se.postParam.splice(a,1)},changeActive:e=>{var a,t,l,s,r,o,i;switch(oe.value=e,pe.value=[],ce.value=!1,e){case"enterpriseBackup":de(),ce.value=!0,se.taskName="[勿删]数据库增量备份[ "+((null==(a=q.value[0])?void 0:a.name)||"")+" ]",W.$set(j.value,"backServer",["localhost"]);break;case"site":se.taskName="备份网站[所有]",ce.value=!0,j.value.siteName=["全部"];break;case"site_restart":const e=Q.value.filter((e=>"ALL"!==e.value));se.taskName="定时开关网站["+(null==(t=e[0])?void 0:t.name)+"]",ce.value=!0,j.value.siteName=null==(l=e[0])?void 0:l.name;break;case"database":se.taskName="备份MySQL数据库[所有]",j.value.databaseName=["全部"],ce.value=!0;break;case"logs":ce.value=!0,se.taskName="切割日志[所有]";break;case"webshell":ce.value=!0,se.taskName="木马查杀[所有]",W.$set(h.value,"notice_channel",(null==(s=D.value.filter((e=>e.isConfig&&e.setup&&"all"!==e.name))[0])?void 0:s.name)||"");break;case"log_cleanup":se.taskName="日志清理[所有]";break;case"rememory":se.taskName="释放内存";break;case"toUrl":se.taskName="访问URL[ http:// ]";break;case"to_post":se.taskName="访问URL-POST[ http:// ]";break;case"syncTime":se.taskName="定期同步服务器时间["+(null==(r=Object.keys(A.value))?void 0:r[0])+"/"+(null==(i=A.value[null==(o=Object.keys(A.value))?void 0:o[0]])?void 0:i[0])+"]";break;case"path":j.value.backServer="/www/wwwroot",se.taskName="备份目录[/www/wwwroot ]";break;case"startup_services":se.taskName="开机自启动[所有]";break;case"special_log":se.taskName="指定日志切割";break;default:se.taskName=""}"enterpriseBackup"!==e&&(j.value.backServer="localhost"),j.value.number=3,ve.value="",_e(),W.$refs.crontabForm.clearValidate()},getTableData:de,testUrl:async()=>{k(!1);if(!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(se.inputData))return W.$message.error("请输入正确的url地址");{const a=W.$load("正在测试，请稍候...");try{const e=await z({url:se.inputData});B(e.data)}catch(e){}finally{a.close()}}},changeInput:e=>{se.inputData=e,"toUrl"===oe.value&&(se.taskName="访问URL-GET[ "+e+" ]"),"to_post"===oe.value&&(se.taskName="访问URL-POST[ "+e+" ]"),"special_log"===oe.value&&(se.taskName="指定["+e+"]日志切割")},changeClearType:e=>{var a;se.clearType=e,se.taskName="日志清理["+(null==(a=K.value.find((a=>a.value===e)))?void 0:a.label)+"]"},selectShell:async()=>{await P({inputValue:ve.value,value:se.inputData})},changeZone:e=>{se.taskName="定期同步服务器时间["+e[0]+"/"+e[1]+"]",se.zone=[e[0],e[1]]},changeSelectSaveNumber:e=>{se.save=e,j.value.number=e},changeSelect:e=>{se.taskName="".concat("special_log"===se.type||"logs"===se.type?"切割日志":"木马查杀","[").concat("all"===e?"所有":e,"]"),se.otherTypeSiteName="all"===e?"ALL":e},dealWithParams:he,onConfirm:ye,validateSuccess:fe,onClearTime:_e,changeDbType:async e=>{j.value.databaseType=e;const a=await $({db_type:e});q.value=a.data},openPathChange:()=>{p({type:"file",path:"/www/wwwlogs",change:e=>{ve.value=e}})},fileSplitShow:De,formSetting:J,dbTypeOption:Y,clearLogType:K,isRelease:n}}}),(function(){var i,n,u,p,c,m,v,g,k,N,x,T,S,L,C=this,j=C._self._c,F=C._self._setupProxy;return j("div",{staticClass:"p-20x"},[j(s,{ref:"crontabForm",attrs:{model:F.crontabFormData,disabled:F.formDisabled,rules:F.rules}},[j(a,{attrs:{label:"任务类型"}},[j("div",{staticClass:"flex items-center"},[j(t,{staticClass:"w-[13.8rem]",attrs:{disabled:!!C.compData.rowData},on:{change:F.changeActive},model:{value:F.crontabFormData.type,callback:function(e){C.$set(F.crontabFormData,"type",e)},expression:"crontabFormData.type"}},C._l(F.cronTaskType,(function(e){return j(l,{key:e.value,attrs:{label:e.label,title:e.label,value:e.value}},[j("span",{staticStyle:{float:"left"}},[C._v(C._s(e.label))]),"enterpriseBackup"===e.value?j("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[j(b,{staticClass:"ml-4x mt-2x",attrs:{name:"icon-ltd",size:"1.6"}})],1):C._e()])})),1),j(d,{attrs:{placement:"top-start",width:"200","popper-class":"white-popover",trigger:"hover",content:""}},[j("div",{staticClass:"p-12x"},[j("span",{staticClass:"text-[#666]"},[C._v("任务类型包含以下部分：Shell脚本、备份网站、备份数据库、数据库增量备份、网站日志切割、自定义日志切割、释放内存、访问URL-GET、备份目录、木马查杀、同步时间")])]),j("i",{staticClass:"el-icon-question text-warning ml-12x",attrs:{slot:"reference"},slot:"reference"})])],1)]),j(a,{attrs:{label:"任务名称",prop:"taskName"}},[j(w,{ref:"crontabFormName",attrs:{disabled:F.nameDisabled,placeholder:"请输入计划任务名称",width:"35rem"},model:{value:F.crontabFormData.taskName,callback:function(e){C.$set(F.crontabFormData,"taskName",e)},expression:"crontabFormData.taskName"}})],1),"log_cleanup"===F.activeName?j(a,{attrs:{label:"清理类型",prop:"clearType"}},[j(t,{staticClass:"w-[13.8rem]",attrs:{disabled:!!C.compData.rowData},on:{change:F.changeClearType},model:{value:F.crontabFormData.clearType,callback:function(e){C.$set(F.crontabFormData,"clearType",e)},expression:"crontabFormData.clearType"}},C._l(F.clearLogType,(function(e){return j(l,{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):C._e(),"special_log"!==F.activeName&&"site_restart"!==F.activeName&&"startup_services"!==F.activeName?j(a,[j(I,{ref:"alertForm",attrs:{"is-cron-tab":!0,isEdit:!!C.compData.rowData,"show-keyword":!!(null==(i=F.formSetting[F.activeName])?void 0:i.keyword),"show-notice":!!(null==(n=F.formSetting[F.activeName])?void 0:n.notice),needAll:"webshell"!==F.activeName}})],1):C._e(),(null==(u=F.formSetting[F.activeName])?void 0:u.backLabel)?j(W,{attrs:{backLabel:null==(p=F.formSetting[F.activeName])?void 0:p.backLabel,tableData:F.tableOptionData,type:F.activeName,rowData:C.compData.rowData,multiple:"enterpriseBackup"!==F.activeName&&"site_restart"!==F.activeName},scopedSlots:C._u([{key:"back-before",fn:function(){return["database"===F.activeName?j(t,{staticClass:"w-[10rem] mr-8x",attrs:{disabled:!!C.compData.rowData},on:{change:F.changeDbType},model:{value:F.backupData.databaseType,callback:function(e){C.$set(F.backupData,"databaseType",e)},expression:"backupData.databaseType"}},C._l(F.dbTypeOption,(function(e){return j(l,{key:e.id,attrs:{label:e.name,value:e.id}})})),1):C._e()]},proxy:!0}],null,!1,181954652)}):C._e(),!F.isRelease&&F.fileSplitShow&&"site_restart"!==F.activeName?j(Q,{attrs:{rowData:C.compData.rowData,type:F.activeName}}):C._e(),(null==(c=F.formSetting[F.activeName])?void 0:c.backLabel)&&"localhost"!==F.backupData.backServer&&"enterpriseBackup"!==F.activeName&&"site_restart"!==F.activeName?j(a,{attrs:{label:"备份设置"}},[j("div",{staticClass:"text-[1.2rem] text-[#666] flex items-center h-full"},[j(h,{staticClass:"!mr-12x",model:{value:F.fileSetting,callback:function(e){F.fileSetting=e},expression:"fileSetting"}},[C._v(" 同时保留本地备份（和云存储保留份数一致） ")])],1)]):C._e(),("database"!==F.activeName&&"site"!==F.activeName||"localhost"!==F.backupData.backServer&&!F.fileSetting)&&"logs"!==F.activeName||F.isRelease?C._e():j(a,{attrs:{label:"logs"===F.activeName?"存储路径":"备份路径"}},[j(w,{attrs:{placeholder:"logs"===F.activeName?"请输入存储路径，为空默认为/www/wwwlogs/history_backups":"请输入备份路径，为空默认为/www/wwwroot",iconType:"folder",width:"42rem"},on:{folder:F.onPathChange},model:{value:F.dbBackupPath,callback:function(e){F.dbBackupPath=e},expression:"dbBackupPath"}})],1),"database"!==F.activeName||F.isRelease?C._e():j(a,{attrs:{label:" "}},[j("div",{staticClass:"text-[1.2rem] text-[#666] flex items-center h-full"},[j(h,{staticClass:"!mr-12x",model:{value:F.backupMode,callback:function(e){F.backupMode=e},expression:"backupMode"}},[C._v("使用数据库对应账号备份")]),j("span",{staticClass:"text-[#999] text-[1.2rem]"},[C._v(" *注意：目前只支持mysql数据库的本地数据库备份 ")])],1)]),(null==(m=F.formSetting[F.activeName])?void 0:m.selectLabel)?j(H,{attrs:{type:F.activeName,selectData:C.compData.rowData,selectLabel:null==(v=F.formSetting[F.activeName])?void 0:v.selectLabel},on:{"update:changeZone":F.changeZone,"update:saveNumber":F.changeSelectSaveNumber,"update:select":F.changeSelect},scopedSlots:C._u([{key:"after",fn:function(){return[j("div",{staticClass:"ml-8x"},["webshell"===F.activeName?j("span",{staticClass:"text-[#666] text-[1.2rem]"},[C._v("*本次查杀由长亭牧云强力驱动")]):C._e()])]},proxy:!0}],null,!1,773925992)}):C._e(),!(null==(g=F.formSetting[F.activeName])?void 0:g.label)||"enterpriseBackup"==F.activeName&&"site_restart"==F.activeName&&C.compData.rowData?C._e():j(q,{attrs:{placeholder:null==(k=F.formSetting[F.activeName])?void 0:k.placeholder,"icon-type":null==(N=F.formSetting[F.activeName])?void 0:N.iconType,"input-type":null==(x=F.formSetting[F.activeName])?void 0:x.inputType,label:null==(T=F.formSetting[F.activeName])?void 0:T.label,inputValue:F.inputValue},on:{"update:changeInput":F.changeInput},scopedSlots:C._u([{key:"after",fn:function(){return["special_log"===F.activeName?j("div",{staticClass:"el-input-group__append"},[j(y,{staticClass:"flex",attrs:{icon:"el-icon-folder"},on:{click:F.openPathChange}})],1):C._e(),j("div",{staticClass:"ml-8x"},["toUrl"===F.activeName?j(y,{attrs:{type:"default"},on:{click:F.testUrl}},[C._v("测试url")]):C._e(),"enterpriseBackup"===F.activeName?j("span",{staticClass:"text-danger text-[1.2rem]"},[C._v("*注意：请牢记压缩密码，以免因压缩密码导致无法恢复和下载数据")]):C._e(),"toShell"!==F.activeName||F.isRelease?C._e():j(y,{staticClass:"relative -top-[8.6rem]",attrs:{type:"default"},on:{click:F.selectShell}},[C._v(" 选择脚本 ")])],1)]},proxy:!0}],null,!1,2313236589)}),"to_post"===F.activeName||"toUrl"===F.activeName?j(a,{attrs:{label:"User-Agent"}},[j(w,{attrs:{type:"textarea",placeholder:"请输入User-Agent配置",width:"50rem"},model:{value:F.crontabFormData.userAgent,callback:function(e){C.$set(F.crontabFormData,"userAgent",e)},expression:"crontabFormData.userAgent"}})],1):C._e(),"to_post"===F.activeName?j(a,{attrs:{label:"参数配置"}},[j("div",{staticClass:"w-[56rem]"},[j(r,{ref:"tb",staticClass:"param-table",attrs:{data:F.crontabFormData.postParam,"row-class-name":F.rowClassName,"max-height":"200"},on:{"selection-change":F.handleDetailSelectionChange}},[j(o,{attrs:{label:"参数名",prop:"paramName",width:"250"},scopedSlots:C._u([{key:"default",fn:function({row:e}){return[j(w,{attrs:{type:"text",size:"mini"},model:{value:e.paramName,callback:function(a){C.$set(e,"paramName",a)},expression:"row.paramName"}})]}}],null,!1,1331024067)}),j(o,{attrs:{label:"参数值",prop:"paramValue",width:"250"},scopedSlots:C._u([{key:"default",fn:function({row:e}){return[j(w,{attrs:{type:"text",size:"mini"},model:{value:e.paramValue,callback:function(a){C.$set(e,"paramValue",a)},expression:"row.paramValue"}})]}}],null,!1,1095078991)}),j(o,{attrs:{label:"操作",width:"58"},scopedSlots:C._u([{key:"default",fn:function({row:e,index:a}){return[j(f,{staticClass:"mr-4x",on:{click:function(t){return F.deleteParam(e,a)}}},[C._v("删除")])]}}],null,!1,693578521)})],1),j(y,{staticClass:"!mt-[1rem]",attrs:{size:"mini"},on:{click:F.addParam}},[j("i",{staticClass:"el-icon-plus text-white font-bold mr-[0.4rem]"}),C._v("添加参数 ")])],1)]):C._e(),"webshell"===F.activeName?j(a,{attrs:{label:"消息通道"}},[j(D,{on:{change:F.onGiveSelect},model:{value:F.noticeForm.notice_channel,callback:function(e){C.$set(F.noticeForm,"notice_channel",e)},expression:"noticeForm.notice_channel"}})],1):C._e(),"site_restart"===F.activeName?j(a,{attrs:{label:"停止时间"}},[j("div",{staticClass:"flex items-center"},[j(a,{attrs:{label:"",prop:"stopTime"}},[j(_,{attrs:{"prefix-icon":"none",clearable:"",placeholder:"请选择停止时间","picker-options":{start:"00:00",step:"00:05",end:"23:59"}},model:{value:F.crontabFormData.stopTime,callback:function(e){C.$set(F.crontabFormData,"stopTime",e)},expression:"crontabFormData.stopTime"}})],1),j(a,{staticClass:"!mt-0",attrs:{label:"开启时间",prop:"startTime"}},[j(_,{attrs:{"prefix-icon":"none",clearable:"",placeholder:"请选择开启时间","picker-options":{start:"00:00",step:"00:05",end:"23:59"}},model:{value:F.crontabFormData.startTime,callback:function(e){C.$set(F.crontabFormData,"startTime",e)},expression:"crontabFormData.startTime"}})],1)],1)]):C._e(),(null==(S=F.formSetting[F.activeName])?void 0:S.helpList)?j(a,{attrs:{label:"温馨提示"}},[j("div",{staticClass:"min-h-[3.2rem] flex items-center"},[j(e,{staticClass:"ml-12x text-[1.2rem]",attrs:{list:null==(L=F.formSetting[F.activeName])?void 0:L.helpList,"list-style":"disc"}})],1)]):C._e()],1)],1)}),[],!1,null,"dcaf1464",null,null).exports;export{ae as default};
